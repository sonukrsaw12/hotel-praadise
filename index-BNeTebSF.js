function dN(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hN(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var fN={exports:{}},z0={},pN={exports:{}},Nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_=Symbol.for("react.element"),i6=Symbol.for("react.portal"),s6=Symbol.for("react.fragment"),o6=Symbol.for("react.strict_mode"),a6=Symbol.for("react.profiler"),l6=Symbol.for("react.provider"),c6=Symbol.for("react.context"),u6=Symbol.for("react.forward_ref"),d6=Symbol.for("react.suspense"),h6=Symbol.for("react.memo"),f6=Symbol.for("react.lazy"),l2=Symbol.iterator;function p6(e){return e===null||typeof e!="object"?null:(e=l2&&e[l2]||e["@@iterator"],typeof e=="function"?e:null)}var mN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gN=Object.assign,yN={};function bg(e,t,n){this.props=e,this.context=t,this.refs=yN,this.updater=n||mN}bg.prototype.isReactComponent={};bg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vN(){}vN.prototype=bg.prototype;function _k(e,t,n){this.props=e,this.context=t,this.refs=yN,this.updater=n||mN}var xk=_k.prototype=new vN;xk.constructor=_k;gN(xk,bg.prototype);xk.isPureReactComponent=!0;var c2=Array.isArray,_N=Object.prototype.hasOwnProperty,bk={current:null},xN={key:!0,ref:!0,__self:!0,__source:!0};function bN(e,t,n){var r,i={},l=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(l=""+t.key),t)_N.call(t,r)&&!xN.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var m=Array(a),g=0;g<a;g++)m[g]=arguments[g+2];i.children=m}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:f_,type:e,key:l,ref:u,props:i,_owner:bk.current}}function m6(e,t){return{$$typeof:f_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wk(e){return typeof e=="object"&&e!==null&&e.$$typeof===f_}function g6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var u2=/\/+/g;function IS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?g6(""+e.key):t.toString(36)}function Qx(e,t,n,r,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case f_:case i6:u=!0}}if(u)return u=e,i=i(u),e=r===""?"."+IS(u,0):r,c2(i)?(n="",e!=null&&(n=e.replace(u2,"$&/")+"/"),Qx(i,t,n,"",function(g){return g})):i!=null&&(wk(i)&&(i=m6(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(u2,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=r===""?".":r+":",c2(e))for(var a=0;a<e.length;a++){l=e[a];var m=r+IS(l,a);u+=Qx(l,t,n,m,i)}else if(m=p6(e),typeof m=="function")for(e=m.call(e),a=0;!(l=e.next()).done;)l=l.value,m=r+IS(l,a++),u+=Qx(l,t,n,m,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function bx(e,t,n){if(e==null)return e;var r=[],i=0;return Qx(e,r,"","",function(l){return t.call(n,l,i++)}),r}function y6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Go={current:null},Jx={transition:null},v6={ReactCurrentDispatcher:Go,ReactCurrentBatchConfig:Jx,ReactCurrentOwner:bk};function wN(){throw Error("act(...) is not supported in production builds of React.")}Nr.Children={map:bx,forEach:function(e,t,n){bx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bx(e,function(){t++}),t},toArray:function(e){return bx(e,function(t){return t})||[]},only:function(e){if(!wk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nr.Component=bg;Nr.Fragment=s6;Nr.Profiler=a6;Nr.PureComponent=_k;Nr.StrictMode=o6;Nr.Suspense=d6;Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v6;Nr.act=wN;Nr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gN({},e.props),i=e.key,l=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,u=bk.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(m in t)_N.call(t,m)&&!xN.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&a!==void 0?a[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){a=Array(m);for(var g=0;g<m;g++)a[g]=arguments[g+2];r.children=a}return{$$typeof:f_,type:e.type,key:i,ref:l,props:r,_owner:u}};Nr.createContext=function(e){return e={$$typeof:c6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:l6,_context:e},e.Consumer=e};Nr.createElement=bN;Nr.createFactory=function(e){var t=bN.bind(null,e);return t.type=e,t};Nr.createRef=function(){return{current:null}};Nr.forwardRef=function(e){return{$$typeof:u6,render:e}};Nr.isValidElement=wk;Nr.lazy=function(e){return{$$typeof:f6,_payload:{_status:-1,_result:e},_init:y6}};Nr.memo=function(e,t){return{$$typeof:h6,type:e,compare:t===void 0?null:t}};Nr.startTransition=function(e){var t=Jx.transition;Jx.transition={};try{e()}finally{Jx.transition=t}};Nr.unstable_act=wN;Nr.useCallback=function(e,t){return Go.current.useCallback(e,t)};Nr.useContext=function(e){return Go.current.useContext(e)};Nr.useDebugValue=function(){};Nr.useDeferredValue=function(e){return Go.current.useDeferredValue(e)};Nr.useEffect=function(e,t){return Go.current.useEffect(e,t)};Nr.useId=function(){return Go.current.useId()};Nr.useImperativeHandle=function(e,t,n){return Go.current.useImperativeHandle(e,t,n)};Nr.useInsertionEffect=function(e,t){return Go.current.useInsertionEffect(e,t)};Nr.useLayoutEffect=function(e,t){return Go.current.useLayoutEffect(e,t)};Nr.useMemo=function(e,t){return Go.current.useMemo(e,t)};Nr.useReducer=function(e,t,n){return Go.current.useReducer(e,t,n)};Nr.useRef=function(e){return Go.current.useRef(e)};Nr.useState=function(e){return Go.current.useState(e)};Nr.useSyncExternalStore=function(e,t,n){return Go.current.useSyncExternalStore(e,t,n)};Nr.useTransition=function(){return Go.current.useTransition()};Nr.version="18.3.1";pN.exports=Nr;var M=pN.exports;const dn=uu(M),F0=dN({__proto__:null,default:dn},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _6=M,x6=Symbol.for("react.element"),b6=Symbol.for("react.fragment"),w6=Object.prototype.hasOwnProperty,S6=_6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E6={key:!0,ref:!0,__self:!0,__source:!0};function SN(e,t,n){var r,i={},l=null,u=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)w6.call(t,r)&&!E6.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:x6,type:e,key:l,ref:u,props:i,_owner:S6.current}}z0.Fragment=b6;z0.jsx=SN;z0.jsxs=SN;fN.exports=z0;var y=fN.exports,EN={exports:{}},el={},CN={exports:{}},TN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(qe,_t){var Ke=qe.length;qe.push(_t);e:for(;0<Ke;){var we=Ke-1>>>1,He=qe[we];if(0<i(He,_t))qe[we]=_t,qe[Ke]=He,Ke=we;else break e}}function n(qe){return qe.length===0?null:qe[0]}function r(qe){if(qe.length===0)return null;var _t=qe[0],Ke=qe.pop();if(Ke!==_t){qe[0]=Ke;e:for(var we=0,He=qe.length,Be=He>>>1;we<Be;){var ct=2*(we+1)-1,xt=qe[ct],bt=ct+1,It=qe[bt];if(0>i(xt,Ke))bt<He&&0>i(It,xt)?(qe[we]=It,qe[bt]=Ke,we=bt):(qe[we]=xt,qe[ct]=Ke,we=ct);else if(bt<He&&0>i(It,Ke))qe[we]=It,qe[bt]=Ke,we=bt;else break e}}return _t}function i(qe,_t){var Ke=qe.sortIndex-_t.sortIndex;return Ke!==0?Ke:qe.id-_t.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,a=u.now();e.unstable_now=function(){return u.now()-a}}var m=[],g=[],w=1,C=null,P=3,I=!1,N=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(qe){for(var _t=n(g);_t!==null;){if(_t.callback===null)r(g);else if(_t.startTime<=qe)r(g),_t.sortIndex=_t.expirationTime,t(m,_t);else break;_t=n(g)}}function te(qe){if(z=!1,q(qe),!N)if(n(m)!==null)N=!0,lt(ue);else{var _t=n(g);_t!==null&&Nt(te,_t.startTime-qe)}}function ue(qe,_t){N=!1,z&&(z=!1,H(le),le=-1),I=!0;var Ke=P;try{for(q(_t),C=n(m);C!==null&&(!(C.expirationTime>_t)||qe&&!Je());){var we=C.callback;if(typeof we=="function"){C.callback=null,P=C.priorityLevel;var He=we(C.expirationTime<=_t);_t=e.unstable_now(),typeof He=="function"?C.callback=He:C===n(m)&&r(m),q(_t)}else r(m);C=n(m)}if(C!==null)var Be=!0;else{var ct=n(g);ct!==null&&Nt(te,ct.startTime-_t),Be=!1}return Be}finally{C=null,P=Ke,I=!1}}var fe=!1,Z=null,le=-1,be=5,Re=-1;function Je(){return!(e.unstable_now()-Re<be)}function Fe(){if(Z!==null){var qe=e.unstable_now();Re=qe;var _t=!0;try{_t=Z(!0,qe)}finally{_t?Xe():(fe=!1,Z=null)}}else fe=!1}var Xe;if(typeof V=="function")Xe=function(){V(Fe)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,yt=gt.port2;gt.port1.onmessage=Fe,Xe=function(){yt.postMessage(null)}}else Xe=function(){$(Fe,0)};function lt(qe){Z=qe,fe||(fe=!0,Xe())}function Nt(qe,_t){le=$(function(){qe(e.unstable_now())},_t)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(qe){qe.callback=null},e.unstable_continueExecution=function(){N||I||(N=!0,lt(ue))},e.unstable_forceFrameRate=function(qe){0>qe||125<qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<qe?Math.floor(1e3/qe):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(qe){switch(P){case 1:case 2:case 3:var _t=3;break;default:_t=P}var Ke=P;P=_t;try{return qe()}finally{P=Ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(qe,_t){switch(qe){case 1:case 2:case 3:case 4:case 5:break;default:qe=3}var Ke=P;P=qe;try{return _t()}finally{P=Ke}},e.unstable_scheduleCallback=function(qe,_t,Ke){var we=e.unstable_now();switch(typeof Ke=="object"&&Ke!==null?(Ke=Ke.delay,Ke=typeof Ke=="number"&&0<Ke?we+Ke:we):Ke=we,qe){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Ke+He,qe={id:w++,callback:_t,priorityLevel:qe,startTime:Ke,expirationTime:He,sortIndex:-1},Ke>we?(qe.sortIndex=Ke,t(g,qe),n(m)===null&&qe===n(g)&&(z?(H(le),le=-1):z=!0,Nt(te,Ke-we))):(qe.sortIndex=He,t(m,qe),N||I||(N=!0,lt(ue))),qe},e.unstable_shouldYield=Je,e.unstable_wrapCallback=function(qe){var _t=P;return function(){var Ke=P;P=_t;try{return qe.apply(this,arguments)}finally{P=Ke}}}})(TN);CN.exports=TN;var C6=CN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6=M,Qa=C6;function Ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kN=new Set,lv={};function _p(e,t){ng(e,t),ng(e+"Capture",t)}function ng(e,t){for(lv[e]=t,e=0;e<t.length;e++)kN.add(t[e])}var Ju=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wC=Object.prototype.hasOwnProperty,k6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d2={},h2={};function P6(e){return wC.call(h2,e)?!0:wC.call(d2,e)?!1:k6.test(e)?h2[e]=!0:(d2[e]=!0,!1)}function A6(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function I6(e,t,n,r){if(t===null||typeof t>"u"||A6(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wo(e,t,n,r,i,l,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=u}var fo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fo[e]=new Wo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fo[t]=new Wo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fo[e]=new Wo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fo[e]=new Wo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fo[e]=new Wo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fo[e]=new Wo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fo[e]=new Wo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fo[e]=new Wo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fo[e]=new Wo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sk=/[\-:]([a-z])/g;function Ek(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sk,Ek);fo[t]=new Wo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sk,Ek);fo[t]=new Wo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sk,Ek);fo[t]=new Wo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fo[e]=new Wo(e,1,!1,e.toLowerCase(),null,!1,!1)});fo.xlinkHref=new Wo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fo[e]=new Wo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ck(e,t,n,r){var i=fo.hasOwnProperty(t)?fo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(I6(t,n,i,r)&&(n=null),r||i===null?P6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cd=T6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wx=Symbol.for("react.element"),gm=Symbol.for("react.portal"),ym=Symbol.for("react.fragment"),Tk=Symbol.for("react.strict_mode"),SC=Symbol.for("react.profiler"),PN=Symbol.for("react.provider"),AN=Symbol.for("react.context"),kk=Symbol.for("react.forward_ref"),EC=Symbol.for("react.suspense"),CC=Symbol.for("react.suspense_list"),Pk=Symbol.for("react.memo"),sh=Symbol.for("react.lazy"),IN=Symbol.for("react.offscreen"),f2=Symbol.iterator;function ly(e){return e===null||typeof e!="object"?null:(e=f2&&e[f2]||e["@@iterator"],typeof e=="function"?e:null)}var Qi=Object.assign,RS;function Py(e){if(RS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);RS=t&&t[1]||""}return`
`+RS+e}var LS=!1;function MS(e,t){if(!e||LS)return"";LS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),l=r.stack.split(`
`),u=i.length-1,a=l.length-1;1<=u&&0<=a&&i[u]!==l[a];)a--;for(;1<=u&&0<=a;u--,a--)if(i[u]!==l[a]){if(u!==1||a!==1)do if(u--,a--,0>a||i[u]!==l[a]){var m=`
`+i[u].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=u&&0<=a);break}}}finally{LS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Py(e):""}function R6(e){switch(e.tag){case 5:return Py(e.type);case 16:return Py("Lazy");case 13:return Py("Suspense");case 19:return Py("SuspenseList");case 0:case 2:case 15:return e=MS(e.type,!1),e;case 11:return e=MS(e.type.render,!1),e;case 1:return e=MS(e.type,!0),e;default:return""}}function TC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ym:return"Fragment";case gm:return"Portal";case SC:return"Profiler";case Tk:return"StrictMode";case EC:return"Suspense";case CC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case AN:return(e.displayName||"Context")+".Consumer";case PN:return(e._context.displayName||"Context")+".Provider";case kk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pk:return t=e.displayName||null,t!==null?t:TC(e.type)||"Memo";case sh:t=e._payload,e=e._init;try{return TC(e(t))}catch{}}return null}function L6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TC(t);case 8:return t===Tk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M6(e){var t=RN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,l.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sx(e){e._valueTracker||(e._valueTracker=M6(e))}function LN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=RN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kC(e,t){var n=t.checked;return Qi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function p2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jh(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MN(e,t){t=t.checked,t!=null&&Ck(e,"checked",t,!1)}function PC(e,t){MN(e,t);var n=jh(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?AC(e,t.type,n):t.hasOwnProperty("defaultValue")&&AC(e,t.type,jh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function m2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function AC(e,t,n){(t!=="number"||Sb(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ay=Array.isArray;function Om(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jh(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function IC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ht(91));return Qi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function g2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ht(92));if(Ay(n)){if(1<n.length)throw Error(Ht(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jh(n)}}function ON(e,t){var n=jh(t.value),r=jh(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function y2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ex,NN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ex=Ex||document.createElement("div"),Ex.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ex.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cv(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var By={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O6=["Webkit","ms","Moz","O"];Object.keys(By).forEach(function(e){O6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),By[t]=By[e]})});function jN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||By.hasOwnProperty(e)&&By[e]?(""+t).trim():t+"px"}function zN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var D6=Qi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LC(e,t){if(t){if(D6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ht(62))}}function MC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OC=null;function Ak(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var DC=null,Dm=null,Nm=null;function v2(e){if(e=g_(e)){if(typeof DC!="function")throw Error(Ht(280));var t=e.stateNode;t&&(t=H0(t),DC(e.stateNode,e.type,t))}}function FN(e){Dm?Nm?Nm.push(e):Nm=[e]:Dm=e}function BN(){if(Dm){var e=Dm,t=Nm;if(Nm=Dm=null,v2(e),t)for(e=0;e<t.length;e++)v2(t[e])}}function UN(e,t){return e(t)}function $N(){}var OS=!1;function VN(e,t,n){if(OS)return e(t,n);OS=!0;try{return UN(e,t,n)}finally{OS=!1,(Dm!==null||Nm!==null)&&($N(),BN())}}function uv(e,t){var n=e.stateNode;if(n===null)return null;var r=H0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ht(231,t,typeof n));return n}var NC=!1;if(Ju)try{var cy={};Object.defineProperty(cy,"passive",{get:function(){NC=!0}}),window.addEventListener("test",cy,cy),window.removeEventListener("test",cy,cy)}catch{NC=!1}function N6(e,t,n,r,i,l,u,a,m){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(w){this.onError(w)}}var Uy=!1,Eb=null,Cb=!1,jC=null,j6={onError:function(e){Uy=!0,Eb=e}};function z6(e,t,n,r,i,l,u,a,m){Uy=!1,Eb=null,N6.apply(j6,arguments)}function F6(e,t,n,r,i,l,u,a,m){if(z6.apply(this,arguments),Uy){if(Uy){var g=Eb;Uy=!1,Eb=null}else throw Error(Ht(198));Cb||(Cb=!0,jC=g)}}function xp(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function HN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _2(e){if(xp(e)!==e)throw Error(Ht(188))}function B6(e){var t=e.alternate;if(!t){if(t=xp(e),t===null)throw Error(Ht(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return _2(i),e;if(l===r)return _2(i),t;l=l.sibling}throw Error(Ht(188))}if(n.return!==r.return)n=i,r=l;else{for(var u=!1,a=i.child;a;){if(a===n){u=!0,n=i,r=l;break}if(a===r){u=!0,r=i,n=l;break}a=a.sibling}if(!u){for(a=l.child;a;){if(a===n){u=!0,n=l,r=i;break}if(a===r){u=!0,r=l,n=i;break}a=a.sibling}if(!u)throw Error(Ht(189))}}if(n.alternate!==r)throw Error(Ht(190))}if(n.tag!==3)throw Error(Ht(188));return n.stateNode.current===n?e:t}function ZN(e){return e=B6(e),e!==null?qN(e):null}function qN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qN(e);if(t!==null)return t;e=e.sibling}return null}var GN=Qa.unstable_scheduleCallback,x2=Qa.unstable_cancelCallback,U6=Qa.unstable_shouldYield,$6=Qa.unstable_requestPaint,ps=Qa.unstable_now,V6=Qa.unstable_getCurrentPriorityLevel,Ik=Qa.unstable_ImmediatePriority,WN=Qa.unstable_UserBlockingPriority,Tb=Qa.unstable_NormalPriority,H6=Qa.unstable_LowPriority,XN=Qa.unstable_IdlePriority,B0=null,Jc=null;function Z6(e){if(Jc&&typeof Jc.onCommitFiberRoot=="function")try{Jc.onCommitFiberRoot(B0,e,void 0,(e.current.flags&128)===128)}catch{}}var pc=Math.clz32?Math.clz32:W6,q6=Math.log,G6=Math.LN2;function W6(e){return e>>>=0,e===0?32:31-(q6(e)/G6|0)|0}var Cx=64,Tx=4194304;function Iy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kb(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes,u=n&268435455;if(u!==0){var a=u&~i;a!==0?r=Iy(a):(l&=u,l!==0&&(r=Iy(l)))}else u=n&~i,u!==0?r=Iy(u):l!==0&&(r=Iy(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-pc(t),i=1<<n,r|=e[n],t&=~i;return r}function X6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K6(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var u=31-pc(l),a=1<<u,m=i[u];m===-1?(!(a&n)||a&r)&&(i[u]=X6(a,t)):m<=t&&(e.expiredLanes|=a),l&=~a}}function zC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function KN(){var e=Cx;return Cx<<=1,!(Cx&4194240)&&(Cx=64),e}function DS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function p_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pc(t),e[t]=n}function Y6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-pc(n),l=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~l}}function Rk(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ii=0;function YN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QN,Lk,JN,ej,tj,FC=!1,kx=[],Sh=null,Eh=null,Ch=null,dv=new Map,hv=new Map,lh=[],Q6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b2(e,t){switch(e){case"focusin":case"focusout":Sh=null;break;case"dragenter":case"dragleave":Eh=null;break;case"mouseover":case"mouseout":Ch=null;break;case"pointerover":case"pointerout":dv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hv.delete(t.pointerId)}}function uy(e,t,n,r,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[i]},t!==null&&(t=g_(t),t!==null&&Lk(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function J6(e,t,n,r,i){switch(t){case"focusin":return Sh=uy(Sh,e,t,n,r,i),!0;case"dragenter":return Eh=uy(Eh,e,t,n,r,i),!0;case"mouseover":return Ch=uy(Ch,e,t,n,r,i),!0;case"pointerover":var l=i.pointerId;return dv.set(l,uy(dv.get(l)||null,e,t,n,r,i)),!0;case"gotpointercapture":return l=i.pointerId,hv.set(l,uy(hv.get(l)||null,e,t,n,r,i)),!0}return!1}function nj(e){var t=Uf(e.target);if(t!==null){var n=xp(t);if(n!==null){if(t=n.tag,t===13){if(t=HN(n),t!==null){e.blockedOn=t,tj(e.priority,function(){JN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=BC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);OC=r,n.target.dispatchEvent(r),OC=null}else return t=g_(n),t!==null&&Lk(t),e.blockedOn=n,!1;t.shift()}return!0}function w2(e,t,n){eb(e)&&n.delete(t)}function eH(){FC=!1,Sh!==null&&eb(Sh)&&(Sh=null),Eh!==null&&eb(Eh)&&(Eh=null),Ch!==null&&eb(Ch)&&(Ch=null),dv.forEach(w2),hv.forEach(w2)}function dy(e,t){e.blockedOn===t&&(e.blockedOn=null,FC||(FC=!0,Qa.unstable_scheduleCallback(Qa.unstable_NormalPriority,eH)))}function fv(e){function t(i){return dy(i,e)}if(0<kx.length){dy(kx[0],e);for(var n=1;n<kx.length;n++){var r=kx[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Sh!==null&&dy(Sh,e),Eh!==null&&dy(Eh,e),Ch!==null&&dy(Ch,e),dv.forEach(t),hv.forEach(t),n=0;n<lh.length;n++)r=lh[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<lh.length&&(n=lh[0],n.blockedOn===null);)nj(n),n.blockedOn===null&&lh.shift()}var jm=cd.ReactCurrentBatchConfig,Pb=!0;function tH(e,t,n,r){var i=ii,l=jm.transition;jm.transition=null;try{ii=1,Mk(e,t,n,r)}finally{ii=i,jm.transition=l}}function nH(e,t,n,r){var i=ii,l=jm.transition;jm.transition=null;try{ii=4,Mk(e,t,n,r)}finally{ii=i,jm.transition=l}}function Mk(e,t,n,r){if(Pb){var i=BC(e,t,n,r);if(i===null)ZS(e,t,r,Ab,n),b2(e,r);else if(J6(i,e,t,n,r))r.stopPropagation();else if(b2(e,r),t&4&&-1<Q6.indexOf(e)){for(;i!==null;){var l=g_(i);if(l!==null&&QN(l),l=BC(e,t,n,r),l===null&&ZS(e,t,r,Ab,n),l===i)break;i=l}i!==null&&r.stopPropagation()}else ZS(e,t,r,null,n)}}var Ab=null;function BC(e,t,n,r){if(Ab=null,e=Ak(r),e=Uf(e),e!==null)if(t=xp(e),t===null)e=null;else if(n=t.tag,n===13){if(e=HN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ab=e,null}function rj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V6()){case Ik:return 1;case WN:return 4;case Tb:case H6:return 16;case XN:return 536870912;default:return 16}default:return 16}}var yh=null,Ok=null,tb=null;function ij(){if(tb)return tb;var e,t=Ok,n=t.length,r,i="value"in yh?yh.value:yh.textContent,l=i.length;for(e=0;e<n&&t[e]===i[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===i[l-r];r++);return tb=i.slice(e,1<r?1-r:void 0)}function nb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Px(){return!0}function S2(){return!1}function tl(e){function t(n,r,i,l,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Px:S2,this.isPropagationStopped=S2,this}return Qi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Px)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Px)},persist:function(){},isPersistent:Px}),t}var wg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dk=tl(wg),m_=Qi({},wg,{view:0,detail:0}),rH=tl(m_),NS,jS,hy,U0=Qi({},m_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hy&&(hy&&e.type==="mousemove"?(NS=e.screenX-hy.screenX,jS=e.screenY-hy.screenY):jS=NS=0,hy=e),NS)},movementY:function(e){return"movementY"in e?e.movementY:jS}}),E2=tl(U0),iH=Qi({},U0,{dataTransfer:0}),sH=tl(iH),oH=Qi({},m_,{relatedTarget:0}),zS=tl(oH),aH=Qi({},wg,{animationName:0,elapsedTime:0,pseudoElement:0}),lH=tl(aH),cH=Qi({},wg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uH=tl(cH),dH=Qi({},wg,{data:0}),C2=tl(dH),hH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pH[e])?!!t[e]:!1}function Nk(){return mH}var gH=Qi({},m_,{key:function(e){if(e.key){var t=hH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nk,charCode:function(e){return e.type==="keypress"?nb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yH=tl(gH),vH=Qi({},U0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T2=tl(vH),_H=Qi({},m_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nk}),xH=tl(_H),bH=Qi({},wg,{propertyName:0,elapsedTime:0,pseudoElement:0}),wH=tl(bH),SH=Qi({},U0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EH=tl(SH),CH=[9,13,27,32],jk=Ju&&"CompositionEvent"in window,$y=null;Ju&&"documentMode"in document&&($y=document.documentMode);var TH=Ju&&"TextEvent"in window&&!$y,sj=Ju&&(!jk||$y&&8<$y&&11>=$y),k2=" ",P2=!1;function oj(e,t){switch(e){case"keyup":return CH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vm=!1;function kH(e,t){switch(e){case"compositionend":return aj(t);case"keypress":return t.which!==32?null:(P2=!0,k2);case"textInput":return e=t.data,e===k2&&P2?null:e;default:return null}}function PH(e,t){if(vm)return e==="compositionend"||!jk&&oj(e,t)?(e=ij(),tb=Ok=yh=null,vm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sj&&t.locale!=="ko"?null:t.data;default:return null}}var AH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AH[e.type]:t==="textarea"}function lj(e,t,n,r){FN(r),t=Ib(t,"onChange"),0<t.length&&(n=new Dk("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vy=null,pv=null;function IH(e){_j(e,0)}function $0(e){var t=bm(e);if(LN(t))return e}function RH(e,t){if(e==="change")return t}var cj=!1;if(Ju){var FS;if(Ju){var BS="oninput"in document;if(!BS){var I2=document.createElement("div");I2.setAttribute("oninput","return;"),BS=typeof I2.oninput=="function"}FS=BS}else FS=!1;cj=FS&&(!document.documentMode||9<document.documentMode)}function R2(){Vy&&(Vy.detachEvent("onpropertychange",uj),pv=Vy=null)}function uj(e){if(e.propertyName==="value"&&$0(pv)){var t=[];lj(t,pv,e,Ak(e)),VN(IH,t)}}function LH(e,t,n){e==="focusin"?(R2(),Vy=t,pv=n,Vy.attachEvent("onpropertychange",uj)):e==="focusout"&&R2()}function MH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $0(pv)}function OH(e,t){if(e==="click")return $0(t)}function DH(e,t){if(e==="input"||e==="change")return $0(t)}function NH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vc=typeof Object.is=="function"?Object.is:NH;function mv(e,t){if(vc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wC.call(t,i)||!vc(e[i],t[i]))return!1}return!0}function L2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function M2(e,t){var n=L2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L2(n)}}function dj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hj(){for(var e=window,t=Sb();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sb(e.document)}return t}function zk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jH(e){var t=hj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dj(n.ownerDocument.documentElement,n)){if(r!==null&&zk(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,l=Math.min(r.start,i);r=r.end===void 0?l:Math.min(r.end,i),!e.extend&&l>r&&(i=r,r=l,l=i),i=M2(n,l);var u=M2(n,r);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zH=Ju&&"documentMode"in document&&11>=document.documentMode,_m=null,UC=null,Hy=null,$C=!1;function O2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$C||_m==null||_m!==Sb(r)||(r=_m,"selectionStart"in r&&zk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hy&&mv(Hy,r)||(Hy=r,r=Ib(UC,"onSelect"),0<r.length&&(t=new Dk("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_m)))}function Ax(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xm={animationend:Ax("Animation","AnimationEnd"),animationiteration:Ax("Animation","AnimationIteration"),animationstart:Ax("Animation","AnimationStart"),transitionend:Ax("Transition","TransitionEnd")},US={},fj={};Ju&&(fj=document.createElement("div").style,"AnimationEvent"in window||(delete xm.animationend.animation,delete xm.animationiteration.animation,delete xm.animationstart.animation),"TransitionEvent"in window||delete xm.transitionend.transition);function V0(e){if(US[e])return US[e];if(!xm[e])return e;var t=xm[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fj)return US[e]=t[n];return e}var pj=V0("animationend"),mj=V0("animationiteration"),gj=V0("animationstart"),yj=V0("transitionend"),vj=new Map,D2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qh(e,t){vj.set(e,t),_p(t,[e])}for(var $S=0;$S<D2.length;$S++){var VS=D2[$S],FH=VS.toLowerCase(),BH=VS[0].toUpperCase()+VS.slice(1);Qh(FH,"on"+BH)}Qh(pj,"onAnimationEnd");Qh(mj,"onAnimationIteration");Qh(gj,"onAnimationStart");Qh("dblclick","onDoubleClick");Qh("focusin","onFocus");Qh("focusout","onBlur");Qh(yj,"onTransitionEnd");ng("onMouseEnter",["mouseout","mouseover"]);ng("onMouseLeave",["mouseout","mouseover"]);ng("onPointerEnter",["pointerout","pointerover"]);ng("onPointerLeave",["pointerout","pointerover"]);_p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_p("onBeforeInput",["compositionend","keypress","textInput","paste"]);_p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ry="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ry));function N2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,F6(r,t,void 0,e),e.currentTarget=null}function _j(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var u=r.length-1;0<=u;u--){var a=r[u],m=a.instance,g=a.currentTarget;if(a=a.listener,m!==l&&i.isPropagationStopped())break e;N2(i,a,g),l=m}else for(u=0;u<r.length;u++){if(a=r[u],m=a.instance,g=a.currentTarget,a=a.listener,m!==l&&i.isPropagationStopped())break e;N2(i,a,g),l=m}}}if(Cb)throw e=jC,Cb=!1,jC=null,e}function Pi(e,t){var n=t[GC];n===void 0&&(n=t[GC]=new Set);var r=e+"__bubble";n.has(r)||(xj(t,e,2,!1),n.add(r))}function HS(e,t,n){var r=0;t&&(r|=4),xj(n,e,r,t)}var Ix="_reactListening"+Math.random().toString(36).slice(2);function gv(e){if(!e[Ix]){e[Ix]=!0,kN.forEach(function(n){n!=="selectionchange"&&(UH.has(n)||HS(n,!1,e),HS(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ix]||(t[Ix]=!0,HS("selectionchange",!1,t))}}function xj(e,t,n,r){switch(rj(t)){case 1:var i=tH;break;case 4:i=nH;break;default:i=Mk}n=i.bind(null,t,n,e),i=void 0,!NC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ZS(e,t,n,r,i){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;u=u.return}for(;a!==null;){if(u=Uf(a),u===null)return;if(m=u.tag,m===5||m===6){r=l=u;continue e}a=a.parentNode}}r=r.return}VN(function(){var g=l,w=Ak(n),C=[];e:{var P=vj.get(e);if(P!==void 0){var I=Dk,N=e;switch(e){case"keypress":if(nb(n)===0)break e;case"keydown":case"keyup":I=yH;break;case"focusin":N="focus",I=zS;break;case"focusout":N="blur",I=zS;break;case"beforeblur":case"afterblur":I=zS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=E2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=sH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=xH;break;case pj:case mj:case gj:I=lH;break;case yj:I=wH;break;case"scroll":I=rH;break;case"wheel":I=EH;break;case"copy":case"cut":case"paste":I=uH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=T2}var z=(t&4)!==0,$=!z&&e==="scroll",H=z?P!==null?P+"Capture":null:P;z=[];for(var V=g,q;V!==null;){q=V;var te=q.stateNode;if(q.tag===5&&te!==null&&(q=te,H!==null&&(te=uv(V,H),te!=null&&z.push(yv(V,te,q)))),$)break;V=V.return}0<z.length&&(P=new I(P,N,null,n,w),C.push({event:P,listeners:z}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",P&&n!==OC&&(N=n.relatedTarget||n.fromElement)&&(Uf(N)||N[ed]))break e;if((I||P)&&(P=w.window===w?w:(P=w.ownerDocument)?P.defaultView||P.parentWindow:window,I?(N=n.relatedTarget||n.toElement,I=g,N=N?Uf(N):null,N!==null&&($=xp(N),N!==$||N.tag!==5&&N.tag!==6)&&(N=null)):(I=null,N=g),I!==N)){if(z=E2,te="onMouseLeave",H="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(z=T2,te="onPointerLeave",H="onPointerEnter",V="pointer"),$=I==null?P:bm(I),q=N==null?P:bm(N),P=new z(te,V+"leave",I,n,w),P.target=$,P.relatedTarget=q,te=null,Uf(w)===g&&(z=new z(H,V+"enter",N,n,w),z.target=q,z.relatedTarget=$,te=z),$=te,I&&N)t:{for(z=I,H=N,V=0,q=z;q;q=sm(q))V++;for(q=0,te=H;te;te=sm(te))q++;for(;0<V-q;)z=sm(z),V--;for(;0<q-V;)H=sm(H),q--;for(;V--;){if(z===H||H!==null&&z===H.alternate)break t;z=sm(z),H=sm(H)}z=null}else z=null;I!==null&&j2(C,P,I,z,!1),N!==null&&$!==null&&j2(C,$,N,z,!0)}}e:{if(P=g?bm(g):window,I=P.nodeName&&P.nodeName.toLowerCase(),I==="select"||I==="input"&&P.type==="file")var ue=RH;else if(A2(P))if(cj)ue=DH;else{ue=MH;var fe=LH}else(I=P.nodeName)&&I.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(ue=OH);if(ue&&(ue=ue(e,g))){lj(C,ue,n,w);break e}fe&&fe(e,P,g),e==="focusout"&&(fe=P._wrapperState)&&fe.controlled&&P.type==="number"&&AC(P,"number",P.value)}switch(fe=g?bm(g):window,e){case"focusin":(A2(fe)||fe.contentEditable==="true")&&(_m=fe,UC=g,Hy=null);break;case"focusout":Hy=UC=_m=null;break;case"mousedown":$C=!0;break;case"contextmenu":case"mouseup":case"dragend":$C=!1,O2(C,n,w);break;case"selectionchange":if(zH)break;case"keydown":case"keyup":O2(C,n,w)}var Z;if(jk)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else vm?oj(e,n)&&(le="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(le="onCompositionStart");le&&(sj&&n.locale!=="ko"&&(vm||le!=="onCompositionStart"?le==="onCompositionEnd"&&vm&&(Z=ij()):(yh=w,Ok="value"in yh?yh.value:yh.textContent,vm=!0)),fe=Ib(g,le),0<fe.length&&(le=new C2(le,e,null,n,w),C.push({event:le,listeners:fe}),Z?le.data=Z:(Z=aj(n),Z!==null&&(le.data=Z)))),(Z=TH?kH(e,n):PH(e,n))&&(g=Ib(g,"onBeforeInput"),0<g.length&&(w=new C2("onBeforeInput","beforeinput",null,n,w),C.push({event:w,listeners:g}),w.data=Z))}_j(C,t)})}function yv(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ib(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=uv(e,n),l!=null&&r.unshift(yv(e,l,i)),l=uv(e,t),l!=null&&r.push(yv(e,l,i))),e=e.return}return r}function sm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function j2(e,t,n,r,i){for(var l=t._reactName,u=[];n!==null&&n!==r;){var a=n,m=a.alternate,g=a.stateNode;if(m!==null&&m===r)break;a.tag===5&&g!==null&&(a=g,i?(m=uv(n,l),m!=null&&u.unshift(yv(n,m,a))):i||(m=uv(n,l),m!=null&&u.push(yv(n,m,a)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var $H=/\r\n?/g,VH=/\u0000|\uFFFD/g;function z2(e){return(typeof e=="string"?e:""+e).replace($H,`
`).replace(VH,"")}function Rx(e,t,n){if(t=z2(t),z2(e)!==t&&n)throw Error(Ht(425))}function Rb(){}var VC=null,HC=null;function ZC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qC=typeof setTimeout=="function"?setTimeout:void 0,HH=typeof clearTimeout=="function"?clearTimeout:void 0,F2=typeof Promise=="function"?Promise:void 0,ZH=typeof queueMicrotask=="function"?queueMicrotask:typeof F2<"u"?function(e){return F2.resolve(null).then(e).catch(qH)}:qC;function qH(e){setTimeout(function(){throw e})}function qS(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fv(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fv(t)}function Th(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function B2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sg=Math.random().toString(36).slice(2),Xc="__reactFiber$"+Sg,vv="__reactProps$"+Sg,ed="__reactContainer$"+Sg,GC="__reactEvents$"+Sg,GH="__reactListeners$"+Sg,WH="__reactHandles$"+Sg;function Uf(e){var t=e[Xc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ed]||n[Xc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=B2(e);e!==null;){if(n=e[Xc])return n;e=B2(e)}return t}e=n,n=e.parentNode}return null}function g_(e){return e=e[Xc]||e[ed],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ht(33))}function H0(e){return e[vv]||null}var WC=[],wm=-1;function Jh(e){return{current:e}}function Ri(e){0>wm||(e.current=WC[wm],WC[wm]=null,wm--)}function wi(e,t){wm++,WC[wm]=e.current,e.current=t}var zh={},Io=Jh(zh),wa=Jh(!1),ep=zh;function rg(e,t){var n=e.type.contextTypes;if(!n)return zh;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sa(e){return e=e.childContextTypes,e!=null}function Lb(){Ri(wa),Ri(Io)}function U2(e,t,n){if(Io.current!==zh)throw Error(Ht(168));wi(Io,t),wi(wa,n)}function bj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ht(108,L6(e)||"Unknown",i));return Qi({},n,r)}function Mb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zh,ep=Io.current,wi(Io,e),wi(wa,wa.current),!0}function $2(e,t,n){var r=e.stateNode;if(!r)throw Error(Ht(169));n?(e=bj(e,t,ep),r.__reactInternalMemoizedMergedChildContext=e,Ri(wa),Ri(Io),wi(Io,e)):Ri(wa),wi(wa,n)}var Uu=null,Z0=!1,GS=!1;function wj(e){Uu===null?Uu=[e]:Uu.push(e)}function XH(e){Z0=!0,wj(e)}function ef(){if(!GS&&Uu!==null){GS=!0;var e=0,t=ii;try{var n=Uu;for(ii=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Uu=null,Z0=!1}catch(i){throw Uu!==null&&(Uu=Uu.slice(e+1)),GN(Ik,ef),i}finally{ii=t,GS=!1}}return null}var Sm=[],Em=0,Ob=null,Db=0,ml=[],gl=0,tp=null,Zu=1,qu="";function If(e,t){Sm[Em++]=Db,Sm[Em++]=Ob,Ob=e,Db=t}function Sj(e,t,n){ml[gl++]=Zu,ml[gl++]=qu,ml[gl++]=tp,tp=e;var r=Zu;e=qu;var i=32-pc(r)-1;r&=~(1<<i),n+=1;var l=32-pc(t)+i;if(30<l){var u=i-i%5;l=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Zu=1<<32-pc(t)+i|n<<i|r,qu=l+e}else Zu=1<<l|n<<i|r,qu=e}function Fk(e){e.return!==null&&(If(e,1),Sj(e,1,0))}function Bk(e){for(;e===Ob;)Ob=Sm[--Em],Sm[Em]=null,Db=Sm[--Em],Sm[Em]=null;for(;e===tp;)tp=ml[--gl],ml[gl]=null,qu=ml[--gl],ml[gl]=null,Zu=ml[--gl],ml[gl]=null}var Wa=null,Za=null,$i=!1,ac=null;function Ej(e,t){var n=xl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function V2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wa=e,Za=Th(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wa=e,Za=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tp!==null?{id:Zu,overflow:qu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wa=e,Za=null,!0):!1;default:return!1}}function XC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function KC(e){if($i){var t=Za;if(t){var n=t;if(!V2(e,t)){if(XC(e))throw Error(Ht(418));t=Th(n.nextSibling);var r=Wa;t&&V2(e,t)?Ej(r,n):(e.flags=e.flags&-4097|2,$i=!1,Wa=e)}}else{if(XC(e))throw Error(Ht(418));e.flags=e.flags&-4097|2,$i=!1,Wa=e}}}function H2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wa=e}function Lx(e){if(e!==Wa)return!1;if(!$i)return H2(e),$i=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ZC(e.type,e.memoizedProps)),t&&(t=Za)){if(XC(e))throw Cj(),Error(Ht(418));for(;t;)Ej(e,t),t=Th(t.nextSibling)}if(H2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Za=Th(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Za=null}}else Za=Wa?Th(e.stateNode.nextSibling):null;return!0}function Cj(){for(var e=Za;e;)e=Th(e.nextSibling)}function ig(){Za=Wa=null,$i=!1}function Uk(e){ac===null?ac=[e]:ac.push(e)}var KH=cd.ReactCurrentBatchConfig;function fy(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ht(309));var r=n.stateNode}if(!r)throw Error(Ht(147,e));var i=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(u){var a=i.refs;u===null?delete a[l]:a[l]=u},t._stringRef=l,t)}if(typeof e!="string")throw Error(Ht(284));if(!n._owner)throw Error(Ht(290,e))}return e}function Mx(e,t){throw e=Object.prototype.toString.call(t),Error(Ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Z2(e){var t=e._init;return t(e._payload)}function Tj(e){function t(H,V){if(e){var q=H.deletions;q===null?(H.deletions=[V],H.flags|=16):q.push(V)}}function n(H,V){if(!e)return null;for(;V!==null;)t(H,V),V=V.sibling;return null}function r(H,V){for(H=new Map;V!==null;)V.key!==null?H.set(V.key,V):H.set(V.index,V),V=V.sibling;return H}function i(H,V){return H=Ih(H,V),H.index=0,H.sibling=null,H}function l(H,V,q){return H.index=q,e?(q=H.alternate,q!==null?(q=q.index,q<V?(H.flags|=2,V):q):(H.flags|=2,V)):(H.flags|=1048576,V)}function u(H){return e&&H.alternate===null&&(H.flags|=2),H}function a(H,V,q,te){return V===null||V.tag!==6?(V=eE(q,H.mode,te),V.return=H,V):(V=i(V,q),V.return=H,V)}function m(H,V,q,te){var ue=q.type;return ue===ym?w(H,V,q.props.children,te,q.key):V!==null&&(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===sh&&Z2(ue)===V.type)?(te=i(V,q.props),te.ref=fy(H,V,q),te.return=H,te):(te=cb(q.type,q.key,q.props,null,H.mode,te),te.ref=fy(H,V,q),te.return=H,te)}function g(H,V,q,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=tE(q,H.mode,te),V.return=H,V):(V=i(V,q.children||[]),V.return=H,V)}function w(H,V,q,te,ue){return V===null||V.tag!==7?(V=Wf(q,H.mode,te,ue),V.return=H,V):(V=i(V,q),V.return=H,V)}function C(H,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=eE(""+V,H.mode,q),V.return=H,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case wx:return q=cb(V.type,V.key,V.props,null,H.mode,q),q.ref=fy(H,null,V),q.return=H,q;case gm:return V=tE(V,H.mode,q),V.return=H,V;case sh:var te=V._init;return C(H,te(V._payload),q)}if(Ay(V)||ly(V))return V=Wf(V,H.mode,q,null),V.return=H,V;Mx(H,V)}return null}function P(H,V,q,te){var ue=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ue!==null?null:a(H,V,""+q,te);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case wx:return q.key===ue?m(H,V,q,te):null;case gm:return q.key===ue?g(H,V,q,te):null;case sh:return ue=q._init,P(H,V,ue(q._payload),te)}if(Ay(q)||ly(q))return ue!==null?null:w(H,V,q,te,null);Mx(H,q)}return null}function I(H,V,q,te,ue){if(typeof te=="string"&&te!==""||typeof te=="number")return H=H.get(q)||null,a(V,H,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case wx:return H=H.get(te.key===null?q:te.key)||null,m(V,H,te,ue);case gm:return H=H.get(te.key===null?q:te.key)||null,g(V,H,te,ue);case sh:var fe=te._init;return I(H,V,q,fe(te._payload),ue)}if(Ay(te)||ly(te))return H=H.get(q)||null,w(V,H,te,ue,null);Mx(V,te)}return null}function N(H,V,q,te){for(var ue=null,fe=null,Z=V,le=V=0,be=null;Z!==null&&le<q.length;le++){Z.index>le?(be=Z,Z=null):be=Z.sibling;var Re=P(H,Z,q[le],te);if(Re===null){Z===null&&(Z=be);break}e&&Z&&Re.alternate===null&&t(H,Z),V=l(Re,V,le),fe===null?ue=Re:fe.sibling=Re,fe=Re,Z=be}if(le===q.length)return n(H,Z),$i&&If(H,le),ue;if(Z===null){for(;le<q.length;le++)Z=C(H,q[le],te),Z!==null&&(V=l(Z,V,le),fe===null?ue=Z:fe.sibling=Z,fe=Z);return $i&&If(H,le),ue}for(Z=r(H,Z);le<q.length;le++)be=I(Z,H,le,q[le],te),be!==null&&(e&&be.alternate!==null&&Z.delete(be.key===null?le:be.key),V=l(be,V,le),fe===null?ue=be:fe.sibling=be,fe=be);return e&&Z.forEach(function(Je){return t(H,Je)}),$i&&If(H,le),ue}function z(H,V,q,te){var ue=ly(q);if(typeof ue!="function")throw Error(Ht(150));if(q=ue.call(q),q==null)throw Error(Ht(151));for(var fe=ue=null,Z=V,le=V=0,be=null,Re=q.next();Z!==null&&!Re.done;le++,Re=q.next()){Z.index>le?(be=Z,Z=null):be=Z.sibling;var Je=P(H,Z,Re.value,te);if(Je===null){Z===null&&(Z=be);break}e&&Z&&Je.alternate===null&&t(H,Z),V=l(Je,V,le),fe===null?ue=Je:fe.sibling=Je,fe=Je,Z=be}if(Re.done)return n(H,Z),$i&&If(H,le),ue;if(Z===null){for(;!Re.done;le++,Re=q.next())Re=C(H,Re.value,te),Re!==null&&(V=l(Re,V,le),fe===null?ue=Re:fe.sibling=Re,fe=Re);return $i&&If(H,le),ue}for(Z=r(H,Z);!Re.done;le++,Re=q.next())Re=I(Z,H,le,Re.value,te),Re!==null&&(e&&Re.alternate!==null&&Z.delete(Re.key===null?le:Re.key),V=l(Re,V,le),fe===null?ue=Re:fe.sibling=Re,fe=Re);return e&&Z.forEach(function(Fe){return t(H,Fe)}),$i&&If(H,le),ue}function $(H,V,q,te){if(typeof q=="object"&&q!==null&&q.type===ym&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case wx:e:{for(var ue=q.key,fe=V;fe!==null;){if(fe.key===ue){if(ue=q.type,ue===ym){if(fe.tag===7){n(H,fe.sibling),V=i(fe,q.props.children),V.return=H,H=V;break e}}else if(fe.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===sh&&Z2(ue)===fe.type){n(H,fe.sibling),V=i(fe,q.props),V.ref=fy(H,fe,q),V.return=H,H=V;break e}n(H,fe);break}else t(H,fe);fe=fe.sibling}q.type===ym?(V=Wf(q.props.children,H.mode,te,q.key),V.return=H,H=V):(te=cb(q.type,q.key,q.props,null,H.mode,te),te.ref=fy(H,V,q),te.return=H,H=te)}return u(H);case gm:e:{for(fe=q.key;V!==null;){if(V.key===fe)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){n(H,V.sibling),V=i(V,q.children||[]),V.return=H,H=V;break e}else{n(H,V);break}else t(H,V);V=V.sibling}V=tE(q,H.mode,te),V.return=H,H=V}return u(H);case sh:return fe=q._init,$(H,V,fe(q._payload),te)}if(Ay(q))return N(H,V,q,te);if(ly(q))return z(H,V,q,te);Mx(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(n(H,V.sibling),V=i(V,q),V.return=H,H=V):(n(H,V),V=eE(q,H.mode,te),V.return=H,H=V),u(H)):n(H,V)}return $}var sg=Tj(!0),kj=Tj(!1),Nb=Jh(null),jb=null,Cm=null,$k=null;function Vk(){$k=Cm=jb=null}function Hk(e){var t=Nb.current;Ri(Nb),e._currentValue=t}function YC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zm(e,t){jb=e,$k=Cm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ba=!0),e.firstContext=null)}function Sl(e){var t=e._currentValue;if($k!==e)if(e={context:e,memoizedValue:t,next:null},Cm===null){if(jb===null)throw Error(Ht(308));Cm=e,jb.dependencies={lanes:0,firstContext:e}}else Cm=Cm.next=e;return t}var $f=null;function Zk(e){$f===null?$f=[e]:$f.push(e)}function Pj(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Zk(t)):(n.next=i.next,i.next=n),t.interleaved=n,td(e,r)}function td(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var oh=!1;function qk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kh(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Hr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,td(e,n)}return i=r.interleaved,i===null?(t.next=t,Zk(r)):(t.next=i.next,i.next=t),r.interleaved=t,td(e,n)}function rb(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rk(e,n)}}function q2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=u:l=l.next=u,n=n.next}while(n!==null);l===null?i=l=t:l=l.next=t}else i=l=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zb(e,t,n,r){var i=e.updateQueue;oh=!1;var l=i.firstBaseUpdate,u=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var m=a,g=m.next;m.next=null,u===null?l=g:u.next=g,u=m;var w=e.alternate;w!==null&&(w=w.updateQueue,a=w.lastBaseUpdate,a!==u&&(a===null?w.firstBaseUpdate=g:a.next=g,w.lastBaseUpdate=m))}if(l!==null){var C=i.baseState;u=0,w=g=m=null,a=l;do{var P=a.lane,I=a.eventTime;if((r&P)===P){w!==null&&(w=w.next={eventTime:I,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var N=e,z=a;switch(P=t,I=n,z.tag){case 1:if(N=z.payload,typeof N=="function"){C=N.call(I,C,P);break e}C=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=z.payload,P=typeof N=="function"?N.call(I,C,P):N,P==null)break e;C=Qi({},C,P);break e;case 2:oh=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,P=i.effects,P===null?i.effects=[a]:P.push(a))}else I={eventTime:I,lane:P,tag:a.tag,payload:a.payload,callback:a.callback,next:null},w===null?(g=w=I,m=C):w=w.next=I,u|=P;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;P=a,a=P.next,P.next=null,i.lastBaseUpdate=P,i.shared.pending=null}}while(!0);if(w===null&&(m=C),i.baseState=m,i.firstBaseUpdate=g,i.lastBaseUpdate=w,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);rp|=u,e.lanes=u,e.memoizedState=C}}function G2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ht(191,i));i.call(r)}}}var y_={},eu=Jh(y_),_v=Jh(y_),xv=Jh(y_);function Vf(e){if(e===y_)throw Error(Ht(174));return e}function Gk(e,t){switch(wi(xv,t),wi(_v,e),wi(eu,y_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:RC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=RC(t,e)}Ri(eu),wi(eu,t)}function og(){Ri(eu),Ri(_v),Ri(xv)}function Ij(e){Vf(xv.current);var t=Vf(eu.current),n=RC(t,e.type);t!==n&&(wi(_v,e),wi(eu,n))}function Wk(e){_v.current===e&&(Ri(eu),Ri(_v))}var Ki=Jh(0);function Fb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var WS=[];function Xk(){for(var e=0;e<WS.length;e++)WS[e]._workInProgressVersionPrimary=null;WS.length=0}var ib=cd.ReactCurrentDispatcher,XS=cd.ReactCurrentBatchConfig,np=0,Yi=null,Os=null,Xs=null,Bb=!1,Zy=!1,bv=0,YH=0;function Eo(){throw Error(Ht(321))}function Kk(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vc(e[n],t[n]))return!1;return!0}function Yk(e,t,n,r,i,l){if(np=l,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ib.current=e===null||e.memoizedState===null?t8:n8,e=n(r,i),Zy){l=0;do{if(Zy=!1,bv=0,25<=l)throw Error(Ht(301));l+=1,Xs=Os=null,t.updateQueue=null,ib.current=r8,e=n(r,i)}while(Zy)}if(ib.current=Ub,t=Os!==null&&Os.next!==null,np=0,Xs=Os=Yi=null,Bb=!1,t)throw Error(Ht(300));return e}function Qk(){var e=bv!==0;return bv=0,e}function Hc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Yi.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function El(){if(Os===null){var e=Yi.alternate;e=e!==null?e.memoizedState:null}else e=Os.next;var t=Xs===null?Yi.memoizedState:Xs.next;if(t!==null)Xs=t,Os=e;else{if(e===null)throw Error(Ht(310));Os=e,e={memoizedState:Os.memoizedState,baseState:Os.baseState,baseQueue:Os.baseQueue,queue:Os.queue,next:null},Xs===null?Yi.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function wv(e,t){return typeof t=="function"?t(e):t}function KS(e){var t=El(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var r=Os,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var u=i.next;i.next=l.next,l.next=u}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var a=u=null,m=null,g=l;do{var w=g.lane;if((np&w)===w)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var C={lane:w,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(a=m=C,u=r):m=m.next=C,Yi.lanes|=w,rp|=w}g=g.next}while(g!==null&&g!==l);m===null?u=r:m.next=a,vc(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do l=i.lane,Yi.lanes|=l,rp|=l,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function YS(e){var t=El(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do l=e(l,u.action),u=u.next;while(u!==i);vc(l,t.memoizedState)||(ba=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Rj(){}function Lj(e,t){var n=Yi,r=El(),i=t(),l=!vc(r.memoizedState,i);if(l&&(r.memoizedState=i,ba=!0),r=r.queue,Jk(Dj.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,Sv(9,Oj.bind(null,n,r,i,t),void 0,null),Ks===null)throw Error(Ht(349));np&30||Mj(n,t,i)}return i}function Mj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Yi.updateQueue,t===null?(t={lastEffect:null,stores:null},Yi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Oj(e,t,n,r){t.value=n,t.getSnapshot=r,Nj(t)&&jj(e)}function Dj(e,t,n){return n(function(){Nj(t)&&jj(e)})}function Nj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vc(e,n)}catch{return!0}}function jj(e){var t=td(e,1);t!==null&&mc(t,e,1,-1)}function W2(e){var t=Hc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:e},t.queue=e,e=e.dispatch=e8.bind(null,Yi,e),[t.memoizedState,e]}function Sv(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Yi.updateQueue,t===null?(t={lastEffect:null,stores:null},Yi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zj(){return El().memoizedState}function sb(e,t,n,r){var i=Hc();Yi.flags|=e,i.memoizedState=Sv(1|t,n,void 0,r===void 0?null:r)}function q0(e,t,n,r){var i=El();r=r===void 0?null:r;var l=void 0;if(Os!==null){var u=Os.memoizedState;if(l=u.destroy,r!==null&&Kk(r,u.deps)){i.memoizedState=Sv(t,n,l,r);return}}Yi.flags|=e,i.memoizedState=Sv(1|t,n,l,r)}function X2(e,t){return sb(8390656,8,e,t)}function Jk(e,t){return q0(2048,8,e,t)}function Fj(e,t){return q0(4,2,e,t)}function Bj(e,t){return q0(4,4,e,t)}function Uj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $j(e,t,n){return n=n!=null?n.concat([e]):null,q0(4,4,Uj.bind(null,t,e),n)}function eP(){}function Vj(e,t){var n=El();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Kk(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hj(e,t){var n=El();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Kk(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zj(e,t,n){return np&21?(vc(n,t)||(n=KN(),Yi.lanes|=n,rp|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n)}function QH(e,t){var n=ii;ii=n!==0&&4>n?n:4,e(!0);var r=XS.transition;XS.transition={};try{e(!1),t()}finally{ii=n,XS.transition=r}}function qj(){return El().memoizedState}function JH(e,t,n){var r=Ah(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gj(e))Wj(t,n);else if(n=Pj(e,t,n,r),n!==null){var i=Zo();mc(n,e,r,i),Xj(n,t,r)}}function e8(e,t,n){var r=Ah(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gj(e))Wj(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var u=t.lastRenderedState,a=l(u,n);if(i.hasEagerState=!0,i.eagerState=a,vc(a,u)){var m=t.interleaved;m===null?(i.next=i,Zk(t)):(i.next=m.next,m.next=i),t.interleaved=i;return}}catch{}finally{}n=Pj(e,t,i,r),n!==null&&(i=Zo(),mc(n,e,r,i),Xj(n,t,r))}}function Gj(e){var t=e.alternate;return e===Yi||t!==null&&t===Yi}function Wj(e,t){Zy=Bb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rk(e,n)}}var Ub={readContext:Sl,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},t8={readContext:Sl,useCallback:function(e,t){return Hc().memoizedState=[e,t===void 0?null:t],e},useContext:Sl,useEffect:X2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,sb(4194308,4,Uj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sb(4194308,4,e,t)},useInsertionEffect:function(e,t){return sb(4,2,e,t)},useMemo:function(e,t){var n=Hc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hc();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=JH.bind(null,Yi,e),[r.memoizedState,e]},useRef:function(e){var t=Hc();return e={current:e},t.memoizedState=e},useState:W2,useDebugValue:eP,useDeferredValue:function(e){return Hc().memoizedState=e},useTransition:function(){var e=W2(!1),t=e[0];return e=QH.bind(null,e[1]),Hc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Yi,i=Hc();if($i){if(n===void 0)throw Error(Ht(407));n=n()}else{if(n=t(),Ks===null)throw Error(Ht(349));np&30||Mj(r,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,X2(Dj.bind(null,r,l,e),[e]),r.flags|=2048,Sv(9,Oj.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Hc(),t=Ks.identifierPrefix;if($i){var n=qu,r=Zu;n=(r&~(1<<32-pc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bv++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=YH++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},n8={readContext:Sl,useCallback:Vj,useContext:Sl,useEffect:Jk,useImperativeHandle:$j,useInsertionEffect:Fj,useLayoutEffect:Bj,useMemo:Hj,useReducer:KS,useRef:zj,useState:function(){return KS(wv)},useDebugValue:eP,useDeferredValue:function(e){var t=El();return Zj(t,Os.memoizedState,e)},useTransition:function(){var e=KS(wv)[0],t=El().memoizedState;return[e,t]},useMutableSource:Rj,useSyncExternalStore:Lj,useId:qj,unstable_isNewReconciler:!1},r8={readContext:Sl,useCallback:Vj,useContext:Sl,useEffect:Jk,useImperativeHandle:$j,useInsertionEffect:Fj,useLayoutEffect:Bj,useMemo:Hj,useReducer:YS,useRef:zj,useState:function(){return YS(wv)},useDebugValue:eP,useDeferredValue:function(e){var t=El();return Os===null?t.memoizedState=e:Zj(t,Os.memoizedState,e)},useTransition:function(){var e=YS(wv)[0],t=El().memoizedState;return[e,t]},useMutableSource:Rj,useSyncExternalStore:Lj,useId:qj,unstable_isNewReconciler:!1};function nc(e,t){if(e&&e.defaultProps){t=Qi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function QC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var G0={isMounted:function(e){return(e=e._reactInternals)?xp(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zo(),i=Ah(e),l=Xu(r,i);l.payload=t,n!=null&&(l.callback=n),t=kh(e,l,i),t!==null&&(mc(t,e,i,r),rb(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zo(),i=Ah(e),l=Xu(r,i);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=kh(e,l,i),t!==null&&(mc(t,e,i,r),rb(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zo(),r=Ah(e),i=Xu(n,r);i.tag=2,t!=null&&(i.callback=t),t=kh(e,i,r),t!==null&&(mc(t,e,r,n),rb(t,e,r))}};function K2(e,t,n,r,i,l,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,u):t.prototype&&t.prototype.isPureReactComponent?!mv(n,r)||!mv(i,l):!0}function Kj(e,t,n){var r=!1,i=zh,l=t.contextType;return typeof l=="object"&&l!==null?l=Sl(l):(i=Sa(t)?ep:Io.current,r=t.contextTypes,l=(r=r!=null)?rg(e,i):zh),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=G0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function Y2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&G0.enqueueReplaceState(t,t.state,null)}function JC(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},qk(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=Sl(l):(l=Sa(t)?ep:Io.current,i.context=rg(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(QC(e,t,l,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&G0.enqueueReplaceState(i,i.state,null),zb(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ag(e,t){try{var n="",r=t;do n+=R6(r),r=r.return;while(r);var i=n}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function QS(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var i8=typeof WeakMap=="function"?WeakMap:Map;function Yj(e,t,n){n=Xu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vb||(Vb=!0,uT=r),eT(e,t)},n}function Qj(e,t,n){n=Xu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){eT(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){eT(e,t),typeof r!="function"&&(Ph===null?Ph=new Set([this]):Ph.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Q2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new i8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=v8.bind(null,e,t,n),t.then(e,e))}function J2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eL(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xu(-1,1),t.tag=2,kh(n,t,1))),n.lanes|=1),e)}var s8=cd.ReactCurrentOwner,ba=!1;function $o(e,t,n,r){t.child=e===null?kj(t,null,n,r):sg(t,e.child,n,r)}function tL(e,t,n,r,i){n=n.render;var l=t.ref;return zm(t,i),r=Yk(e,t,n,r,l,i),n=Qk(),e!==null&&!ba?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nd(e,t,i)):($i&&n&&Fk(t),t.flags|=1,$o(e,t,r,i),t.child)}function nL(e,t,n,r,i){if(e===null){var l=n.type;return typeof l=="function"&&!lP(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Jj(e,t,l,r,i)):(e=cb(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var u=l.memoizedProps;if(n=n.compare,n=n!==null?n:mv,n(u,r)&&e.ref===t.ref)return nd(e,t,i)}return t.flags|=1,e=Ih(l,r),e.ref=t.ref,e.return=t,t.child=e}function Jj(e,t,n,r,i){if(e!==null){var l=e.memoizedProps;if(mv(l,r)&&e.ref===t.ref)if(ba=!1,t.pendingProps=r=l,(e.lanes&i)!==0)e.flags&131072&&(ba=!0);else return t.lanes=e.lanes,nd(e,t,i)}return tT(e,t,n,r,i)}function ez(e,t,n){var r=t.pendingProps,i=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wi(km,$a),$a|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wi(km,$a),$a|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,wi(km,$a),$a|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,wi(km,$a),$a|=r;return $o(e,t,i,n),t.child}function tz(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tT(e,t,n,r,i){var l=Sa(n)?ep:Io.current;return l=rg(t,l),zm(t,i),n=Yk(e,t,n,r,l,i),r=Qk(),e!==null&&!ba?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nd(e,t,i)):($i&&r&&Fk(t),t.flags|=1,$o(e,t,n,i),t.child)}function rL(e,t,n,r,i){if(Sa(n)){var l=!0;Mb(t)}else l=!1;if(zm(t,i),t.stateNode===null)ob(e,t),Kj(t,n,r),JC(t,n,r,i),r=!0;else if(e===null){var u=t.stateNode,a=t.memoizedProps;u.props=a;var m=u.context,g=n.contextType;typeof g=="object"&&g!==null?g=Sl(g):(g=Sa(n)?ep:Io.current,g=rg(t,g));var w=n.getDerivedStateFromProps,C=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";C||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==r||m!==g)&&Y2(t,u,r,g),oh=!1;var P=t.memoizedState;u.state=P,zb(t,r,u,i),m=t.memoizedState,a!==r||P!==m||wa.current||oh?(typeof w=="function"&&(QC(t,n,w,r),m=t.memoizedState),(a=oh||K2(t,n,a,r,P,m,g))?(C||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),u.props=r,u.state=m,u.context=g,r=a):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Aj(e,t),a=t.memoizedProps,g=t.type===t.elementType?a:nc(t.type,a),u.props=g,C=t.pendingProps,P=u.context,m=n.contextType,typeof m=="object"&&m!==null?m=Sl(m):(m=Sa(n)?ep:Io.current,m=rg(t,m));var I=n.getDerivedStateFromProps;(w=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==C||P!==m)&&Y2(t,u,r,m),oh=!1,P=t.memoizedState,u.state=P,zb(t,r,u,i);var N=t.memoizedState;a!==C||P!==N||wa.current||oh?(typeof I=="function"&&(QC(t,n,I,r),N=t.memoizedState),(g=oh||K2(t,n,g,r,P,N,m)||!1)?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,N,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,N,m)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||a===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),u.props=r,u.state=N,u.context=m,r=g):(typeof u.componentDidUpdate!="function"||a===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),r=!1)}return nT(e,t,n,r,l,i)}function nT(e,t,n,r,i,l){tz(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return i&&$2(t,n,!1),nd(e,t,l);r=t.stateNode,s8.current=t;var a=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=sg(t,e.child,null,l),t.child=sg(t,null,a,l)):$o(e,t,a,l),t.memoizedState=r.state,i&&$2(t,n,!0),t.child}function nz(e){var t=e.stateNode;t.pendingContext?U2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U2(e,t.context,!1),Gk(e,t.containerInfo)}function iL(e,t,n,r,i){return ig(),Uk(i),t.flags|=256,$o(e,t,n,r),t.child}var rT={dehydrated:null,treeContext:null,retryLane:0};function iT(e){return{baseLanes:e,cachePool:null,transitions:null}}function rz(e,t,n){var r=t.pendingProps,i=Ki.current,l=!1,u=(t.flags&128)!==0,a;if((a=u)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),wi(Ki,i&1),e===null)return KC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,l?(r=t.mode,l=t.child,u={mode:"hidden",children:u},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=u):l=K0(u,r,0,null),e=Wf(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=iT(n),t.memoizedState=rT,e):tP(t,u));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return o8(e,t,u,r,a,i,n);if(l){l=r.fallback,u=t.mode,i=e.child,a=i.sibling;var m={mode:"hidden",children:r.children};return!(u&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=Ih(i,m),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?l=Ih(a,l):(l=Wf(l,u,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,u=e.child.memoizedState,u=u===null?iT(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=e.childLanes&~n,t.memoizedState=rT,r}return l=e.child,e=l.sibling,r=Ih(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function tP(e,t){return t=K0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ox(e,t,n,r){return r!==null&&Uk(r),sg(t,e.child,null,n),e=tP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function o8(e,t,n,r,i,l,u){if(n)return t.flags&256?(t.flags&=-257,r=QS(Error(Ht(422))),Ox(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,i=t.mode,r=K0({mode:"visible",children:r.children},i,0,null),l=Wf(l,i,u,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&sg(t,e.child,null,u),t.child.memoizedState=iT(u),t.memoizedState=rT,l);if(!(t.mode&1))return Ox(e,t,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(Ht(419)),r=QS(l,r,void 0),Ox(e,t,u,r)}if(a=(u&e.childLanes)!==0,ba||a){if(r=Ks,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,td(e,i),mc(r,e,i,-1))}return aP(),r=QS(Error(Ht(421))),Ox(e,t,u,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_8.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,Za=Th(i.nextSibling),Wa=t,$i=!0,ac=null,e!==null&&(ml[gl++]=Zu,ml[gl++]=qu,ml[gl++]=tp,Zu=e.id,qu=e.overflow,tp=t),t=tP(t,r.children),t.flags|=4096,t)}function sL(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),YC(e.return,t,n)}function JS(e,t,n,r,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function iz(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if($o(e,t,r.children,n),r=Ki.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sL(e,n,t);else if(e.tag===19)sL(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wi(Ki,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Fb(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),JS(t,!1,i,n,l);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Fb(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}JS(t,!0,n,null,l);break;case"together":JS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ob(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nd(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rp|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ht(153));if(t.child!==null){for(e=t.child,n=Ih(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ih(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function a8(e,t,n){switch(t.tag){case 3:nz(t),ig();break;case 5:Ij(t);break;case 1:Sa(t.type)&&Mb(t);break;case 4:Gk(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;wi(Nb,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(wi(Ki,Ki.current&1),t.flags|=128,null):n&t.child.childLanes?rz(e,t,n):(wi(Ki,Ki.current&1),e=nd(e,t,n),e!==null?e.sibling:null);wi(Ki,Ki.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iz(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wi(Ki,Ki.current),r)break;return null;case 22:case 23:return t.lanes=0,ez(e,t,n)}return nd(e,t,n)}var sz,sT,oz,az;sz=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sT=function(){};oz=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Vf(eu.current);var l=null;switch(n){case"input":i=kC(e,i),r=kC(e,r),l=[];break;case"select":i=Qi({},i,{value:void 0}),r=Qi({},r,{value:void 0}),l=[];break;case"textarea":i=IC(e,i),r=IC(e,r),l=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rb)}LC(n,r);var u;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var a=i[g];for(u in a)a.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(lv.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in r){var m=r[g];if(a=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&m!==a&&(m!=null||a!=null))if(g==="style")if(a){for(u in a)!a.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in m)m.hasOwnProperty(u)&&a[u]!==m[u]&&(n||(n={}),n[u]=m[u])}else n||(l||(l=[]),l.push(g,n)),n=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,a=a?a.__html:void 0,m!=null&&a!==m&&(l=l||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(lv.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&Pi("scroll",e),l||a===m||(l=[])):(l=l||[]).push(g,m))}n&&(l=l||[]).push("style",n);var g=l;(t.updateQueue=g)&&(t.flags|=4)}};az=function(e,t,n,r){n!==r&&(t.flags|=4)};function py(e,t){if(!$i)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Co(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function l8(e,t,n){var r=t.pendingProps;switch(Bk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Co(t),null;case 1:return Sa(t.type)&&Lb(),Co(t),null;case 3:return r=t.stateNode,og(),Ri(wa),Ri(Io),Xk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Lx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ac!==null&&(fT(ac),ac=null))),sT(e,t),Co(t),null;case 5:Wk(t);var i=Vf(xv.current);if(n=t.type,e!==null&&t.stateNode!=null)oz(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ht(166));return Co(t),null}if(e=Vf(eu.current),Lx(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Xc]=t,r[vv]=l,e=(t.mode&1)!==0,n){case"dialog":Pi("cancel",r),Pi("close",r);break;case"iframe":case"object":case"embed":Pi("load",r);break;case"video":case"audio":for(i=0;i<Ry.length;i++)Pi(Ry[i],r);break;case"source":Pi("error",r);break;case"img":case"image":case"link":Pi("error",r),Pi("load",r);break;case"details":Pi("toggle",r);break;case"input":p2(r,l),Pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Pi("invalid",r);break;case"textarea":g2(r,l),Pi("invalid",r)}LC(n,l),i=null;for(var u in l)if(l.hasOwnProperty(u)){var a=l[u];u==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Rx(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Rx(r.textContent,a,e),i=["children",""+a]):lv.hasOwnProperty(u)&&a!=null&&u==="onScroll"&&Pi("scroll",r)}switch(n){case"input":Sx(r),m2(r,l,!0);break;case"textarea":Sx(r),y2(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Rb)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Xc]=t,e[vv]=r,sz(e,t,!1,!1),t.stateNode=e;e:{switch(u=MC(n,r),n){case"dialog":Pi("cancel",e),Pi("close",e),i=r;break;case"iframe":case"object":case"embed":Pi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ry.length;i++)Pi(Ry[i],e);i=r;break;case"source":Pi("error",e),i=r;break;case"img":case"image":case"link":Pi("error",e),Pi("load",e),i=r;break;case"details":Pi("toggle",e),i=r;break;case"input":p2(e,r),i=kC(e,r),Pi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Qi({},r,{value:void 0}),Pi("invalid",e);break;case"textarea":g2(e,r),i=IC(e,r),Pi("invalid",e);break;default:i=r}LC(n,i),a=i;for(l in a)if(a.hasOwnProperty(l)){var m=a[l];l==="style"?zN(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&NN(e,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&cv(e,m):typeof m=="number"&&cv(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(lv.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Pi("scroll",e):m!=null&&Ck(e,l,m,u))}switch(n){case"input":Sx(e),m2(e,r,!1);break;case"textarea":Sx(e),y2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jh(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Om(e,!!r.multiple,l,!1):r.defaultValue!=null&&Om(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Rb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Co(t),null;case 6:if(e&&t.stateNode!=null)az(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ht(166));if(n=Vf(xv.current),Vf(eu.current),Lx(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xc]=t,(l=r.nodeValue!==n)&&(e=Wa,e!==null))switch(e.tag){case 3:Rx(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rx(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xc]=t,t.stateNode=r}return Co(t),null;case 13:if(Ri(Ki),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($i&&Za!==null&&t.mode&1&&!(t.flags&128))Cj(),ig(),t.flags|=98560,l=!1;else if(l=Lx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Ht(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Ht(317));l[Xc]=t}else ig(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Co(t),l=!1}else ac!==null&&(fT(ac),ac=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ki.current&1?Ns===0&&(Ns=3):aP())),t.updateQueue!==null&&(t.flags|=4),Co(t),null);case 4:return og(),sT(e,t),e===null&&gv(t.stateNode.containerInfo),Co(t),null;case 10:return Hk(t.type._context),Co(t),null;case 17:return Sa(t.type)&&Lb(),Co(t),null;case 19:if(Ri(Ki),l=t.memoizedState,l===null)return Co(t),null;if(r=(t.flags&128)!==0,u=l.rendering,u===null)if(r)py(l,!1);else{if(Ns!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Fb(e),u!==null){for(t.flags|=128,py(l,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,e=u.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wi(Ki,Ki.current&1|2),t.child}e=e.sibling}l.tail!==null&&ps()>lg&&(t.flags|=128,r=!0,py(l,!1),t.lanes=4194304)}else{if(!r)if(e=Fb(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),py(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!$i)return Co(t),null}else 2*ps()-l.renderingStartTime>lg&&n!==1073741824&&(t.flags|=128,r=!0,py(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(n=l.last,n!==null?n.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ps(),t.sibling=null,n=Ki.current,wi(Ki,r?n&1|2:n&1),t):(Co(t),null);case 22:case 23:return oP(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$a&1073741824&&(Co(t),t.subtreeFlags&6&&(t.flags|=8192)):Co(t),null;case 24:return null;case 25:return null}throw Error(Ht(156,t.tag))}function c8(e,t){switch(Bk(t),t.tag){case 1:return Sa(t.type)&&Lb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return og(),Ri(wa),Ri(Io),Xk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wk(t),null;case 13:if(Ri(Ki),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ht(340));ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ri(Ki),null;case 4:return og(),null;case 10:return Hk(t.type._context),null;case 22:case 23:return oP(),null;case 24:return null;default:return null}}var Dx=!1,Po=!1,u8=typeof WeakSet=="function"?WeakSet:Set,jn=null;function Tm(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){os(e,t,r)}else n.current=null}function oT(e,t,n){try{n()}catch(r){os(e,t,r)}}var oL=!1;function d8(e,t){if(VC=Pb,e=hj(),zk(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var u=0,a=-1,m=-1,g=0,w=0,C=e,P=null;t:for(;;){for(var I;C!==n||i!==0&&C.nodeType!==3||(a=u+i),C!==l||r!==0&&C.nodeType!==3||(m=u+r),C.nodeType===3&&(u+=C.nodeValue.length),(I=C.firstChild)!==null;)P=C,C=I;for(;;){if(C===e)break t;if(P===n&&++g===i&&(a=u),P===l&&++w===r&&(m=u),(I=C.nextSibling)!==null)break;C=P,P=C.parentNode}C=I}n=a===-1||m===-1?null:{start:a,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(HC={focusedElem:e,selectionRange:n},Pb=!1,jn=t;jn!==null;)if(t=jn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jn=e;else for(;jn!==null;){t=jn;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var z=N.memoizedProps,$=N.memoizedState,H=t.stateNode,V=H.getSnapshotBeforeUpdate(t.elementType===t.type?z:nc(t.type,z),$);H.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=t.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ht(163))}}catch(te){os(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,jn=e;break}jn=t.return}return N=oL,oL=!1,N}function qy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&oT(t,n,l)}i=i.next}while(i!==r)}}function W0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function aT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lz(e){var t=e.alternate;t!==null&&(e.alternate=null,lz(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xc],delete t[vv],delete t[GC],delete t[GH],delete t[WH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cz(e){return e.tag===5||e.tag===3||e.tag===4}function aL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rb));else if(r!==4&&(e=e.child,e!==null))for(lT(e,t,n),e=e.sibling;e!==null;)lT(e,t,n),e=e.sibling}function cT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cT(e,t,n),e=e.sibling;e!==null;)cT(e,t,n),e=e.sibling}var lo=null,rc=!1;function Yd(e,t,n){for(n=n.child;n!==null;)uz(e,t,n),n=n.sibling}function uz(e,t,n){if(Jc&&typeof Jc.onCommitFiberUnmount=="function")try{Jc.onCommitFiberUnmount(B0,n)}catch{}switch(n.tag){case 5:Po||Tm(n,t);case 6:var r=lo,i=rc;lo=null,Yd(e,t,n),lo=r,rc=i,lo!==null&&(rc?(e=lo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lo.removeChild(n.stateNode));break;case 18:lo!==null&&(rc?(e=lo,n=n.stateNode,e.nodeType===8?qS(e.parentNode,n):e.nodeType===1&&qS(e,n),fv(e)):qS(lo,n.stateNode));break;case 4:r=lo,i=rc,lo=n.stateNode.containerInfo,rc=!0,Yd(e,t,n),lo=r,rc=i;break;case 0:case 11:case 14:case 15:if(!Po&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&oT(n,t,u),i=i.next}while(i!==r)}Yd(e,t,n);break;case 1:if(!Po&&(Tm(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){os(n,t,a)}Yd(e,t,n);break;case 21:Yd(e,t,n);break;case 22:n.mode&1?(Po=(r=Po)||n.memoizedState!==null,Yd(e,t,n),Po=r):Yd(e,t,n);break;default:Yd(e,t,n)}}function lL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new u8),t.forEach(function(r){var i=x8.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=e,u=t,a=u;e:for(;a!==null;){switch(a.tag){case 5:lo=a.stateNode,rc=!1;break e;case 3:lo=a.stateNode.containerInfo,rc=!0;break e;case 4:lo=a.stateNode.containerInfo,rc=!0;break e}a=a.return}if(lo===null)throw Error(Ht(160));uz(l,u,i),lo=null,rc=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(g){os(i,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dz(t,e),t=t.sibling}function dz(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tc(t,e),Vc(e),r&4){try{qy(3,e,e.return),W0(3,e)}catch(z){os(e,e.return,z)}try{qy(5,e,e.return)}catch(z){os(e,e.return,z)}}break;case 1:tc(t,e),Vc(e),r&512&&n!==null&&Tm(n,n.return);break;case 5:if(tc(t,e),Vc(e),r&512&&n!==null&&Tm(n,n.return),e.flags&32){var i=e.stateNode;try{cv(i,"")}catch(z){os(e,e.return,z)}}if(r&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,u=n!==null?n.memoizedProps:l,a=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&MN(i,l),MC(a,u);var g=MC(a,l);for(u=0;u<m.length;u+=2){var w=m[u],C=m[u+1];w==="style"?zN(i,C):w==="dangerouslySetInnerHTML"?NN(i,C):w==="children"?cv(i,C):Ck(i,w,C,g)}switch(a){case"input":PC(i,l);break;case"textarea":ON(i,l);break;case"select":var P=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var I=l.value;I!=null?Om(i,!!l.multiple,I,!1):P!==!!l.multiple&&(l.defaultValue!=null?Om(i,!!l.multiple,l.defaultValue,!0):Om(i,!!l.multiple,l.multiple?[]:"",!1))}i[vv]=l}catch(z){os(e,e.return,z)}}break;case 6:if(tc(t,e),Vc(e),r&4){if(e.stateNode===null)throw Error(Ht(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(z){os(e,e.return,z)}}break;case 3:if(tc(t,e),Vc(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fv(t.containerInfo)}catch(z){os(e,e.return,z)}break;case 4:tc(t,e),Vc(e);break;case 13:tc(t,e),Vc(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(iP=ps())),r&4&&lL(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(Po=(g=Po)||w,tc(t,e),Po=g):tc(t,e),Vc(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!w&&e.mode&1)for(jn=e,w=e.child;w!==null;){for(C=jn=w;jn!==null;){switch(P=jn,I=P.child,P.tag){case 0:case 11:case 14:case 15:qy(4,P,P.return);break;case 1:Tm(P,P.return);var N=P.stateNode;if(typeof N.componentWillUnmount=="function"){r=P,n=P.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(z){os(r,n,z)}}break;case 5:Tm(P,P.return);break;case 22:if(P.memoizedState!==null){uL(C);continue}}I!==null?(I.return=P,jn=I):uL(C)}w=w.sibling}e:for(w=null,C=e;;){if(C.tag===5){if(w===null){w=C;try{i=C.stateNode,g?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=C.stateNode,m=C.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,a.style.display=jN("display",u))}catch(z){os(e,e.return,z)}}}else if(C.tag===6){if(w===null)try{C.stateNode.nodeValue=g?"":C.memoizedProps}catch(z){os(e,e.return,z)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;w===C&&(w=null),C=C.return}w===C&&(w=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:tc(t,e),Vc(e),r&4&&lL(e);break;case 21:break;default:tc(t,e),Vc(e)}}function Vc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(cz(n)){var r=n;break e}n=n.return}throw Error(Ht(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cv(i,""),r.flags&=-33);var l=aL(e);cT(e,l,i);break;case 3:case 4:var u=r.stateNode.containerInfo,a=aL(e);lT(e,a,u);break;default:throw Error(Ht(161))}}catch(m){os(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function h8(e,t,n){jn=e,hz(e)}function hz(e,t,n){for(var r=(e.mode&1)!==0;jn!==null;){var i=jn,l=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||Dx;if(!u){var a=i.alternate,m=a!==null&&a.memoizedState!==null||Po;a=Dx;var g=Po;if(Dx=u,(Po=m)&&!g)for(jn=i;jn!==null;)u=jn,m=u.child,u.tag===22&&u.memoizedState!==null?dL(i):m!==null?(m.return=u,jn=m):dL(i);for(;l!==null;)jn=l,hz(l),l=l.sibling;jn=i,Dx=a,Po=g}cL(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,jn=l):cL(e)}}function cL(e){for(;jn!==null;){var t=jn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Po||W0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Po)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&G2(t,l,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}G2(t,u,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var C=w.dehydrated;C!==null&&fv(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ht(163))}Po||t.flags&512&&aT(t)}catch(P){os(t,t.return,P)}}if(t===e){jn=null;break}if(n=t.sibling,n!==null){n.return=t.return,jn=n;break}jn=t.return}}function uL(e){for(;jn!==null;){var t=jn;if(t===e){jn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,jn=n;break}jn=t.return}}function dL(e){for(;jn!==null;){var t=jn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{W0(4,t)}catch(m){os(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(m){os(t,i,m)}}var l=t.return;try{aT(t)}catch(m){os(t,l,m)}break;case 5:var u=t.return;try{aT(t)}catch(m){os(t,u,m)}}}catch(m){os(t,t.return,m)}if(t===e){jn=null;break}var a=t.sibling;if(a!==null){a.return=t.return,jn=a;break}jn=t.return}}var f8=Math.ceil,$b=cd.ReactCurrentDispatcher,nP=cd.ReactCurrentOwner,wl=cd.ReactCurrentBatchConfig,Hr=0,Ks=null,Ss=null,ho=0,$a=0,km=Jh(0),Ns=0,Ev=null,rp=0,X0=0,rP=0,Gy=null,va=null,iP=0,lg=1/0,Fu=null,Vb=!1,uT=null,Ph=null,Nx=!1,vh=null,Hb=0,Wy=0,dT=null,ab=-1,lb=0;function Zo(){return Hr&6?ps():ab!==-1?ab:ab=ps()}function Ah(e){return e.mode&1?Hr&2&&ho!==0?ho&-ho:KH.transition!==null?(lb===0&&(lb=KN()),lb):(e=ii,e!==0||(e=window.event,e=e===void 0?16:rj(e.type)),e):1}function mc(e,t,n,r){if(50<Wy)throw Wy=0,dT=null,Error(Ht(185));p_(e,n,r),(!(Hr&2)||e!==Ks)&&(e===Ks&&(!(Hr&2)&&(X0|=n),Ns===4&&ch(e,ho)),Ea(e,r),n===1&&Hr===0&&!(t.mode&1)&&(lg=ps()+500,Z0&&ef()))}function Ea(e,t){var n=e.callbackNode;K6(e,t);var r=kb(e,e===Ks?ho:0);if(r===0)n!==null&&x2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&x2(n),t===1)e.tag===0?XH(hL.bind(null,e)):wj(hL.bind(null,e)),ZH(function(){!(Hr&6)&&ef()}),n=null;else{switch(YN(r)){case 1:n=Ik;break;case 4:n=WN;break;case 16:n=Tb;break;case 536870912:n=XN;break;default:n=Tb}n=xz(n,fz.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fz(e,t){if(ab=-1,lb=0,Hr&6)throw Error(Ht(327));var n=e.callbackNode;if(Fm()&&e.callbackNode!==n)return null;var r=kb(e,e===Ks?ho:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zb(e,r);else{t=r;var i=Hr;Hr|=2;var l=mz();(Ks!==e||ho!==t)&&(Fu=null,lg=ps()+500,Gf(e,t));do try{g8();break}catch(a){pz(e,a)}while(!0);Vk(),$b.current=l,Hr=i,Ss!==null?t=0:(Ks=null,ho=0,t=Ns)}if(t!==0){if(t===2&&(i=zC(e),i!==0&&(r=i,t=hT(e,i))),t===1)throw n=Ev,Gf(e,0),ch(e,r),Ea(e,ps()),n;if(t===6)ch(e,r);else{if(i=e.current.alternate,!(r&30)&&!p8(i)&&(t=Zb(e,r),t===2&&(l=zC(e),l!==0&&(r=l,t=hT(e,l))),t===1))throw n=Ev,Gf(e,0),ch(e,r),Ea(e,ps()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ht(345));case 2:Rf(e,va,Fu);break;case 3:if(ch(e,r),(r&130023424)===r&&(t=iP+500-ps(),10<t)){if(kb(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qC(Rf.bind(null,e,va,Fu),t);break}Rf(e,va,Fu);break;case 4:if(ch(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-pc(r);l=1<<u,u=t[u],u>i&&(i=u),r&=~l}if(r=i,r=ps()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f8(r/1960))-r,10<r){e.timeoutHandle=qC(Rf.bind(null,e,va,Fu),r);break}Rf(e,va,Fu);break;case 5:Rf(e,va,Fu);break;default:throw Error(Ht(329))}}}return Ea(e,ps()),e.callbackNode===n?fz.bind(null,e):null}function hT(e,t){var n=Gy;return e.current.memoizedState.isDehydrated&&(Gf(e,t).flags|=256),e=Zb(e,t),e!==2&&(t=va,va=n,t!==null&&fT(t)),e}function fT(e){va===null?va=e:va.push.apply(va,e)}function p8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!vc(l(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ch(e,t){for(t&=~rP,t&=~X0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pc(t),r=1<<n;e[n]=-1,t&=~r}}function hL(e){if(Hr&6)throw Error(Ht(327));Fm();var t=kb(e,0);if(!(t&1))return Ea(e,ps()),null;var n=Zb(e,t);if(e.tag!==0&&n===2){var r=zC(e);r!==0&&(t=r,n=hT(e,r))}if(n===1)throw n=Ev,Gf(e,0),ch(e,t),Ea(e,ps()),n;if(n===6)throw Error(Ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rf(e,va,Fu),Ea(e,ps()),null}function sP(e,t){var n=Hr;Hr|=1;try{return e(t)}finally{Hr=n,Hr===0&&(lg=ps()+500,Z0&&ef())}}function ip(e){vh!==null&&vh.tag===0&&!(Hr&6)&&Fm();var t=Hr;Hr|=1;var n=wl.transition,r=ii;try{if(wl.transition=null,ii=1,e)return e()}finally{ii=r,wl.transition=n,Hr=t,!(Hr&6)&&ef()}}function oP(){$a=km.current,Ri(km)}function Gf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,HH(n)),Ss!==null)for(n=Ss.return;n!==null;){var r=n;switch(Bk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lb();break;case 3:og(),Ri(wa),Ri(Io),Xk();break;case 5:Wk(r);break;case 4:og();break;case 13:Ri(Ki);break;case 19:Ri(Ki);break;case 10:Hk(r.type._context);break;case 22:case 23:oP()}n=n.return}if(Ks=e,Ss=e=Ih(e.current,null),ho=$a=t,Ns=0,Ev=null,rP=X0=rp=0,va=Gy=null,$f!==null){for(t=0;t<$f.length;t++)if(n=$f[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var u=l.next;l.next=i,r.next=u}n.pending=r}$f=null}return e}function pz(e,t){do{var n=Ss;try{if(Vk(),ib.current=Ub,Bb){for(var r=Yi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bb=!1}if(np=0,Xs=Os=Yi=null,Zy=!1,bv=0,nP.current=null,n===null||n.return===null){Ns=1,Ev=t,Ss=null;break}e:{var l=e,u=n.return,a=n,m=t;if(t=ho,a.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,w=a,C=w.tag;if(!(w.mode&1)&&(C===0||C===11||C===15)){var P=w.alternate;P?(w.updateQueue=P.updateQueue,w.memoizedState=P.memoizedState,w.lanes=P.lanes):(w.updateQueue=null,w.memoizedState=null)}var I=J2(u);if(I!==null){I.flags&=-257,eL(I,u,a,l,t),I.mode&1&&Q2(l,g,t),t=I,m=g;var N=t.updateQueue;if(N===null){var z=new Set;z.add(m),t.updateQueue=z}else N.add(m);break e}else{if(!(t&1)){Q2(l,g,t),aP();break e}m=Error(Ht(426))}}else if($i&&a.mode&1){var $=J2(u);if($!==null){!($.flags&65536)&&($.flags|=256),eL($,u,a,l,t),Uk(ag(m,a));break e}}l=m=ag(m,a),Ns!==4&&(Ns=2),Gy===null?Gy=[l]:Gy.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var H=Yj(l,m,t);q2(l,H);break e;case 1:a=m;var V=l.type,q=l.stateNode;if(!(l.flags&128)&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ph===null||!Ph.has(q)))){l.flags|=65536,t&=-t,l.lanes|=t;var te=Qj(l,a,t);q2(l,te);break e}}l=l.return}while(l!==null)}yz(n)}catch(ue){t=ue,Ss===n&&n!==null&&(Ss=n=n.return);continue}break}while(!0)}function mz(){var e=$b.current;return $b.current=Ub,e===null?Ub:e}function aP(){(Ns===0||Ns===3||Ns===2)&&(Ns=4),Ks===null||!(rp&268435455)&&!(X0&268435455)||ch(Ks,ho)}function Zb(e,t){var n=Hr;Hr|=2;var r=mz();(Ks!==e||ho!==t)&&(Fu=null,Gf(e,t));do try{m8();break}catch(i){pz(e,i)}while(!0);if(Vk(),Hr=n,$b.current=r,Ss!==null)throw Error(Ht(261));return Ks=null,ho=0,Ns}function m8(){for(;Ss!==null;)gz(Ss)}function g8(){for(;Ss!==null&&!U6();)gz(Ss)}function gz(e){var t=_z(e.alternate,e,$a);e.memoizedProps=e.pendingProps,t===null?yz(e):Ss=t,nP.current=null}function yz(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=c8(n,t),n!==null){n.flags&=32767,Ss=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ns=6,Ss=null;return}}else if(n=l8(n,t,$a),n!==null){Ss=n;return}if(t=t.sibling,t!==null){Ss=t;return}Ss=t=e}while(t!==null);Ns===0&&(Ns=5)}function Rf(e,t,n){var r=ii,i=wl.transition;try{wl.transition=null,ii=1,y8(e,t,n,r)}finally{wl.transition=i,ii=r}return null}function y8(e,t,n,r){do Fm();while(vh!==null);if(Hr&6)throw Error(Ht(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ht(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Y6(e,l),e===Ks&&(Ss=Ks=null,ho=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nx||(Nx=!0,xz(Tb,function(){return Fm(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=wl.transition,wl.transition=null;var u=ii;ii=1;var a=Hr;Hr|=4,nP.current=null,d8(e,n),dz(n,e),jH(HC),Pb=!!VC,HC=VC=null,e.current=n,h8(n),$6(),Hr=a,ii=u,wl.transition=l}else e.current=n;if(Nx&&(Nx=!1,vh=e,Hb=i),l=e.pendingLanes,l===0&&(Ph=null),Z6(n.stateNode),Ea(e,ps()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vb)throw Vb=!1,e=uT,uT=null,e;return Hb&1&&e.tag!==0&&Fm(),l=e.pendingLanes,l&1?e===dT?Wy++:(Wy=0,dT=e):Wy=0,ef(),null}function Fm(){if(vh!==null){var e=YN(Hb),t=wl.transition,n=ii;try{if(wl.transition=null,ii=16>e?16:e,vh===null)var r=!1;else{if(e=vh,vh=null,Hb=0,Hr&6)throw Error(Ht(331));var i=Hr;for(Hr|=4,jn=e.current;jn!==null;){var l=jn,u=l.child;if(jn.flags&16){var a=l.deletions;if(a!==null){for(var m=0;m<a.length;m++){var g=a[m];for(jn=g;jn!==null;){var w=jn;switch(w.tag){case 0:case 11:case 15:qy(8,w,l)}var C=w.child;if(C!==null)C.return=w,jn=C;else for(;jn!==null;){w=jn;var P=w.sibling,I=w.return;if(lz(w),w===g){jn=null;break}if(P!==null){P.return=I,jn=P;break}jn=I}}}var N=l.alternate;if(N!==null){var z=N.child;if(z!==null){N.child=null;do{var $=z.sibling;z.sibling=null,z=$}while(z!==null)}}jn=l}}if(l.subtreeFlags&2064&&u!==null)u.return=l,jn=u;else e:for(;jn!==null;){if(l=jn,l.flags&2048)switch(l.tag){case 0:case 11:case 15:qy(9,l,l.return)}var H=l.sibling;if(H!==null){H.return=l.return,jn=H;break e}jn=l.return}}var V=e.current;for(jn=V;jn!==null;){u=jn;var q=u.child;if(u.subtreeFlags&2064&&q!==null)q.return=u,jn=q;else e:for(u=V;jn!==null;){if(a=jn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:W0(9,a)}}catch(ue){os(a,a.return,ue)}if(a===u){jn=null;break e}var te=a.sibling;if(te!==null){te.return=a.return,jn=te;break e}jn=a.return}}if(Hr=i,ef(),Jc&&typeof Jc.onPostCommitFiberRoot=="function")try{Jc.onPostCommitFiberRoot(B0,e)}catch{}r=!0}return r}finally{ii=n,wl.transition=t}}return!1}function fL(e,t,n){t=ag(n,t),t=Yj(e,t,1),e=kh(e,t,1),t=Zo(),e!==null&&(p_(e,1,t),Ea(e,t))}function os(e,t,n){if(e.tag===3)fL(e,e,n);else for(;t!==null;){if(t.tag===3){fL(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ph===null||!Ph.has(r))){e=ag(n,e),e=Qj(t,e,1),t=kh(t,e,1),e=Zo(),t!==null&&(p_(t,1,e),Ea(t,e));break}}t=t.return}}function v8(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zo(),e.pingedLanes|=e.suspendedLanes&n,Ks===e&&(ho&n)===n&&(Ns===4||Ns===3&&(ho&130023424)===ho&&500>ps()-iP?Gf(e,0):rP|=n),Ea(e,t)}function vz(e,t){t===0&&(e.mode&1?(t=Tx,Tx<<=1,!(Tx&130023424)&&(Tx=4194304)):t=1);var n=Zo();e=td(e,t),e!==null&&(p_(e,t,n),Ea(e,n))}function _8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vz(e,n)}function x8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ht(314))}r!==null&&r.delete(t),vz(e,n)}var _z;_z=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wa.current)ba=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ba=!1,a8(e,t,n);ba=!!(e.flags&131072)}else ba=!1,$i&&t.flags&1048576&&Sj(t,Db,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ob(e,t),e=t.pendingProps;var i=rg(t,Io.current);zm(t,n),i=Yk(null,t,r,e,i,n);var l=Qk();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sa(r)?(l=!0,Mb(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qk(t),i.updater=G0,t.stateNode=i,i._reactInternals=t,JC(t,r,e,n),t=nT(null,t,r,!0,l,n)):(t.tag=0,$i&&l&&Fk(t),$o(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ob(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=w8(r),e=nc(r,e),i){case 0:t=tT(null,t,r,e,n);break e;case 1:t=rL(null,t,r,e,n);break e;case 11:t=tL(null,t,r,e,n);break e;case 14:t=nL(null,t,r,nc(r.type,e),n);break e}throw Error(Ht(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nc(r,i),tT(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nc(r,i),rL(e,t,r,i,n);case 3:e:{if(nz(t),e===null)throw Error(Ht(387));r=t.pendingProps,l=t.memoizedState,i=l.element,Aj(e,t),zb(t,r,null,n);var u=t.memoizedState;if(r=u.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=ag(Error(Ht(423)),t),t=iL(e,t,r,n,i);break e}else if(r!==i){i=ag(Error(Ht(424)),t),t=iL(e,t,r,n,i);break e}else for(Za=Th(t.stateNode.containerInfo.firstChild),Wa=t,$i=!0,ac=null,n=kj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ig(),r===i){t=nd(e,t,n);break e}$o(e,t,r,n)}t=t.child}return t;case 5:return Ij(t),e===null&&KC(t),r=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,u=i.children,ZC(r,i)?u=null:l!==null&&ZC(r,l)&&(t.flags|=32),tz(e,t),$o(e,t,u,n),t.child;case 6:return e===null&&KC(t),null;case 13:return rz(e,t,n);case 4:return Gk(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=sg(t,null,r,n):$o(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nc(r,i),tL(e,t,r,i,n);case 7:return $o(e,t,t.pendingProps,n),t.child;case 8:return $o(e,t,t.pendingProps.children,n),t.child;case 12:return $o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,l=t.memoizedProps,u=i.value,wi(Nb,r._currentValue),r._currentValue=u,l!==null)if(vc(l.value,u)){if(l.children===i.children&&!wa.current){t=nd(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){u=l.child;for(var m=a.firstContext;m!==null;){if(m.context===r){if(l.tag===1){m=Xu(-1,n&-n),m.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var w=g.pending;w===null?m.next=m:(m.next=w.next,w.next=m),g.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),YC(l.return,n,t),a.lanes|=n;break}m=m.next}}else if(l.tag===10)u=l.type===t.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error(Ht(341));u.lanes|=n,a=u.alternate,a!==null&&(a.lanes|=n),YC(u,n,t),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===t){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}$o(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zm(t,n),i=Sl(i),r=r(i),t.flags|=1,$o(e,t,r,n),t.child;case 14:return r=t.type,i=nc(r,t.pendingProps),i=nc(r.type,i),nL(e,t,r,i,n);case 15:return Jj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nc(r,i),ob(e,t),t.tag=1,Sa(r)?(e=!0,Mb(t)):e=!1,zm(t,n),Kj(t,r,i),JC(t,r,i,n),nT(null,t,r,!0,e,n);case 19:return iz(e,t,n);case 22:return ez(e,t,n)}throw Error(Ht(156,t.tag))};function xz(e,t){return GN(e,t)}function b8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xl(e,t,n,r){return new b8(e,t,n,r)}function lP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function w8(e){if(typeof e=="function")return lP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kk)return 11;if(e===Pk)return 14}return 2}function Ih(e,t){var n=e.alternate;return n===null?(n=xl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cb(e,t,n,r,i,l){var u=2;if(r=e,typeof e=="function")lP(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case ym:return Wf(n.children,i,l,t);case Tk:u=8,i|=8;break;case SC:return e=xl(12,n,t,i|2),e.elementType=SC,e.lanes=l,e;case EC:return e=xl(13,n,t,i),e.elementType=EC,e.lanes=l,e;case CC:return e=xl(19,n,t,i),e.elementType=CC,e.lanes=l,e;case IN:return K0(n,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PN:u=10;break e;case AN:u=9;break e;case kk:u=11;break e;case Pk:u=14;break e;case sh:u=16,r=null;break e}throw Error(Ht(130,e==null?e:typeof e,""))}return t=xl(u,n,t,i),t.elementType=e,t.type=r,t.lanes=l,t}function Wf(e,t,n,r){return e=xl(7,e,r,t),e.lanes=n,e}function K0(e,t,n,r){return e=xl(22,e,r,t),e.elementType=IN,e.lanes=n,e.stateNode={isHidden:!1},e}function eE(e,t,n){return e=xl(6,e,null,t),e.lanes=n,e}function tE(e,t,n){return t=xl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S8(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DS(0),this.expirationTimes=DS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cP(e,t,n,r,i,l,u,a,m){return e=new S8(e,t,n,a,m),t===1?(t=1,l===!0&&(t|=8)):t=0,l=xl(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qk(l),e}function E8(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bz(e){if(!e)return zh;e=e._reactInternals;e:{if(xp(e)!==e||e.tag!==1)throw Error(Ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ht(171))}if(e.tag===1){var n=e.type;if(Sa(n))return bj(e,n,t)}return t}function wz(e,t,n,r,i,l,u,a,m){return e=cP(n,r,!0,e,i,l,u,a,m),e.context=bz(null),n=e.current,r=Zo(),i=Ah(n),l=Xu(r,i),l.callback=t??null,kh(n,l,i),e.current.lanes=i,p_(e,i,r),Ea(e,r),e}function Y0(e,t,n,r){var i=t.current,l=Zo(),u=Ah(i);return n=bz(n),t.context===null?t.context=n:t.pendingContext=n,t=Xu(l,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kh(i,t,u),e!==null&&(mc(e,i,u,l),rb(e,i,u)),u}function qb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uP(e,t){pL(e,t),(e=e.alternate)&&pL(e,t)}function C8(){return null}var Sz=typeof reportError=="function"?reportError:function(e){console.error(e)};function dP(e){this._internalRoot=e}Q0.prototype.render=dP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ht(409));Y0(e,t,null,null)};Q0.prototype.unmount=dP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ip(function(){Y0(null,e,null,null)}),t[ed]=null}};function Q0(e){this._internalRoot=e}Q0.prototype.unstable_scheduleHydration=function(e){if(e){var t=ej();e={blockedOn:null,target:e,priority:t};for(var n=0;n<lh.length&&t!==0&&t<lh[n].priority;n++);lh.splice(n,0,e),n===0&&nj(e)}};function hP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function J0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mL(){}function T8(e,t,n,r,i){if(i){if(typeof r=="function"){var l=r;r=function(){var g=qb(u);l.call(g)}}var u=wz(t,r,e,0,null,!1,!1,"",mL);return e._reactRootContainer=u,e[ed]=u.current,gv(e.nodeType===8?e.parentNode:e),ip(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var g=qb(m);a.call(g)}}var m=cP(e,0,!1,null,null,!1,!1,"",mL);return e._reactRootContainer=m,e[ed]=m.current,gv(e.nodeType===8?e.parentNode:e),ip(function(){Y0(t,m,n,r)}),m}function ew(e,t,n,r,i){var l=n._reactRootContainer;if(l){var u=l;if(typeof i=="function"){var a=i;i=function(){var m=qb(u);a.call(m)}}Y0(t,u,e,i)}else u=T8(n,t,e,i,r);return qb(u)}QN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Iy(t.pendingLanes);n!==0&&(Rk(t,n|1),Ea(t,ps()),!(Hr&6)&&(lg=ps()+500,ef()))}break;case 13:ip(function(){var r=td(e,1);if(r!==null){var i=Zo();mc(r,e,1,i)}}),uP(e,1)}};Lk=function(e){if(e.tag===13){var t=td(e,134217728);if(t!==null){var n=Zo();mc(t,e,134217728,n)}uP(e,134217728)}};JN=function(e){if(e.tag===13){var t=Ah(e),n=td(e,t);if(n!==null){var r=Zo();mc(n,e,t,r)}uP(e,t)}};ej=function(){return ii};tj=function(e,t){var n=ii;try{return ii=e,t()}finally{ii=n}};DC=function(e,t,n){switch(t){case"input":if(PC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=H0(r);if(!i)throw Error(Ht(90));LN(r),PC(r,i)}}}break;case"textarea":ON(e,n);break;case"select":t=n.value,t!=null&&Om(e,!!n.multiple,t,!1)}};UN=sP;$N=ip;var k8={usingClientEntryPoint:!1,Events:[g_,bm,H0,FN,BN,sP]},my={findFiberByHostInstance:Uf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P8={bundleType:my.bundleType,version:my.version,rendererPackageName:my.rendererPackageName,rendererConfig:my.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ZN(e),e===null?null:e.stateNode},findFiberByHostInstance:my.findFiberByHostInstance||C8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jx.isDisabled&&jx.supportsFiber)try{B0=jx.inject(P8),Jc=jx}catch{}}el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k8;el.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hP(t))throw Error(Ht(200));return E8(e,t,null,n)};el.createRoot=function(e,t){if(!hP(e))throw Error(Ht(299));var n=!1,r="",i=Sz;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cP(e,1,!1,null,null,n,!1,r,i),e[ed]=t.current,gv(e.nodeType===8?e.parentNode:e),new dP(t)};el.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ht(188)):(e=Object.keys(e).join(","),Error(Ht(268,e)));return e=ZN(t),e=e===null?null:e.stateNode,e};el.flushSync=function(e){return ip(e)};el.hydrate=function(e,t,n){if(!J0(t))throw Error(Ht(200));return ew(null,e,t,!0,n)};el.hydrateRoot=function(e,t,n){if(!hP(e))throw Error(Ht(405));var r=n!=null&&n.hydratedSources||null,i=!1,l="",u=Sz;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=wz(t,null,e,1,n??null,i,!1,l,u),e[ed]=t.current,gv(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Q0(t)};el.render=function(e,t,n){if(!J0(t))throw Error(Ht(200));return ew(null,e,t,!1,n)};el.unmountComponentAtNode=function(e){if(!J0(e))throw Error(Ht(40));return e._reactRootContainer?(ip(function(){ew(null,null,e,!1,function(){e._reactRootContainer=null,e[ed]=null})}),!0):!1};el.unstable_batchedUpdates=sP;el.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!J0(n))throw Error(Ht(200));if(e==null||e._reactInternals===void 0)throw Error(Ht(38));return ew(e,t,n,!1,r)};el.version="18.3.1-next-f1338f8080-20240426";function Ez(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ez)}catch(e){console.error(e)}}Ez(),EN.exports=el;var Ca=EN.exports;const A8=uu(Ca),I8=dN({__proto__:null,default:A8},[Ca]);var Cz,gL=Ca;Cz=gL.createRoot,gL.hydrateRoot;var Tz={exports:{}},kz={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=M;function R8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L8=typeof Object.is=="function"?Object.is:R8,M8=cg.useState,O8=cg.useEffect,D8=cg.useLayoutEffect,N8=cg.useDebugValue;function j8(e,t){var n=t(),r=M8({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return D8(function(){i.value=n,i.getSnapshot=t,nE(i)&&l({inst:i})},[e,n,t]),O8(function(){return nE(i)&&l({inst:i}),e(function(){nE(i)&&l({inst:i})})},[e]),N8(n),n}function nE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!L8(e,n)}catch{return!0}}function z8(e,t){return t()}var F8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?z8:j8;kz.useSyncExternalStore=cg.useSyncExternalStore!==void 0?cg.useSyncExternalStore:F8;Tz.exports=kz;var B8=Tz.exports,Pz={exports:{}},Az={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw=M,U8=B8;function $8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var V8=typeof Object.is=="function"?Object.is:$8,H8=U8.useSyncExternalStore,Z8=tw.useRef,q8=tw.useEffect,G8=tw.useMemo,W8=tw.useDebugValue;Az.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var l=Z8(null);if(l.current===null){var u={hasValue:!1,value:null};l.current=u}else u=l.current;l=G8(function(){function m(I){if(!g){if(g=!0,w=I,I=r(I),i!==void 0&&u.hasValue){var N=u.value;if(i(N,I))return C=N}return C=I}if(N=C,V8(w,I))return N;var z=r(I);return i!==void 0&&i(N,z)?(w=I,N):(w=I,C=z)}var g=!1,w,C,P=n===void 0?null:n;return[function(){return m(t())},P===null?void 0:function(){return m(P())}]},[t,n,r,i]);var a=H8(e,l[0],l[1]);return q8(function(){u.hasValue=!0,u.value=a},[a]),W8(a),a};Pz.exports=Az;var X8=Pz.exports;function K8(e){e()}let Iz=K8;const Y8=e=>Iz=e,Q8=()=>Iz,yL=Symbol.for("react-redux-context"),vL=typeof globalThis<"u"?globalThis:{};function J8(){var e;if(!M.createContext)return{};const t=(e=vL[yL])!=null?e:vL[yL]=new Map;let n=t.get(M.createContext);return n||(n=M.createContext(null),t.set(M.createContext,n)),n}const Fh=J8();function fP(e=Fh){return function(){return M.useContext(e)}}const Rz=fP(),eZ=()=>{throw new Error("uSES not initialized!")};let Lz=eZ;const tZ=e=>{Lz=e},nZ=(e,t)=>e===t;function rZ(e=Fh){const t=e===Fh?Rz:fP(e);return function(r,i={}){const{equalityFn:l=nZ,stabilityCheck:u=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:m,subscription:g,getServerState:w,stabilityCheck:C,noopCheck:P}=t();M.useRef(!0);const I=M.useCallback({[r.name](z){return r(z)}}[r.name],[r,C,u]),N=Lz(g.addNestedSub,m.getState,w||m.getState,I,l);return M.useDebugValue(N),N}}const iZ=rZ();var Mz={exports:{}},si={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=typeof Symbol=="function"&&Symbol.for,pP=Ys?Symbol.for("react.element"):60103,mP=Ys?Symbol.for("react.portal"):60106,nw=Ys?Symbol.for("react.fragment"):60107,rw=Ys?Symbol.for("react.strict_mode"):60108,iw=Ys?Symbol.for("react.profiler"):60114,sw=Ys?Symbol.for("react.provider"):60109,ow=Ys?Symbol.for("react.context"):60110,gP=Ys?Symbol.for("react.async_mode"):60111,aw=Ys?Symbol.for("react.concurrent_mode"):60111,lw=Ys?Symbol.for("react.forward_ref"):60112,cw=Ys?Symbol.for("react.suspense"):60113,sZ=Ys?Symbol.for("react.suspense_list"):60120,uw=Ys?Symbol.for("react.memo"):60115,dw=Ys?Symbol.for("react.lazy"):60116,oZ=Ys?Symbol.for("react.block"):60121,aZ=Ys?Symbol.for("react.fundamental"):60117,lZ=Ys?Symbol.for("react.responder"):60118,cZ=Ys?Symbol.for("react.scope"):60119;function nl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pP:switch(e=e.type,e){case gP:case aw:case nw:case iw:case rw:case cw:return e;default:switch(e=e&&e.$$typeof,e){case ow:case lw:case dw:case uw:case sw:return e;default:return t}}case mP:return t}}}function Oz(e){return nl(e)===aw}si.AsyncMode=gP;si.ConcurrentMode=aw;si.ContextConsumer=ow;si.ContextProvider=sw;si.Element=pP;si.ForwardRef=lw;si.Fragment=nw;si.Lazy=dw;si.Memo=uw;si.Portal=mP;si.Profiler=iw;si.StrictMode=rw;si.Suspense=cw;si.isAsyncMode=function(e){return Oz(e)||nl(e)===gP};si.isConcurrentMode=Oz;si.isContextConsumer=function(e){return nl(e)===ow};si.isContextProvider=function(e){return nl(e)===sw};si.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pP};si.isForwardRef=function(e){return nl(e)===lw};si.isFragment=function(e){return nl(e)===nw};si.isLazy=function(e){return nl(e)===dw};si.isMemo=function(e){return nl(e)===uw};si.isPortal=function(e){return nl(e)===mP};si.isProfiler=function(e){return nl(e)===iw};si.isStrictMode=function(e){return nl(e)===rw};si.isSuspense=function(e){return nl(e)===cw};si.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===nw||e===aw||e===iw||e===rw||e===cw||e===sZ||typeof e=="object"&&e!==null&&(e.$$typeof===dw||e.$$typeof===uw||e.$$typeof===sw||e.$$typeof===ow||e.$$typeof===lw||e.$$typeof===aZ||e.$$typeof===lZ||e.$$typeof===cZ||e.$$typeof===oZ)};si.typeOf=nl;Mz.exports=si;var uZ=Mz.exports,yP=uZ,dZ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hZ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fZ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Dz={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vP={};vP[yP.ForwardRef]=fZ;vP[yP.Memo]=Dz;function _L(e){return yP.isMemo(e)?Dz:vP[e.$$typeof]||dZ}var pZ=Object.defineProperty,mZ=Object.getOwnPropertyNames,xL=Object.getOwnPropertySymbols,gZ=Object.getOwnPropertyDescriptor,yZ=Object.getPrototypeOf,bL=Object.prototype;function Nz(e,t,n){if(typeof t!="string"){if(bL){var r=yZ(t);r&&r!==bL&&Nz(e,r,n)}var i=mZ(t);xL&&(i=i.concat(xL(t)));for(var l=_L(e),u=_L(t),a=0;a<i.length;++a){var m=i[a];if(!hZ[m]&&!(n&&n[m])&&!(u&&u[m])&&!(l&&l[m])){var g=gZ(t,m);try{pZ(e,m,g)}catch{}}}}return e}var vZ=Nz;const jz=uu(vZ);var fi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P=Symbol.for("react.element"),xP=Symbol.for("react.portal"),hw=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),pw=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),gw=Symbol.for("react.context"),_Z=Symbol.for("react.server_context"),yw=Symbol.for("react.forward_ref"),vw=Symbol.for("react.suspense"),_w=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),bw=Symbol.for("react.lazy"),xZ=Symbol.for("react.offscreen"),zz;zz=Symbol.for("react.module.reference");function Il(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _P:switch(e=e.type,e){case hw:case pw:case fw:case vw:case _w:return e;default:switch(e=e&&e.$$typeof,e){case _Z:case gw:case yw:case bw:case xw:case mw:return e;default:return t}}case xP:return t}}}fi.ContextConsumer=gw;fi.ContextProvider=mw;fi.Element=_P;fi.ForwardRef=yw;fi.Fragment=hw;fi.Lazy=bw;fi.Memo=xw;fi.Portal=xP;fi.Profiler=pw;fi.StrictMode=fw;fi.Suspense=vw;fi.SuspenseList=_w;fi.isAsyncMode=function(){return!1};fi.isConcurrentMode=function(){return!1};fi.isContextConsumer=function(e){return Il(e)===gw};fi.isContextProvider=function(e){return Il(e)===mw};fi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_P};fi.isForwardRef=function(e){return Il(e)===yw};fi.isFragment=function(e){return Il(e)===hw};fi.isLazy=function(e){return Il(e)===bw};fi.isMemo=function(e){return Il(e)===xw};fi.isPortal=function(e){return Il(e)===xP};fi.isProfiler=function(e){return Il(e)===pw};fi.isStrictMode=function(e){return Il(e)===fw};fi.isSuspense=function(e){return Il(e)===vw};fi.isSuspenseList=function(e){return Il(e)===_w};fi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hw||e===pw||e===fw||e===vw||e===_w||e===xZ||typeof e=="object"&&e!==null&&(e.$$typeof===bw||e.$$typeof===xw||e.$$typeof===mw||e.$$typeof===gw||e.$$typeof===yw||e.$$typeof===zz||e.getModuleId!==void 0)};fi.typeOf=Il;function bZ(){const e=Q8();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,l=n={callback:r,next:null,prev:n};return l.prev?l.prev.next=l:t=l,function(){!i||t===null||(i=!1,l.next?l.next.prev=l.prev:n=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}const wL={notify(){},get:()=>[]};function wZ(e,t){let n,r=wL,i=0,l=!1;function u(z){w();const $=r.subscribe(z);let H=!1;return()=>{H||(H=!0,$(),C())}}function a(){r.notify()}function m(){N.onStateChange&&N.onStateChange()}function g(){return l}function w(){i++,n||(n=e.subscribe(m),r=bZ())}function C(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=wL)}function P(){l||(l=!0,w())}function I(){l&&(l=!1,C())}const N={addNestedSub:u,notifyNestedSubs:a,handleChangeWrapper:m,isSubscribed:g,trySubscribe:P,tryUnsubscribe:I,getListeners:()=>r};return N}const SZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EZ=SZ?M.useLayoutEffect:M.useEffect;function CZ({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:l="once"}){const u=M.useMemo(()=>{const g=wZ(e);return{store:e,subscription:g,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:l}},[e,r,i,l]),a=M.useMemo(()=>e.getState(),[e]);EZ(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),a!==e.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,a]);const m=t||Fh;return M.createElement(m.Provider,{value:u},n)}function Fz(e=Fh){const t=e===Fh?Rz:fP(e);return function(){const{store:r}=t();return r}}const TZ=Fz();function kZ(e=Fh){const t=e===Fh?TZ:Fz(e);return function(){return t().dispatch}}const PZ=kZ();tZ(X8.useSyncExternalStoreWithSelector);Y8(Ca.unstable_batchedUpdates);const Lf=["DateSelection","HotelSelection","RoomSelection","ExtraSelection","Summary","Confirmation"],om=["/DateSelection","/HotelSelection","/RoomSelection","/ExtraSelection","/Summary","/Confirmation"],Jn={dateSelection:{name:Lf[0],path:om[0]},hotelSelection:{name:Lf[1],path:om[1]},roomSelection:{name:Lf[2],path:om[2]},extraSelection:{name:Lf[3],path:om[3]},summary:{name:Lf[4],path:om[4]},confirmation:{name:Lf[5],path:om[5]}};class Yc{constructor(){if(this._storage=localStorage.getItem("dedgebe"),this._storage){const t=JSON.parse(this._storage);t.beid&&(this._beId=t.beid)}}static getInstance(){return Yc._instance||(Yc._instance=new Yc),Yc._instance}get beId(){return this._beId}baseUrl(){return`/insite/${this._beId}`}isInsite(){return this._beId!==null&&this._beId!==void 0&&this._beId!==""}}const SL={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"./",VITE_REACT_APP_CONVERGENCE_API_PREFIX:"d-edgebackend",VITE_REACT_APP_CONVERGENCE_API_URL:"https://www.secure-hotel-booking.com",VITE_REACT_APP_CONVERGENCE_BUGSNAG_API_KEY:"597452276fb277934c42360b43a92b1f",VITE_REACT_APP_CONVERGENCE_HOSTING_PREFIX:"d-edge",VITE_REACT_APP_GRAFANA_CLOUD_API_KEY:"310ed4e0fe2b52a95fab777e7574e8fc",VITE_REACT_APP_GRAFANA_CLOUD_ENV:"prd.main",VITE_REACT_APP_RUM_ACTIVATION:"true"},AZ=e=>e.startsWith('"')?JSON.parse(e):e,gc=e=>{try{if(!SL[e])throw new Error("Unknown environment variable");return AZ(SL[e])}catch{throw new Error("Unknown environment variable")}};class v_{constructor(t){this.beRefHotelIdPathPattern=/([A-Z0-9]+)-(\d{3,})/g,this.pages=new Array("Confirmation").concat(Lf),this.removePageInPath=n=>{const r=this.indexOfPageInPath(n);return r>-1?n.substring(0,r):n},this.location=t}needsCleaningAtStart(){return this.isSearchInPath()||this.hasBeRefHotelIdPath()}toCleanedApplicationStartUrl(){return this.chainFunctions(this.removeTrailingSearchPath,this.parseBeRefHotelIdHref,this.removeTrailingSlash,this.removeHotelId,this.removeTrailingSlash)(this.location.href)}toRoutingBaseName(){return this.chainFunctions(this.removeTrailingSearchPath,this.removePageInPath,this.removeTrailingSlash,this.removeTrailingCulture,this.removeTrailingSlash,this.parseBeRefHotelIdPath,this.removeHotelId,this.removeTrailingSlash)(this.location.pathname)}isPageInPath(){return this.indexOfPageInPath(this.location.pathname)>-1}toBackend(){const{searchParams:t}=new URL(this.location.href),n=this.isFromConvergence()?"":Array.from(t.entries()).reduce((l,u)=>({...l,[u[0]]:u[1]}),{}),r=this.baseUrl(),i=`/${gc("VITE_REACT_APP_CONVERGENCE_API_PREFIX")}${r}`;return Object.keys(n).length===0&&!this.isPageInPath()?{path:i,queries:{nosession:"true"}}:{path:i,queries:n}}toQueries(){return this.location.search}ToQueriesWithout(t){const n=new URL(this.location.href);return t.forEach(r=>n.searchParams.delete(r)),n.search}isSearchInPath(){return!!RegExp(/(\/search)(?!.*\1)/).exec(this.location.href)}hasBeRefHotelIdPath(){return!!RegExp(this.beRefHotelIdPathPattern).exec(this.location.pathname)}indexOfPageInPath(t){const n=new RegExp(this.pages.join("|")),r=RegExp(n).exec(t);return(r==null?void 0:r.index)??-1}baseUrl(){return Yc.getInstance().isInsite()?Yc.getInstance().baseUrl():this.removePageInPath(this.location.pathname).replace(gc("VITE_REACT_APP_CONVERGENCE_HOSTING_PREFIX"),"").replace("//","/")}removeTrailingSearchPath(t){const n=/(\/search)(?!.*\1)/;return t.replace(n,"")}removeTrailingSlash(t){return t.replace(/\/+$/,"")}removeTrailingCulture(t){const n=/\/([a-z]{2}(-[A-Z]{2})?)$/;return n.test(t)&&(t=t.replace(n,"")),t}parseBeRefHotelIdHref(t){const n=/([A-Z0-9]+)-(\d{3,})/g,r=new URL(t);return new URL(r.pathname.replace(n,"$1/$2"),r.origin).href+r.search}parseBeRefHotelIdPath(t){const n=/([A-Z0-9]+)-(\d{3,})/g;return t.replace(n,"$1/$2")}removeHotelId(t){const n=/\/\d{1,10}$/;return n.test(t)&&(t=t.replace(n,"")),t}chainFunctions(...t){return n=>t.reduce((r,i)=>i(r),n)}isFromConvergence(){var n;return((n=new URLSearchParams(this.location.search).get("dedgeapplication"))==null?void 0:n.toLowerCase())==="convergence"}}let Gb={interpolation:{prefix:"{{",suffix:"}}"},locale:"en-GB",tags:{},tagTransformer:(e,t,n)=>[e,t,n].filter(r=>r).join("/"),tagPlaceholder:e=>`[${e}]`};const IZ=e=>{Gb={...Gb,...e},document.dispatchEvent(new CustomEvent("React.Translation.Change"))},pT=()=>Gb,RZ=M.createContext(Gb),LZ=RZ.Provider,MZ=({tag:e,tags:t,tagTransformer:n,tagPlaceholder:r,product:i,page:l,onTagNotFound:u,locale:a,plural:m})=>{const g=n(i,l,e),w=typeof m=="number",C=w&&new Intl.PluralRules(a).select(m),P=w?`${g}_${C}`:g;return!Object.keys(t).length||!t[P]?(u&&u(P),r(P)):t[P]},OZ=(e,t,n)=>{const{prefix:r,suffix:i}=t;let l=e;return n&&Object.entries(n).forEach(([u,a])=>l=l.replace(`${r}${u}${i}`,a.toString())),l};function DZ(e,t){return typeof e=="string"&&(e={tag:e}),OZ(MZ({...t,...e}),t.interpolation,e.interpolate)}function NZ(e){const t=pT();return DZ(e,t)}const jZ=({children:e})=>{const[t,n]=M.useState(pT()),r=()=>n(pT());return M.useEffect(()=>(document.addEventListener("React.Translation.Change",r),()=>document.removeEventListener("React.Translation.Change",r))),y.jsx(LZ,{value:t,children:e})};function uc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sp(e){return!!e&&!!e[Bi]}function op(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===qZ}(e)||Array.isArray(e)||!!e[IL]||!!(!((t=e.constructor)===null||t===void 0)&&t[IL])||bP(e)||wP(e))}function ap(e,t,n){n===void 0&&(n=!1),Eg(e)===0?(n?Object.keys:Um)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Eg(e){var t=e[Bi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:bP(e)?2:wP(e)?3:0}function Bm(e,t){return Eg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zZ(e,t){return Eg(e)===2?e.get(t):e[t]}function Bz(e,t,n){var r=Eg(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Uz(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function bP(e){return HZ&&e instanceof Map}function wP(e){return ZZ&&e instanceof Set}function Mf(e){return e.o||e.t}function SP(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Vz(e);delete t[Bi];for(var n=Um(t),r=0;r<n.length;r++){var i=n[r],l=t[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(t[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function EP(e,t){return t===void 0&&(t=!1),CP(e)||sp(e)||!op(e)||(Eg(e)>1&&(e.set=e.add=e.clear=e.delete=FZ),Object.freeze(e),t&&ap(e,function(n,r){return EP(r,!0)},!0)),e}function FZ(){uc(2)}function CP(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function tu(e){var t=vT[e];return t||uc(18,e),t}function BZ(e,t){vT[e]||(vT[e]=t)}function mT(){return Cv}function rE(e,t){t&&(tu("Patches"),e.u=[],e.s=[],e.v=t)}function Wb(e){gT(e),e.p.forEach(UZ),e.p=null}function gT(e){e===Cv&&(Cv=e.l)}function EL(e){return Cv={p:[],l:Cv,h:e,m:!0,_:0}}function UZ(e){var t=e[Bi];t.i===0||t.i===1?t.j():t.g=!0}function iE(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||tu("ES5").S(t,e,r),r?(n[Bi].P&&(Wb(t),uc(4)),op(e)&&(e=Xb(t,e),t.l||Kb(t,e)),t.u&&tu("Patches").M(n[Bi].t,e,t.u,t.s)):e=Xb(t,n,[]),Wb(t),t.u&&t.v(t.u,t.s),e!==$z?e:void 0}function Xb(e,t,n){if(CP(t))return t;var r=t[Bi];if(!r)return ap(t,function(a,m){return CL(e,r,t,a,m,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Kb(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=SP(r.k):r.o,l=i,u=!1;r.i===3&&(l=new Set(i),i.clear(),u=!0),ap(l,function(a,m){return CL(e,r,i,a,m,n,u)}),Kb(e,i,!1),n&&e.u&&tu("Patches").N(r,n,e.u,e.s)}return r.o}function CL(e,t,n,r,i,l,u){if(sp(i)){var a=Xb(e,i,l&&t&&t.i!==3&&!Bm(t.R,r)?l.concat(r):void 0);if(Bz(n,r,a),!sp(a))return;e.m=!1}else u&&n.add(i);if(op(i)&&!CP(i)){if(!e.h.D&&e._<1)return;Xb(e,i),t&&t.A.l||Kb(e,i)}}function Kb(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&EP(t,n)}function sE(e,t){var n=e[Bi];return(n?Mf(n):e)[t]}function TL(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function uh(e){e.P||(e.P=!0,e.l&&uh(e.l))}function oE(e){e.o||(e.o=SP(e.t))}function yT(e,t,n){var r=bP(t)?tu("MapSet").F(t,n):wP(t)?tu("MapSet").T(t,n):e.O?function(i,l){var u=Array.isArray(i),a={i:u?1:0,A:l?l.A:mT(),P:!1,I:!1,R:{},l,t:i,k:null,o:null,j:null,C:!1},m=a,g=Tv;u&&(m=[a],g=Ly);var w=Proxy.revocable(m,g),C=w.revoke,P=w.proxy;return a.k=P,a.j=C,P}(t,n):tu("ES5").J(t,n);return(n?n.A:mT()).p.push(r),r}function $Z(e){return sp(e)||uc(22,e),function t(n){if(!op(n))return n;var r,i=n[Bi],l=Eg(n);if(i){if(!i.P&&(i.i<4||!tu("ES5").K(i)))return i.t;i.I=!0,r=kL(n,l),i.I=!1}else r=kL(n,l);return ap(r,function(u,a){i&&zZ(i.t,u)===a||Bz(r,u,t(a))}),l===3?new Set(r):r}(e)}function kL(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return SP(e)}function VZ(){function e(l,u){var a=i[l];return a?a.enumerable=u:i[l]=a={configurable:!0,enumerable:u,get:function(){var m=this[Bi];return Tv.get(m,l)},set:function(m){var g=this[Bi];Tv.set(g,l,m)}},a}function t(l){for(var u=l.length-1;u>=0;u--){var a=l[u][Bi];if(!a.P)switch(a.i){case 5:r(a)&&uh(a);break;case 4:n(a)&&uh(a)}}}function n(l){for(var u=l.t,a=l.k,m=Um(a),g=m.length-1;g>=0;g--){var w=m[g];if(w!==Bi){var C=u[w];if(C===void 0&&!Bm(u,w))return!0;var P=a[w],I=P&&P[Bi];if(I?I.t!==C:!Uz(P,C))return!0}}var N=!!u[Bi];return m.length!==Um(u).length+(N?0:1)}function r(l){var u=l.k;if(u.length!==l.t.length)return!0;var a=Object.getOwnPropertyDescriptor(u,u.length-1);if(a&&!a.get)return!0;for(var m=0;m<u.length;m++)if(!u.hasOwnProperty(m))return!0;return!1}var i={};BZ("ES5",{J:function(l,u){var a=Array.isArray(l),m=function(w,C){if(w){for(var P=Array(C.length),I=0;I<C.length;I++)Object.defineProperty(P,""+I,e(I,!0));return P}var N=Vz(C);delete N[Bi];for(var z=Um(N),$=0;$<z.length;$++){var H=z[$];N[H]=e(H,w||!!N[H].enumerable)}return Object.create(Object.getPrototypeOf(C),N)}(a,l),g={i:a?5:4,A:u?u.A:mT(),P:!1,I:!1,R:{},l:u,t:l,k:m,o:null,g:!1,C:!1};return Object.defineProperty(m,Bi,{value:g,writable:!0}),m},S:function(l,u,a){a?sp(u)&&u[Bi].A===l&&t(l.p):(l.u&&function m(g){if(g&&typeof g=="object"){var w=g[Bi];if(w){var C=w.t,P=w.k,I=w.R,N=w.i;if(N===4)ap(P,function(q){q!==Bi&&(C[q]!==void 0||Bm(C,q)?I[q]||m(P[q]):(I[q]=!0,uh(w)))}),ap(C,function(q){P[q]!==void 0||Bm(P,q)||(I[q]=!1,uh(w))});else if(N===5){if(r(w)&&(uh(w),I.length=!0),P.length<C.length)for(var z=P.length;z<C.length;z++)I[z]=!1;else for(var $=C.length;$<P.length;$++)I[$]=!0;for(var H=Math.min(P.length,C.length),V=0;V<H;V++)P.hasOwnProperty(V)||(I[V]=!0),I[V]===void 0&&m(P[V])}}}}(l.p[0]),t(l.p))},K:function(l){return l.i===4?n(l):r(l)}})}var PL,Cv,TP=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",HZ=typeof Map<"u",ZZ=typeof Set<"u",AL=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$z=TP?Symbol.for("immer-nothing"):((PL={})["immer-nothing"]=!0,PL),IL=TP?Symbol.for("immer-draftable"):"__$immer_draftable",Bi=TP?Symbol.for("immer-state"):"__$immer_state",qZ=""+Object.prototype.constructor,Um=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Vz=Object.getOwnPropertyDescriptors||function(e){var t={};return Um(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},vT={},Tv={get:function(e,t){if(t===Bi)return e;var n=Mf(e);if(!Bm(n,t))return function(i,l,u){var a,m=TL(l,u);return m?"value"in m?m.value:(a=m.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!op(r)?r:r===sE(e.t,t)?(oE(e),e.o[t]=yT(e.A.h,r,e)):r},has:function(e,t){return t in Mf(e)},ownKeys:function(e){return Reflect.ownKeys(Mf(e))},set:function(e,t,n){var r=TL(Mf(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=sE(Mf(e),t),l=i==null?void 0:i[Bi];if(l&&l.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Uz(n,i)&&(n!==void 0||Bm(e.t,t)))return!0;oE(e),uh(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return sE(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,oE(e),uh(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){uc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){uc(12)}},Ly={};ap(Tv,function(e,t){Ly[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ly.deleteProperty=function(e,t){return Ly.set.call(this,e,t,void 0)},Ly.set=function(e,t,n){return Tv.set.call(this,e[0],t,n,e[0])};var GZ=function(){function e(n){var r=this;this.O=AL,this.D=!0,this.produce=function(i,l,u){if(typeof i=="function"&&typeof l!="function"){var a=l;l=i;var m=r;return function(z){var $=this;z===void 0&&(z=a);for(var H=arguments.length,V=Array(H>1?H-1:0),q=1;q<H;q++)V[q-1]=arguments[q];return m.produce(z,function(te){var ue;return(ue=l).call.apply(ue,[$,te].concat(V))})}}var g;if(typeof l!="function"&&uc(6),u!==void 0&&typeof u!="function"&&uc(7),op(i)){var w=EL(r),C=yT(r,i,void 0),P=!0;try{g=l(C),P=!1}finally{P?Wb(w):gT(w)}return typeof Promise<"u"&&g instanceof Promise?g.then(function(z){return rE(w,u),iE(z,w)},function(z){throw Wb(w),z}):(rE(w,u),iE(g,w))}if(!i||typeof i!="object"){if((g=l(i))===void 0&&(g=i),g===$z&&(g=void 0),r.D&&EP(g,!0),u){var I=[],N=[];tu("Patches").M(i,g,I,N),u(I,N)}return g}uc(21,i)},this.produceWithPatches=function(i,l){if(typeof i=="function")return function(g){for(var w=arguments.length,C=Array(w>1?w-1:0),P=1;P<w;P++)C[P-1]=arguments[P];return r.produceWithPatches(g,function(I){return i.apply(void 0,[I].concat(C))})};var u,a,m=r.produce(i,l,function(g,w){u=g,a=w});return typeof Promise<"u"&&m instanceof Promise?m.then(function(g){return[g,u,a]}):[m,u,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){op(n)||uc(8),sp(n)&&(n=$Z(n));var r=EL(this),i=yT(this,n,void 0);return i[Bi].C=!0,gT(r),i},t.finishDraft=function(n,r){var i=n&&n[Bi],l=i.A;return rE(l,r),iE(void 0,l)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!AL&&uc(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var l=r[i];if(l.path.length===0&&l.op==="replace"){n=l.value;break}}i>-1&&(r=r.slice(i+1));var u=tu("Patches").$;return sp(n)?u(n,r):this.produce(n,function(a){return u(a,r)})},e}(),Ja=new GZ;Ja.produce;Ja.produceWithPatches.bind(Ja);Ja.setAutoFreeze.bind(Ja);Ja.setUseProxies.bind(Ja);Ja.applyPatches.bind(Ja);Ja.createDraft.bind(Ja);Ja.finishDraft.bind(Ja);function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function WZ(e,t){if(kv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XZ(e){var t=WZ(e,"string");return kv(t)=="symbol"?t:t+""}function KZ(e,t,n){return(t=XZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(n),!0).forEach(function(r){KZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function To(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ML=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),aE=function(){return Math.random().toString(36).substring(7).split("").join(".")},Yb={INIT:"@@redux/INIT"+aE(),REPLACE:"@@redux/REPLACE"+aE(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aE()}};function YZ(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Hz(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(To(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(To(1));return n(Hz)(e,t)}if(typeof e!="function")throw new Error(To(2));var i=e,l=t,u=[],a=u,m=!1;function g(){a===u&&(a=u.slice())}function w(){if(m)throw new Error(To(3));return l}function C(z){if(typeof z!="function")throw new Error(To(4));if(m)throw new Error(To(5));var $=!0;return g(),a.push(z),function(){if($){if(m)throw new Error(To(6));$=!1,g();var V=a.indexOf(z);a.splice(V,1),u=null}}}function P(z){if(!YZ(z))throw new Error(To(7));if(typeof z.type>"u")throw new Error(To(8));if(m)throw new Error(To(9));try{m=!0,l=i(l,z)}finally{m=!1}for(var $=u=a,H=0;H<$.length;H++){var V=$[H];V()}return z}function I(z){if(typeof z!="function")throw new Error(To(10));i=z,P({type:Yb.REPLACE})}function N(){var z,$=C;return z={subscribe:function(V){if(typeof V!="object"||V===null)throw new Error(To(11));function q(){V.next&&V.next(w())}q();var te=$(q);return{unsubscribe:te}}},z[ML]=function(){return this},z}return P({type:Yb.INIT}),r={dispatch:P,subscribe:C,getState:w,replaceReducer:I},r[ML]=N,r}function QZ(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:Yb.INIT});if(typeof r>"u")throw new Error(To(12));if(typeof n(void 0,{type:Yb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(To(13))})}function Zz(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var l=Object.keys(n),u;try{QZ(n)}catch(a){u=a}return function(m,g){if(m===void 0&&(m={}),u)throw u;for(var w=!1,C={},P=0;P<l.length;P++){var I=l[P],N=n[I],z=m[I],$=N(z,g);if(typeof $>"u")throw g&&g.type,new Error(To(14));C[I]=$,w=w||$!==z}return w=w||l.length!==Object.keys(m).length,w?C:m}}function Qb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function JZ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),l=function(){throw new Error(To(15))},u={getState:i.getState,dispatch:function(){return l.apply(void 0,arguments)}},a=t.map(function(m){return m(u)});return l=Qb.apply(void 0,a)(i.dispatch),LL(LL({},i),{},{dispatch:l})}}}function qz(e){var t=function(r){var i=r.dispatch,l=r.getState;return function(u){return function(a){return typeof a=="function"?a(i,l,e):u(a)}}};return t}var _T=qz();_T.withExtraArgument=qz;var Gz=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(r[l]=i[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eq=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,i,l,u;return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(l=g[0]&2?i.return:g[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,g[1])).done)return l;switch(i=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(w){g=[6,w],i=0}finally{r=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Pv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},tq=Object.defineProperty,nq=Object.defineProperties,rq=Object.getOwnPropertyDescriptors,OL=Object.getOwnPropertySymbols,iq=Object.prototype.hasOwnProperty,sq=Object.prototype.propertyIsEnumerable,DL=function(e,t,n){return t in e?tq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},$m=function(e,t){for(var n in t||(t={}))iq.call(t,n)&&DL(e,n,t[n]);if(OL)for(var r=0,i=OL(t);r<i.length;r++){var n=i[r];sq.call(t,n)&&DL(e,n,t[n])}return e},lE=function(e,t){return nq(e,rq(t))},oq=function(e,t,n){return new Promise(function(r,i){var l=function(m){try{a(n.next(m))}catch(g){i(g)}},u=function(m){try{a(n.throw(m))}catch(g){i(g)}},a=function(m){return m.done?r(m.value):Promise.resolve(m.value).then(l,u)};a((n=n.apply(e,t)).next())})},aq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qb:Qb.apply(null,arguments)};function lq(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function Vm(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var l=t.apply(void 0,r);if(!l)throw new Error("prepareAction did not return an object");return $m($m({type:e,payload:l.payload},"meta"in l&&{meta:l.meta}),"error"in l&&{error:l.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}var cq=function(e){Gz(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Pv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Pv([void 0],n.concat(this))))},t}(Array),uq=function(e){Gz(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Pv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Pv([void 0],n.concat(this))))},t}(Array);function dq(e){return typeof e=="boolean"}function hq(){return function(t){return fq(t)}}function fq(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new cq;return n&&(dq(n)?r.push(_T):r.push(_T.withExtraArgument(n.extraArgument))),r}function pq(e){var t=hq(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,l=n.middleware,u=l===void 0?t():l,a=n.devTools,m=a===void 0?!0:a,g=n.preloadedState,w=g===void 0?void 0:g,C=n.enhancers,P=C===void 0?void 0:C,I;if(typeof i=="function")I=i;else if(lq(i))I=Zz(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var N=u;typeof N=="function"&&(N=N(t));var z=JZ.apply(void 0,N),$=Qb;m&&($=aq($m({trace:!1},typeof m=="object"&&m)));var H=new uq(z),V=H;Array.isArray(P)?V=Pv([z],P):typeof P=="function"&&(V=P(H));var q=$.apply(void 0,V);return Hz(I,w,q)}var mq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gq=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=mq[Math.random()*64|0];return t},yq=["name","message","stack","code"],cE=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),NL=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),vq=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=yq;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Vm(t+"/fulfilled",function(g,w,C,P){return{payload:g,meta:lE($m({},P||{}),{arg:C,requestId:w,requestStatus:"fulfilled"})}}),l=Vm(t+"/pending",function(g,w,C){return{payload:void 0,meta:lE($m({},C||{}),{arg:w,requestId:g,requestStatus:"pending"})}}),u=Vm(t+"/rejected",function(g,w,C,P,I){return{payload:P,error:(r&&r.serializeError||vq)(g||"Rejected"),meta:lE($m({},I||{}),{arg:C,requestId:w,rejectedWithValue:!!P,requestStatus:"rejected",aborted:(g==null?void 0:g.name)==="AbortError",condition:(g==null?void 0:g.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function g(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return g.prototype.abort=function(){},g}();function m(g){return function(w,C,P){var I=r!=null&&r.idGenerator?r.idGenerator(g):gq(),N=new a,z;function $(V){z=V,N.abort()}var H=function(){return oq(this,null,function(){var V,q,te,ue,fe,Z,le;return eq(this,function(be){switch(be.label){case 0:return be.trys.push([0,4,,5]),ue=(V=r==null?void 0:r.condition)==null?void 0:V.call(r,g,{getState:C,extra:P}),xq(ue)?[4,ue]:[3,2];case 1:ue=be.sent(),be.label=2;case 2:if(ue===!1||N.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return fe=new Promise(function(Re,Je){return N.signal.addEventListener("abort",function(){return Je({name:"AbortError",message:z||"Aborted"})})}),w(l(I,g,(q=r==null?void 0:r.getPendingMeta)==null?void 0:q.call(r,{requestId:I,arg:g},{getState:C,extra:P}))),[4,Promise.race([fe,Promise.resolve(n(g,{dispatch:w,getState:C,extra:P,requestId:I,signal:N.signal,abort:$,rejectWithValue:function(Re,Je){return new cE(Re,Je)},fulfillWithValue:function(Re,Je){return new NL(Re,Je)}})).then(function(Re){if(Re instanceof cE)throw Re;return Re instanceof NL?i(Re.payload,I,g,Re.meta):i(Re,I,g)})])];case 3:return te=be.sent(),[3,5];case 4:return Z=be.sent(),te=Z instanceof cE?u(null,I,g,Z.payload,Z.meta):u(Z,I,g),[3,5];case 5:return le=r&&!r.dispatchConditionRejection&&u.match(te)&&te.meta.condition,le||w(te),[2,te]}})})}();return Object.assign(H,{abort:$,requestId:I,arg:g,unwrap:function(){return H.then(_q)}})}}return Object.assign(m,{pending:l,rejected:u,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function _q(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function xq(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kP="listenerMiddleware";Vm(kP+"/add");Vm(kP+"/removeAll");Vm(kP+"/remove");var jL;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);VZ();var xT={exports:{}};(function(e,t){(function(n,r){r(t)})(cc,function(n){function r(we,He){we.super_=He,we.prototype=Object.create(He.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}})}function i(we,He){Object.defineProperty(this,"kind",{value:we,enumerable:!0}),He&&He.length&&Object.defineProperty(this,"path",{value:He,enumerable:!0})}function l(we,He,Be){l.super_.call(this,"E",we),Object.defineProperty(this,"lhs",{value:He,enumerable:!0}),Object.defineProperty(this,"rhs",{value:Be,enumerable:!0})}function u(we,He){u.super_.call(this,"N",we),Object.defineProperty(this,"rhs",{value:He,enumerable:!0})}function a(we,He){a.super_.call(this,"D",we),Object.defineProperty(this,"lhs",{value:He,enumerable:!0})}function m(we,He,Be){m.super_.call(this,"A",we),Object.defineProperty(this,"index",{value:He,enumerable:!0}),Object.defineProperty(this,"item",{value:Be,enumerable:!0})}function g(we,He,Be){var ct=we.slice(He+1||we.length);return we.length=He<0?we.length+He:He,we.push.apply(we,ct),we}function w(we){var He=typeof we>"u"?"undefined":yt(we);return He!=="object"?He:we===Math?"math":we===null?"null":Array.isArray(we)?"array":Object.prototype.toString.call(we)==="[object Date]"?"date":typeof we.toString=="function"&&/^\/.*\//.test(we.toString())?"regexp":"object"}function C(we,He,Be,ct,xt,bt,It){xt=xt||[],It=It||[];var qt=xt.slice(0);if(typeof bt<"u"){if(ct){if(typeof ct=="function"&&ct(qt,bt))return;if((typeof ct>"u"?"undefined":yt(ct))==="object"){if(ct.prefilter&&ct.prefilter(qt,bt))return;if(ct.normalize){var fn=ct.normalize(qt,bt,we,He);fn&&(we=fn[0],He=fn[1])}}}qt.push(bt)}w(we)==="regexp"&&w(He)==="regexp"&&(we=we.toString(),He=He.toString());var wn=typeof we>"u"?"undefined":yt(we),an=typeof He>"u"?"undefined":yt(He),Vt=wn!=="undefined"||It&&It[It.length-1].lhs&&It[It.length-1].lhs.hasOwnProperty(bt),Cn=an!=="undefined"||It&&It[It.length-1].rhs&&It[It.length-1].rhs.hasOwnProperty(bt);if(!Vt&&Cn)Be(new u(qt,He));else if(!Cn&&Vt)Be(new a(qt,we));else if(w(we)!==w(He))Be(new l(qt,we,He));else if(w(we)==="date"&&we-He!==0)Be(new l(qt,we,He));else if(wn==="object"&&we!==null&&He!==null)if(It.filter(function(zn){return zn.lhs===we}).length)we!==He&&Be(new l(qt,we,He));else{if(It.push({lhs:we,rhs:He}),Array.isArray(we)){var Tn;for(we.length,Tn=0;Tn<we.length;Tn++)Tn>=He.length?Be(new m(qt,Tn,new a(void 0,we[Tn]))):C(we[Tn],He[Tn],Be,ct,qt,Tn,It);for(;Tn<He.length;)Be(new m(qt,Tn,new u(void 0,He[Tn++])))}else{var Fn=Object.keys(we),Qe=Object.keys(He);Fn.forEach(function(zn,Le){var De=Qe.indexOf(zn);De>=0?(C(we[zn],He[zn],Be,ct,qt,zn,It),Qe=g(Qe,De)):C(we[zn],void 0,Be,ct,qt,zn,It)}),Qe.forEach(function(zn){C(void 0,He[zn],Be,ct,qt,zn,It)})}It.length=It.length-1}else we!==He&&(wn==="number"&&isNaN(we)&&isNaN(He)||Be(new l(qt,we,He)))}function P(we,He,Be,ct){return ct=ct||[],C(we,He,function(xt){xt&&ct.push(xt)},Be),ct.length?ct:void 0}function I(we,He,Be){if(Be.path&&Be.path.length){var ct,xt=we[He],bt=Be.path.length-1;for(ct=0;ct<bt;ct++)xt=xt[Be.path[ct]];switch(Be.kind){case"A":I(xt[Be.path[ct]],Be.index,Be.item);break;case"D":delete xt[Be.path[ct]];break;case"E":case"N":xt[Be.path[ct]]=Be.rhs}}else switch(Be.kind){case"A":I(we[He],Be.index,Be.item);break;case"D":we=g(we,He);break;case"E":case"N":we[He]=Be.rhs}return we}function N(we,He,Be){if(we&&He&&Be&&Be.kind){for(var ct=we,xt=-1,bt=Be.path?Be.path.length-1:0;++xt<bt;)typeof ct[Be.path[xt]]>"u"&&(ct[Be.path[xt]]=typeof Be.path[xt]=="number"?[]:{}),ct=ct[Be.path[xt]];switch(Be.kind){case"A":I(Be.path?ct[Be.path[xt]]:ct,Be.index,Be.item);break;case"D":delete ct[Be.path[xt]];break;case"E":case"N":ct[Be.path[xt]]=Be.rhs}}}function z(we,He,Be){if(Be.path&&Be.path.length){var ct,xt=we[He],bt=Be.path.length-1;for(ct=0;ct<bt;ct++)xt=xt[Be.path[ct]];switch(Be.kind){case"A":z(xt[Be.path[ct]],Be.index,Be.item);break;case"D":xt[Be.path[ct]]=Be.lhs;break;case"E":xt[Be.path[ct]]=Be.lhs;break;case"N":delete xt[Be.path[ct]]}}else switch(Be.kind){case"A":z(we[He],Be.index,Be.item);break;case"D":we[He]=Be.lhs;break;case"E":we[He]=Be.lhs;break;case"N":we=g(we,He)}return we}function $(we,He,Be){if(we&&He&&Be&&Be.kind){var ct,xt,bt=we;for(xt=Be.path.length-1,ct=0;ct<xt;ct++)typeof bt[Be.path[ct]]>"u"&&(bt[Be.path[ct]]={}),bt=bt[Be.path[ct]];switch(Be.kind){case"A":z(bt[Be.path[ct]],Be.index,Be.item);break;case"D":bt[Be.path[ct]]=Be.lhs;break;case"E":bt[Be.path[ct]]=Be.lhs;break;case"N":delete bt[Be.path[ct]]}}}function H(we,He,Be){if(we&&He){var ct=function(xt){Be&&!Be(we,He,xt)||N(we,He,xt)};C(we,He,ct)}}function V(we){return"color: "+qe[we].color+"; font-weight: bold"}function q(we){var He=we.kind,Be=we.path,ct=we.lhs,xt=we.rhs,bt=we.index,It=we.item;switch(He){case"E":return[Be.join("."),ct,"",xt];case"N":return[Be.join("."),xt];case"D":return[Be.join(".")];case"A":return[Be.join(".")+"["+bt+"]",It];default:return[]}}function te(we,He,Be,ct){var xt=P(we,He);try{ct?Be.groupCollapsed("diff"):Be.group("diff")}catch{Be.log("diff")}xt?xt.forEach(function(bt){var It=bt.kind,qt=q(bt);Be.log.apply(Be,["%c "+qe[It].text,V(It)].concat(lt(qt)))}):Be.log(" no diff ");try{Be.groupEnd()}catch{Be.log(" diff end  ")}}function ue(we,He,Be,ct){switch(typeof we>"u"?"undefined":yt(we)){case"object":return typeof we[ct]=="function"?we[ct].apply(we,lt(Be)):we[ct];case"function":return we(He);default:return we}}function fe(we){var He=we.timestamp,Be=we.duration;return function(ct,xt,bt){var It=["action"];return It.push("%c"+String(ct.type)),He&&It.push("%c@ "+xt),Be&&It.push("%c(in "+bt.toFixed(2)+" ms)"),It.join(" ")}}function Z(we,He){var Be=He.logger,ct=He.actionTransformer,xt=He.titleFormatter,bt=xt===void 0?fe(He):xt,It=He.collapsed,qt=He.colors,fn=He.level,wn=He.diff,an=typeof He.titleFormatter>"u";we.forEach(function(Vt,Cn){var Tn=Vt.started,Fn=Vt.startedTime,Qe=Vt.action,zn=Vt.prevState,Le=Vt.error,De=Vt.took,Ye=Vt.nextState,mt=we[Cn+1];mt&&(Ye=mt.prevState,De=mt.started-Tn);var ft=ct(Qe),wt=typeof It=="function"?It(function(){return Ye},Qe,Vt):It,Bt=Xe(Fn),pn=qt.title?"color: "+qt.title(ft)+";":"",nn=["color: gray; font-weight: lighter;"];nn.push(pn),He.timestamp&&nn.push("color: gray; font-weight: lighter;"),He.duration&&nn.push("color: gray; font-weight: lighter;");var ln=bt(ft,Bt,De);try{wt?qt.title&&an?Be.groupCollapsed.apply(Be,["%c "+ln].concat(nn)):Be.groupCollapsed(ln):qt.title&&an?Be.group.apply(Be,["%c "+ln].concat(nn)):Be.group(ln)}catch{Be.log(ln)}var it=ue(fn,ft,[zn],"prevState"),Mn=ue(fn,ft,[ft],"action"),ar=ue(fn,ft,[Le,zn],"error"),fr=ue(fn,ft,[Ye],"nextState");if(it)if(qt.prevState){var Xn="color: "+qt.prevState(zn)+"; font-weight: bold";Be[it]("%c prev state",Xn,zn)}else Be[it]("prev state",zn);if(Mn)if(qt.action){var ut="color: "+qt.action(ft)+"; font-weight: bold";Be[Mn]("%c action    ",ut,ft)}else Be[Mn]("action    ",ft);if(Le&&ar)if(qt.error){var vn="color: "+qt.error(Le,zn)+"; font-weight: bold;";Be[ar]("%c error     ",vn,Le)}else Be[ar]("error     ",Le);if(fr)if(qt.nextState){var Sn="color: "+qt.nextState(Ye)+"; font-weight: bold";Be[fr]("%c next state",Sn,Ye)}else Be[fr]("next state",Ye);wn&&te(zn,Ye,Be,wt);try{Be.groupEnd()}catch{Be.log(" log end ")}})}function le(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=Object.assign({},_t,we),Be=He.logger,ct=He.stateTransformer,xt=He.errorTransformer,bt=He.predicate,It=He.logErrors,qt=He.diffPredicate;if(typeof Be>"u")return function(){return function(wn){return function(an){return wn(an)}}};if(we.getState&&we.dispatch)return console.error(`[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:
// Logger with default options
import { logger } from 'redux-logger'
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
// Or you can create your own logger with custom options http://bit.ly/redux-logger-options
import createLogger from 'redux-logger'
const logger = createLogger({
  // ...options
});
const store = createStore(
  reducer,
  applyMiddleware(logger)
)
`),function(){return function(wn){return function(an){return wn(an)}}};var fn=[];return function(wn){var an=wn.getState;return function(Vt){return function(Cn){if(typeof bt=="function"&&!bt(an,Cn))return Vt(Cn);var Tn={};fn.push(Tn),Tn.started=gt.now(),Tn.startedTime=new Date,Tn.prevState=ct(an()),Tn.action=Cn;var Fn=void 0;if(It)try{Fn=Vt(Cn)}catch(zn){Tn.error=xt(zn)}else Fn=Vt(Cn);Tn.took=gt.now()-Tn.started,Tn.nextState=ct(an());var Qe=He.diff&&typeof qt=="function"?qt(an,Cn):He.diff;if(Z(fn,Object.assign({},He,{diff:Qe})),fn.length=0,Tn.error)throw Tn.error;return Fn}}}}var be,Re,Je=function(we,He){return new Array(He+1).join(we)},Fe=function(we,He){return Je("0",He-we.toString().length)+we},Xe=function(we){return Fe(we.getHours(),2)+":"+Fe(we.getMinutes(),2)+":"+Fe(we.getSeconds(),2)+"."+Fe(we.getMilliseconds(),3)},gt=typeof performance<"u"&&performance!==null&&typeof performance.now=="function"?performance:Date,yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},lt=function(we){if(Array.isArray(we)){for(var He=0,Be=Array(we.length);He<we.length;He++)Be[He]=we[He];return Be}return Array.from(we)},Nt=[];be=(typeof cc>"u"?"undefined":yt(cc))==="object"&&cc?cc:typeof window<"u"?window:{},Re=be.DeepDiff,Re&&Nt.push(function(){typeof Re<"u"&&be.DeepDiff===P&&(be.DeepDiff=Re,Re=void 0)}),r(l,i),r(u,i),r(a,i),r(m,i),Object.defineProperties(P,{diff:{value:P,enumerable:!0},observableDiff:{value:C,enumerable:!0},applyDiff:{value:H,enumerable:!0},applyChange:{value:N,enumerable:!0},revertChange:{value:$,enumerable:!0},isConflict:{value:function(){return typeof Re<"u"},enumerable:!0},noConflict:{value:function(){return Nt&&(Nt.forEach(function(we){we()}),Nt=null),P},enumerable:!0}});var qe={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},_t={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(we){return we},actionTransformer:function(we){return we},errorTransformer:function(we){return we},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},Ke=function(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=we.dispatch,Be=we.getState;return typeof He=="function"||typeof Be=="function"?le()({dispatch:He,getState:Be}):void console.error(`
[redux-logger v3] BREAKING CHANGE
[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.
[redux-logger v3] Change
[redux-logger v3] import createLogger from 'redux-logger'
[redux-logger v3] to
[redux-logger v3] import { createLogger } from 'redux-logger'
`)};n.defaults=_t,n.createLogger=le,n.logger=Ke,n.default=Ke,Object.defineProperty(n,"__esModule",{value:!0})})})(xT,xT.exports);var bq=xT.exports,Wz={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=["navigation","request","process","log","user","state","error","manual"],r=function(Y,he,_e){for(var ge=_e,ze=0,st=Y.length;ze<st;ze++)ge=he(ge,Y[ze],ze,Y);return ge},i=function(Y,he){return r(Y,function(_e,ge,ze,st){return he(ge,ze,st)?_e.concat(ge):_e},[])},l=function(Y,he){return r(Y,function(_e,ge,ze,st){return _e===!0||ge===he},!1)},u=function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},a=!{toString:null}.propertyIsEnumerable("toString"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=function(Y){var he=[],_e;for(_e in Y)Object.prototype.hasOwnProperty.call(Y,_e)&&he.push(_e);if(!a)return he;for(var ge=0,ze=m.length;ge<ze;ge++)Object.prototype.hasOwnProperty.call(Y,m[ge])&&he.push(m[ge]);return he},w=function(Y,he){return Y===void 0&&(Y=1),function(_e){return typeof _e=="number"&&parseInt(""+_e,10)===_e&&_e>=Y&&_e<=he}},C=function(Y){return typeof Y=="function"||u(Y)&&i(Y,function(he){return typeof he=="function"}).length===Y.length},P=function(Y){return typeof Y=="string"&&!!Y.length},I={},N=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};I.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:P},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(Y){return Y===void 0||P(Y)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(Y){return Y===void 0||P(Y)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(Y){return Y===!0||Y===!1}},enabledErrorTypes:{defaultValue:function(){return N()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(Y){if(typeof Y!="object"||!Y)return!1;var he=g(Y),_e=g(N());return!(i(he,function(ge){return l(_e,ge)}).length<he.length||i(g(Y),function(ge){return typeof Y[ge]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:C},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:C},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:C},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(Y){return Y&&typeof Y=="object"&&P(Y.notify)&&P(Y.sessions)&&i(g(Y),function(he){return!l(["notify","sessions"],he)}).length===0}},autoTrackSessions:{defaultValue:function(Y){return!0},message:"should be true|false",validate:function(Y){return Y===!0||Y===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(Y){return Y===null||u(Y)&&i(Y,function(he){return typeof he=="string"}).length===Y.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(Y){return typeof Y=="string"&&Y.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number 100",validate:function(Y){return w(0,100)(Y)}},enabledBreadcrumbTypes:{defaultValue:function(){return n},message:"should be null or a list of available breadcrumb types ("+n.join(",")+")",validate:function(Y){return Y===null||u(Y)&&r(Y,function(he,_e){return he===!1?he:l(n,_e)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(Y){return Y===void 0||typeof Y=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(Y){return Y===null||Y&&r(g(Y),function(he,_e){return he&&l(["id","email","name"],_e)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(Y){return typeof Y=="object"&&Y!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(Y){return!Y||Y&&r(["debug","info","warn","error"],function(he,_e){return he&&typeof Y[_e]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(Y){return u(Y)&&Y.length===i(Y,function(he){return typeof he=="string"||he&&typeof he.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(Y){return u(Y)&&Y.length===i(Y,function(he){return he&&typeof he=="object"&&typeof he.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(Y){return u(Y)&&Y.length===i(Y,function(he){return he&&typeof he=="object"&&typeof he.name=="string"}).length}}};var z=function(Y){for(var he=1;he<arguments.length;he++){var _e=arguments[he];for(var ge in _e)Object.prototype.hasOwnProperty.call(_e,ge)&&(Y[ge]=_e[ge])}return Y},$=function(Y,he){return r(Y,function(_e,ge,ze,st){return _e.concat(he(ge,ze,st))},[])};function H(){return H=Object.assign?Object.assign.bind():function(Y){for(var he=1;he<arguments.length;he++){var _e=arguments[he];for(var ge in _e)Object.prototype.hasOwnProperty.call(_e,ge)&&(Y[ge]=_e[ge])}return Y},H.apply(this,arguments)}var V=I.schema,q={releaseStage:z({},V.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:H({},V.appType,{defaultValue:function(){return"browser"}}),logger:z({},V.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?te():void 0}})},te=function(){var Y={},he=console.log;return $(["debug","info","warn","error"],function(_e){var ge=console[_e];Y[_e]=typeof ge=="function"?ge.bind(console,"[bugsnag]"):he.bind(console,"[bugsnag]")}),Y},ue=function(){function Y(_e,ge,ze,st){st===void 0&&(st=new Date),this.type=ze,this.message=_e,this.metadata=ge,this.timestamp=st}var he=Y.prototype;return he.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},Y}(),fe=ue,Z={};(function(Y,he){typeof Z=="object"?Z=he():Y.StackFrame=he()})(this,function(){function Y(Wt){return!isNaN(parseFloat(Wt))&&isFinite(Wt)}function he(Wt){return Wt.charAt(0).toUpperCase()+Wt.substring(1)}function _e(Wt){return function(){return this[Wt]}}var ge=["isConstructor","isEval","isNative","isToplevel"],ze=["columnNumber","lineNumber"],st=["fileName","functionName","source"],dt=["args"],vt=ge.concat(ze,st,dt);function Ct(Wt){if(Wt instanceof Object)for(var rr=0;rr<vt.length;rr++)Wt.hasOwnProperty(vt[rr])&&Wt[vt[rr]]!==void 0&&this["set"+he(vt[rr])](Wt[vt[rr]])}Ct.prototype={getArgs:function(){return this.args},setArgs:function(Wt){if(Object.prototype.toString.call(Wt)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Wt},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Wt){if(Wt instanceof Ct)this.evalOrigin=Wt;else if(Wt instanceof Object)this.evalOrigin=new Ct(Wt);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Wt=this.getFunctionName()||"{anonymous}",rr="("+(this.getArgs()||[]).join(",")+")",Tr=this.getFileName()?"@"+this.getFileName():"",ai=Y(this.getLineNumber())?":"+this.getLineNumber():"",Zn=Y(this.getColumnNumber())?":"+this.getColumnNumber():"";return Wt+rr+Tr+ai+Zn}};for(var Rt=0;Rt<ge.length;Rt++)Ct.prototype["get"+he(ge[Rt])]=_e(ge[Rt]),Ct.prototype["set"+he(ge[Rt])]=function(Wt){return function(rr){this[Wt]=!!rr}}(ge[Rt]);for(var Jt=0;Jt<ze.length;Jt++)Ct.prototype["get"+he(ze[Jt])]=_e(ze[Jt]),Ct.prototype["set"+he(ze[Jt])]=function(Wt){return function(rr){if(!Y(rr))throw new TypeError(Wt+" must be a Number");this[Wt]=Number(rr)}}(ze[Jt]);for(var Bn=0;Bn<st.length;Bn++)Ct.prototype["get"+he(st[Bn])]=_e(st[Bn]),Ct.prototype["set"+he(st[Bn])]=function(Wt){return function(rr){this[Wt]=String(rr)}}(st[Bn]);return Ct});var le={};(function(Y,he){typeof le=="object"?le=he(Z):Y.ErrorStackParser=he(Y.StackFrame)})(this,function(he){var _e=/(^|@)\S+\:\d+/,ge=/^\s*at .*(\S+\:\d+|\(native\))/m,ze=/^(eval@)?(\[native code\])?$/;return{parse:function(dt){if(typeof dt.stacktrace<"u"||typeof dt["opera#sourceloc"]<"u")return this.parseOpera(dt);if(dt.stack&&dt.stack.match(ge))return this.parseV8OrIE(dt);if(dt.stack)return this.parseFFOrSafari(dt);throw new Error("Cannot parse given Error object")},extractLocation:function(dt){if(dt.indexOf(":")===-1)return[dt];var vt=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,Ct=vt.exec(dt.replace(/[\(\)]/g,""));return[Ct[1],Ct[2]||void 0,Ct[3]||void 0]},parseV8OrIE:function(dt){var vt=dt.stack.split(`
`).filter(function(Ct){return!!Ct.match(ge)},this);return vt.map(function(Ct){Ct.indexOf("(eval ")>-1&&(Ct=Ct.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var Rt=Ct.replace(/^\s+/,"").replace(/\(eval code/g,"("),Jt=Rt.match(/ (\((.+):(\d+):(\d+)\)$)/);Rt=Jt?Rt.replace(Jt[0],""):Rt;var Bn=Rt.split(/\s+/).slice(1),Wt=this.extractLocation(Jt?Jt[1]:Bn.pop()),rr=Bn.join(" ")||void 0,Tr=["eval","<anonymous>"].indexOf(Wt[0])>-1?void 0:Wt[0];return new he({functionName:rr,fileName:Tr,lineNumber:Wt[1],columnNumber:Wt[2],source:Ct})},this)},parseFFOrSafari:function(dt){var vt=dt.stack.split(`
`).filter(function(Ct){return!Ct.match(ze)},this);return vt.map(function(Ct){if(Ct.indexOf(" > eval")>-1&&(Ct=Ct.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),Ct.indexOf("@")===-1&&Ct.indexOf(":")===-1)return new he({functionName:Ct});var Rt=/((.*".+"[^@]*)?[^@]*)(?:@)/,Jt=Ct.match(Rt),Bn=Jt&&Jt[1]?Jt[1]:void 0,Wt=this.extractLocation(Ct.replace(Rt,""));return new he({functionName:Bn,fileName:Wt[0],lineNumber:Wt[1],columnNumber:Wt[2],source:Ct})},this)},parseOpera:function(dt){return!dt.stacktrace||dt.message.indexOf(`
`)>-1&&dt.message.split(`
`).length>dt.stacktrace.split(`
`).length?this.parseOpera9(dt):dt.stack?this.parseOpera11(dt):this.parseOpera10(dt)},parseOpera9:function(dt){for(var vt=/Line (\d+).*script (?:in )?(\S+)/i,Ct=dt.message.split(`
`),Rt=[],Jt=2,Bn=Ct.length;Jt<Bn;Jt+=2){var Wt=vt.exec(Ct[Jt]);Wt&&Rt.push(new he({fileName:Wt[2],lineNumber:Wt[1],source:Ct[Jt]}))}return Rt},parseOpera10:function(dt){for(var vt=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Ct=dt.stacktrace.split(`
`),Rt=[],Jt=0,Bn=Ct.length;Jt<Bn;Jt+=2){var Wt=vt.exec(Ct[Jt]);Wt&&Rt.push(new he({functionName:Wt[3]||void 0,fileName:Wt[2],lineNumber:Wt[1],source:Ct[Jt]}))}return Rt},parseOpera11:function(dt){var vt=dt.stack.split(`
`).filter(function(Ct){return!!Ct.match(_e)&&!Ct.match(/^Error created at/)},this);return vt.map(function(Ct){var Rt=Ct.split("@"),Jt=this.extractLocation(Rt.pop()),Bn=Rt.shift()||"",Wt=Bn.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,rr;Bn.match(/\(([^\)]*)\)/)&&(rr=Bn.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var Tr=rr===void 0||rr==="[arguments not available]"?void 0:rr.split(",");return new he({functionName:Wt,args:Tr,fileName:Jt[0],lineNumber:Jt[1],columnNumber:Jt[2],source:Ct})},this)}}});var be=le,Re=function(Y,he,_e,ge){var ze=ge&&ge.redactedKeys?ge.redactedKeys:[],st=ge&&ge.redactedPaths?ge.redactedPaths:[];return JSON.stringify(He(Y,ze,st),he,_e)},Je=20,Fe=25e3,Xe=8,gt="...";function yt(Y){return Y instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(Y))}function lt(Y){return"[Throws: "+(Y?Y.message:"?")+"]"}function Nt(Y,he){for(var _e=0,ge=Y.length;_e<ge;_e++)if(Y[_e]===he)return!0;return!1}function qe(Y,he){for(var _e=0,ge=Y.length;_e<ge;_e++)if(he.indexOf(Y[_e])===0)return!0;return!1}function _t(Y,he){for(var _e=0,ge=Y.length;_e<ge;_e++)if(typeof Y[_e]=="string"&&Y[_e].toLowerCase()===he.toLowerCase()||Y[_e]&&typeof Y[_e].test=="function"&&Y[_e].test(he))return!0;return!1}function Ke(Y){return Object.prototype.toString.call(Y)==="[object Array]"}function we(Y,he){try{return Y[he]}catch(_e){return lt(_e)}}function He(Y,he,_e){var ge=[],ze=0;function st(dt,vt){function Ct(){return vt.length>Xe&&ze>Fe}if(ze++,vt.length>Je||Ct())return gt;if(dt===null||typeof dt!="object")return dt;if(Nt(ge,dt))return"[Circular]";if(ge.push(dt),typeof dt.toJSON=="function")try{ze--;var Rt=st(dt.toJSON(),vt);return ge.pop(),Rt}catch(gr){return lt(gr)}var Jt=yt(dt);if(Jt){ze--;var Bn=st({name:dt.name,message:dt.message},vt);return ge.pop(),Bn}if(Ke(dt)){for(var Wt=[],rr=0,Tr=dt.length;rr<Tr;rr++){if(Ct()){Wt.push(gt);break}Wt.push(st(dt[rr],vt.concat("[]")))}return ge.pop(),Wt}var ai={};try{for(var Zn in dt)if(Object.prototype.hasOwnProperty.call(dt,Zn)){if(qe(_e,vt.join("."))&&_t(he,Zn)){ai[Zn]="[REDACTED]";continue}if(Ct()){ai[Zn]=gt;break}ai[Zn]=st(we(dt,Zn),vt.concat(Zn))}}catch{}return ge.pop(),ai}return st(Y,[])}function Be(Y,he,_e,ge){if(typeof _e=="string"){ge===void 0?ge=null:ge!==null&&typeof ge!="string"&&(ge=Re(ge));var ze=he[_e];if(typeof ze=="number"){Y[ze]={name:_e,variant:ge};return}Y.push({name:_e,variant:ge}),he[_e]=Y.length-1}}function ct(Y,he,_e){if(u(he)){for(var ge=0;ge<he.length;++ge){var ze=he[ge];ze===null||typeof ze!="object"||Be(Y,_e,ze.name,ze.variant)}return Y}}function xt(Y){return $(i(Y,Boolean),function(he){var _e=he.name,ge=he.variant,ze={featureFlag:_e};return typeof ge=="string"&&(ze.variant=ge),ze})}function bt(Y,he,_e){var ge=he[_e];typeof ge=="number"&&(Y[ge]=null,delete he[_e])}var It={add:Be,clear:bt,merge:ct,toEventApi:xt},qt=function(Y){return!!Y&&(!!Y.stack||!!Y.stacktrace||!!Y["opera#sourceloc"])&&typeof(Y.stack||Y.stacktrace||Y["opera#sourceloc"])=="string"&&Y.stack!==Y.name+": "+Y.message},fn=wn;function wn(Y){switch(Object.prototype.toString.call(Y)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return Y instanceof Error}}var an=fn,Vt=function(Y,he,_e,ge){var ze;if(he){var st;if(_e===null)return Tn(Y,he);typeof _e=="object"&&(st=_e),typeof _e=="string"&&(st=(ze={},ze[_e]=ge,ze)),st&&(he==="__proto__"||he==="constructor"||he==="prototype"||(Y[he]||(Y[he]={}),Y[he]=z({},Y[he],st)))}},Cn=function(Y,he,_e){if(typeof he=="string"){if(!_e)return Y[he];if(Y[he])return Y[he][_e]}},Tn=function(Y,he,_e){if(typeof he=="string"){if(!_e){delete Y[he];return}he==="__proto__"||he==="constructor"||he==="prototype"||Y[he]&&delete Y[he][_e]}},Fn={add:Vt,get:Cn,clear:Tn},Qe={};(function(Y,he){typeof Qe=="object"?Qe=he(Z):Y.StackGenerator=he(Y.StackFrame)})(this,function(Y){return{backtrace:function(_e){var ge=[],ze=10;typeof _e=="object"&&typeof _e.maxStackSize=="number"&&(ze=_e.maxStackSize);for(var st=arguments.callee;st&&ge.length<ze&&st.arguments;){for(var dt=new Array(st.arguments.length),vt=0;vt<dt.length;++vt)dt[vt]=st.arguments[vt];/function(?:\s+([\w$]+))+\s*\(/.test(st.toString())?ge.push(new Y({functionName:RegExp.$1||void 0,args:dt})):ge.push(new Y({args:dt}));try{st=st.caller}catch{break}}return ge}}});function zn(){return zn=Object.assign?Object.assign.bind():function(Y){for(var he=1;he<arguments.length;he++){var _e=arguments[he];for(var ge in _e)Object.prototype.hasOwnProperty.call(_e,ge)&&(Y[ge]=_e[ge])}return Y},zn.apply(this,arguments)}var Le=function(){function Y(_e,ge,ze,st,dt){ze===void 0&&(ze=[]),st===void 0&&(st=mt()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=dt,this._handledState=st,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[wt(_e,ge,Y.__type,ze)]}var he=Y.prototype;return he.addMetadata=function(ge,ze,st){return Fn.add(this._metadata,ge,ze,st)},he.setTraceCorrelation=function(ge,ze){typeof ge=="string"&&(this._correlation=zn({traceId:ge},typeof ze=="string"?{spanId:ze}:{}))},he.getMetadata=function(ge,ze){return Fn.get(this._metadata,ge,ze)},he.clearMetadata=function(ge,ze){return Fn.clear(this._metadata,ge,ze)},he.addFeatureFlag=function(ge,ze){ze===void 0&&(ze=null),It.add(this._features,this._featuresIndex,ge,ze)},he.addFeatureFlags=function(ge){It.merge(this._features,ge,this._featuresIndex)},he.getFeatureFlags=function(){return It.toEventApi(this._features)},he.clearFeatureFlag=function(ge){It.clear(this._features,this._featuresIndex,ge)},he.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},he.getUser=function(){return this._user},he.setUser=function(ge,ze,st){this._user={id:ge,email:ze,name:st}},he.toJSON=function(){return{payloadVersion:"4",exceptions:$(this.errors,function(ge){return z({},ge,{message:ge.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},Y}(),De=function(Y){var he={file:Y.fileName,method:Ye(Y.functionName),lineNumber:Y.lineNumber,columnNumber:Y.columnNumber,code:void 0,inProject:void 0};return he.lineNumber>-1&&!he.file&&!he.method&&(he.file="global code"),he},Ye=function(Y){return/^global code$/i.test(Y)?"global code":Y},mt=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},ft=function(Y){return typeof Y=="string"?Y:""};function wt(Y,he,_e,ge){return{errorClass:ft(Y),errorMessage:ft(he),type:_e,stacktrace:r(ge,function(ze,st){var dt=De(st);try{return JSON.stringify(dt)==="{}"?ze:ze.concat(dt)}catch{return ze}},[])}}function Bt(Y){return Y.cause?[Y].concat(Bt(Y.cause)):[Y]}Le.getStacktrace=function(Y,he,_e){if(qt(Y))return be.parse(Y).slice(he);try{return i(Qe.backtrace(),function(ge){return(ge.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+_e)}catch{return[]}},Le.create=function(Y,he,_e,ge,ze,st){ze===void 0&&(ze=0);var dt=nn(Y,he,ge,st),vt=dt[0],Ct=dt[1],Rt;try{var Jt=Le.getStacktrace(vt,Ct>0?1+Ct+ze:0,1+ze);Rt=new Le(vt.name,vt.message,Jt,_e,Y)}catch{Rt=new Le(vt.name,vt.message,[],_e,Y)}if(vt.name==="InvalidError"&&Rt.addMetadata(""+ge,"non-error parameter",pn(Y)),vt.cause){var Bn,Wt=Bt(vt).slice(1),rr=$(Wt,function(Tr){var ai=an(Tr)&&qt(Tr)?be.parse(Tr):[],Zn=nn(Tr,!0,"error cause"),gr=Zn[0];return gr.name==="InvalidError"&&Rt.addMetadata("error cause",pn(Tr)),wt(gr.name,gr.message,Le.__type,ai)});(Bn=Rt.errors).push.apply(Bn,rr)}return Rt};var pn=function(Y){return Y===null?"null":Y===void 0?"undefined":Y},nn=function(Y,he,_e,ge){var ze,st=0,dt=function(vt){var Ct=_e==="error cause"?"was":"received";ge&&ge.warn(_e+" "+Ct+' a non-error: "'+vt+'"');var Rt=new Error(_e+" "+Ct+' a non-error. See "'+_e+'" tab for more detail.');return Rt.name="InvalidError",Rt};if(!he)an(Y)?ze=Y:(ze=dt(typeof Y),st+=2);else switch(typeof Y){case"string":case"number":case"boolean":ze=new Error(String(Y)),st+=1;break;case"function":ze=dt("function"),st+=2;break;case"object":Y!==null&&an(Y)?ze=Y:Y!==null&&ln(Y)?(ze=new Error(Y.message||Y.errorMessage),ze.name=Y.name||Y.errorClass,st+=1):(ze=dt(Y===null?"null":"unsupported object"),st+=2);break;default:ze=dt("nothing"),st+=2}if(!qt(ze))try{throw ze}catch(vt){qt(vt)&&(ze=vt,st=1)}return[ze,st]};Le.__type="browserjs";var ln=function(Y){return(typeof Y.name=="string"||typeof Y.errorClass=="string")&&(typeof Y.message=="string"||typeof Y.errorMessage=="string")},it=Le,Mn=function(Y,he,_e){var ge=0,ze=function(){if(ge>=Y.length)return _e(null,!0);he(Y[ge],function(st,dt){if(st)return _e(st);if(dt===!1)return _e(null,!1);ge++,ze()})};ze()},ar=function(Y,he,_e,ge){var ze=function(st,dt){if(typeof st!="function")return dt(null);try{if(st.length!==2){var vt=st(he);return vt&&typeof vt.then=="function"?vt.then(function(Ct){return setTimeout(function(){return dt(null,Ct)})},function(Ct){setTimeout(function(){return _e(Ct),dt(null,!0)})}):dt(null,vt)}st(he,function(Ct,Rt){if(Ct)return _e(Ct),dt(null);dt(null,Rt)})}catch(Ct){_e(Ct),dt(null)}};Mn(Y,ze,ge)},fr=function(Y,he,_e,ge){for(var ze=!1,st=Y.slice();!ze&&st.length;)try{ze=st.pop()(he)===!1}catch(dt){ge.error("Error occurred in "+_e+" callback, continuing anyway"),ge.error(dt)}return ze},Xn=function(he,_e){var ge="000000000"+he;return ge.substr(ge.length-_e)},ut=typeof window=="object"?window:self,vn=0;for(var Sn in ut)Object.hasOwnProperty.call(ut,Sn)&&vn++;var Gr=navigator.mimeTypes?navigator.mimeTypes.length:0,gi=Xn((Gr+navigator.userAgent.length).toString(36)+vn.toString(36),4),Wn=function(){return gi},Ei=0,ls=4,es=36,ts=Math.pow(es,ls);function Ae(){return Xn((Math.random()*ts<<0).toString(es),ls)}function se(){return Ei=Ei<ts?Ei:0,Ei++,Ei-1}function ie(){var Y="c",he=new Date().getTime().toString(es),_e=Xn(se().toString(es),ls),ge=Wn(),ze=Ae()+Ae();return Y+he+_e+ge+ze}ie.fingerprint=Wn;var pe=ie,Se=function(){function Y(){this.id=pe(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var he=Y.prototype;return he.getUser=function(){return this._user},he.setUser=function(ge,ze,st){this._user={id:ge,email:ze,name:st}},he.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},he._track=function(ge){this[ge._handledState.unhandled?"_unhandled":"_handled"]+=1},Y}(),Ue=Se,Ge=It.add,nt=It.clear,ne=It.merge,ve=function(){},Ie=function(){function Y(_e,ge,ze,st){var dt=this;ge===void 0&&(ge=I.schema),ze===void 0&&(ze=[]),this._notifier=st,this._config={},this._schema=ge,this._delivery={sendSession:ve,sendEvent:ve},this._logger={debug:ve,info:ve,warn:ve,error:ve},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=Y,this.Event=it,this.Breadcrumb=fe,this.Session=Ue,this._config=this._configure(_e,ze),$(ze.concat(this._config.plugins),function(Rt){Rt&&dt._loadPlugin(Rt)}),this._depth=1;var vt=this,Ct=this.notify;this.notify=function(){return Ct.apply(vt,arguments)}}var he=Y.prototype;return he.addMetadata=function(ge,ze,st){return Fn.add(this._metadata,ge,ze,st)},he.getMetadata=function(ge,ze){return Fn.get(this._metadata,ge,ze)},he.clearMetadata=function(ge,ze){return Fn.clear(this._metadata,ge,ze)},he.addFeatureFlag=function(ge,ze){ze===void 0&&(ze=null),Ge(this._features,this._featuresIndex,ge,ze)},he.addFeatureFlags=function(ge){ne(this._features,ge,this._featuresIndex)},he.clearFeatureFlag=function(ge){nt(this._features,this._featuresIndex,ge)},he.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},he.getContext=function(){return this._context},he.setContext=function(ge){this._context=ge},he._configure=function(ge,ze){var st=r(ze,function(Rt,Jt){return Jt&&Jt.configSchema?z({},Rt,Jt.configSchema):Rt},this._schema),dt=r(g(st),function(Rt,Jt){var Bn=st[Jt].defaultValue(ge[Jt]);if(ge[Jt]!==void 0){var Wt=st[Jt].validate(ge[Jt]);Wt?st[Jt].allowPartialObject?Rt.config[Jt]=z(Bn,ge[Jt]):Rt.config[Jt]=ge[Jt]:(Rt.errors[Jt]=st[Jt].message,Rt.config[Jt]=Bn)}else Rt.config[Jt]=Bn;return Rt},{errors:{},config:{}}),vt=dt.errors,Ct=dt.config;if(st.apiKey){if(!Ct.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(Ct.apiKey)||(vt.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=z({},Ct.metadata),ne(this._features,Ct.featureFlags,this._featuresIndex),this._user=z({},Ct.user),this._context=Ct.context,Ct.logger&&(this._logger=Ct.logger),Ct.onError&&(this._cbs.e=this._cbs.e.concat(Ct.onError)),Ct.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(Ct.onBreadcrumb)),Ct.onSession&&(this._cbs.s=this._cbs.s.concat(Ct.onSession)),g(vt).length&&this._logger.warn(Ee(vt,ge)),Ct},he.getUser=function(){return this._user},he.setUser=function(ge,ze,st){this._user={id:ge,email:ze,name:st}},he._loadPlugin=function(ge){var ze=ge.load(this);return ge.name&&(this._plugins["~"+ge.name+"~"]=ze),this},he.getPlugin=function(ge){return this._plugins["~"+ge+"~"]},he._setDelivery=function(ge){this._delivery=ge(this)},he.startSession=function(){var ge=new Ue;ge.app.releaseStage=this._config.releaseStage,ge.app.version=this._config.appVersion,ge.app.type=this._config.appType,ge._user=z({},this._user);var ze=fr(this._cbs.s,ge,"onSession",this._logger);return ze?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,ge)},he.addOnError=function(ge,ze){ze===void 0&&(ze=!1),this._cbs.e[ze?"unshift":"push"](ge)},he.removeOnError=function(ge){this._cbs.e=i(this._cbs.e,function(ze){return ze!==ge})},he._addOnSessionPayload=function(ge){this._cbs.sp.push(ge)},he.addOnSession=function(ge){this._cbs.s.push(ge)},he.removeOnSession=function(ge){this._cbs.s=i(this._cbs.s,function(ze){return ze!==ge})},he.addOnBreadcrumb=function(ge,ze){ze===void 0&&(ze=!1),this._cbs.b[ze?"unshift":"push"](ge)},he.removeOnBreadcrumb=function(ge){this._cbs.b=i(this._cbs.b,function(ze){return ze!==ge})},he.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},he.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},he.leaveBreadcrumb=function(ge,ze,st){if(ge=typeof ge=="string"?ge:"",st=typeof st=="string"&&l(n,st)?st:"manual",ze=typeof ze=="object"&&ze!==null?ze:{},!!ge){var dt=new fe(ge,ze,st),vt=fr(this._cbs.b,dt,"onBreadcrumb",this._logger);if(vt){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(dt),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},he._isBreadcrumbTypeEnabled=function(ge){var ze=this._config.enabledBreadcrumbTypes;return ze===null||l(ze,ge)},he.notify=function(ge,ze,st){st===void 0&&(st=ve);var dt=it.create(ge,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(dt,ze,st)},he._notify=function(ge,ze,st){var dt=this;if(st===void 0&&(st=ve),ge.app=z({},ge.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),ge.context=ge.context||this._context,ge._metadata=z({},ge._metadata,this._metadata),ge._user=z({},ge._user,this._user),ge.breadcrumbs=this._breadcrumbs.slice(),ne(ge._features,this._features,ge._featuresIndex),this._config.enabledReleaseStages!==null&&!l(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),st(null,ge);var vt=ge.severity,Ct=function(Jt){dt._logger.error("Error occurred in onError callback, continuing anyway"),dt._logger.error(Jt)},Rt=[].concat(this._cbs.e).concat(ze);ar(Rt,ge,Ct,function(Jt,Bn){if(Jt&&Ct(Jt),!Bn)return dt._logger.debug("Event not sent due to onError callback"),st(null,ge);dt._isBreadcrumbTypeEnabled("error")&&Y.prototype.leaveBreadcrumb.call(dt,ge.errors[0].errorClass,{errorClass:ge.errors[0].errorClass,errorMessage:ge.errors[0].errorMessage,severity:ge.severity},"error"),vt!==ge.severity&&(ge._handledState.severityReason={type:"userCallbackSetSeverity"}),ge.unhandled!==ge._handledState.unhandled&&(ge._handledState.severityReason.unhandledOverridden=!0,ge._handledState.unhandled=ge.unhandled),dt._session&&(dt._session._track(ge),ge._session=dt._session),dt._delivery.sendEvent({apiKey:ge.apiKey||dt._config.apiKey,notifier:dt._notifier,events:[ge]},function(Wt){return st(Wt,ge)})})},Y}(),Ee=function(Y,he){var _e=new Error(`Invalid configuration
`+$(g(Y),function(ge){return"  - "+ge+" "+Y[ge]+", got "+Ve(he[ge])}).join(`

`));return _e},Ve=function(Y){switch(typeof Y){case"string":case"number":case"object":return JSON.stringify(Y);default:return String(Y)}},Et=Ie,At={},jt=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];At.event=function(Y,he){var _e=Re(Y,null,null,{redactedPaths:jt,redactedKeys:he});return _e.length>1e6&&(Y.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+_e.length/1e6+`MB (limit = 1MB)
metadata was removed`},_e=Re(Y,null,null,{redactedPaths:jt,redactedKeys:he})),_e},At.session=function(Y,he){var _e=Re(Y,null,null);return _e};var kt={};kt=function(Y,he){return he===void 0&&(he=window),{sendEvent:function(_e,ge){ge===void 0&&(ge=function(){});var ze=Ot(Y._config,"notify","4",he),st=At.event(_e,Y._config.redactedKeys),dt=new he.XDomainRequest;dt.onload=function(){ge(null)},dt.onerror=function(){var vt=new Error("Event failed to send");Y._logger.error("Event failed to send",vt),st.length>1e6&&Y._logger.warn("Event oversized ("+(st.length/1e6).toFixed(2)+" MB)"),ge(vt)},dt.open("POST",ze),setTimeout(function(){try{dt.send(st)}catch(vt){Y._logger.error(vt),ge(vt)}},0)},sendSession:function(_e,ge){ge===void 0&&(ge=function(){});var ze=Ot(Y._config,"sessions","1",he),st=new he.XDomainRequest;st.onload=function(){ge(null)},st.open("POST",ze),setTimeout(function(){try{st.send(At.session(_e,Y._config.redactedKeys))}catch(dt){Y._logger.error(dt),ge(dt)}},0)}}};var Ot=function(Y,he,_e,ge){var ze=JSON.parse(JSON.stringify(new Date)),st=zt(Y.endpoints[he],ge.location.protocol);return st+"?apiKey="+encodeURIComponent(Y.apiKey)+"&payloadVersion="+_e+"&sentAt="+encodeURIComponent(ze)},zt=kt._matchPageProtocol=function(Y,he){return he==="http:"?Y.replace(/^https:/,"http:"):Y},In=function(Y,he){return he===void 0&&(he=window),{sendEvent:function(_e,ge){ge===void 0&&(ge=function(){});try{var ze=Y._config.endpoints.notify,st=new he.XMLHttpRequest,dt=At.event(_e,Y._config.redactedKeys);st.onreadystatechange=function(){if(st.readyState===he.XMLHttpRequest.DONE){var vt=st.status;if(vt===0||vt>=400){var Ct=new Error("Request failed with status "+vt);Y._logger.error("Event failed to send",Ct),dt.length>1e6&&Y._logger.warn("Event oversized ("+(dt.length/1e6).toFixed(2)+" MB)"),ge(Ct)}else ge(null)}},st.open("POST",ze),st.setRequestHeader("Content-Type","application/json"),st.setRequestHeader("Bugsnag-Api-Key",_e.apiKey||Y._config.apiKey),st.setRequestHeader("Bugsnag-Payload-Version","4"),st.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),st.send(dt)}catch(vt){Y._logger.error(vt)}},sendSession:function(_e,ge){ge===void 0&&(ge=function(){});try{var ze=Y._config.endpoints.sessions,st=new he.XMLHttpRequest;st.onreadystatechange=function(){if(st.readyState===he.XMLHttpRequest.DONE){var dt=st.status;if(dt===0||dt>=400){var vt=new Error("Request failed with status "+dt);Y._logger.error("Session failed to send",vt),ge(vt)}else ge(null)}},st.open("POST",ze),st.setRequestHeader("Content-Type","application/json"),st.setRequestHeader("Bugsnag-Api-Key",Y._config.apiKey),st.setRequestHeader("Bugsnag-Payload-Version","1"),st.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),st.send(At.session(_e,Y._config.redactedKeys))}catch(dt){Y._logger.error(dt)}}}},Dn=new Date,Nn=function(){Dn=new Date},Un={name:"appDuration",load:function(Y){return Y.addOnError(function(he){var _e=new Date;he.app.duration=_e-Dn},!0),{reset:Nn}}},$n=function(Y){return Y===void 0&&(Y=window),{load:function(he){he.addOnError(function(_e){_e.context===void 0&&(_e.context=Y.location.pathname)},!0)}}},ir=function(he,_e){var ge="000000000"+he;return ge.substr(ge.length-_e)},Zr=typeof window=="object"?window:self,oi=0;for(var Ci in Zr)Object.hasOwnProperty.call(Zr,Ci)&&oi++;var ur=navigator.mimeTypes?navigator.mimeTypes.length:0,Pa=ir((ur+navigator.userAgent.length).toString(36)+oi.toString(36),4),po=function(){return Pa},Wr=0,yi=4,Js=36,Kn=Math.pow(Js,yi);function mr(){return ir((Math.random()*Kn<<0).toString(Js),yi)}function gs(){return Wr=Wr<Kn?Wr:0,Wr++,Wr-1}function Mi(){var Y="c",he=new Date().getTime().toString(Js),_e=ir(gs().toString(Js),yi),ge=po(),ze=mr()+mr();return Y+he+_e+ge+ze}Mi.fingerprint=po;var mn=Mi,Sr="bugsnag-anonymous-id",Hi=function(Y){try{var he=Y.localStorage,_e=he.getItem(Sr);return _e&&/^c[a-z0-9]{20,32}$/.test(_e)||(_e=mn(),he.setItem(Sr,_e)),_e}catch{}},$r=function(Y,he){return Y===void 0&&(Y=navigator),he===void 0&&(he=window),{load:function(_e){var ge={locale:Y.browserLanguage||Y.systemLanguage||Y.userLanguage||Y.language,userAgent:Y.userAgent};he&&he.screen&&he.screen.orientation&&he.screen.orientation.type?ge.orientation=he.screen.orientation.type:he&&he.document&&(ge.orientation=he.document.documentElement.clientWidth>he.document.documentElement.clientHeight?"landscape":"portrait"),_e._config.generateAnonymousId&&(ge.id=Hi(he)),_e.addOnSession(function(ze){ze.device=z({},ze.device,ge),_e._config.collectUserIp||mo(ze)}),_e.addOnError(function(ze){ze.device=z({},ze.device,ge,{time:new Date}),_e._config.collectUserIp||mo(ze)},!0)},configSchema:{generateAnonymousId:{validate:function(_e){return _e===!0||_e===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},mo=function(Y){var he=Y.getUser();(!he||!he.id)&&Y.setUser(Y.device.id)},Ps=function(Y){return Y===void 0&&(Y=window),{load:function(he){he.addOnError(function(_e){_e.request&&_e.request.url||(_e.request=z({},_e.request,{url:Y.location.href}))},!0)}}},lr={load:function(Y){Y._sessionDelegate=Dr}},Dr={startSession:function(Y,he){var _e=Y;return _e._session=he,_e._pausedSession=null,_e._config.enabledReleaseStages!==null&&!l(_e._config.enabledReleaseStages,_e._config.releaseStage)?(_e._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),_e):(_e._delivery.sendSession({notifier:_e._notifier,device:he.device,app:he.app,sessions:[{id:he.id,startedAt:he.startedAt,user:he._user}]}),_e)},resumeSession:function(Y){return Y._session?Y:Y._pausedSession?(Y._session=Y._pausedSession,Y._pausedSession=null,Y):Y.startSession()},pauseSession:function(Y){Y._pausedSession=Y._session,Y._session=null}},yu={load:function(Y){Y._config.collectUserIp||Y.addOnError(function(he){he._user&&typeof he._user.id>"u"&&delete he._user.id,he._user=z({id:"[REDACTED]"},he._user),he.request=z({clientIp:"[REDACTED]"},he.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(Y){return Y===!0||Y===!1}}}},Yo={};Yo.load=function(Y){var he=/^(local-)?dev(elopment)?$/.test(Y._config.releaseStage);he||!Y._isBreadcrumbTypeEnabled("log")||$(Oi,function(_e){var ge=console[_e];console[_e]=function(){for(var ze=arguments.length,st=new Array(ze),dt=0;dt<ze;dt++)st[dt]=arguments[dt];Y.leaveBreadcrumb("Console output",r(st,function(vt,Ct,Rt){var Jt="[Unknown value]";try{Jt=String(Ct)}catch{}if(Jt==="[object Object]")try{Jt=JSON.stringify(Ct)}catch{}return vt["["+Rt+"]"]=Jt,vt},{severity:_e.indexOf("group")===0?"log":_e}),"log"),ge.apply(console,st)},console[_e]._restore=function(){console[_e]=ge}})};var Oi=i(["log","debug","info","warn","error"],function(Y){return typeof console<"u"&&typeof console[Y]=="function"}),Lo=200,vr=5e5,Mo=function(Y,he){return Y===void 0&&(Y=document),he===void 0&&(he=window),{load:function(_e){if(!_e._config.trackInlineScripts)return;var ge=he.location.href,ze="",st=!!Y.attachEvent,dt=st?Y.readyState==="complete":Y.readyState!=="loading",vt=function(){return Y.documentElement.outerHTML};ze=vt();var Ct=Y.onreadystatechange;Y.onreadystatechange=function(){Y.readyState==="interactive"&&(ze=vt(),dt=!0);try{Ct.apply(this,arguments)}catch{}};var Rt=null,Jt=function(Zn){Rt=Zn},Bn=function(){var Zn=Y.currentScript||Rt;if(!Zn&&!dt){var gr=Y.scripts||Y.getElementsByTagName("script");Zn=gr[gr.length-1]}return Zn},Wt=function(Zn){(!dt||!ze)&&(ze=vt());var gr=["<!-- DOC START -->"].concat(ze.split(`
`)),vi=Zn-1,Ti=Math.max(vi-3,0),Jr=Math.min(vi+3,gr.length);return r(gr.slice(Ti,Jr),function(is,zs,eo){return is[Ti+1+eo]=zs.length<=Lo?zs:zs.substr(0,Lo),is},{})};_e.addOnError(function(Zn){Zn.errors[0].stacktrace=i(Zn.errors[0].stacktrace,function(is){return!/__trace__$/.test(is.method)});var gr=Zn.errors[0].stacktrace[0],vi=function(is){return is.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(gr&&gr.file&&vi(gr.file)!==vi(ge))){var Ti=Bn();if(Ti){var Jr=Ti.innerHTML;Zn.addMetadata("script","content",Jr.length<=vr?Jr:Jr.substr(0,vr)),gr&&gr.lineNumber&&(gr.code=Wt(gr.lineNumber))}}},!0);var rr=$(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(Zn){return Qr(he,Zn,function(gr){return ai(gr,function(vi){return{get:function(){return vi[0]},replace:function(Ti){vi[0]=Ti}}})})}),Tr=rr[0];$(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(Zn){!he[Zn]||!he[Zn].prototype||!Object.prototype.hasOwnProperty.call(he[Zn].prototype,"addEventListener")||(Qr(he[Zn].prototype,"addEventListener",function(gr){return ai(gr,As)}),Qr(he[Zn].prototype,"removeEventListener",function(gr){return ai(gr,As,!0)}))});function ai(Zn,gr,vi){return vi===void 0&&(vi=!1),function(){var Ti=[].slice.call(arguments);try{var Jr=gr(Ti),is=Jr.get();if(vi&&Zn.apply(this,Ti),typeof is!="function")return Zn.apply(this,Ti);if(is.__trace__)Jr.replace(is.__trace__);else{var zs=Bn();is.__trace__=function(){Jt(zs),Tr(function(){Jt(null)},0);var bd=is.apply(this,arguments);return Jt(null),bd},is.__trace__.__trace__=is.__trace__,Jr.replace(is.__trace__)}}catch{}if(Zn.apply)return Zn.apply(this,Ti);switch(Ti.length){case 1:return Zn(Ti[0]);case 2:return Zn(Ti[0],Ti[1]);default:return Zn()}}}},configSchema:{trackInlineScripts:{validate:function(_e){return _e===!0||_e===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Qr(Y,he,_e){var ge=Y[he];if(!ge)return ge;var ze=_e(ge);return Y[he]=ze,ge}function As(Y){var he=!!Y[1]&&typeof Y[1].handleEvent=="function";return{get:function(){return he?Y[1].handleEvent:Y[1]},replace:function(_e){he?Y[1].handleEvent=_e:Y[1]=_e}}}var Aa=function(Y){return Y===void 0&&(Y=window),{load:function(he){"addEventListener"in Y&&he._isBreadcrumbTypeEnabled("user")&&Y.addEventListener("click",function(_e){var ge,ze;try{ge=Ia(_e.target),ze=Oo(_e.target,Y)}catch{ge="[hidden]",ze="[hidden]",he._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}he.leaveBreadcrumb("UI click",{targetText:ge,targetSelector:ze},"user")},!0)}}},Qo=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function Ia(Y){var he=Y.textContent||Y.innerText||"";return!he&&(Y.type==="submit"||Y.type==="button")&&(he=Y.value),he=he.replace(Qo,"$1"),he.length>140?he.slice(0,135)+"(...)":he}function Oo(Y,he){var _e=[Y.tagName];if(Y.id&&_e.push("#"+Y.id),Y.className&&Y.className.length&&_e.push("."+Y.className.split(" ").join(".")),!he.document.querySelectorAll||!Array.prototype.indexOf)return _e.join("");try{if(he.document.querySelectorAll(_e.join("")).length===1)return _e.join("")}catch{return _e.join("")}if(Y.parentNode.childNodes.length>1){var ge=Array.prototype.indexOf.call(Y.parentNode.childNodes,Y)+1;_e.push(":nth-child("+ge+")")}return he.document.querySelectorAll(_e.join("")).length===1?_e.join(""):Y.parentNode?Oo(Y.parentNode,he)+" > "+_e.join(""):_e.join("")}var Do={};Do=function(Y){Y===void 0&&(Y=window);var he={load:function(_e){if("addEventListener"in Y&&_e._isBreadcrumbTypeEnabled("navigation")){var ge=function(ze){return function(){return _e.leaveBreadcrumb(ze,{},"navigation")}};Y.addEventListener("pagehide",ge("Page hidden"),!0),Y.addEventListener("pageshow",ge("Page shown"),!0),Y.addEventListener("load",ge("Page loaded"),!0),Y.document.addEventListener("DOMContentLoaded",ge("DOMContentLoaded"),!0),Y.addEventListener("load",function(){return Y.addEventListener("popstate",ge("Navigated back"),!0)}),Y.addEventListener("hashchange",function(ze){var st=ze.oldURL?{from:Ra(ze.oldURL,Y),to:Ra(ze.newURL,Y),state:Ec(Y)}:{to:Ra(Y.location.href,Y)};_e.leaveBreadcrumb("Hash changed",st,"navigation")},!0),Y.history.replaceState&&Ll(_e,Y.history,"replaceState",Y),Y.history.pushState&&Ll(_e,Y.history,"pushState",Y)}}};return he};var Ra=function(Y,he){var _e=he.document.createElement("A");return _e.href=Y,""+_e.pathname+_e.search+_e.hash},Sc=function(Y,he,_e,ge){var ze=Ra(Y.location.href,Y);return{title:_e,state:he,prevState:Ec(Y),to:ge||ze,from:ze}},Ll=function(Y,he,_e,ge){var ze=he[_e];he[_e]=function(st,dt,vt){Y.leaveBreadcrumb("History "+_e,Sc(ge,st,dt,vt),"navigation"),typeof Y.resetEventCount=="function"&&Y.resetEventCount(),Y._config.autoTrackSessions&&Y.startSession(),ze.apply(he,[st,dt].concat(vt!==void 0?vt:[]))}},Ec=function(Y){try{return Y.history.state}catch{}},cs="request",sl=function(Y,he){Y===void 0&&(Y=[]),he===void 0&&(he=window);var _e={load:function(ge){if(!ge._isBreadcrumbTypeEnabled("request"))return;var ze=[ge._config.endpoints.notify,ge._config.endpoints.sessions].concat(Y);st(),Ct();function st(){if("addEventListener"in he.XMLHttpRequest.prototype){var Bn=he.XMLHttpRequest.prototype.open;he.XMLHttpRequest.prototype.open=function(rr,Tr){var ai=this,Zn=!1,gr=function(){return vt(rr,Tr)},vi=function(){return dt(rr,Tr,ai.status)};Zn&&(this.removeEventListener("load",vi),this.removeEventListener("error",gr)),this.addEventListener("load",vi),this.addEventListener("error",gr),Zn=!0,Bn.apply(this,arguments)}}}function dt(Bn,Wt,rr){if(Wt===void 0){ge._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof Wt=="string"&&l(ze,Wt.replace(/\?.*$/,"")))){var Tr={status:rr,request:Bn+" "+Wt};rr>=400?ge.leaveBreadcrumb("XMLHttpRequest failed",Tr,cs):ge.leaveBreadcrumb("XMLHttpRequest succeeded",Tr,cs)}}function vt(Bn,Wt){if(Wt===void 0){ge._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof Wt=="string"&&l(ze,Wt.replace(/\?.*$/,""))||ge.leaveBreadcrumb("XMLHttpRequest error",{request:Bn+" "+Wt},cs)}function Ct(){if(!(!("fetch"in he)||he.fetch.polyfill)){var Bn=he.fetch;he.fetch=function(){var rr=arguments,Tr=arguments[0],ai=arguments[1],Zn,gr=null;return Tr&&typeof Tr=="object"?(gr=Tr.url,ai&&"method"in ai?Zn=ai.method:Tr&&"method"in Tr&&(Zn=Tr.method)):(gr=Tr,ai&&"method"in ai&&(Zn=ai.method)),Zn===void 0&&(Zn="GET"),new Promise(function(vi,Ti){Bn.apply(void 0,rr).then(function(Jr){Rt(Jr,Zn,gr),vi(Jr)}).catch(function(Jr){Jt(Zn,gr),Ti(Jr)})})}}}var Rt=function(Bn,Wt,rr){var Tr={status:Bn.status,request:Wt+" "+rr};Bn.status>=400?ge.leaveBreadcrumb("fetch() failed",Tr,cs):ge.leaveBreadcrumb("fetch() succeeded",Tr,cs)},Jt=function(Bn,Wt){ge.leaveBreadcrumb("fetch() error",{request:Bn+" "+Wt},cs)}}};return _e},ns={load:function(Y){var he=0;Y.addOnError(function(_e){if(he>=Y._config.maxEvents)return Y._logger.warn("Cancelling event send due to maxEvents per session limit of "+Y._config.maxEvents+" being reached"),!1;he++}),Y.resetEventCount=function(){he=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer 100",validate:function(Y){return w(1,100)(Y)}}}},rs={};rs={load:function(Y){Y.addOnError(function(he){var _e=r(he.errors,function(ge,ze){return ge.concat(ze.stacktrace)},[]);$(_e,function(ge){ge.file=nr(ge.file)})})}};var nr=rs._strip=function(Y){return typeof Y=="string"?Y.replace(/\?.*$/,"").replace(/#.*$/,""):Y},Is=function(Y,he){return Y===void 0&&(Y=window),he===void 0&&(he="window onerror"),{load:function(_e){if(!_e._config.autoDetectErrors||!_e._config.enabledErrorTypes.unhandledExceptions)return;function ge(st,dt,vt,Ct,Rt){if(vt===0&&/Script error\.?/.test(st))_e._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var Jt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},Bn;if(Rt)Bn=_e.Event.create(Rt,!0,Jt,he,1),jr(Bn.errors[0].stacktrace,dt,vt,Ct);else if(typeof st=="object"&&st!==null&&(!dt||typeof dt!="string")&&!vt&&!Ct&&!Rt){var Wt=st.type?"Event: "+st.type:"Error",rr=st.message||st.detail||"";Bn=_e.Event.create({name:Wt,message:rr},!0,Jt,he,1),Bn.originalError=st,Bn.addMetadata(he,{event:st,extraParameters:dt})}else Bn=_e.Event.create(st,!0,Jt,he,1),jr(Bn.errors[0].stacktrace,dt,vt,Ct);_e._notify(Bn)}typeof ze=="function"&&ze.apply(this,arguments)}var ze=Y.onerror;Y.onerror=ge}}},jr=function(Y,he,_e,ge){Y[0]||Y.push({});var ze=Y[0];!ze.file&&typeof he=="string"&&(ze.file=he),!ze.lineNumber&&Ml(_e)&&(ze.lineNumber=_e),ze.columnNumber||(Ml(ge)?ze.columnNumber=ge:window.event&&Ml(window.event.errorCharacter)&&(ze.columnNumber=window.event.errorCharacter))},Ml=function(Y){return typeof Y=="number"&&String.call(Y)!=="NaN"},Jo=function(Y){Y===void 0&&(Y=window);var he={load:function(_e){if(!(!_e._config.autoDetectErrors||!_e._config.enabledErrorTypes.unhandledRejections)){var ge=function(ze){var st=ze.reason,dt=!1;try{ze.detail&&ze.detail.reason&&(st=ze.detail.reason,dt=!0)}catch{}var vt=_e.Event.create(st,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,_e._logger);dt&&$(vt.errors[0].stacktrace,vu(st)),_e._notify(vt,function(Ct){if(an(Ct.originalError)&&!Ct.originalError.stack){var Rt;Ct.addMetadata("unhandledRejection handler",(Rt={},Rt[Object.prototype.toString.call(Ct.originalError)]={name:Ct.originalError.name,message:Ct.originalError.message,code:Ct.originalError.code},Rt))}})};"addEventListener"in Y?Y.addEventListener("unhandledrejection",ge):Y.onunhandledrejection=function(ze,st){ge({detail:{reason:ze,promise:st}})}}}};return he},vu=function(Y){return function(he){he.file!==Y.toString()&&he.method&&(he.method=he.method.replace(/^\s+/,""))}},go={},ea="Bugsnag JavaScript",_u="7.25.0",Ol="https://github.com/bugsnag/bugsnag-js",Di=z({},I.schema,q),Xr={_client:null,createClient:function(Y){typeof Y=="string"&&(Y={apiKey:Y}),Y||(Y={});var he=[Un,$r(),$n(),Ps(),ns,lr,yu,rs,Is(),Jo(),Do(),Aa(),sl(),Yo,Mo()],_e=new Et(Y,Di,he,{name:ea,version:_u,url:Ol});return _e._setDelivery(window.XDomainRequest?kt:In),_e._logger.debug("Loaded!"),_e.leaveBreadcrumb("Bugsnag loaded",{},"state"),_e._config.autoTrackSessions?_e.startSession():_e},start:function(Y){return Xr._client?(Xr._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),Xr._client):(Xr._client=Xr.createClient(Y),Xr._client)},isStarted:function(){return Xr._client!=null}};return $(["resetEventCount"].concat(g(Et.prototype)),function(Y){/^_/.test(Y)||(Xr[Y]=function(){if(!Xr._client)return console.log("Bugsnag."+Y+"() was called before Bugsnag.start()");Xr._client._depth+=1;var he=Xr._client[Y].apply(Xr._client,arguments);return Xr._client._depth-=1,he})}),go=Xr,go.Client=Et,go.Event=it,go.Session=Ue,go.Breadcrumb=fe,go.default=Xr,go})})(Wz);var wq=Wz.exports,Sq=wq;const Av=uu(Sq);function uE(e,...t){return(n=e,r)=>t.reduce((l,u)=>u(l,r),n)}const Eq={extras:[]};function Cq(e=Eq,t){switch(t.type){case"FETCH_EXTRAS_SUCCESS":return{...e,extras:t.extras};case"FETCH_EXTRAS_FAILURE":case"FETCH_EXTRAS_REQUEST":default:return e}}var ww=(e=>(e.Apartment="Apartment",e.GuestHouse="GuestHouse",e.HotelRental="HotelRental",e.Hostel="Hostel",e.Hotel="Hotel",e.Residence="Residence",e.Villa="Villa",e))(ww||{}),Ta=(e=>(e[e.Success=0]="Success",e[e.TechnicalError=1]="TechnicalError",e[e.BusinessError=2]="BusinessError",e[e.SessionExpired=3]="SessionExpired",e[e.HotelDomainError=150]="HotelDomainError",e))(Ta||{}),Xy=(e=>(e[e.Success=0]="Success",e[e.InvalidPromoCode=1]="InvalidPromoCode",e[e.InvalidPromoCodeBookingPeriod=2]="InvalidPromoCodeBookingPeriod",e[e.InvalidPromoCodeStayPeriod=3]="InvalidPromoCodeStayPeriod",e[e.Unknown=100]="Unknown",e))(Xy||{}),Xf=(e=>(e[e.ErrorAddingExtra=4]="ErrorAddingExtra",e[e.ErrorDeleteExtra=5]="ErrorDeleteExtra",e))(Xf||{}),dh=(e=>(e[e.Success=0]="Success",e[e.TechnicalError=1]="TechnicalError",e[e.BusinessError=2]="BusinessError",e[e.SessionExpired=3]="SessionExpired",e[e.NoAvailability=4]="NoAvailability",e[e.NoAvailabilityWithFilters=5]="NoAvailabilityWithFilters",e[e.ErrorWithFilters=11]="ErrorWithFilters",e[e.ErrorWithSortOrder=12]="ErrorWithSortOrder",e))(dh||{}),mi=(e=>(e[e.Success=0]="Success",e[e.TechnicalError=1]="TechnicalError",e[e.BusinessError=2]="BusinessError",e[e.SessionExpired=3]="SessionExpired",e[e.NoAvailability=4]="NoAvailability",e[e.NoAvailabilityWithFilters=5]="NoAvailabilityWithFilters",e[e.NoAvailabilityWithCrossSell=6]="NoAvailabilityWithCrossSell",e[e.NoAvailabilityWithSelectedRoom=7]="NoAvailabilityWithSelectedRoom",e[e.NoAvailabilityWithRoomInBasket=8]="NoAvailabilityWithRoomInBasket",e[e.NoAvailabilityWithSelectedGuests=9]="NoAvailabilityWithSelectedGuests",e[e.AvailabilityWithAlternativeGuests=10]="AvailabilityWithAlternativeGuests",e[e.ErrorWithFilters=11]="ErrorWithFilters",e[e.ErrorWithSortOrder=12]="ErrorWithSortOrder",e))(mi||{});const Tq=["Nothing","CreditCardNumber","FirstNightWithoutExtras","PercentageWithoutExtras","PercentageWithExtras"],__=["None","Percentage","Nominal","PercentageWoExtras"];var Hm=(e=>(e[e.RoomOnly=0]="RoomOnly",e[e.BreakfastIncluded=1]="BreakfastIncluded",e[e.HalfBoard=2]="HalfBoard",e[e.FullBoard=3]="FullBoard",e[e.Package=4]="Package",e))(Hm||{}),Gu=(e=>(e[e.None=0]="None",e[e.MinStay=1]="MinStay",e))(Gu||{}),Nf=(e=>(e[e.Visa=0]="Visa",e[e.MasterCard=1]="MasterCard",e[e.AmericanExpress=2]="AmericanExpress",e[e.DinersClub=3]="DinersClub",e[e.Jcb=4]="Jcb",e))(Nf||{}),PP=(e=>(e[e.Paypal=0]="Paypal",e))(PP||{}),Bh=(e=>(e[e.DateSelection=0]="DateSelection",e[e.RoomSelection=1]="RoomSelection",e[e.ExtraSelection=2]="ExtraSelection",e[e.Summary=3]="Summary",e[e.HotelSelection=4]="HotelSelection",e))(Bh||{}),x_=(e=>(e[e.None=0]="None",e[e.RateCode=1]="RateCode",e[e.OfferCode=2]="OfferCode",e[e.DiscountCode=3]="DiscountCode",e))(x_||{}),AP=(e=>(e[e.Room=0]="Room",e[e.Accommodation=1]="Accommodation",e))(AP||{});const kq={id:"",sessionValidity:Bh.DateSelection,startBookingStep:Bh.DateSelection,stay:{arrivalDate:{date:"",displayDate:""},departureDate:{date:"",displayDate:""},nightCount:0},guests:[{adults:0,children:0,infants:0,position:1}],coordinates:null,promoCode:"",promoCodeType:x_.None,culture:"",currency:"",cards:[],translations:null,hotelFilters:[],hotelSortOrder:"",roomFilters:[],roomSortOrder:"",selectedHotel:{id:"0",name:"",brand:"",city:"",zipCode:"",countryCode:"",type:ww.Hotel,rating:0,category:"",roomCount:0,paymentMethods:{supportedCardTypes:[],supportedPaymentMethods:[]},amenities:[],checkin:"",checkout:"",receptionOpeningHours:{openingHours:"",openingTime:"",closingTime:""},summary:"",direction:"",galleryPictures:[{picture2XUrl:"",pictureUrl:""}],picture:{picture2XUrl:"",pictureUrl:""},productId:"",acceptedCards:[]},isDetailedOccupancy:!1,initialStayDates:[],minimumArrivalDate:"",legalNoticeUrl:"",salesTermsAndConditions:{name:"",url:"",isVisible:!1},defaultDisplayType:AP.Room,maxAuthorizedRooms:1,focusedRoomForExtras:null,groupId:""};function Pq(e=kq,t){switch(t.type){case"SET_CULTURE":return{...e,culture:t.culture};default:return e}}const Sw="00000000-0000-0000-0000-000000000000",Aq={id:Sw,rooms:[],hotelExtras:[],total:"",rateTotal:"",rateTotalAmount:0,rateCurrency:"",onSiteTaxes:[],skipExtraSelection:!1,isComplete:!1,isUpdating:!1};function Iq(e=Aq,t){switch(t.type){case"SET_BASKET":return{...e,...t.basket};case"UPSERT_EXTRA_SUCCESS":case"UPSERT_ROOM_SUCCESS":case"CLEAR_BASKET_SUCCESS":return{...e,...t.basket,isUpdating:!1};case"UPSERT_EXTRA_FAILURE":case"UPSERT_ROOM_FAILURE":case"CLEAR_BASKET_FAILURE":return{...e,isUpdating:!1,error:t.error};case"UPSERT_EXTRA_REQUEST":case"CLEAR_BASKET_REQUEST":return{...e,error:void 0,isUpdating:!0};case"UPSERT_ROOM_REQUEST":return{...e,isUpdating:!0,error:void 0};case"RESET_BASKET_ERROR":return{...e,error:void 0};case"INCOMPLETE_BASKET":return{...e,isComplete:!1};default:return e}}const Rq={quote:{id:Sw,rooms:[],hotelExtras:[],total:"",rateTotal:"",rateTotalAmount:0,rateCurrency:"",includedTotalTaxes:"",excludedTotalTaxes:"",onSiteTotalTaxes:"",includedTaxes:[],excludedTaxes:[],onSiteTaxes:[],bookingFees:"",bookingFeesAmount:0,bookingFeesCurrency:"EUR",skipExtraSelection:!1,isComplete:!1,marketing:{optin:{hotel:!1,partners:!1}}},paymentOptions:[],cancellationInsurance:null,specialRequest:"",salesTermsConditions:!1,countries:[],internationalCodes:[],titles:[],priceWarnings:[],occupancyWarning:"",updatedAdultCount:0,notEnoughRooms:!1,isBookingRequest:!1,isBasketUnavailable:!1,hasSmsConfirmation:!1,paymentMethods:{supportedCardTypes:[],supportedPaymentMethods:[]}};function Lq(e=Rq,t){switch(t.type){case"FETCH_SUMMARY_SUCCESS":return{...e,quote:t.quote,paymentOptions:(t==null?void 0:t.paymentOptions)??[],cancellationInsurance:t.cancellationInsurance,countries:(t==null?void 0:t.countries)??[],internationalCodes:t.internationalCodes?t.internationalCodes:[],titles:t.titles?t.titles:[],priceWarnings:t.priceWarnings?t.priceWarnings:[],occupancyWarning:t.occupancyWarning,updatedAdultCount:t.updatedAdultCount,notEnoughRooms:t.notEnoughRooms,isBookingRequest:t.isBookingRequest,isBasketUnavailable:t.isBasketUnavailable,hasSmsConfirmation:t.hasSmsConfirmation,paymentMethods:t.paymentMethods};case"CLEAR_QUOTE":return{...e,quote:{...e.quote}};case"SUBMIT_QUOTE_FAILURE":return{...e,isFetching:!1};case"SUBMIT_QUOTE_REQUEST":return{...e,isFetching:!0};case"SUBMIT_QUOTE_SUCCESS":return{...e,isFetching:!1};case"FETCH_SUMMARY_FAILURE":case"FETCH_SUMMARY_REQUEST":default:return e}}const Mq={isFetching:!1,availableHotels:[],unavailableHotels:[],filters:[],sortOrders:[]};function Oq(e=Mq,t){switch(t.type){case"FETCH_HOTELS_REQUEST":return{...e,isFetching:!0};case"FETCH_HOTELS_SUCCESS":return{...e,isFetching:!1,error:void 0,availableHotels:t.response.availableHotels,unavailableHotels:t.response.unavailableHotels,filters:t.response.filters,sortOrders:t.response.sortOrders};case"FETCH_HOTELS_FAILURE":return{...e,isFetching:!1,error:t.error,currentPage:1,totalPage:1,availableHotels:t.response.availableHotels,unavailableHotels:t.response.unavailableHotels,filters:t.response?t.response.filters:[],sortOrders:t.response?t.response.sortOrders:[]};default:return e}}const Dq={isFetching:!1,availableHotels:[]};function Nq(e=Dq,t){switch(t.type){case"FETCH_ALTERNATIVE_HOTELS_REQUEST":return{...e,isFetching:!0};case"FETCH_ALTERNATIVE_HOTELS_SUCCESS":return{...e,isFetching:!1,error:void 0,availableHotels:t.response.availableHotels};case"FETCH_ALTERNATIVE_HOTELS_FAILURE":return{...e,isFetching:!1,error:t.error};default:return e}}const zL={canFetch:!0,isFetching:!1,dayNames:[],months:[]};function jq(e=zL,t){switch(t.type){case"FETCH_CALENDAR_REQUEST":return{...e,isFetching:!0,error:void 0};case"FETCH_CALENDAR_SUCCESS":return{...e,isFetching:!1,...t.calendar,months:[...e.months,...t.calendar.months]};case"FETCH_CALENDAR_FAILURE":return{...e,isFetching:!1,error:t.error};case"CLEAR_CALENDAR":return zL;default:return e}}const dE={currentPage:1,totalPage:1,rooms:[],filters:[],crossSellUrl:"",sortOrders:[],title:"",subtitle:"",guestPosition:1,totalCount:1,isFetching:!1,alternativeGuestsAllocation:[]};function zq(e=dE,t){switch(t.type){case"FETCH_ROOMS_REQUEST":return{...e,isFetching:!0,error:void 0};case"FETCH_ROOMS_SUCCESS":return{...e,currentPage:t.response.currentPage||1,totalPage:t.response.totalPage||1,rooms:t.needsUpdating?[...e.rooms,...t.response.rooms]:[...t.response.rooms],filters:t.response.filters,sortOrders:t.response.sortOrders,title:t.response.title||"",subtitle:t.response.subtitle||"",guestPosition:t.response.guestPosition||1,totalCount:t.response.totalCount||1,isFetching:!1,error:void 0};case"FETCH_ROOMS_FAILURE":return{...e,...dE,isFetching:!1,error:t.error,rooms:t.response?t.response.rooms:[],crossSellUrl:t.response?t.response.crossSellUrl:"",filters:t.response?t.response.filters:[],sortOrders:t.response?t.response.sortOrders:[],alternativeGuestsAllocation:t.response?t.response.alternativeGuestsAllocation:[]};case"RESET_SEARCH_PARAMS_REQUEST":case"RESET_SEARCH_PARAMS_SUCCESS":return e;case"RESET_SEARCH_PARAMS_FAILURE":return{...e,isFetching:!1,error:t.error};case"RESET_ROOM_PAGINATION":return{...e,currentPage:1,totalPage:1};case"RESET_ALTERNATIVE_GUESTS_ALLOCATION":return{...e,alternativeGuestsAllocation:[]};case"RESET_ROOMS_REQUEST":return dE;default:return e}}function Fq(e,t){let n;const r=new Date(e),i=new Date(t);return n=(i.getFullYear()-r.getFullYear())*12,n-=r.getMonth()+1,n+=i.getMonth()+1,n<=0?0:n+1}function Xz(e,t){const r=new Date(e).getTime(),i=new Date(t).getTime(),l=Math.abs(r-i);return Math.round(l/864e5)}function Bq(e){const t=new Date(e),n=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,r=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`${t.getFullYear()}-${n}-${r}`}function Uq(e,t){const r=Date.parse(e),i=new Date(r),l=new Date(i.setTime(i.getTime()+t*864e5));return Bq(l)}class b_{constructor(t){this.shortDateOptions={month:"short",day:"numeric",timeZone:"UTC"},this.longDateOptions={year:"numeric",month:"short",day:"2-digit",timeZone:"UTC"},this.localeTimeOptions={timeStyle:"short"},this.locale=t}toLocaleDate(t){return t?this.toLongLocaleDate(t):""}toShortLocaleDate(t){const n=new Date(t);return this.isValidDate(n)?new Intl.DateTimeFormat(this.locale,this.shortDateOptions).format(n):""}toLongLocaleDate(t){const n=new Date(t);return this.isValidDate(n)?new Intl.DateTimeFormat(this.locale,this.longDateOptions).format(n):""}toShortFormatPartsLocaleDate(t){if(!t)return[];const n=new Date(t);return this.isValidDate(n)?new Intl.DateTimeFormat(this.locale,this.shortDateOptions).formatToParts(n):[]}toLongFormatPartsLocaleDate(t){if(!t)return[];const n=new Date(t);return this.isValidDate(n)?new Intl.DateTimeFormat(this.locale,this.longDateOptions).formatToParts(n):[]}toLocaleTime(t){const n=new Date,[r,i,l]=t.split(":").map(Number);return n.setHours(r,i,l||0),this.isValidDate(n)?n.toLocaleTimeString(this.locale,this.localeTimeOptions):""}isValidDate(t){return new Date(t)instanceof Date&&isFinite(+t)}}function $q(e,t,n){if(e&&Object.keys(e).length>0)return FL(e,t);const[r]=new Date(n).toISOString().split("T",1),i=new Date(n),[l]=new Date(i.setDate(i.getDate()+1)).toISOString().split("T",1),u={arrivalDate:{date:r,displayDate:r},departureDate:{date:l,displayDate:l},nightCount:Xz(r,l)};return FL(u,t)}function FL(e,t){var a,m;const n=new b_(t),r=(a=e==null?void 0:e.arrivalDate)==null?void 0:a.date,i=(m=e==null?void 0:e.departureDate)==null?void 0:m.date,l=n.toLocaleDate(r),u=n.toLocaleDate(i);return{...e,arrivalDate:{...e.arrivalDate,displayDate:l},departureDate:{...e.departureDate,displayDate:u}}}const Kz={id:"",isFetching:!1,sessionValidity:Bh.DateSelection,startBookingStep:Bh.DateSelection,stay:{arrivalDate:{date:"",displayDate:""},departureDate:{date:"",displayDate:""},nightCount:0},guests:[{adults:0,children:0,infants:0,position:1}],coordinates:null,promoCode:"",promoCodeType:x_.None,culture:"",currency:"",cards:[],translations:{Convergence:{}},hotelFilters:[],hotelSortOrder:"",roomFilters:[],roomSortOrder:"Default",selectedHotel:{id:"0",name:"",brand:"",city:"",zipCode:"",countryCode:"",type:ww.Hotel,rating:0,category:"",roomCount:0,paymentMethods:{supportedCardTypes:[],supportedPaymentMethods:[]},amenities:[],checkin:"",checkout:"",receptionOpeningHours:{openingHours:"",openingTime:"",closingTime:""},summary:"",direction:"",galleryPictures:[{picture2XUrl:"",pictureUrl:""}],picture:{picture2XUrl:"",pictureUrl:""},productId:"",acceptedCards:[]},isDetailedOccupancy:!1,initialStayDates:[],minimumArrivalDate:"",legalNoticeUrl:"",salesTermsAndConditions:{name:"",url:"",isVisible:!1},defaultDisplayType:AP.Room,maxAuthorizedRooms:1,focusedRoomForExtras:null,groupId:"",guestPositionUsed:1,invalidPromoCode:""};function Vq(e=Kz,t){switch(t.type){case"SET_SESSION":return{...e,...t.session,stay:$q(t.session.stay,t.session.culture,t.session.minimumArrivalDate)};case"CHANGE_ROOM_SORT_ORDER_REQUEST":return{...e,isFetching:!0,error:void 0};case"CHANGE_ROOM_SORT_ORDER_SUCCESS":return{...e,...t.session,isFetching:!1};case"CHANGE_ROOM_SORT_ORDER_FAILURE":return{...e,isFetching:!1,error:t.error};case"CHANGE_ROOM_FILTERS_REQUEST":return{...e,isFetching:!0,error:void 0};case"CHANGE_ROOM_FILTERS_SUCCESS":return{...e,...t.session,isFetching:!1};case"CHANGE_ROOM_FILTERS_FAILURE":return{...e,isFetching:!1,error:t.error};case"CHANGE_HOTEL_FILTERS_REQUEST":return{...e,isFetching:!0,error:void 0};case"CHANGE_HOTEL_FILTERS_SUCCESS":return{...e,...t.session,isFetching:!1};case"CHANGE_HOTEL_FILTERS_FAILURE":return{...e,isFetching:!1,error:t.error};case"CHANGE_HOTEL_SORT_ORDER_REQUEST":return{...e,isFetching:!0,error:void 0};case"CHANGE_HOTEL_SORT_ORDER_SUCCESS":return{...e,...t.session,isFetching:!1};case"CHANGE_HOTEL_SORT_ORDER_FAILURE":return{...e,isFetching:!1,error:t.error};case"SET_SEARCH_PARAMETERS_REQUEST":return{...e,error:void 0,isFetching:!0};case"SET_SEARCH_PARAMETERS_SUCCESS":return{...e,isFetching:!1,error:void 0};case"SET_SEARCH_PARAMETERS_FAILURE":return{...e,isFetching:!1,error:t.error};case"CLEAN_SEARCH_PARAMETERS_FAILURE":return{...e,isFetching:!1,error:void 0};case"SET_CURRENCY_REQUEST":return{...e,isFetching:!0,error:void 0};case"SET_CURRENCY_SUCCESS":return{...e,isFetching:!1,error:void 0};case"SET_PROMOCODE":return{...e,promoCode:t.promocode};case"SET_STAY":return{...e,stay:t.stay};case"SET_GUESTS":return{...e,guests:t.guests};case"SET_GUEST_POSITION":return{...e,guestPositionUsed:t.guestPositionUsed};case"SET_INVALID_PROMOCODE":return{...e,invalidPromoCode:t.invalidPromoCode};default:return e}}const Hq=(e,t)=>{Object.entries(t).map(([n,r])=>e.searchParams.append(n,r))},Zq=(e,t)=>{const n=e.pathname.endsWith("/")?"":"/",r=t.replace(/^\/+/g,"");e.pathname+=n+r},bT=(e,t,n)=>{if(!e)return"";e=qq(e);try{const r=new URL(e);return t&&Zq(r,t),n&&Hq(r,n),r.href}catch{return""}},qq=e=>/^https?:\/\//i.test(e)?e:`https://${e}`;let Li;function Gq(e){Li=e}const Wq={isFetching:!1,engineReference:"",controllerUrls:{appIndexUrl:"",fetchCalendarUrl:"",fetchHotelsUrl:"",fetchRoomsUrl:"",resetSearchParamsUrl:"",fetchExtrasUrl:"",fetchRatePricesUrl:"",changeCurrencyUrl:"",changeLanguageUrl:"",changeSearchParametersUrl:"",changeRoomFiltersUrl:"",changeRoomSortOrderUrl:"",changeHotelFiltersUrl:"",changeHotelSortOrderUrl:"",changeHotelUrl:"",upsertRoomUrl:"",upsertExtraUrl:"",clearBasketUrl:"",fetchSummaryUrl:"",submitQuoteUrl:"",fetchTermsUrl:"",fetchLoyaltyUserUrl:"",logoutLoyaltyUserUrl:"",confirmationUrl:"",validateSearchParametersUrl:"",bookingConfirmationUrl:"",fetchAlternativeHotelsUrl:""},bookingEngineConstraints:{maxStayLength:0,isPromoCodeVisible:!1,isGuestAuthenticationVisible:!1},guestConstraints:{adults:{isVisible:!0,maxCount:10},children:{isVisible:!0,maxCount:10},infants:{isVisible:!0,maxCount:10},ageDetails:[]},cultures:[],currencies:[],websiteUrl:"",modificationUrl:"",extraordinaryBannerUrl:"",trackingPrivacySettings:{trackers:[],consentManagementPlatform:{activationLevel:void 0},navigationConstraint:{consentManagementPlatformEnabled:!1},clientDomain:"",gtmClientActivation:!1,trackingApplicationName:"",googleAnalyticsId:""},loyalty:{isEnabled:!1,isTeaserActivated:!1},theme:{},displayConstraints:{extrasDisplayLimit:void 0,ratePriceDisplayMode:"Total",ratesDisplayLimit:void 0,pricingDisplayMode:"Lowest"},guarantees:[],configurationTheme:void 0,configurationLegal:null,pluginConfigs:[],configurationCulture:void 0,configurationInsite:void 0,isMultiHotel:!1};function Xq(e=Wq,t){var n,r,i,l,u,a,m,g,w,C,P,I,N,z,$,H,V,q,te,ue,fe,Z,le;switch(t.type){case"SET_CONFIGURATION":{const be=t.configuration,{controllerUrls:Re,bookingEngineConstraints:Je,currencies:Fe,cultures:Xe,navigationConstraint:gt,trackingApplicationName:yt,gtmClientActivation:lt,googleAnalyticsId:Nt,clientDomain:qe,modificationUrl:_t,guarantees:Ke,guestConstraints:we,summaryConstraints:He,displayConstraints:Be,websiteUrl:ct,engineReference:xt,isMultiHotel:bt}=be,It={...e,currencies:Fe,cultures:Xe,controllerUrls:{...Re,appIndexUrl:document.location.pathname.slice()},trackingPrivacySettings:{...e.trackingPrivacySettings,navigationConstraint:gt,trackingApplicationName:yt,gtmClientActivation:lt,googleAnalyticsId:Nt,clientDomain:qe},modificationUrl:_t,guarantees:Ke,guestConstraints:we,summaryConstraints:He,bookingEngineConstraints:Je,displayConstraints:Be,websiteUrl:ct,engineReference:xt,isMultiHotel:bt};return Gq(It.controllerUrls),{...e,...It}}case"FETCH_CONFIGURATION_REQUEST":return{...e,isFetching:!0,error:void 0};case"FETCH_CONFIGURATION_FAILURE":return{...e,isFetching:!1,error:t.error};case"FETCH_CONFIGURATION_SUCCESS":{const be=t.response,Re={customisation:(n=be==null?void 0:be.configuration)==null?void 0:n.customisation,headerAndFooter:(r=be==null?void 0:be.configuration)==null?void 0:r.headerAndFooter},Je={europeanPlatform:(l=(i=be==null?void 0:be.configuration)==null?void 0:i.legal)==null?void 0:l.europeanPlatform,mediation:(a=(u=be==null?void 0:be.configuration)==null?void 0:u.legal)==null?void 0:a.mediation},Fe={trackers:(m=be==null?void 0:be.tracking)==null?void 0:m.trackers,consentManagementPlatform:(w=(g=be==null?void 0:be.configuration)==null?void 0:g.administration)==null?void 0:w.consentManagementPlatform,navigationConstraint:void 0},Xe={culture:be.culture,cultureIsRightToLeft:be.cultureIsRightToLeft,cultureTwoLetterISOLanguageName:be.cultureTwoLetterISOLanguageName},gt={activated:((I=(P=(C=be==null?void 0:be.configuration)==null?void 0:C.administration)==null?void 0:P.inSite)==null?void 0:I.activated)??!1,domain:($=(z=(N=be==null?void 0:be.configuration)==null?void 0:N.administration)==null?void 0:z.inSite)==null?void 0:$.hotelDomain,url:bT((q=(V=(H=be==null?void 0:be.configuration)==null?void 0:H.administration)==null?void 0:V.inSite)==null?void 0:q.hotelDomain,(fe=(ue=(te=be==null?void 0:be.configuration)==null?void 0:te.administration)==null?void 0:ue.inSite)==null?void 0:fe.bookingPage)};return{...e,isFetching:!1,configurationTheme:Re,configurationLegal:Je,configurationCulture:Xe,trackingPrivacySettings:Fe,pluginConfigs:be==null?void 0:be.pluginConfigs,marketingAddons:(le=(Z=be==null?void 0:be.configuration)==null?void 0:Z.administration)==null?void 0:le.marketingAddons,configurationInsite:gt}}case"SET_THEME":return{...e,theme:t.theme};case"SET_LOYALTY":return{...e,loyalty:t.loyalty};default:return e}}const Yz={isFetching:!1,extras:[]};function Kq(e=Yz,t){switch(t.type){case"FETCH_EXTRAS_REQUEST":return{...e,isFetching:!0};case"FETCH_EXTRAS_SUCCESS":return{...e,isFetching:!1,extras:t.extras};case"FETCH_EXTRAS_FAILURE":return{...e,isFetching:!1,error:t.error};default:return e}}const wT={isFetching:!1,quote:{id:Sw,rooms:[],hotelExtras:[],discountCode:void 0,total:"",rateTotal:"",rateTotalAmount:0,rateCurrency:"",includedTotalTaxes:"",excludedTotalTaxes:"",includedTaxes:[],excludedTaxes:[],onSiteTaxes:[],bookingFees:"",bookingFeesAmount:0,bookingFeesCurrency:"EUR",skipExtraSelection:!1,isComplete:!1,marketing:{optin:{hotel:!1,partners:!1}},onSiteTotalTaxes:""},paymentOptions:[],cancellationInsurance:null,guestInformation:{country:"",email:"",firstName:"",lastName:"",phoneCountryCode:"",phone:"",title:""},showErrors:!1,specialRequest:"",salesTermsConditions:!1,countries:[],internationalCodes:[],titles:[],priceWarnings:[],occupancyWarning:"",updatedAdultCount:0,notEnoughRooms:!1,isBookingRequest:!1,isBasketUnavailable:!1,hasSmsConfirmation:!1,paymentMethods:{supportedCardTypes:[],supportedPaymentMethods:[]},termsAndConditions:{acceptedCards:[],allowGuestModification:!1,allowStayModification:!1,cancelConditions:"",checkInTime:"",checkOutTime:"",customCancelConditions:"",customTermsUrl:"",depositCurrency:"",depositText:"",openingHours:"",taxes:{included:[],excluded:[],onSite:[]}}};function Yq(e=wT,t){switch(t.type){case"FETCH_SUMMARY_REQUEST":return{...e,isFetching:!0};case"FETCH_SUMMARY_SUCCESS":return{...e,isFetching:!1,guestInformation:e.guestInformation};case"FETCH_SUMMARY_FAILURE":return{...e,error:t.error,isFetching:!1};case"UPDATE_GUEST_INFORMATION":return{...e,guestInformation:{...e.guestInformation,...t.guestInformation}};case"SHOW_ERRORS":return{...e,showErrors:!0};case"FETCH_TERMS_REQUEST":return{...e,isFetching:!0};case"FETCH_TERMS_FAILURE":return{...e,isFetching:!1};case"FETCH_TERMS_SUCCESS":return{...e,isFetching:!1,termsAndConditions:t.terms};case"CLEAR_QUOTE":return{...e,quote:{...wT.quote}};default:return e}}const Qq={basket:Iq,calendar:jq,configuration:Xq,session:uE(Kz,Pq,Vq),roomSelection:zq,extraSelection:uE(Yz,Cq,Kq),hotelSelection:Oq,alternativeHotels:Nq,summary:uE(wT,Lq,Yq)},Jq=Zz(Qq),IP=[];if(gc("MODE")==="development"){const e=bq.createLogger({level:"info"});IP.push(e)}const eG=()=>e=>t=>{try{return e(t)}catch(n){Av.notify(n,r=>{r.severity="error",r.addMetadata("Redux Error",{message:n.message})})}};IP.push(eG);const Fr=pq({reducer:Jq,middleware:e=>e().concat(IP)}),Si=PZ,Te=iZ,tG=()=>y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"90vh"},children:y.jsx("svg",{width:"50",height:"50",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{fill:"currentColor",d:"M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z",children:y.jsx("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})});function Qz(){return y.jsx("div",{style:{display:"grid",height:"90vh",placeItems:"center"},children:y.jsx(tG,{})})}var Jz={exports:{}},nG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rG=nG,iG=rG;function eF(){}function tF(){}tF.resetWarningCache=eF;var sG=function(){function e(r,i,l,u,a,m){if(m!==iG){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tF,resetWarningCache:eF};return n.PropTypes=n,n};Jz.exports=sG();var oG=Jz.exports;const ji=uu(oG);function aG(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var nF=M,lG=aG(nF);function BL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var uG=!!(typeof window<"u"&&window.document&&window.document.createElement);function dG(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(l){if(typeof l!="function")throw new Error("Expected WrappedComponent to be a React component.");var u=[],a;function m(){a=e(u.map(function(w){return w.props})),g.canUseDOM?t(a):n&&(a=n(a))}var g=function(w){cG(C,w);function C(){return w.apply(this,arguments)||this}C.peek=function(){return a},C.rewind=function(){if(C.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var N=a;return a=void 0,u=[],N};var P=C.prototype;return P.UNSAFE_componentWillMount=function(){u.push(this),m()},P.componentDidUpdate=function(){m()},P.componentWillUnmount=function(){var N=u.indexOf(this);u.splice(N,1),m()},P.render=function(){return lG.createElement(l,this.props)},C}(nF.PureComponent);return BL(g,"displayName","SideEffect("+r(l)+")"),BL(g,"canUseDOM",uG),g}}var hG=dG;const fG=uu(hG);var pG=typeof Element<"u",mG=typeof Map=="function",gG=typeof Set=="function",yG=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ub(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ub(e[r],t[r]))return!1;return!0}var l;if(mG&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l=e.entries();!(r=l.next()).done;)if(!t.has(r.value[0]))return!1;for(l=e.entries();!(r=l.next()).done;)if(!ub(r.value[1],t.get(r.value[0])))return!1;return!0}if(gG&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l=e.entries();!(r=l.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(yG&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(pG&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!ub(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var vG=function(t,n){try{return ub(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const _G=uu(vG);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var UL=Object.getOwnPropertySymbols,xG=Object.prototype.hasOwnProperty,bG=Object.prototype.propertyIsEnumerable;function wG(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function SG(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(l){return t[l]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(l){i[l]=l}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var EG=SG()?Object.assign:function(e,t){for(var n,r=wG(e),i,l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)xG.call(n,u)&&(r[u]=n[u]);if(UL){i=UL(n);for(var a=0;a<i.length;a++)bG.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};const CG=uu(EG);var Kf={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},_r={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(_r).map(function(e){return _r[e]});var zi={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Jb={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Iv={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},TG=Object.keys(Jb).reduce(function(e,t){return e[Jb[t]]=t,e},{}),kG=[_r.NOSCRIPT,_r.SCRIPT,_r.STYLE],dc="data-react-helmet",PG=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AG=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},IG=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RG=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$L=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},LG=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},ST=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},MG=function(t){var n=Zm(t,_r.TITLE),r=Zm(t,Iv.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=Zm(t,Iv.DEFAULT_TITLE);return n||i||void 0},OG=function(t){return Zm(t,Iv.ON_CHANGE_CLIENT_STATE)||function(){}},hE=function(t,n){return n.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,i){return fa({},r,i)},{})},DG=function(t,n){return n.filter(function(r){return typeof r[_r.BASE]<"u"}).map(function(r){return r[_r.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var l=Object.keys(i),u=0;u<l.length;u++){var a=l[u],m=a.toLowerCase();if(t.indexOf(m)!==-1&&i[m])return r.concat(i)}return r},[])},gy=function(t,n,r){var i={};return r.filter(function(l){return Array.isArray(l[t])?!0:(typeof l[t]<"u"&&FG("Helmet: "+t+' should be of type "Array". Instead found type "'+PG(l[t])+'"'),!1)}).map(function(l){return l[t]}).reverse().reduce(function(l,u){var a={};u.filter(function(P){for(var I=void 0,N=Object.keys(P),z=0;z<N.length;z++){var $=N[z],H=$.toLowerCase();n.indexOf(H)!==-1&&!(I===zi.REL&&P[I].toLowerCase()==="canonical")&&!(H===zi.REL&&P[H].toLowerCase()==="stylesheet")&&(I=H),n.indexOf($)!==-1&&($===zi.INNER_HTML||$===zi.CSS_TEXT||$===zi.ITEM_PROP)&&(I=$)}if(!I||!P[I])return!1;var V=P[I].toLowerCase();return i[I]||(i[I]={}),a[I]||(a[I]={}),i[I][V]?!1:(a[I][V]=!0,!0)}).reverse().forEach(function(P){return l.push(P)});for(var m=Object.keys(a),g=0;g<m.length;g++){var w=m[g],C=CG({},i[w],a[w]);i[w]=C}return l},[]).reverse()},Zm=function(t,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.hasOwnProperty(n))return i[n]}return null},NG=function(t){return{baseTag:DG([zi.HREF,zi.TARGET],t),bodyAttributes:hE(Kf.BODY,t),defer:Zm(t,Iv.DEFER),encode:Zm(t,Iv.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:hE(Kf.HTML,t),linkTags:gy(_r.LINK,[zi.REL,zi.HREF],t),metaTags:gy(_r.META,[zi.NAME,zi.CHARSET,zi.HTTPEQUIV,zi.PROPERTY,zi.ITEM_PROP],t),noscriptTags:gy(_r.NOSCRIPT,[zi.INNER_HTML],t),onChangeClientState:OG(t),scriptTags:gy(_r.SCRIPT,[zi.SRC,zi.INNER_HTML],t),styleTags:gy(_r.STYLE,[zi.CSS_TEXT],t),title:MG(t),titleAttributes:hE(Kf.TITLE,t)}},ET=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){ET(t)},0)}}(),VL=function(t){return clearTimeout(t)},jG=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||ET:global.requestAnimationFrame||ET,zG=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||VL:global.cancelAnimationFrame||VL,FG=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},yy=null,BG=function(t){yy&&zG(yy),t.defer?yy=jG(function(){HL(t,function(){yy=null})}):(HL(t),yy=null)},HL=function(t,n){var r=t.baseTag,i=t.bodyAttributes,l=t.htmlAttributes,u=t.linkTags,a=t.metaTags,m=t.noscriptTags,g=t.onChangeClientState,w=t.scriptTags,C=t.styleTags,P=t.title,I=t.titleAttributes;CT(_r.BODY,i),CT(_r.HTML,l),UG(P,I);var N={baseTag:am(_r.BASE,r),linkTags:am(_r.LINK,u),metaTags:am(_r.META,a),noscriptTags:am(_r.NOSCRIPT,m),scriptTags:am(_r.SCRIPT,w),styleTags:am(_r.STYLE,C)},z={},$={};Object.keys(N).forEach(function(H){var V=N[H],q=V.newTags,te=V.oldTags;q.length&&(z[H]=q),te.length&&($[H]=N[H].oldTags)}),n&&n(),g(t,z,$)},rF=function(t){return Array.isArray(t)?t.join(""):t},UG=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=rF(t)),CT(_r.TITLE,n)},CT=function(t,n){var r=document.getElementsByTagName(t)[0];if(r){for(var i=r.getAttribute(dc),l=i?i.split(","):[],u=[].concat(l),a=Object.keys(n),m=0;m<a.length;m++){var g=a[m],w=n[g]||"";r.getAttribute(g)!==w&&r.setAttribute(g,w),l.indexOf(g)===-1&&l.push(g);var C=u.indexOf(g);C!==-1&&u.splice(C,1)}for(var P=u.length-1;P>=0;P--)r.removeAttribute(u[P]);l.length===u.length?r.removeAttribute(dc):r.getAttribute(dc)!==a.join(",")&&r.setAttribute(dc,a.join(","))}},am=function(t,n){var r=document.head||document.querySelector(_r.HEAD),i=r.querySelectorAll(t+"["+dc+"]"),l=Array.prototype.slice.call(i),u=[],a=void 0;return n&&n.length&&n.forEach(function(m){var g=document.createElement(t);for(var w in m)if(m.hasOwnProperty(w))if(w===zi.INNER_HTML)g.innerHTML=m.innerHTML;else if(w===zi.CSS_TEXT)g.styleSheet?g.styleSheet.cssText=m.cssText:g.appendChild(document.createTextNode(m.cssText));else{var C=typeof m[w]>"u"?"":m[w];g.setAttribute(w,C)}g.setAttribute(dc,"true"),l.some(function(P,I){return a=I,g.isEqualNode(P)})?l.splice(a,1):u.push(g)}),l.forEach(function(m){return m.parentNode.removeChild(m)}),u.forEach(function(m){return r.appendChild(m)}),{oldTags:l,newTags:u}},iF=function(t){return Object.keys(t).reduce(function(n,r){var i=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return n?n+" "+i:i},"")},$G=function(t,n,r,i){var l=iF(r),u=rF(n);return l?"<"+t+" "+dc+'="true" '+l+">"+ST(u,i)+"</"+t+">":"<"+t+" "+dc+'="true">'+ST(u,i)+"</"+t+">"},VG=function(t,n,r){return n.reduce(function(i,l){var u=Object.keys(l).filter(function(g){return!(g===zi.INNER_HTML||g===zi.CSS_TEXT)}).reduce(function(g,w){var C=typeof l[w]>"u"?w:w+'="'+ST(l[w],r)+'"';return g?g+" "+C:C},""),a=l.innerHTML||l.cssText||"",m=kG.indexOf(t)===-1;return i+"<"+t+" "+dc+'="true" '+u+(m?"/>":">"+a+"</"+t+">")},"")},sF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[Jb[i]||i]=t[i],r},n)},HG=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[TG[i]||i]=t[i],r},n)},ZG=function(t,n,r){var i,l=(i={key:n},i[dc]=!0,i),u=sF(r,l);return[dn.createElement(_r.TITLE,u,n)]},qG=function(t,n){return n.map(function(r,i){var l,u=(l={key:i},l[dc]=!0,l);return Object.keys(r).forEach(function(a){var m=Jb[a]||a;if(m===zi.INNER_HTML||m===zi.CSS_TEXT){var g=r.innerHTML||r.cssText;u.dangerouslySetInnerHTML={__html:g}}else u[m]=r[a]}),dn.createElement(t,u)})},Du=function(t,n,r){switch(t){case _r.TITLE:return{toComponent:function(){return ZG(t,n.title,n.titleAttributes)},toString:function(){return $G(t,n.title,n.titleAttributes,r)}};case Kf.BODY:case Kf.HTML:return{toComponent:function(){return sF(n)},toString:function(){return iF(n)}};default:return{toComponent:function(){return qG(t,n)},toString:function(){return VG(t,n,r)}}}},oF=function(t){var n=t.baseTag,r=t.bodyAttributes,i=t.encode,l=t.htmlAttributes,u=t.linkTags,a=t.metaTags,m=t.noscriptTags,g=t.scriptTags,w=t.styleTags,C=t.title,P=C===void 0?"":C,I=t.titleAttributes;return{base:Du(_r.BASE,n,i),bodyAttributes:Du(Kf.BODY,r,i),htmlAttributes:Du(Kf.HTML,l,i),link:Du(_r.LINK,u,i),meta:Du(_r.META,a,i),noscript:Du(_r.NOSCRIPT,m,i),script:Du(_r.SCRIPT,g,i),style:Du(_r.STYLE,w,i),title:Du(_r.TITLE,{title:P,titleAttributes:I},i)}},GG=function(t){var n,r;return r=n=function(i){RG(l,i);function l(){return AG(this,l),LG(this,i.apply(this,arguments))}return l.prototype.shouldComponentUpdate=function(a){return!_G(this.props,a)},l.prototype.mapNestedChildrenToProps=function(a,m){if(!m)return null;switch(a.type){case _r.SCRIPT:case _r.NOSCRIPT:return{innerHTML:m};case _r.STYLE:return{cssText:m}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},l.prototype.flattenArrayTypeChildren=function(a){var m,g=a.child,w=a.arrayTypeChildren,C=a.newChildProps,P=a.nestedChildren;return fa({},w,(m={},m[g.type]=[].concat(w[g.type]||[],[fa({},C,this.mapNestedChildrenToProps(g,P))]),m))},l.prototype.mapObjectTypeChildren=function(a){var m,g,w=a.child,C=a.newProps,P=a.newChildProps,I=a.nestedChildren;switch(w.type){case _r.TITLE:return fa({},C,(m={},m[w.type]=I,m.titleAttributes=fa({},P),m));case _r.BODY:return fa({},C,{bodyAttributes:fa({},P)});case _r.HTML:return fa({},C,{htmlAttributes:fa({},P)})}return fa({},C,(g={},g[w.type]=fa({},P),g))},l.prototype.mapArrayTypeChildrenToProps=function(a,m){var g=fa({},m);return Object.keys(a).forEach(function(w){var C;g=fa({},g,(C={},C[w]=a[w],C))}),g},l.prototype.warnOnInvalidChildren=function(a,m){return!0},l.prototype.mapChildrenToProps=function(a,m){var g=this,w={};return dn.Children.forEach(a,function(C){if(!(!C||!C.props)){var P=C.props,I=P.children,N=$L(P,["children"]),z=HG(N);switch(g.warnOnInvalidChildren(C,I),C.type){case _r.LINK:case _r.META:case _r.NOSCRIPT:case _r.SCRIPT:case _r.STYLE:w=g.flattenArrayTypeChildren({child:C,arrayTypeChildren:w,newChildProps:z,nestedChildren:I});break;default:m=g.mapObjectTypeChildren({child:C,newProps:m,newChildProps:z,nestedChildren:I});break}}}),m=this.mapArrayTypeChildrenToProps(w,m),m},l.prototype.render=function(){var a=this.props,m=a.children,g=$L(a,["children"]),w=fa({},g);return m&&(w=this.mapChildrenToProps(m,w)),dn.createElement(t,w)},IG(l,null,[{key:"canUseDOM",set:function(a){t.canUseDOM=a}}]),l}(dn.Component),n.propTypes={base:ji.object,bodyAttributes:ji.object,children:ji.oneOfType([ji.arrayOf(ji.node),ji.node]),defaultTitle:ji.string,defer:ji.bool,encodeSpecialCharacters:ji.bool,htmlAttributes:ji.object,link:ji.arrayOf(ji.object),meta:ji.arrayOf(ji.object),noscript:ji.arrayOf(ji.object),onChangeClientState:ji.func,script:ji.arrayOf(ji.object),style:ji.arrayOf(ji.object),title:ji.string,titleAttributes:ji.object,titleTemplate:ji.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var i=t.rewind();return i||(i=oF({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},WG=function(){return null},XG=fG(NG,BG,oF)(WG),rd=GG(XG);rd.renderStatic=rd.rewind;const TT=()=>{const e=Te(u=>{var a;return(a=u.configuration)==null?void 0:a.error}),t="Please reach your d-edge account manager to register your hotel domain web site and wait for activation",n="An error has occurred, please try again.",r={[Ta.HotelDomainError]:t},i=((e==null?void 0:e.type)&&r[e.type])??n,l=()=>window.location.reload();return y.jsxs(y.Fragment,{children:[y.jsxs(rd,{children:[y.jsx("title",{children:"An error has occurred."}),y.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),y.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),y.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap",rel:"stylesheet"})]}),y.jsxs("div",{className:"cvg-error-page",children:[y.jsx("svg",{className:"cvg-error-page__icon",width:"102",height:"96",viewBox:"0 0 102 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M51 3C34.875 3 20.0625 11.625 12 25.5C3.9375 39.5625 3.9375 56.625 12 70.5C20.0625 84.5625 34.875 93 51 93C66.9375 93 81.75 84.5625 89.8125 70.5C97.875 56.625 97.875 39.5625 89.8125 25.5C81.75 11.625 66.9375 3 51 3ZM51 96C33.75 96 18 87 9.375 72C0.75 57.1875 0.75 39 9.375 24C18 9.1875 33.75 0 51 0C68.0625 0 83.8125 9.1875 92.4375 24C101.062 39 101.062 57.1875 92.4375 72C83.8125 87 68.0625 96 51 96ZM36.375 33.5625C36.9375 33 37.875 33 38.4375 33.5625L51 45.9375L63.375 33.5625C63.9375 33 64.875 33 65.4375 33.5625C66 34.125 66 35.0625 65.4375 35.625L53.0625 48L65.4375 60.5625C66 61.125 66 62.0625 65.4375 62.625C64.875 63.1875 63.9375 63.1875 63.375 62.625L51 50.25L38.4375 62.625C37.875 63.1875 36.9375 63.1875 36.375 62.625C35.8125 62.0625 35.8125 61.125 36.375 60.5625L48.75 48L36.375 35.625C35.8125 35.0625 35.8125 34.125 36.375 33.5625Z",fill:"black"})}),y.jsx("p",{className:"cvg-error-page__message",children:i}),y.jsx("button",{className:"cvg-error-page__button",onClick:l,children:"Reload the page"})]})]})};function KG(e){return e.replace(/^\s+|\s+$/gm,"")}function YG(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){const i=KG(n[r]);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""}const Bf=class Bf{static setDedgeBeGlobalVariable(t){var n,r,i,l,u,a,m,g,w,C,P,I,N,z,$;window.dedgeBe={application:((r=(n=t.configuration)==null?void 0:n.trackingPrivacySettings)==null?void 0:r.trackingApplicationName)??"",booking_engine_reference:t.configuration.engineReference,hotel_id:(l=(i=t.session)==null?void 0:i.selectedHotel)==null?void 0:l.id,hotel_group_id:t.session.groupId,gtm_client_activation:!!((u=t.configuration.trackingPrivacySettings)!=null&&u.gtmClientActivation),session_id:t.session.id,client:{browser_side:{google_tags:{google_analytics:this.buildGoogleAnalytics(t)}}},marketing_addons:t.configuration.marketingAddons&&this.buildMarketingAddons(t.configuration.marketingAddons),bookingEngineReference:t.configuration.engineReference,hotelId:(a=t.session.selectedHotel)==null?void 0:a.id,funnelId:this.getTrackingCookieGUID(t),groupId:Number(t.session.groupId),features:{consentManagementPlatform:{enabled:((w=(g=(m=t.configuration)==null?void 0:m.trackingPrivacySettings)==null?void 0:g.navigationConstraint)==null?void 0:w.consentManagementPlatformEnabled)??!1,activation_level:((P=(C=t.configuration.trackingPrivacySettings)==null?void 0:C.consentManagementPlatform)==null?void 0:P.activationLevel)??((z=(N=(I=t.configuration)==null?void 0:I.trackingPrivacySettings)==null?void 0:N.navigationConstraint)!=null&&z.consentManagementPlatformEnabled?"hotel":"undefined")},bookingEngineTemplate:"",gtmClientActivation:!!(($=t.configuration.trackingPrivacySettings)!=null&&$.gtmClientActivation)},sessionId:t.session.id}}static initializeDatalayer(t){this.appendNoScriptElement(t),this.appendScriptElement(t)}static buildGoogleAnalytics(t){var r,i,l,u,a;const n=[];return(i=(r=t.configuration.trackingPrivacySettings)==null?void 0:r.trackers)!=null&&i.length?(l=t.configuration.trackingPrivacySettings)==null||l.trackers.forEach(m=>{n.push({id:m.id,domain:m.domainUrl,enabled:m.enabled,accountType:m.accountType,version:m.version})}):n.push({id:((u=t.configuration.trackingPrivacySettings)==null?void 0:u.googleAnalyticsId)??"",domain:((a=t.configuration.trackingPrivacySettings)==null?void 0:a.clientDomain)??"",accountType:"",version:"",enabled:!1}),{trackers:n}}static buildMarketingAddons(t){return t.reduce((n,r)=>{var i;return{...n,[r.addonId]:{...(i=r.properties)==null?void 0:i.reduce((l,u)=>({...l,[u.key]:u.value}),{}),hotels:[...(r.hotelProperties??[]).map(l=>({hotelId:l.hotelId,...l.addonProperties.reduce((u,a)=>({...u,[a.key]:a.value}),{})}))]}}},{})}static appendNoScriptElement(t){const n=document.createElement("noscript");n.innerHTML=`<iframe
            src="https://www.googletagmanager.com/ns.html?id=${t}"
            id="gtm"
            height="0"
            width="0"
            style="display:none;visibility:hidden"></iframe>`,document.getElementsByTagName("body")[0].prepend(n)}static appendScriptElement(t){const n=document.createElement("script");n.innerHTML=`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer', "${t}");
    `,document.getElementsByTagName("head")[0].prepend(n)}static buildCoreEventData(t,n,r,i){return{event:t,event_name:n,page_name:this.mapPage(r),context:this.buildContext(i),search_parameters:this.buildSearchParameters(i),google_analytics:this.buildGoogleAnalytics(i)}}static buildPageViewEvent(t,n){var r;return{...this.buildCoreEventData("virtual_page_view","page_view",t,n),cart:this.buildCart(n.basket,((r=n.session.selectedHotel)==null?void 0:r.name)??"",n.session.currency),cart_id:this.buildBasketId(n.basket)}}static buildBackToWebsiteEvent(t,n){return this.buildCoreEventData("global_event","back_to_website",t,n)}static buildSearchParameterGuestModificationEvent(t,n,r,i){const l=n.session.guests[0][r]??0,u=r==="adults"?"adult":r==="children"?"child":"infant",a=i>l?"added":"removed";return{...this.buildCoreEventData("global_event","search_parameters_modification",t,n),modification_type:u,modification_value:a,selected_date:void 0}}static buildSearchParameterDateModificationEvent(t,n,r){const l=n.session.stay.arrivalDate.date!==(r==null?void 0:r.checkIn)?"arrival_date":"departure_date";return{...this.buildCoreEventData("global_event","search_parameters_modification",t,n),modification_type:l,modification_value:"selected_date",selected_date:this.formatSelectedDate(r)}}static buildSearchParameterRoomModificationEvent(t,n,r){return{...this.buildCoreEventData("global_event","search_parameters_modification",t,n),modification_type:"room",modification_value:r,selected_date:void 0}}static buildSearchCompletedEvent(t,n){return this.buildCoreEventData("global_event","search_completed",t,n)}static buildLoadViewRoomListEvent(t,n,r,i){var u;const l=((u=n.session.selectedHotel)==null?void 0:u.name)??"";return{...this.buildCoreEventData("ecommerce_event","view_item_list",t,n),items:this.buildLoadRoomItemList(r,i,l,0,n.session.stay.nightCount)}}static buildViewMoreRatesEvent(t,n){return this.buildCoreEventData("global_event","show_more_rates",t,n)}static buildViewRateListEvent(t,n,r,i){var m;const l=`${r.name}-rates`,{nightCount:u}=n.session.stay,a=((m=n.session.selectedHotel)==null?void 0:m.name)??"";return{...this.buildCoreEventData("ecommerce_event","view_item_list",t,n),items:this.buildRoomItems(r,i,a,0,u,l)}}static buildSelectItemEvent(t,n,r){return{...this.buildCoreEventData("ecommerce_event","select_item",t,n),items:[r]}}static buildViewItemEvent(t,n,r){return{...this.buildCoreEventData("ecommerce_event","view_item",t,n),items:[r]}}static buildLoadViewExtraListEvent(t,n,r,i){return{...this.buildCoreEventData("ecommerce_event","view_item_list",t,n),items:r.map((l,u)=>{var a;return this.buildExtraItem(l,((a=n.session.selectedHotel)==null?void 0:a.name)??"",1,n.session.currency,n.session.stay.nightCount,i,u+1)})}}static buildAddItemEvent(t,n,r){var l;const i=this.buildCart(t.basket,((l=t.session.selectedHotel)==null?void 0:l.name)??"",t.session.currency);return{...this.buildCoreEventData("ecommerce_event","add_to_cart",n,t),items:[r],cart:i,cart_id:this.buildBasketId(t.basket)}}static buildRemoveItemEvent(t,n,r){var l;const i=this.buildCart(t.basket,((l=t.session.selectedHotel)==null?void 0:l.name)??"",t.session.currency);return{...this.buildCoreEventData("ecommerce_event","remove_from_cart",n,t),items:[r],cart:i,cart_id:this.buildBasketId(t.basket)}}static buildBeginCheckoutEvent(t,n){var i;const r=this.buildCart(t.basket,((i=t.session.selectedHotel)==null?void 0:i.name)??"",t.session.currency);return{...this.buildCoreEventData("ecommerce_event","begin_checkout",n,t),items:r??[],cart:r,cart_id:this.buildBasketId(t.basket)}}static buildSelectCancellationInsuranceEvent(t,n){return{...this.buildCoreEventData("global_event","cancellation_insurance_select","Summary",t),insurance_price:n}}static buildSubmitQuoteEvent(t){var r;const n=this.buildCart(t.basket,((r=t.session.selectedHotel)==null?void 0:r.name)??"",t.session.currency);return{...this.buildCoreEventData("ecommerce_event","add_payment_info","Summary",t),items:n??[],cart:n,cart_id:this.buildBasketId(t.basket)}}static buildPurchaseEvent(t,n,r,i){var u;const l=this.buildCart(t.basket,((u=t.session.selectedHotel)==null?void 0:u.name)??"",t.session.currency);return{...this.buildCoreEventData("ecommerce_event","purchase","Confirmation",t),items:l??[],cart:l,cart_id:this.buildBasketId(t.basket),booking:{booking_reference:n,payment_type:void 0,total_price:r,is_tax_included:i}}}static buildRoomDetailsItem(t,n,r,i,l){return{item_id:`${t.id}`,item_brand:n,item_name:t.trackingName,item_category:"Room",index:l,item_list_name:i,item_price:0,price:0,item_currency:r,currency:r,breakfast_included:!1,quantity:0}}static buildExtraItem(t,n,r,i,l,u,a){var C;const m=r*l,w=((C=t.prices.find(P=>P.quantity===r))==null?void 0:C.ratePrice)/m;return{item_id:`${t.id}`,item_brand:n,item_name:t.trackingName,item_category:t.roomId?"RoomExtra":"HotelExtra",index:a,item_list_name:u,item_price:w,price:w,item_currency:i,currency:i,breakfast_included:!1,quantity:r}}static buildRoomItem(t,n,r,i,l,u,a){return{item_id:`${t.id}`,item_brand:r,item_name:t.trackingName,item_category:"Room",item_rate:n.trackingName,index:a,item_list_name:u,coupon:n==null?void 0:n.offerId,item_price:n.ratePriceAmount/l,price:n.ratePriceAmount/l,item_currency:n.rateCurrency,currency:n.rateCurrency,breakfast_included:this.isBreakfastIncluded(n.type),quantity:i*l}}static mapPage(t){switch(t){case"DateSelection":return"dates_selection";case"RoomSelection":return"room_selection";case"ExtraSelection":return"enhance_options";case"Summary":return"checkout_page";case"Confirmation":return"confirmation_page";default:return"dates_selection"}}static buildContext(t){var r;const n=(r=t.session)==null?void 0:r.selectedHotel;return{user_logging_status:"logged",hotel_brand:(n==null?void 0:n.name)??"",hotel_city:(n==null?void 0:n.city)??"",hotel_name:(n==null?void 0:n.name)??"",zip_code:(n==null?void 0:n.zipCode)??"",hotel_country_code:(n==null?void 0:n.countryCode)??"",hotel_type:(n==null?void 0:n.type)??ww.Hotel,hotel_rating:(n==null?void 0:n.rating)??0,hotel_category:(n==null?void 0:n.category)??"",room_count:(n==null?void 0:n.roomCount)??0,booking_engine_reference:t.configuration.engineReference,language:t.session.culture}}static buildSearchParameters(t){var w;const{session:n,roomSelection:r,basket:i}=t,{stay:l,guests:u}=n,[a,m,g]=u.reduce(([C,P,I],N)=>[C+N.adults,P+N.children,I+N.infants],[0,0,0]);return{availability:r.rooms.length>0&&r.alternativeGuestsAllocation.length===0||i.isComplete,adult_count:a,children_count:m,infant_count:g,search_currency:n.currency,night_count:l.nightCount,promotion_id:n.promoCodeType==x_.DiscountCode?n.promoCode:"",checkin_date:l.arrivalDate.date,checkout_date:((w=l.departureDate)==null?void 0:w.date)??""}}static formatSelectedDate(t){return{arrival_date:t.checkIn,checkout_date:t.checkOut}}static isBreakfastIncluded(t){return t===Hm.BreakfastIncluded||t===Hm.HalfBoard||t===Hm.FullBoard}static buildCart(t,n,r){var i;if(t.rooms.length>0){const l=t.rooms.reduce((m,g)=>m.concat(this.buildRoomItems(g,g.rates,n,1,1)),[]),u=t.rooms.reduce((m,g)=>{var w;return m.concat((w=g.extras)==null?void 0:w.map(C=>this.buildExtraItem(C,n,1,r,1)))},[]),a=(i=t.hotelExtras)==null?void 0:i.reduce((m,g)=>m.concat(this.buildExtraItem(g,n,1,r,1)),[]);return[l,u,a].flat()}}static buildBasketId(t){return(t==null?void 0:t.id)!==Sw?t.id:void 0}};Bf.getTrackingCookieGUID=t=>YG(`Tracking_${t.configuration.engineReference}`),Bf.buildLoadRoomItemList=(t,n,r,i,l)=>t.reduce((u,a)=>{const m=a.rates.slice(0,n);return u.concat(Bf.buildRoomItems(a,m,r,i,l,"rooms_rates_loaded"))},[]),Bf.buildRoomItems=(t,n,r,i,l,u)=>n.map((a,m)=>Bf.buildRoomItem(t,a,r,i,l,u,m+1));let qr=Bf;const QG=e=>e.map(t=>t),JG=e=>{var a,m;const{session:t}=e,{stay:n,guests:r}=t,[i,l,u]=r.reduce(([g,w,C],P)=>[g+P.adults,w+P.children,C+P.infants],[0,0,0]);return{checkinDate:n.arrivalDate.date,checkoutDate:((a=n.departureDate)==null?void 0:a.date)??"",nightCount:(m=n.departureDate)!=null&&m.date?Xz(n.arrivalDate.date,n.departureDate.date):0,adultCount:i,childCount:l,infantCount:u,guests:QG(r),offerCode:t.promoCodeType==x_.DiscountCode?t.promoCode:"",availability:!0}},aF=e=>{var i,l,u,a,m,g,w,C;const t=e.session.selectedHotel,{session:n}=e,{configuration:r}=e;return{hotelId:t!=null&&t.id?Number(t.id):0,hotelName:(t==null?void 0:t.name)||"",currency:n.currency,language:n.culture,bookingEngineReference:r.engineReference,application:((i=e.configuration.trackingPrivacySettings)==null?void 0:i.trackingApplicationName)??"",searchParameters:JG(e),features:{consentManagementPlatform:{enabled:((u=(l=r.trackingPrivacySettings)==null?void 0:l.navigationConstraint)==null?void 0:u.consentManagementPlatformEnabled)??!1,activation_level:((m=(a=r.trackingPrivacySettings)==null?void 0:a.consentManagementPlatform)==null?void 0:m.activationLevel)??((w=(g=r.trackingPrivacySettings)==null?void 0:g.navigationConstraint)!=null&&w.consentManagementPlatformEnabled?"hotel":"undefined")},bookingEngineTemplate:"",gtmClientActivation:!!((C=e.configuration.trackingPrivacySettings)!=null&&C.gtmClientActivation)},groupId:Number(e.session.groupId)}},lF=e=>{var r;const{trackingPrivacySettings:t}=e.configuration,n=[];return(r=t==null?void 0:t.trackers)!=null&&r.length?t==null||t.trackers.forEach(i=>{n.push({id:i.id,domain:i.domainUrl,enabled:i.enabled,accountType:i.accountType,version:i.version})}):n.push({id:(t==null?void 0:t.googleAnalyticsId)??"",domain:(t==null?void 0:t.clientDomain)??"",accountType:"",version:"",enabled:!1}),{trackers:n}},cF=e=>({id:e!=null&&e.id?Number(e.id):0,name:(e==null?void 0:e.name)||"",brand:(e==null?void 0:e.brand)||"",city:(e==null?void 0:e.city)||"",zipCode:(e==null?void 0:e.zipCode)||"",countryCode:(e==null?void 0:e.countryCode)||"",type:(e==null?void 0:e.type)||"",rating:(e==null?void 0:e.rating)||0,category:(e==null?void 0:e.category)||"",roomCount:(e==null?void 0:e.roomCount)||0}),e9=e=>{var t;return{bookingStep:"Confirmation",context:aF(e),event:"VirtualPageView",googleAnalytics:lF(e),property:cF((t=e.session)==null?void 0:t.selectedHotel),virtualPageTitle:"Confirmation",virtualPageUrl:"/Confirmation"}},t9=e=>{const{basket:t,session:n}=e;return(t==null?void 0:t.rooms.length)===0||t==null?void 0:t.rooms.reduce((i,l)=>{var g,w;const u=l.rates.map(C=>n9(l,C,1,1)),a=((g=l.extras)==null?void 0:g.map(C=>ZL(C,1,n.currency,1)))||[],m=((w=t.hotelExtras)==null?void 0:w.map(C=>ZL(C,1,n.currency,1)))||[];return i.concat(u,a,m)},[])};function uF(e,t,n,r,i,l,u){return{id:e,name:t,category:n,price:r,currency:i,quantity:l,...u?{rate:u}:{}}}function ZL(e,t,n,r){var a;const i=t*r,u=((a=e.prices.find(m=>m.quantity===t))==null?void 0:a.ratePrice)/i;return uF(e.productId,e.trackingName,e.roomId?"RoomExtra":"HotelExtra",u,n,i)}function n9(e,t,n,r){return uF(e.productId,e.trackingName,"Room",t.ratePriceAmount/r,t.rateCurrency,n*r,t.trackingName)}const r9=(e,t,n)=>{const{session:r}=e;return{id:t,currency:r.currency,revenue:n.price.amount,tax:n.taxes.excluded.displayAmount,onSiteTaxes:n.taxes.onArrival.displayAmount,additionalServices:n.insurance.displayAmount,coupon:n.discount.code??"",products:t9(e)}},i9=(e,t,n)=>{var r,i;return{event:"TransactionCompleted",bookingStep:"Confirmation",email:((r=e.summary.guestInformation)==null?void 0:r.email)??"",transaction:r9(e,t,n),context:aF(e),property:cF((i=e.session)==null?void 0:i.selectedHotel),googleAnalytics:lF(e)}};class s9{constructor(){this.getState=()=>({}),this.logger=()=>null,this.currentPage="DateSelection",this.onBackToWebsite=()=>{const t=qr.buildBackToWebsiteEvent(this.currentPage,this.getState());window.dataLayer.push(t)}}get try(){return new Proxy(this,{get:(t,n)=>{const r=t[n];return typeof r=="function"&&n!=="constructor"?(...i)=>{try{return r.apply(t,i)}catch(l){t.logger(new Error(`Tracking: ${n}: ${l.message||l}`))}}:r}})}initialize(t,n,r,i){this.logger=r,this.getState=n,qr.setDedgeBeGlobalVariable(this.getState()),qr.initializeDatalayer(t),i&&qr.initializeDatalayer(i)}onPageView(t){this.currentPage=t;const n=qr.buildPageViewEvent(t,this.getState());window.dataLayer.push(n)}onSearchParameterGuestModification(t,n){const r=qr.buildSearchParameterGuestModificationEvent(this.currentPage,this.getState(),t,n);window.dataLayer.push(r)}onSearchParameterDateModification(t){const n=qr.buildSearchParameterDateModificationEvent(this.currentPage,this.getState(),t);window.dataLayer.push(n)}onSearchParameterRoomModification(t){const n=qr.buildSearchParameterRoomModificationEvent(this.currentPage,this.getState(),t);window.dataLayer.push(n)}onSearchCompleted(){const t=qr.buildSearchCompletedEvent("RoomSelection",this.getState());window.dataLayer.push(t)}onLoadViewRoomList(t,n){this.clearItems();const r=qr.buildLoadViewRoomListEvent("RoomSelection",this.getState(),t,n);window.dataLayer.push(r)}onViewRateList(t,n){const r=qr.buildViewMoreRatesEvent("RoomSelection",this.getState());window.dataLayer.push(r),this.clearItems();const i=qr.buildViewRateListEvent("RoomSelection",this.getState(),t,n);window.dataLayer.push(i)}onViewRoomDetails(t,n,r){var a;const i=((a=this.getState().session.selectedHotel)==null?void 0:a.name)??"",{currency:l}=this.getState().session,u=qr.buildRoomDetailsItem(t,i,l,r,n);this.onSelectNonRateItem(u)}onViewRateDetails(t,n,r,i){var m;const{nightCount:l}=this.getState().session.stay,u=((m=this.getState().session.selectedHotel)==null?void 0:m.name)??"",a=qr.buildRoomItem(t,n,u,0,l,r,i);this.onSelectRateItem(a)}onLoadViewExtraList(t,n){this.clearItems();const r=qr.buildLoadViewExtraListEvent(this.currentPage,this.getState(),t,n);window.dataLayer.push(r)}onViewExtraDetails(t,n,r){var m;const{nightCount:i}=this.getState().session.stay,l=((m=this.getState().session.selectedHotel)==null?void 0:m.name)??"",{currency:u}=this.getState().session,a=qr.buildExtraItem(t,l,1,u,i,n,r);this.onSelectNonRateItem(a)}onAddRoom(t,n){var l;const{nightCount:r}=this.getState().session.stay,i=((l=this.getState().session.selectedHotel)==null?void 0:l.name)??"";this.onAddItem(qr.buildRoomItem(t,n,i,1,r))}onRemoveRoom(t,n){var l;const{nightCount:r}=this.getState().session.stay,i=qr.buildRoomItem(t,n,((l=this.getState().session.selectedHotel)==null?void 0:l.name)??"",n.selectedQuantity,r);this.onRemoveItem(i)}onUpsertExtra(t,n){var g,w;const r=this.getState().basket,{currency:i}=this.getState().session,{nightCount:l}=this.getState().session.stay,u=((g=this.getState().session.selectedHotel)==null?void 0:g.name)??"",a=t.roomId?(w=r.rooms.find(C=>C.id==t.roomId&&C.guestPosition==t.guestPosition))==null?void 0:w.extras.find(C=>C.id==t.id):r.hotelExtras.find(C=>C.id==t.id),m=a?n-a.selectedQuantity:n;m>0?this.onAddItem(qr.buildExtraItem(t,u,n,i,l)):this.onRemoveItem(qr.buildExtraItem(t,u,Math.abs(m),i,l))}onRemoveExtra(t){var u;const{nightCount:n}=this.getState().session.stay,r=((u=this.getState().session.selectedHotel)==null?void 0:u.name)??"",{currency:i}=this.getState().session,l=qr.buildExtraItem(t,r,t.selectedQuantity,i,n);this.onRemoveItem(l)}onSelectCancellationInsurance(t){const n=qr.buildSelectCancellationInsuranceEvent(this.getState(),t);window.dataLayer.push(n)}onBeginCheckout(){this.clearItems();const t=qr.buildBeginCheckoutEvent(this.getState(),this.currentPage);window.dataLayer.push(t)}onSubmitQuote(){this.clearItems();const t=qr.buildSubmitQuoteEvent(this.getState());window.dataLayer.push(t)}onPurchase(t,n,r){this.clearItems();const i=qr.buildPurchaseEvent(this.getState(),t,n,r);window.dataLayer.push(i)}onLegacyConfirmationPageView(){const t=e9(this.getState());window.dataLayer.push(t)}onLegacyTransactionCompleted(t,n){const r=i9(this.getState(),t,n);window.dataLayer.push(r)}onSelectNonRateItem(t){this.onSelectItem(t),this.onViewItem(t)}onSelectRateItem(t){this.onSelectItem(t),this.onViewRateItem()}onSelectItem(t){this.clearItems();const n=qr.buildSelectItemEvent(this.currentPage,this.getState(),t);window.dataLayer.push(n)}onViewItem(t){this.clearItems();const n=qr.buildViewItemEvent(this.currentPage,this.getState(),t);window.dataLayer.push(n)}onViewRateItem(){const t={...qr.buildCoreEventData("global_event","show_rate_details",this.currentPage,this.getState())};window.dataLayer.push(t)}onAddItem(t){this.clearItems();const n=qr.buildAddItemEvent(this.getState(),this.currentPage,t);window.dataLayer.push(n)}onRemoveItem(t){this.clearItems();const n=qr.buildRemoveItemEvent(this.getState(),this.currentPage,t);window.dataLayer.push(n)}clearItems(){window.dataLayer.push({items:null})}}const Wi=new s9,o9=e=>{const{pluginConfigs:t}=e.getState().configuration,n=i=>{Av.notify(i,l=>{l.severity="error",l.addMetadata("Tracking Error",{message:i.message})})},r=t==null?void 0:t.find(i=>i.id==="GoogleTagManager");if(r){const{accountId:i,clientAccountId:l}=r.properties;Wi.try.initialize(i,e.getState,n,l)}},dF=M.createContext({isOpen:!1,onOpen:()=>null,onClose:()=>null}),RP=({children:e})=>{const[t,n]=M.useState(!1),r=()=>n(!0),i=()=>n(!1);return y.jsx(dF.Provider,{value:{isOpen:t,onOpen:r,onClose:i},children:e})},LP=()=>M.useContext(dF);function Mt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function hF(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=hF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=hF(e))&&(r&&(r+=" "),r+=t);return r}const a9={"cc-visa":"brands",info:"regular","circle-notch":"regular","bell-concierge":"regular","checkbox-checked":"kit","checkbox-indeterminate":"kit","arrow-right-from-bracket":"regular",compress:"regular",lock:"regular","pen-to-square":"regular","chevron-up":"regular",stopwatch:"regular",user:"regular",globe:"regular",star:"solid","arrow-right-to-bracket":"regular","user-group":"regular","cc-mastercard":"brands",suitcase:"light","cc-paypal":"brands","arrow-right":"regular",phone:"regular","door-closed":"regular","arrow-left":"regular",tag:"regular",envelope:"regular","circle-info":"regular",minus:"regular","cart-shopping":"regular","arrows-maximize":"regular",mobile:"regular","cc-diners-club":"brands","xmark-large":"regular","location-dot":"regular","cc-jcb":"brands","chevron-down":"regular","list-ul":"regular",plus:"regular",expand:"regular",xmark:"regular",map:"regular","chevron-left":"regular","chevron-right":"regular","cc-amex":"brands",calendar:"regular","circle-plus":"regular",check:"regular","triangle-exclamation":"regular",hotel:"regular",print:"regular","bed-front":"regular"},l9=e=>a9[e],sn=M.forwardRef(function(t,n){var{name:r,label:i,size:l="medium",fullWidth:u=!1,className:a}=t,m=Mt(t,["name","label","size","fullWidth","className"]);const g=Ut(`fa-${r}`,`fa-${l9(r)}`,{"fa-fw":u},"gui-icon",l?`gst-icon--size-${l}`:null,a);return M.createElement(M.Fragment,null,M.createElement("i",Object.assign({"aria-hidden":"true",ref:n,className:g},m)),i?M.createElement("span",{className:"gst-u-visually-hidden"},i):null)}),c9=M.forwardRef(function(t,n){var{label:r,variation:i,iconName:l,className:u}=t,a=Mt(t,["label","variation","iconName","className"]);return M.createElement("span",Object.assign({className:Ut("gst-badge",`gst-badge--variation-${i}`,u)},a,{ref:n}),l&&M.createElement(sn,{name:l}),r)}),u9=M.forwardRef(function(t,n){var{direction:r="row",variation:i,className:l}=t,u=Mt(t,["direction","variation","className"]);return M.createElement("div",Object.assign({className:Ut("gst-banner",`gst-banner--variation-${i}`,`gst-banner--direction-${r}`,l)},u,{ref:n}))}),d9=M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);return M.createElement("div",Object.assign({className:Ut("gst-banner__actions",r)},i,{ref:n}))}),h9=M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);return M.createElement("div",Object.assign({className:Ut("gst-banner__description",r)},i,{ref:n}))}),f9=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement("p",Object.assign({className:Ut("gst-banner__header",r)},l,{ref:n}),i)}),p9=M.forwardRef(function(t,n){var{title:r,children:i,className:l}=t,u=Mt(t,["title","children","className"]);const a=Ut("gst-basket",l);return M.createElement("div",Object.assign({ref:n,className:a},u),r?M.createElement("div",{className:"gst-basket__title"},M.createElement(sn,{name:"suitcase",size:"large"})," ",r):null,i)}),m9=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement("div",Object.assign({className:Ut("gst-basket__section",r),ref:n},l),i)}),g9=M.forwardRef(function(t,n){var{title:r,price:i,ratePrice:l,className:u}=t,a=Mt(t,["title","price","ratePrice","className"]);return M.createElement("div",Object.assign({className:Ut("gst-basket__section-header",u)},a,{ref:n}),r,i?M.createElement("div",null,i):null,l?M.createElement("div",{className:"gst-basket__section-header-rate-price"},l):null)}),e0=M.forwardRef(function(t,n){var{bold:r=!1,children:i,className:l}=t,u=Mt(t,["bold","children","className"]);const a=Ut("gst-basket__button-info",r&&"gst-basket__button-info--bold",l);return M.createElement("button",Object.assign({type:"button",className:a,ref:n},u),M.createElement("span",{className:"gst-basket__button-info-text"},i),M.createElement(sn,{name:"circle-info",size:"small"}))}),y9=M.forwardRef(function(t,n){var{name:r,price:i,onClickInfo:l,priceBold:u=!1,className:a}=t,m=Mt(t,["name","price","onClickInfo","priceBold","className"]);return M.createElement("div",Object.assign({className:Ut("gst-basket__section-item",a),ref:n},m),l?M.createElement(e0,{onClick:l},r):r,M.createElement("div",{className:Ut("gst-basket__section-item-price",u&&"gst-basket__section-item-price-bold")},i))}),fF=M.createContext({colors:{brand:{color:"#8a6f4c",inverted:!0},header:{color:"#f5f5f5",inverted:!1},page:{color:"#e5e5e5",inverted:!1}}}),bp=()=>{const e=M.useContext(fF);if(e==null)throw new Error("Your app must be wrapped in <ThemeProvider />");return e};function v9({theme:e,children:t}){var n,r,i,l;const u=`
    --gst-color-custom-brand: ${e.colors.brand.color};
    --gst-color-custom-header: ${e.colors.header.color};
    --gst-color-custom-page: ${e.colors.page.color};
    ${!((n=e.fonts)===null||n===void 0)&&n.default?`--gst-font-family-default: ${(r=e.fonts)===null||r===void 0?void 0:r.default};`:""}
    ${!((i=e.pictures)===null||i===void 0)&&i.background?`--gst-background-image-page: url("${(l=e.pictures)===null||l===void 0?void 0:l.background}");`:""}
  `;return M.createElement(fF.Provider,{value:e},M.createElement("style",null,`:root {
              ${u}
            }`),t)}const pF=M.createContext(!1),_9=()=>M.useContext(pF);function Ew({inverted:e,children:t}){return M.createElement(pF.Provider,{value:e},t)}const qL=({children:e,icon:t,iconOnly:n,iconPosition:r,loading:i,loadingLabel:l})=>M.createElement(M.Fragment,null,t&&r==="start"?M.createElement(sn,{name:t,className:Ut({"gst-button__icon--hidden":i})}):null,i||n?M.createElement("span",Object.assign({},i&&{"aria-hidden":"true"},{className:Ut({"gst-button__children--hidden":i&&!n,"gst-u-visually-hidden":n})}),e):e,t&&r==="end"?M.createElement(sn,{name:t,className:Ut({"gst-button__icon--hidden":i})}):null,M.createElement("span",{role:"status",className:"gst-u-visually-hidden"},i?l:"")),x9=M.forwardRef(function(t,n){var{variation:r,icon:i,iconPosition:l,iconOnly:u,loading:a,loadingLabel:m,children:g,fullWidth:w,className:C,asChild:P}=t,I=Mt(t,["variation","icon","iconPosition","iconOnly","loading","loadingLabel","children","fullWidth","className","asChild"]);const N=bp(),z=_9(),$=Ut(`gst-button gst-button--variation-${r}`,{"gst-button--loading":a},{"gst-button--full-width":w},{"gst-button--inverted":r==="brand-large"&&N.colors.brand.inverted||r==="brand"&&N.colors.brand.inverted||r==="secondary-large"&&z||r==="secondary"&&z||r==="close"&&z},C);if(P&&M.isValidElement(g)){const H=g.props.children,V=Object.assign(Object.assign({},I),{ref:n,className:$});return M.cloneElement(g,V,M.createElement(qL,{variation:r,icon:i,iconOnly:u,iconPosition:l,loading:a,loadingLabel:m},H))}return M.createElement("button",Object.assign({ref:n,className:$},I),M.createElement(qL,{variation:r,icon:i,iconOnly:u,iconPosition:l,loading:a,loadingLabel:m},g))}),wp=M.forwardRef(function(t,n){var{variation:r,icon:i,iconOnly:l,children:u}=t,a=Mt(t,["variation","icon","iconOnly","children"]);return M.createElement(x9,Object.assign({ref:n,variation:r,icon:r==="close"&&!i?"xmark-large":i,iconOnly:r==="close"?!0:l,iconPosition:"end"},a),u)}),b9=M.forwardRef(function(t,n){var{deleteLabel:r,onClickDelete:i,name:l,occupancy:u,price:a,rateName:m,onClickRoomInfo:g,onClickRateInfo:w,children:C,className:P}=t,I=Mt(t,["deleteLabel","onClickDelete","name","occupancy","price","rateName","onClickRoomInfo","onClickRateInfo","children","className"]);const N=M.useId();return M.createElement("div",Object.assign({className:Ut("gst-basket__room",P),ref:n},I),M.createElement("div",{className:"gst-basket__room-header"},g?M.createElement(e0,{bold:!0,onClick:g,id:N},l):M.createElement("span",{id:N},l),M.createElement("div",{className:"gst-basket__room-header-price"},a)),M.createElement("div",{className:"gst-basket__room-occupancy"},M.createElement(sn,{name:"user-group",className:"gst-basket__room-occupancy-icon"})," ",u),M.createElement("div",{className:"gst-basket__room-rate"},w?M.createElement(e0,{onClick:w},m):m),M.createElement(wp,{onClick:i,type:"button",variation:"link",className:"gst-basket__room-button","aria-describedby":N},r),C?M.createElement("div",{className:"gst-basket__room-extras"},C):null)}),w9=M.forwardRef(function(t,n){var{arrivalDate:r,checkIn:i,checkOut:l,departureDate:u,totalStay:a,className:m,modifySearchLabel:g,modifySearchOnClick:w}=t,C=Mt(t,["arrivalDate","checkIn","checkOut","departureDate","totalStay","className","modifySearchLabel","modifySearchOnClick"]);return M.createElement("div",Object.assign({className:Ut("gst-basket__header",m),ref:n},C),M.createElement("div",null,a),M.createElement("div",{className:"gst-basket__header-stay-details"},M.createElement("div",null,M.createElement("time",{dateTime:r.date,className:"gst-basket__header-stay-details-date"},r.displayDate),M.createElement("div",{className:"gst-basket__header-stay-details-check"},i)),M.createElement(sn,{name:"arrow-right",className:"gst-basket__header-icon"}),M.createElement("div",null,M.createElement("time",{dateTime:u.date,className:"gst-basket__header-stay-details-date"},u.displayDate),M.createElement("div",{className:"gst-basket__header-stay-details-check"},l))),g&&M.createElement(wp,{onClick:w,variation:"link",type:"button"},g))}),S9=M.forwardRef(function(t,n){var{deleteLabel:r,onClickDelete:i,price:l,name:u,onClickInfo:a,nameBold:m=!1,className:g}=t,w=Mt(t,["deleteLabel","onClickDelete","price","name","onClickInfo","nameBold","className"]);const C=m?M.createElement("div",{className:"gst-basket__extra-header-name-bold"},u):u,P=M.useId();return M.createElement("div",Object.assign({className:Ut("gst-basket__extra",g),ref:n},w),M.createElement("div",{className:"gst-basket__extra-header"},a?M.createElement(e0,{bold:m,onClick:a,id:P},u):M.createElement("span",{id:P},C),M.createElement("div",{className:"gst-basket__extra-price"},l)),M.createElement(wp,{onClick:i,type:"button",variation:"link",className:"gst-basket__extra-button","aria-describedby":P},r))}),Rv=M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);return M.createElement("div",Object.assign({className:Ut("gst-block-message",r)},i,{ref:n}))}),Lv=M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);return M.createElement("div",Object.assign({className:Ut("gst-block-message__actions",r)},i,{ref:n}))}),Mv=M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);return M.createElement("p",Object.assign({className:Ut("gst-block-message__description",r)},i,{ref:n}))}),Ov=M.forwardRef(function(t,n){var{variation:r,className:i}=t,l=Mt(t,["variation","className"]);const u=Ut("gst-block-message__icon",`gst-block-message__icon--variation-${r}`,i),m={default:"info",positive:"check",negative:"triangle-exclamation"}[r];return M.createElement(sn,Object.assign({size:"large",name:m,className:u,ref:n},l))}),Dv=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement("h1",Object.assign({className:Ut("gst-block-message__title",r)},l,{ref:n}),i)});function E9(e,t){const n=e<10?`0${e.toString()}`:e.toString();return t.replace("{day}",n)}function C9(e){const t=new Date(e),n=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,r=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`${t.getFullYear()}-${n}-${r}`}function T9(e,t){const r=Date.parse(e),i=new Date(r),l=new Date(i.setTime(i.getTime()+t*864e5));return C9(l)}var GL;(function(e){e[e.None=0]="None",e[e.Disabled=1]="Disabled",e[e.Selected=2]="Selected"})(GL||(GL={}));const k9=M.forwardRef(function(t,n){var{stay:r,onChangeStay:i,maxStayLength:l,dayNames:u,month:a}=t,m=Mt(t,["stay","onChangeStay","maxStayLength","dayNames","month"]);return M.createElement("div",Object.assign({className:"gst-calendar__months",ref:n},m),M.createElement("div",{className:"gst-calendar__header"},a.monthName," ",a.year),M.createElement("div",{className:"gst-calendar__weekdays"},u.map(g=>M.createElement("div",{className:"gst-calendar__weekday",key:`${a.monthName}-${g.name}`},g.name))),M.createElement("div",{className:"gst-calendar__body"},Array.from(Array(a.offset)).map((g,w)=>M.createElement("div",{key:`${a.monthName}-${w}`,className:"gst-calendar__tile"})),a.days.map(g=>{const w=E9(g.day,a.dateTemplate),C=w===r.arrivalDate.date,P=r.departureDate&&w===r.departureDate.date,I=w===r.arrivalDate.date||r.departureDate&&w===r.departureDate.date,N=r.departureDate&&w>=r.arrivalDate.date&&w<=r.departureDate.date,z=r.departureDate?!1:w>T9(r.arrivalDate.date,l);return M.createElement("div",{key:w,className:Ut("gst-calendar__tile",g.disabled&&"gst-calendar__tile--disabled",I&&"gst-calendar__tile--selected",C&&"gst-calendar__tile--arrival",P&&"gst-calendar__tile--departure",N&&"gst-calendar__tile--in-range")},M.createElement("button",{className:Ut("gst-calendar__tile-button",I&&"gst-calendar__tile-button--selected"),type:"button",onClick:()=>{r.departureDate&&w!==r.departureDate.date?i({arrivalDate:{date:w,displayDate:a.displayDateTemplate.replace("{day}",g.day.toString())}}):w!==r.arrivalDate.date&&(w<r.arrivalDate.date?i({arrivalDate:{date:w,displayDate:a.displayDateTemplate.replace("{day}",g.day.toString())}}):i(Object.assign(Object.assign({},r),{departureDate:{date:w,displayDate:a.displayDateTemplate.replace("{day}",g.day.toString())}})))},disabled:g.disabled||z},g.day))}),Array.from(Array(42-a.days.length-a.offset)).map((g,w)=>M.createElement("div",{key:`${a.monthName}-${w}`,className:"gst-calendar__tile"}))))}),P9=M.forwardRef(function(t,n){var r,{dayNames:i,maxStayLength:l,months:u,nextButtonLabel:a,previousButtonLabel:m,stay:g,displayedMonths:w=1,onChangeStay:C,onClickNavigation:P,className:I,documentDirection:N}=t,z=Mt(t,["dayNames","maxStayLength","months","nextButtonLabel","previousButtonLabel","stay","displayedMonths","onChangeStay","onClickNavigation","className","documentDirection"]);const $=M.useRef(null),H=M.useRef(null),V=Fe=>{$.current=Fe.changedTouches[0].clientX,H.current=Fe.changedTouches[0].clientY},q=Fe=>{if($.current&&H.current){const gt=Fe.changedTouches[0].clientX-$.current,yt=Fe.changedTouches[0].clientY-H.current;Math.atan2(Math.abs(yt),Math.abs(gt))*180/Math.PI<45&&(gt>40?(Fe.preventDefault(),Fe.stopPropagation(),N==="rtl"?Je():Re()):gt<40*-1&&(Fe.preventDefault(),Fe.stopPropagation(),N==="rtl"?Re():Je()))}},[te,ue]=g.arrivalDate.date.split("-"),fe=u.findIndex(Fe=>Fe.year===parseInt(te)&&Fe.month===ue),[Z,le]=M.useState(fe!==-1?fe>=u.length-w?u.length-w:fe:0),be=Ut("gst-calendar",I),Re=M.useCallback(()=>{if(Z!==0){const Fe=Z-1;le(Fe),P&&P(Fe,"prev")}},[Z,le,P]),Je=M.useCallback(()=>{if(Z+w<u.length){const Fe=Z+1;le(Fe),P&&P(Fe,"next")}},[Z,le,P,w,u]);return M.createElement("div",Object.assign({className:be,ref:n},z),M.createElement("input",{type:"hidden",name:"arrivalDate",defaultValue:g.arrivalDate.date}),M.createElement("input",{type:"hidden",name:"departureDate",defaultValue:(r=g.departureDate)===null||r===void 0?void 0:r.date}),M.createElement("div",{className:"gst-calendar__navigation-wrapper-prev"},M.createElement("button",{onClick:Re,type:"button",className:"gst-calendar__navigation-prev gst-button",disabled:Z===0},M.createElement(sn,{name:"chevron-left",label:m,size:"small",className:"gst-calendar__navigation-icon"}))),M.createElement("div",{className:"gst-calendar__navigation-wrapper-next"},M.createElement("button",{onClick:Je,className:"gst-calendar__navigation-next gst-button",type:"button",disabled:Z+w>=u.length},M.createElement(sn,{name:"chevron-right",label:a,size:"small",className:"gst-calendar__navigation-icon"}))),M.createElement("div",{className:"gst-calendar__view",onTouchStart:V,onTouchEnd:q},[...Array(w).keys()].map(Fe=>M.createElement(k9,{key:Fe,stay:g,onChangeStay:C,maxStayLength:l,month:u[Z+Fe],dayNames:i}))))});function A9(e){return!!(e&&{}.toString.call(e)=="[object Function]")}function I9(e,t){if(e!=null)if(A9(e))e(t);else try{e.current=t}catch{throw new Error(`Cannot assign value "${t}" to ref "${e}"`)}}function MP(...e){return M.useCallback(t=>{for(const n of e)I9(n,t)},e)}const Cw=M.createContext(null);function R9(e){const t=M.useContext(Cw);return M.useEffect(()=>(t&&e.id&&t.addHintId(e.id),()=>{t&&e.id&&t.removeHintId(e.id)}),[e.id]),t?Object.assign({disabled:t.disabled},e):e}function L9(e){const t=M.useContext(Cw);if(!t)return e;const{required:n,disabled:r}=e,i=Mt(e,["required","disabled"]);return Object.assign(Object.assign(Object.assign(Object.assign({name:t.name,required:n||t.required,disabled:r||t.disabled},t.defaultValue&&t.defaultValue===e.value&&{defaultChecked:!0}),typeof t.defaultValue>"u"&&t.value&&{checked:t.value===e.value}),t&&t.onChange&&{onChange:()=>{t.onChange&&t.onChange(e.value)}}),i)}function M9(e){const t=M.useContext(Cw);if(!t)return e;const{disabled:n}=e,r=Mt(e,["disabled"]);return Object.assign({disabled:n||t.disabled},r)}const ud=M.createContext(null);function O9(e){const t=M.useContext(ud);return t?Object.assign({htmlFor:t.id,required:t.required,disabled:t.disabled,type:t.inputType},e):e}function mF(e){const t=M.useContext(ud);return t?Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},t.hintIds.length>0&&{"aria-describedby":t.hintIds.join("")}),e):e}function D9(e){const t=M.useContext(ud);return t?Object.assign(Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},t.hintIds.length>0&&{"aria-describedby":t.hintIds.join("")}),e),{className:Ut("gst-checkbox-field__input",e.className)}):e}function N9(e){const t=M.useContext(ud);return t?Object.assign(Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},t.hintIds.length>0&&{"aria-describedby":t.hintIds.join("")}),e),{className:Ut("gst-radio-field__input",e.className)}):e}function j9(e){const t=M.useContext(ud);return t?Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},t.hintIds.length>0&&{"aria-describedby":t.hintIds.join("")}),e):e}function z9(e){const t=M.useContext(ud);return t?Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},t.hintIds.length>0&&{"aria-describedby":t.hintIds.join("")}),e):e}function F9(e){const t=M.useContext(ud);return t?Object.assign(Object.assign({id:t.id,required:t.required,disabled:t.disabled},e),{className:Ut("gst-switch-field__button",e.className)}):e}function B9(e){const t=M.useContext(ud);return M.useEffect(()=>{t&&e.id&&t.addHintId(e.id)},[e.id]),t?Object.assign(Object.assign(Object.assign({disabled:t.disabled,inputType:t.inputType},e),t.disabled&&{variation:"disabled"}),{className:Ut({"gst-checkbox-field__hint":t.inputType==="checkbox","gst-radio-field__hint":t.inputType==="radio"},e.className)}):e}const Tw=({value:e,children:t})=>{const n=M.useId(),[r,i]=M.useState([]);return M.createElement(ud.Provider,{value:Object.assign({id:n,hintIds:r,addHintId:l=>{i(r.concat([l]))},removeHintId:l=>{const u=r.findIndex(a=>a===l);u&&i([...r.slice(0,u),...r.slice(u+1)])}},e)},t)},w_=M.forwardRef(function(t,n){var{className:r,required:i,disabled:l,children:u}=t,a=Mt(t,["className","required","disabled","children"]);return M.createElement(Tw,{value:{required:i,disabled:l}},M.createElement("div",Object.assign({ref:n,className:Ut("gst-field",r)},a),u))}),U9=M.forwardRef(function(t,n){var{className:r,required:i,disabled:l,children:u}=t,a=Mt(t,["className","required","disabled","children"]);return M.createElement(Tw,{value:{required:i,disabled:l,inputType:"checkbox"}},M.createElement("div",Object.assign({ref:n,className:Ut("gst-checkbox-field",r)},a),u))}),gF=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);const u=M9(l);return M.createElement(Tw,{value:Object.assign(Object.assign({},u),{inputType:"radio"})},M.createElement("div",Object.assign({ref:n,className:Ut("gst-radio-field",r)},l),i))}),$9=M.forwardRef(function(t,n){var{disabled:r,className:i,children:l}=t,u=Mt(t,["disabled","className","children"]);return M.createElement(Tw,{value:{disabled:r,inputType:"switch"}},M.createElement("div",Object.assign({ref:n,className:Ut("gst-switch-field",i)},u),l))}),V9=M.forwardRef(function(t,n){const r=D9(t),{checked:i,id:l,indeterminate:u,invalid:a,className:m}=r,g=Mt(r,["checked","id","indeterminate","invalid","className"]),w=M.useRef(),C=MP(w,n);M.useEffect(()=>{w&&w.current&&(u&&!i?w.current.indeterminate=!0:w.current.indeterminate=!1)},[u,i]);const P=Ut("gst-checkbox",m);return M.createElement("input",Object.assign({ref:C,className:P,type:"checkbox",id:l,checked:i},a&&{"aria-invalid":!0},g))});function kw(){return typeof window<"u"}function tf(e){return yF(e)?(e.nodeName||"").toLowerCase():"#document"}function Xa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function du(e){var t;return(t=(yF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yF(e){return kw()?e instanceof Node||e instanceof Xa(e).Node:!1}function as(e){return kw()?e instanceof Element||e instanceof Xa(e).Element:!1}function Ds(e){return kw()?e instanceof HTMLElement||e instanceof Xa(e).HTMLElement:!1}function kT(e){return!kw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xa(e).ShadowRoot}function S_(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Cl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function H9(e){return["table","td","th"].includes(tf(e))}function Pw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function OP(e){const t=Aw(),n=as(e)?Cl(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Z9(e){let t=id(e);for(;Ds(t)&&!Ku(t);){if(OP(t))return t;if(Pw(t))return null;t=id(t)}return null}function Aw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ku(e){return["html","body","#document"].includes(tf(e))}function Cl(e){return Xa(e).getComputedStyle(e)}function Iw(e){return as(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function id(e){if(tf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kT(e)&&e.host||du(e);return kT(t)?t.host:t}function vF(e){const t=id(e);return Ku(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ds(t)&&S_(t)?t:vF(t)}function Rh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vF(e),l=i===((r=e.ownerDocument)==null?void 0:r.body),u=Xa(i);if(l){const a=PT(u);return t.concat(u,u.visualViewport||[],S_(i)?i:[],a&&n?Rh(a):[])}return t.concat(i,Rh(i,[],n))}function PT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $u(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ma(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&kT(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function _F(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function xF(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function bF(e){return e.mozInputSource===0&&e.isTrusted?!0:AT()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function wF(e){return G9()?!1:!AT()&&e.width===0&&e.height===0||AT()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function q9(){return/apple/i.test(navigator.vendor)}function AT(){const e=/android/i;return e.test(_F())||e.test(xF())}function G9(){return xF().includes("jsdom/")}function WL(e,t){return["mouse","pen"].includes(e)}function W9(e){return"nativeEvent"in e}function X9(e){return e.matches("html,body")}function fl(e){return(e==null?void 0:e.ownerDocument)||document}function fE(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function jf(e){return"composedPath"in e?e.composedPath()[0]:e.target}const K9="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function SF(e){return Ds(e)&&e.matches(K9)}function uo(e){e.preventDefault(),e.stopPropagation()}function EF(e){return e?e.getAttribute("role")==="combobox"&&SF(e):!1}const ug=Math.min,Ha=Math.max,t0=Math.round,Pm=Math.floor,nu=e=>({x:e,y:e}),Y9={left:"right",right:"left",bottom:"top",top:"bottom"},Q9={start:"end",end:"start"};function XL(e,t,n){return Ha(e,ug(t,n))}function E_(e,t){return typeof e=="function"?e(t):e}function Uh(e){return e.split("-")[0]}function C_(e){return e.split("-")[1]}function CF(e){return e==="x"?"y":"x"}function TF(e){return e==="y"?"height":"width"}function lp(e){return["top","bottom"].includes(Uh(e))?"y":"x"}function kF(e){return CF(lp(e))}function J9(e,t,n){n===void 0&&(n=!1);const r=C_(e),i=kF(e),l=TF(i);let u=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(u=n0(u)),[u,n0(u)]}function eW(e){const t=n0(e);return[IT(e),t,IT(t)]}function IT(e){return e.replace(/start|end/g,t=>Q9[t])}function tW(e,t,n){const r=["left","right"],i=["right","left"],l=["top","bottom"],u=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?l:u;default:return[]}}function nW(e,t,n,r){const i=C_(e);let l=tW(Uh(e),n==="start",r);return i&&(l=l.map(u=>u+"-"+i),t&&(l=l.concat(l.map(IT)))),l}function n0(e){return e.replace(/left|right|bottom|top/g,t=>Y9[t])}function rW(e){return{top:0,right:0,bottom:0,left:0,...e}}function iW(e){return typeof e!="number"?rW(e):{top:e,right:e,bottom:e,left:e}}function r0(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var sW=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],i0=sW.join(","),PF=typeof Element>"u",dg=PF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,s0=!PF&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},o0=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),l=i===""||i==="true",u=l||n&&t&&e(t.parentNode);return u},oW=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},aW=function(t,n,r){if(o0(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(i0));return n&&dg.call(t,i0)&&i.unshift(t),i=i.filter(r),i},lW=function e(t,n,r){for(var i=[],l=Array.from(t);l.length;){var u=l.shift();if(!o0(u,!1))if(u.tagName==="SLOT"){var a=u.assignedElements(),m=a.length?a:u.children,g=e(m,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:u,candidates:g})}else{var w=dg.call(u,i0);w&&r.filter(u)&&(n||!t.includes(u))&&i.push(u);var C=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),P=!o0(C,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(u));if(C&&P){var I=e(C===!0?u.children:C.children,!0,r);r.flatten?i.push.apply(i,I):i.push({scopeParent:u,candidates:I})}else l.unshift.apply(l,u.children)}}return i},AF=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},IF=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||oW(t))&&!AF(t)?0:t.tabIndex},cW=function(t,n){var r=IF(t);return r<0&&n&&!AF(t)?0:r},uW=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},RF=function(t){return t.tagName==="INPUT"},dW=function(t){return RF(t)&&t.type==="hidden"},hW=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},fW=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},pW=function(t){if(!t.name)return!0;var n=t.form||s0(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var l=fW(i,t.form);return!l||l===t},mW=function(t){return RF(t)&&t.type==="radio"},gW=function(t){return mW(t)&&!pW(t)},yW=function(t){var n,r=t&&s0(t),i=(n=r)===null||n===void 0?void 0:n.host,l=!1;if(r&&r!==t){var u,a,m;for(l=!!((u=i)!==null&&u!==void 0&&(a=u.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(m=t.ownerDocument)!==null&&m!==void 0&&m.contains(t));!l&&i;){var g,w,C;r=s0(i),i=(g=r)===null||g===void 0?void 0:g.host,l=!!((w=i)!==null&&w!==void 0&&(C=w.ownerDocument)!==null&&C!==void 0&&C.contains(i))}}return l},KL=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},vW=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var l=dg.call(t,"details>summary:first-of-type"),u=l?t.parentElement:t;if(dg.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var m=t.parentElement,g=s0(t);if(m&&!m.shadowRoot&&i(m)===!0)return KL(t);t.assignedSlot?t=t.assignedSlot:!m&&g!==t.ownerDocument?t=g.host:t=m}t=a}if(yW(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return KL(t);return!1},_W=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return dg.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},xW=function(t,n){return!(n.disabled||o0(n)||dW(n)||vW(n,t)||hW(n)||_W(n))},RT=function(t,n){return!(gW(n)||IF(n)<0||!xW(t,n))},bW=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},wW=function e(t){var n=[],r=[];return t.forEach(function(i,l){var u=!!i.scopeParent,a=u?i.scopeParent:i,m=cW(a,u),g=u?e(i.candidates):a;m===0?u?n.push.apply(n,g):n.push(a):r.push({documentOrder:l,tabIndex:m,item:i,isScope:u,content:g})}),r.sort(uW).reduce(function(i,l){return l.isScope?i.push.apply(i,l.content):i.push(l.content),i},[]).concat(n)},Rw=function(t,n){n=n||{};var r;return n.getShadowRoot?r=lW([t],n.includeContainer,{filter:RT.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:bW}):r=aW(t,n.includeContainer,RT.bind(null,n)),wW(r)},SW=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return dg.call(t,i0)===!1?!1:RT(n,t)};function YL(e,t,n){let{reference:r,floating:i}=e;const l=lp(t),u=kF(t),a=TF(u),m=Uh(t),g=l==="y",w=r.x+r.width/2-i.width/2,C=r.y+r.height/2-i.height/2,P=r[a]/2-i[a]/2;let I;switch(m){case"top":I={x:w,y:r.y-i.height};break;case"bottom":I={x:w,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:C};break;case"left":I={x:r.x-i.width,y:C};break;default:I={x:r.x,y:r.y}}switch(C_(t)){case"start":I[u]-=P*(n&&g?-1:1);break;case"end":I[u]+=P*(n&&g?-1:1);break}return I}const EW=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:l=[],platform:u}=n,a=l.filter(Boolean),m=await(u.isRTL==null?void 0:u.isRTL(t));let g=await u.getElementRects({reference:e,floating:t,strategy:i}),{x:w,y:C}=YL(g,r,m),P=r,I={},N=0;for(let z=0;z<a.length;z++){const{name:$,fn:H}=a[z],{x:V,y:q,data:te,reset:ue}=await H({x:w,y:C,initialPlacement:r,placement:P,strategy:i,middlewareData:I,rects:g,platform:u,elements:{reference:e,floating:t}});w=V??w,C=q??C,I={...I,[$]:{...I[$],...te}},ue&&N<=50&&(N++,typeof ue=="object"&&(ue.placement&&(P=ue.placement),ue.rects&&(g=ue.rects===!0?await u.getElementRects({reference:e,floating:t,strategy:i}):ue.rects),{x:w,y:C}=YL(g,P,m)),z=-1)}return{x:w,y:C,placement:P,strategy:i,middlewareData:I}};async function DP(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:l,rects:u,elements:a,strategy:m}=e,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:C="floating",altBoundary:P=!1,padding:I=0}=E_(t,e),N=iW(I),$=a[P?C==="floating"?"reference":"floating":C],H=r0(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement($)))==null||n?$:$.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(a.floating)),boundary:g,rootBoundary:w,strategy:m})),V=C==="floating"?{x:r,y:i,width:u.floating.width,height:u.floating.height}:u.reference,q=await(l.getOffsetParent==null?void 0:l.getOffsetParent(a.floating)),te=await(l.isElement==null?void 0:l.isElement(q))?await(l.getScale==null?void 0:l.getScale(q))||{x:1,y:1}:{x:1,y:1},ue=r0(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:V,offsetParent:q,strategy:m}):V);return{top:(H.top-ue.top+N.top)/te.y,bottom:(ue.bottom-H.bottom+N.bottom)/te.y,left:(H.left-ue.left+N.left)/te.x,right:(ue.right-H.right+N.right)/te.x}}const CW=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:l,rects:u,initialPlacement:a,platform:m,elements:g}=t,{mainAxis:w=!0,crossAxis:C=!0,fallbackPlacements:P,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:z=!0,...$}=E_(e,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const H=Uh(i),V=lp(a),q=Uh(a)===a,te=await(m.isRTL==null?void 0:m.isRTL(g.floating)),ue=P||(q||!z?[n0(a)]:eW(a)),fe=N!=="none";!P&&fe&&ue.push(...nW(a,z,N,te));const Z=[a,...ue],le=await DP(t,$),be=[];let Re=((r=l.flip)==null?void 0:r.overflows)||[];if(w&&be.push(le[H]),C){const gt=J9(i,u,te);be.push(le[gt[0]],le[gt[1]])}if(Re=[...Re,{placement:i,overflows:be}],!be.every(gt=>gt<=0)){var Je,Fe;const gt=(((Je=l.flip)==null?void 0:Je.index)||0)+1,yt=Z[gt];if(yt)return{data:{index:gt,overflows:Re},reset:{placement:yt}};let lt=(Fe=Re.filter(Nt=>Nt.overflows[0]<=0).sort((Nt,qe)=>Nt.overflows[1]-qe.overflows[1])[0])==null?void 0:Fe.placement;if(!lt)switch(I){case"bestFit":{var Xe;const Nt=(Xe=Re.filter(qe=>{if(fe){const _t=lp(qe.placement);return _t===V||_t==="y"}return!0}).map(qe=>[qe.placement,qe.overflows.filter(_t=>_t>0).reduce((_t,Ke)=>_t+Ke,0)]).sort((qe,_t)=>qe[1]-_t[1])[0])==null?void 0:Xe[0];Nt&&(lt=Nt);break}case"initialPlacement":lt=a;break}if(i!==lt)return{reset:{placement:lt}}}return{}}}};async function TW(e,t){const{placement:n,platform:r,elements:i}=e,l=await(r.isRTL==null?void 0:r.isRTL(i.floating)),u=Uh(n),a=C_(n),m=lp(n)==="y",g=["left","top"].includes(u)?-1:1,w=l&&m?-1:1,C=E_(t,e);let{mainAxis:P,crossAxis:I,alignmentAxis:N}=typeof C=="number"?{mainAxis:C,crossAxis:0,alignmentAxis:null}:{mainAxis:C.mainAxis||0,crossAxis:C.crossAxis||0,alignmentAxis:C.alignmentAxis};return a&&typeof N=="number"&&(I=a==="end"?N*-1:N),m?{x:I*w,y:P*g}:{x:P*g,y:I*w}}const kW=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:l,placement:u,middlewareData:a}=t,m=await TW(t,e);return u===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+m.x,y:l+m.y,data:{...m,placement:u}}}}},PW=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:l=!0,crossAxis:u=!1,limiter:a={fn:$=>{let{x:H,y:V}=$;return{x:H,y:V}}},...m}=E_(e,t),g={x:n,y:r},w=await DP(t,m),C=lp(Uh(i)),P=CF(C);let I=g[P],N=g[C];if(l){const $=P==="y"?"top":"left",H=P==="y"?"bottom":"right",V=I+w[$],q=I-w[H];I=XL(V,I,q)}if(u){const $=C==="y"?"top":"left",H=C==="y"?"bottom":"right",V=N+w[$],q=N-w[H];N=XL(V,N,q)}const z=a.fn({...t,[P]:I,[C]:N});return{...z,data:{x:z.x-n,y:z.y-r,enabled:{[P]:l,[C]:u}}}}}},AW=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:l,platform:u,elements:a}=t,{apply:m=()=>{},...g}=E_(e,t),w=await DP(t,g),C=Uh(i),P=C_(i),I=lp(i)==="y",{width:N,height:z}=l.floating;let $,H;C==="top"||C==="bottom"?($=C,H=P===(await(u.isRTL==null?void 0:u.isRTL(a.floating))?"start":"end")?"left":"right"):(H=C,$=P==="end"?"top":"bottom");const V=z-w.top-w.bottom,q=N-w.left-w.right,te=ug(z-w[$],V),ue=ug(N-w[H],q),fe=!t.middlewareData.shift;let Z=te,le=ue;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(le=q),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(Z=V),fe&&!P){const Re=Ha(w.left,0),Je=Ha(w.right,0),Fe=Ha(w.top,0),Xe=Ha(w.bottom,0);I?le=N-2*(Re!==0||Je!==0?Re+Je:Ha(w.left,w.right)):Z=z-2*(Fe!==0||Xe!==0?Fe+Xe:Ha(w.top,w.bottom))}await m({...t,availableWidth:le,availableHeight:Z});const be=await u.getDimensions(a.floating);return N!==be.width||z!==be.height?{reset:{rects:!0}}:{}}}};function LF(e){const t=Cl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ds(e),l=i?e.offsetWidth:n,u=i?e.offsetHeight:r,a=t0(n)!==l||t0(r)!==u;return a&&(n=l,r=u),{width:n,height:r,$:a}}function NP(e){return as(e)?e:e.contextElement}function qm(e){const t=NP(e);if(!Ds(t))return nu(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:l}=LF(t);let u=(l?t0(n.width):n.width)/r,a=(l?t0(n.height):n.height)/i;return(!u||!Number.isFinite(u))&&(u=1),(!a||!Number.isFinite(a))&&(a=1),{x:u,y:a}}const IW=nu(0);function MF(e){const t=Xa(e);return!Aw()||!t.visualViewport?IW:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function RW(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xa(e)?!1:t}function cp(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),l=NP(e);let u=nu(1);t&&(r?as(r)&&(u=qm(r)):u=qm(e));const a=RW(l,n,r)?MF(l):nu(0);let m=(i.left+a.x)/u.x,g=(i.top+a.y)/u.y,w=i.width/u.x,C=i.height/u.y;if(l){const P=Xa(l),I=r&&as(r)?Xa(r):r;let N=P,z=PT(N);for(;z&&r&&I!==N;){const $=qm(z),H=z.getBoundingClientRect(),V=Cl(z),q=H.left+(z.clientLeft+parseFloat(V.paddingLeft))*$.x,te=H.top+(z.clientTop+parseFloat(V.paddingTop))*$.y;m*=$.x,g*=$.y,w*=$.x,C*=$.y,m+=q,g+=te,N=Xa(z),z=PT(N)}}return r0({width:w,height:C,x:m,y:g})}function jP(e,t){const n=Iw(e).scrollLeft;return t?t.left+n:cp(du(e)).left+n}function OF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:jP(e,r)),l=r.top+t.scrollTop;return{x:i,y:l}}function LW(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const l=i==="fixed",u=du(r),a=t?Pw(t.floating):!1;if(r===u||a&&l)return n;let m={scrollLeft:0,scrollTop:0},g=nu(1);const w=nu(0),C=Ds(r);if((C||!C&&!l)&&((tf(r)!=="body"||S_(u))&&(m=Iw(r)),Ds(r))){const I=cp(r);g=qm(r),w.x=I.x+r.clientLeft,w.y=I.y+r.clientTop}const P=u&&!C&&!l?OF(u,m,!0):nu(0);return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-m.scrollLeft*g.x+w.x+P.x,y:n.y*g.y-m.scrollTop*g.y+w.y+P.y}}function MW(e){return Array.from(e.getClientRects())}function OW(e){const t=du(e),n=Iw(e),r=e.ownerDocument.body,i=Ha(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),l=Ha(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+jP(e);const a=-n.scrollTop;return Cl(r).direction==="rtl"&&(u+=Ha(t.clientWidth,r.clientWidth)-i),{width:i,height:l,x:u,y:a}}function DW(e,t){const n=Xa(e),r=du(e),i=n.visualViewport;let l=r.clientWidth,u=r.clientHeight,a=0,m=0;if(i){l=i.width,u=i.height;const g=Aw();(!g||g&&t==="fixed")&&(a=i.offsetLeft,m=i.offsetTop)}return{width:l,height:u,x:a,y:m}}function NW(e,t){const n=cp(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,l=Ds(e)?qm(e):nu(1),u=e.clientWidth*l.x,a=e.clientHeight*l.y,m=i*l.x,g=r*l.y;return{width:u,height:a,x:m,y:g}}function QL(e,t,n){let r;if(t==="viewport")r=DW(e,n);else if(t==="document")r=OW(du(e));else if(as(t))r=NW(t,n);else{const i=MF(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return r0(r)}function DF(e,t){const n=id(e);return n===t||!as(n)||Ku(n)?!1:Cl(n).position==="fixed"||DF(n,t)}function jW(e,t){const n=t.get(e);if(n)return n;let r=Rh(e,[],!1).filter(a=>as(a)&&tf(a)!=="body"),i=null;const l=Cl(e).position==="fixed";let u=l?id(e):e;for(;as(u)&&!Ku(u);){const a=Cl(u),m=OP(u);!m&&a.position==="fixed"&&(i=null),(l?!m&&!i:!m&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||S_(u)&&!m&&DF(e,u))?r=r.filter(w=>w!==u):i=a,u=id(u)}return t.set(e,r),r}function zW(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const u=[...n==="clippingAncestors"?Pw(t)?[]:jW(t,this._c):[].concat(n),r],a=u[0],m=u.reduce((g,w)=>{const C=QL(t,w,i);return g.top=Ha(C.top,g.top),g.right=ug(C.right,g.right),g.bottom=ug(C.bottom,g.bottom),g.left=Ha(C.left,g.left),g},QL(t,a,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function FW(e){const{width:t,height:n}=LF(e);return{width:t,height:n}}function BW(e,t,n){const r=Ds(t),i=du(t),l=n==="fixed",u=cp(e,!0,l,t);let a={scrollLeft:0,scrollTop:0};const m=nu(0);if(r||!r&&!l)if((tf(t)!=="body"||S_(i))&&(a=Iw(t)),r){const P=cp(t,!0,l,t);m.x=P.x+t.clientLeft,m.y=P.y+t.clientTop}else i&&(m.x=jP(i));const g=i&&!r&&!l?OF(i,a):nu(0),w=u.left+a.scrollLeft-m.x-g.x,C=u.top+a.scrollTop-m.y-g.y;return{x:w,y:C,width:u.width,height:u.height}}function pE(e){return Cl(e).position==="static"}function JL(e,t){if(!Ds(e)||Cl(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return du(e)===n&&(n=n.ownerDocument.body),n}function NF(e,t){const n=Xa(e);if(Pw(e))return n;if(!Ds(e)){let i=id(e);for(;i&&!Ku(i);){if(as(i)&&!pE(i))return i;i=id(i)}return n}let r=JL(e,t);for(;r&&H9(r)&&pE(r);)r=JL(r,t);return r&&Ku(r)&&pE(r)&&!OP(r)?n:r||Z9(e)||n}const UW=async function(e){const t=this.getOffsetParent||NF,n=this.getDimensions,r=await n(e.floating);return{reference:BW(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $W(e){return Cl(e).direction==="rtl"}const VW={convertOffsetParentRelativeRectToViewportRelativeRect:LW,getDocumentElement:du,getClippingRect:zW,getOffsetParent:NF,getElementRects:UW,getClientRects:MW,getDimensions:FW,getScale:qm,isElement:as,isRTL:$W};function jF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function HW(e,t){let n=null,r;const i=du(e);function l(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function u(a,m){a===void 0&&(a=!1),m===void 0&&(m=1),l();const g=e.getBoundingClientRect(),{left:w,top:C,width:P,height:I}=g;if(a||t(),!P||!I)return;const N=Pm(C),z=Pm(i.clientWidth-(w+P)),$=Pm(i.clientHeight-(C+I)),H=Pm(w),q={rootMargin:-N+"px "+-z+"px "+-$+"px "+-H+"px",threshold:Ha(0,ug(1,m))||1};let te=!0;function ue(fe){const Z=fe[0].intersectionRatio;if(Z!==m){if(!te)return u();Z?u(!1,Z):r=setTimeout(()=>{u(!1,1e-7)},1e3)}Z===1&&!jF(g,e.getBoundingClientRect())&&u(),te=!1}try{n=new IntersectionObserver(ue,{...q,root:i.ownerDocument})}catch{n=new IntersectionObserver(ue,q)}n.observe(e)}return u(!0),l}function zP(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,g=NP(e),w=i||l?[...g?Rh(g):[],...Rh(t)]:[];w.forEach(H=>{i&&H.addEventListener("scroll",n,{passive:!0}),l&&H.addEventListener("resize",n)});const C=g&&a?HW(g,n):null;let P=-1,I=null;u&&(I=new ResizeObserver(H=>{let[V]=H;V&&V.target===g&&I&&(I.unobserve(t),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{var q;(q=I)==null||q.observe(t)})),n()}),g&&!m&&I.observe(g),I.observe(t));let N,z=m?cp(e):null;m&&$();function $(){const H=cp(e);z&&!jF(z,H)&&n(),z=H,N=requestAnimationFrame($)}return n(),()=>{var H;w.forEach(V=>{i&&V.removeEventListener("scroll",n),l&&V.removeEventListener("resize",n)}),C==null||C(),(H=I)==null||H.disconnect(),I=null,m&&cancelAnimationFrame(N)}}const ZW=kW,qW=PW,GW=CW,WW=AW,XW=(e,t,n)=>{const r=new Map,i={platform:VW,...n},l={...i.platform,_c:r};return EW(e,t,{...i,platform:l})};var db=typeof document<"u"?M.useLayoutEffect:M.useEffect;function a0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!a0(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const l=i[r];if(!(l==="_owner"&&e.$$typeof)&&!a0(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function zF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function eM(e,t){const n=zF(e);return Math.round(t*n)/n}function mE(e){const t=M.useRef(e);return db(()=>{t.current=e}),t}function KW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:l,floating:u}={},transform:a=!0,whileElementsMounted:m,open:g}=e,[w,C]=M.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[P,I]=M.useState(r);a0(P,r)||I(r);const[N,z]=M.useState(null),[$,H]=M.useState(null),V=M.useCallback(qe=>{qe!==fe.current&&(fe.current=qe,z(qe))},[]),q=M.useCallback(qe=>{qe!==Z.current&&(Z.current=qe,H(qe))},[]),te=l||N,ue=u||$,fe=M.useRef(null),Z=M.useRef(null),le=M.useRef(w),be=m!=null,Re=mE(m),Je=mE(i),Fe=mE(g),Xe=M.useCallback(()=>{if(!fe.current||!Z.current)return;const qe={placement:t,strategy:n,middleware:P};Je.current&&(qe.platform=Je.current),XW(fe.current,Z.current,qe).then(_t=>{const Ke={..._t,isPositioned:Fe.current!==!1};gt.current&&!a0(le.current,Ke)&&(le.current=Ke,Ca.flushSync(()=>{C(Ke)}))})},[P,t,n,Je,Fe]);db(()=>{g===!1&&le.current.isPositioned&&(le.current.isPositioned=!1,C(qe=>({...qe,isPositioned:!1})))},[g]);const gt=M.useRef(!1);db(()=>(gt.current=!0,()=>{gt.current=!1}),[]),db(()=>{if(te&&(fe.current=te),ue&&(Z.current=ue),te&&ue){if(Re.current)return Re.current(te,ue,Xe);Xe()}},[te,ue,Xe,Re,be]);const yt=M.useMemo(()=>({reference:fe,floating:Z,setReference:V,setFloating:q}),[V,q]),lt=M.useMemo(()=>({reference:te,floating:ue}),[te,ue]),Nt=M.useMemo(()=>{const qe={position:n,left:0,top:0};if(!lt.floating)return qe;const _t=eM(lt.floating,w.x),Ke=eM(lt.floating,w.y);return a?{...qe,transform:"translate("+_t+"px, "+Ke+"px)",...zF(lt.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_t,top:Ke}},[n,a,lt.floating,w.x,w.y]);return M.useMemo(()=>({...w,update:Xe,refs:yt,elements:lt,floatingStyles:Nt}),[w,Xe,yt,lt,Nt])}const FP=(e,t)=>({...ZW(e),options:[e,t]}),FF=(e,t)=>({...qW(e),options:[e,t]}),YW=(e,t)=>({...GW(e),options:[e,t]}),BF=(e,t)=>({...WW(e),options:[e,t]});function Nv(e){return M.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const UF={...F0},QW=UF.useInsertionEffect,JW=QW||(e=>e());function Ao(e){const t=M.useRef(()=>{});return JW(()=>{t.current=e}),M.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}const BP="ArrowUp",T_="ArrowDown",Lh="ArrowLeft",Mh="ArrowRight";function zx(e,t,n){return Math.floor(e/t)!==n}function Ky(e,t){return t<0||t>=e.current.length}function gE(e,t){return ko(e,{disabledIndices:t})}function tM(e,t){return ko(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function ko(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:l=1}=t===void 0?{}:t;const u=e.current;let a=n;do a+=r?-l:l;while(a>=0&&a<=u.length-1&&hb(u,a,i));return a}function e7(e,t){let{event:n,orientation:r,loop:i,rtl:l,cols:u,disabledIndices:a,minIndex:m,maxIndex:g,prevIndex:w,stopEvent:C=!1}=t,P=w;if(n.key===BP){if(C&&uo(n),w===-1)P=g;else if(P=ko(e,{startingIndex:P,amount:u,decrement:!0,disabledIndices:a}),i&&(w-u<m||P<0)){const I=w%u,N=g%u,z=g-(N-I);N===I?P=g:P=N>I?z:z-u}Ky(e,P)&&(P=w)}if(n.key===T_&&(C&&uo(n),w===-1?P=m:(P=ko(e,{startingIndex:w,amount:u,disabledIndices:a}),i&&w+u>g&&(P=ko(e,{startingIndex:w%u-u,amount:u,disabledIndices:a}))),Ky(e,P)&&(P=w)),r==="both"){const I=Pm(w/u);n.key===(l?Lh:Mh)&&(C&&uo(n),w%u!==u-1?(P=ko(e,{startingIndex:w,disabledIndices:a}),i&&zx(P,u,I)&&(P=ko(e,{startingIndex:w-w%u-1,disabledIndices:a}))):i&&(P=ko(e,{startingIndex:w-w%u-1,disabledIndices:a})),zx(P,u,I)&&(P=w)),n.key===(l?Mh:Lh)&&(C&&uo(n),w%u!==0?(P=ko(e,{startingIndex:w,decrement:!0,disabledIndices:a}),i&&zx(P,u,I)&&(P=ko(e,{startingIndex:w+(u-w%u),decrement:!0,disabledIndices:a}))):i&&(P=ko(e,{startingIndex:w+(u-w%u),decrement:!0,disabledIndices:a})),zx(P,u,I)&&(P=w));const N=Pm(g/u)===I;Ky(e,P)&&(i&&N?P=n.key===(l?Mh:Lh)?g:ko(e,{startingIndex:w-w%u-1,disabledIndices:a}):P=w)}return P}function t7(e,t,n){const r=[];let i=0;return e.forEach((l,u)=>{let{width:a,height:m}=l,g=!1;for(n&&(i=0);!g;){const w=[];for(let C=0;C<a;C++)for(let P=0;P<m;P++)w.push(i+C+P*t);i%t+a<=t&&w.every(C=>r[C]==null)?(w.forEach(C=>{r[C]=u}),g=!0):i++}}),[...r]}function n7(e,t,n,r,i){if(e===-1)return-1;const l=n.indexOf(e),u=t[e];switch(i){case"tl":return l;case"tr":return u?l+u.width-1:l;case"bl":return u?l+(u.height-1)*r:l;case"br":return n.lastIndexOf(e)}}function r7(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function hb(e,t,n){if(n)return n.includes(t);const r=e[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var bi=typeof document<"u"?M.useLayoutEffect:M.useEffect;function i7(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function s7(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}const $F=M.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function VF(e){const{children:t,elementsRef:n,labelsRef:r}=e,[i,l]=M.useState(()=>new Map),u=M.useCallback(m=>{l(g=>new Map(g).set(m,null))},[]),a=M.useCallback(m=>{l(g=>{const w=new Map(g);return w.delete(m),w})},[]);return bi(()=>{const m=new Map(i);Array.from(m.keys()).sort(i7).forEach((w,C)=>{m.set(w,C)}),s7(i,m)||l(m)},[i]),y.jsx($F.Provider,{value:M.useMemo(()=>({register:u,unregister:a,map:i,elementsRef:n,labelsRef:r}),[u,a,i,n,r]),children:t})}function HF(e){e===void 0&&(e={});const{label:t}=e,{register:n,unregister:r,map:i,elementsRef:l,labelsRef:u}=M.useContext($F),[a,m]=M.useState(null),g=M.useRef(null),w=M.useCallback(C=>{if(g.current=C,a!==null&&(l.current[a]=C,u)){var P;const I=t!==void 0;u.current[a]=I?t:(P=C==null?void 0:C.textContent)!=null?P:null}},[a,l,u,t]);return bi(()=>{const C=g.current;if(C)return n(C),()=>{r(C)}},[n,r]),bi(()=>{const C=g.current?i.get(g.current):null;C!=null&&m(C)},[i]),M.useMemo(()=>({ref:w,index:a??-1}),[a,w])}let nM=!1,o7=0;const rM=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+o7++;function a7(){const[e,t]=M.useState(()=>nM?rM():void 0);return bi(()=>{e==null&&t(rM())},[]),M.useEffect(()=>{nM=!0},[]),e}const l7=UF.useId,Lw=l7||a7;function c7(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const u7=M.createContext(null),d7=M.createContext(null),UP=()=>{var e;return((e=M.useContext(u7))==null?void 0:e.id)||null},Mw=()=>M.useContext(d7);function jv(e){return"data-floating-ui-"+e}function xa(e){const t=M.useRef(e);return bi(()=>{t.current=e}),t}let iM=0;function Of(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(iM);const l=()=>e==null?void 0:e.focus({preventScroll:n});i?l():iM=requestAnimationFrame(l)}function sM(e,t){var n;let r=[],i=(n=e.find(l=>l.id===t))==null?void 0:n.parentId;for(;i;){const l=e.find(u=>u.id===i);i=l==null?void 0:l.parentId,l&&(r=r.concat(l))}return r}function Gm(e,t){let n=e.filter(i=>{var l;return i.parentId===t&&((l=i.context)==null?void 0:l.open)}),r=n;for(;r.length;)r=e.filter(i=>{var l;return(l=r)==null?void 0:l.some(u=>{var a;return i.parentId===u.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function h7(e,t){let n,r=-1;function i(l,u){u>r&&(n=l,r=u),Gm(e,l).forEach(m=>{i(m.id,u+1)})}return i(t,0),e.find(l=>l.id===n)}let lm=new WeakMap,Fx=new WeakSet,Bx={},yE=0;const f7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,ZF=e=>e&&(e.host||ZF(e.parentNode)),p7=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=ZF(n);return e.contains(r)?r:null}).filter(n=>n!=null);function m7(e,t,n,r){const i="data-floating-ui-inert",l=r?"inert":n?"aria-hidden":null,u=p7(t,e),a=new Set,m=new Set(u),g=[];Bx[i]||(Bx[i]=new WeakMap);const w=Bx[i];u.forEach(C),P(t),a.clear();function C(I){!I||a.has(I)||(a.add(I),I.parentNode&&C(I.parentNode))}function P(I){!I||m.has(I)||[].forEach.call(I.children,N=>{if(tf(N)!=="script")if(a.has(N))P(N);else{const z=l?N.getAttribute(l):null,$=z!==null&&z!=="false",H=lm.get(N)||0,V=l?H+1:H,q=(w.get(N)||0)+1;lm.set(N,V),w.set(N,q),g.push(N),V===1&&$&&Fx.add(N),q===1&&N.setAttribute(i,""),!$&&l&&N.setAttribute(l,"true")}})}return yE++,()=>{g.forEach(I=>{const N=lm.get(I)||0,z=l?N-1:N,$=(w.get(I)||0)-1;lm.set(I,z),w.set(I,$),z||(!Fx.has(I)&&l&&I.removeAttribute(l),Fx.delete(I)),$||I.removeAttribute(i)}),yE--,yE||(lm=new WeakMap,lm=new WeakMap,Fx=new WeakSet,Bx={})}}function oM(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=fl(e[0]).body;return m7(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Ow=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function qF(e,t){const n=Rw(e,Ow());t==="prev"&&n.reverse();const r=n.indexOf($u(fl(e)));return n.slice(r+1)[0]}function GF(){return qF(document.body,"next")}function WF(){return qF(document.body,"prev")}function Yy(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!ma(n,r)}function g7(e){Rw(e,Ow()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function aM(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Dw={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let y7;function lM(e){e.key==="Tab"&&(e.target,clearTimeout(y7))}const l0=M.forwardRef(function(t,n){const[r,i]=M.useState();bi(()=>(q9()&&i("button"),document.addEventListener("keydown",lM),()=>{document.removeEventListener("keydown",lM)}),[]);const l={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[jv("focus-guard")]:"",style:Dw};return y.jsx("span",{...t,...l})}),XF=M.createContext(null),cM=jv("portal");function v7(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Lw(),i=KF(),[l,u]=M.useState(null),a=M.useRef(null);return bi(()=>()=>{l==null||l.remove(),queueMicrotask(()=>{a.current=null})},[l]),bi(()=>{if(!r||a.current)return;const m=t?document.getElementById(t):null;if(!m)return;const g=document.createElement("div");g.id=r,g.setAttribute(cM,""),m.appendChild(g),a.current=g,u(g)},[t,r]),bi(()=>{if(n===null||!r||a.current)return;let m=n||(i==null?void 0:i.portalNode);m&&!as(m)&&(m=m.current),m=m||document.body;let g=null;t&&(g=document.createElement("div"),g.id=t,m.appendChild(g));const w=document.createElement("div");w.id=r,w.setAttribute(cM,""),m=g||m,m.appendChild(w),a.current=w,u(w)},[t,n,r,i]),l}function Nw(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,l=v7({id:n,root:r}),[u,a]=M.useState(null),m=M.useRef(null),g=M.useRef(null),w=M.useRef(null),C=M.useRef(null),P=u==null?void 0:u.modal,I=u==null?void 0:u.open,N=!!u&&!u.modal&&u.open&&i&&!!(r||l);return M.useEffect(()=>{if(!l||!i||P)return;function z($){l&&Yy($)&&($.type==="focusin"?aM:g7)(l)}return l.addEventListener("focusin",z,!0),l.addEventListener("focusout",z,!0),()=>{l.removeEventListener("focusin",z,!0),l.removeEventListener("focusout",z,!0)}},[l,i,P]),M.useEffect(()=>{l&&(I||aM(l))},[I,l]),y.jsxs(XF.Provider,{value:M.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:m,afterOutsideRef:g,beforeInsideRef:w,afterInsideRef:C,portalNode:l,setFocusManagerState:a}),[i,l]),children:[N&&l&&y.jsx(l0,{"data-type":"outside",ref:m,onFocus:z=>{if(Yy(z,l)){var $;($=w.current)==null||$.focus()}else{const H=WF()||(u==null?void 0:u.domReference);H==null||H.focus()}}}),N&&l&&y.jsx("span",{"aria-owns":l.id,style:Dw}),l&&Ca.createPortal(t,l),N&&l&&y.jsx(l0,{"data-type":"outside",ref:g,onFocus:z=>{if(Yy(z,l)){var $;($=C.current)==null||$.focus()}else{const H=GF()||(u==null?void 0:u.domReference);H==null||H.focus(),u!=null&&u.closeOnFocusOut&&(u==null||u.onOpenChange(!1,z.nativeEvent,"focus-out"))}}})]})}const KF=()=>M.useContext(XF),LT="data-floating-ui-focusable";function MT(e){return e?e.hasAttribute(LT)?e:e.querySelector("["+LT+"]")||e:null}const _7=20;let Df=[];function vE(e){Df=Df.filter(t=>t.isConnected),e&&tf(e)!=="body"&&(Df.push(e),Df.length>_7&&(Df=Df.slice(-20)))}function uM(){return Df.slice().reverse().find(e=>e.isConnected)}function x7(e){const t=Ow();return SW(e,t)?e:Rw(e,t)[0]||e}const b7=M.forwardRef(function(t,n){return y.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:Dw})});function jw(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:l=!0,initialFocus:u=0,returnFocus:a=!0,restoreFocus:m=!1,modal:g=!0,visuallyHiddenDismiss:w=!1,closeOnFocusOut:C=!0,outsideElementsInert:P=!1}=e,{open:I,onOpenChange:N,events:z,dataRef:$,elements:{domReference:H,floating:V}}=t,q=Ao(()=>{var fn;return(fn=$.current.floatingContext)==null?void 0:fn.nodeId}),te=typeof u=="number"&&u<0,ue=EF(H)&&te,fe=f7(),Z=fe?l:!0,le=!Z||fe&&P,be=xa(i),Re=xa(u),Je=xa(a),Fe=Mw(),Xe=KF(),gt=M.useRef(null),yt=M.useRef(null),lt=M.useRef(!1),Nt=M.useRef(!1),qe=M.useRef(-1),_t=Xe!=null,Ke=MT(V),we=Ao(function(fn){return fn===void 0&&(fn=Ke),fn?Rw(fn,Ow()):[]}),He=Ao(fn=>{const wn=we(fn);return be.current.map(an=>H&&an==="reference"?H:Ke&&an==="floating"?Ke:wn).filter(Boolean).flat()});M.useEffect(()=>{if(r||!g)return;function fn(an){if(an.key==="Tab"){ma(Ke,$u(fl(Ke)))&&we().length===0&&!ue&&uo(an);const Vt=He(),Cn=jf(an);be.current[0]==="reference"&&Cn===H&&(uo(an),an.shiftKey?Of(Vt[Vt.length-1]):Of(Vt[1])),be.current[1]==="floating"&&Cn===Ke&&an.shiftKey&&(uo(an),Of(Vt[0]))}}const wn=fl(Ke);return wn.addEventListener("keydown",fn),()=>{wn.removeEventListener("keydown",fn)}},[r,H,Ke,g,be,ue,we,He]),M.useEffect(()=>{if(r||!V)return;function fn(wn){const an=jf(wn),Cn=we().indexOf(an);Cn!==-1&&(qe.current=Cn)}return V.addEventListener("focusin",fn),()=>{V.removeEventListener("focusin",fn)}},[r,V,we]),M.useEffect(()=>{if(r||!C)return;function fn(){Nt.current=!0,setTimeout(()=>{Nt.current=!1})}function wn(an){const Vt=an.relatedTarget;queueMicrotask(()=>{const Cn=q(),Tn=!(ma(H,Vt)||ma(V,Vt)||ma(Vt,V)||ma(Xe==null?void 0:Xe.portalNode,Vt)||Vt!=null&&Vt.hasAttribute(jv("focus-guard"))||Fe&&(Gm(Fe.nodesRef.current,Cn).find(Fn=>{var Qe,zn;return ma((Qe=Fn.context)==null?void 0:Qe.elements.floating,Vt)||ma((zn=Fn.context)==null?void 0:zn.elements.domReference,Vt)})||sM(Fe.nodesRef.current,Cn).find(Fn=>{var Qe,zn,Le;return[(Qe=Fn.context)==null?void 0:Qe.elements.floating,MT((zn=Fn.context)==null?void 0:zn.elements.floating)].includes(Vt)||((Le=Fn.context)==null?void 0:Le.elements.domReference)===Vt})));if(m&&Tn&&$u(fl(Ke))===fl(Ke).body){Ds(Ke)&&Ke.focus();const Fn=qe.current,Qe=we(),zn=Qe[Fn]||Qe[Qe.length-1]||Ke;Ds(zn)&&zn.focus()}(ue||!g)&&Vt&&Tn&&!Nt.current&&Vt!==uM()&&(lt.current=!0,N(!1,an,"focus-out"))})}if(V&&Ds(H))return H.addEventListener("focusout",wn),H.addEventListener("pointerdown",fn),V.addEventListener("focusout",wn),()=>{H.removeEventListener("focusout",wn),H.removeEventListener("pointerdown",fn),V.removeEventListener("focusout",wn)}},[r,H,V,Ke,g,Fe,Xe,N,C,m,we,ue,q]);const Be=M.useRef(null),ct=M.useRef(null),xt=Nv([Be,Xe==null?void 0:Xe.beforeInsideRef]),bt=Nv([ct,Xe==null?void 0:Xe.afterInsideRef]);M.useEffect(()=>{var fn;if(r||!V)return;const wn=Array.from((Xe==null||(fn=Xe.portalNode)==null?void 0:fn.querySelectorAll("["+jv("portal")+"]"))||[]),an=Fe&&!g?sM(Fe==null?void 0:Fe.nodesRef.current,q()).map(Tn=>{var Fn;return(Fn=Tn.context)==null?void 0:Fn.elements.floating}):[],Vt=[V,...wn,...an,gt.current,yt.current,Be.current,ct.current,Xe==null?void 0:Xe.beforeOutsideRef.current,Xe==null?void 0:Xe.afterOutsideRef.current,be.current.includes("reference")||ue?H:null].filter(Tn=>Tn!=null),Cn=g||ue?oM(Vt,!le,le):oM(Vt);return()=>{Cn()}},[r,H,V,g,be,Xe,ue,Z,le,Fe,q]),bi(()=>{if(r||!Ds(Ke))return;const fn=fl(Ke),wn=$u(fn);queueMicrotask(()=>{const an=He(Ke),Vt=Re.current,Cn=(typeof Vt=="number"?an[Vt]:Vt.current)||Ke,Tn=ma(Ke,wn);!te&&!Tn&&I&&Of(Cn,{preventScroll:Cn===Ke})})},[r,I,Ke,te,He,Re]),bi(()=>{if(r||!Ke)return;let fn=!1;const wn=fl(Ke),an=$u(wn);let Cn=$.current.openEvent;vE(an);function Tn(zn){let{open:Le,reason:De,event:Ye,nested:mt}=zn;Le&&(Cn=Ye),De==="escape-key"&&H&&vE(H),["hover","safe-polygon"].includes(De)&&Ye.type==="mouseleave"&&(lt.current=!0),De==="outside-press"&&(mt?(lt.current=!1,fn=!0):lt.current=!(bF(Ye)||wF(Ye)))}z.on("openchange",Tn);const Fn=wn.createElement("span");Fn.setAttribute("tabindex","-1"),Fn.setAttribute("aria-hidden","true"),Object.assign(Fn.style,Dw),_t&&H&&H.insertAdjacentElement("afterend",Fn);function Qe(){return typeof Je.current=="boolean"?uM()||Fn:Je.current.current||Fn}return()=>{z.off("openchange",Tn);const zn=$u(wn),Le=ma(V,zn)||Fe&&Gm(Fe.nodesRef.current,q()).some(mt=>{var ft;return ma((ft=mt.context)==null?void 0:ft.elements.floating,zn)});(Le||Cn&&["click","mousedown"].includes(Cn.type))&&H&&vE(H);const Ye=Qe();queueMicrotask(()=>{const mt=x7(Ye);Je.current&&!lt.current&&Ds(mt)&&(!(mt!==zn&&zn!==wn.body)||Le)&&mt.focus({preventScroll:fn}),Fn.remove()})}},[r,V,Ke,Je,$,z,Fe,_t,H,q]),M.useEffect(()=>{queueMicrotask(()=>{lt.current=!1})},[r]),bi(()=>{if(!r&&Xe)return Xe.setFocusManagerState({modal:g,closeOnFocusOut:C,open:I,onOpenChange:N,domReference:H}),()=>{Xe.setFocusManagerState(null)}},[r,Xe,g,I,N,C,H]),bi(()=>{if(r||!Ke||typeof MutationObserver!="function"||te)return;const fn=()=>{const an=Ke.getAttribute("tabindex"),Vt=we(),Cn=$u(fl(V)),Tn=Vt.indexOf(Cn);Tn!==-1&&(qe.current=Tn),be.current.includes("floating")||Cn!==H&&Vt.length===0?an!=="0"&&Ke.setAttribute("tabindex","0"):an!=="-1"&&Ke.setAttribute("tabindex","-1")};fn();const wn=new MutationObserver(fn);return wn.observe(Ke,{childList:!0,subtree:!0,attributes:!0}),()=>{wn.disconnect()}},[r,V,Ke,H,be,we,te]);function It(fn){return r||!w||!g?null:y.jsx(b7,{ref:fn==="start"?gt:yt,onClick:wn=>N(!1,wn.nativeEvent),children:typeof w=="string"?w:"Dismiss"})}const qt=!r&&Z&&(g?!ue:!0)&&(_t||g);return y.jsxs(y.Fragment,{children:[qt&&y.jsx(l0,{"data-type":"inside",ref:xt,onFocus:fn=>{if(g){const an=He();Of(i[0]==="reference"?an[0]:an[an.length-1])}else if(Xe!=null&&Xe.preserveTabOrder&&Xe.portalNode)if(lt.current=!1,Yy(fn,Xe.portalNode)){const an=GF()||H;an==null||an.focus()}else{var wn;(wn=Xe.beforeOutsideRef.current)==null||wn.focus()}}}),!ue&&It("start"),n,It("end"),qt&&y.jsx(l0,{"data-type":"inside",ref:bt,onFocus:fn=>{if(g)Of(He()[0]);else if(Xe!=null&&Xe.preserveTabOrder&&Xe.portalNode)if(C&&(lt.current=!0),Yy(fn,Xe.portalNode)){const an=WF()||H;an==null||an.focus()}else{var wn;(wn=Xe.afterOutsideRef.current)==null||wn.focus()}}})]})}let Ux=0;function w7(){const e=/iP(hone|ad|od)|iOS/.test(_F()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,l=t.left?parseFloat(t.left):window.scrollX,u=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var a,m;const g=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,w=((m=window.visualViewport)==null?void 0:m.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(u-Math.floor(w))+"px",left:-(l-Math.floor(g))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(l,u))}}let dM=()=>{};const S7=M.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return bi(()=>{if(r)return Ux++,Ux===1&&(dM=w7()),()=>{Ux--,Ux===0&&dM()}},[r]),y.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function hM(e){return Ds(e.target)&&e.target.tagName==="BUTTON"}function fM(e){return SF(e)}function $P(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:l}}=e,{enabled:u=!0,event:a="click",toggle:m=!0,ignoreMouse:g=!1,keyboardHandlers:w=!0,stickIfOpen:C=!0}=t,P=M.useRef(),I=M.useRef(!1),N=M.useMemo(()=>({onPointerDown(z){P.current=z.pointerType},onMouseDown(z){const $=P.current;z.button===0&&a!=="click"&&(WL($)&&g||(n&&m&&(!(i.current.openEvent&&C)||i.current.openEvent.type==="mousedown")?r(!1,z.nativeEvent,"click"):(z.preventDefault(),r(!0,z.nativeEvent,"click"))))},onClick(z){const $=P.current;if(a==="mousedown"&&P.current){P.current=void 0;return}WL($)&&g||(n&&m&&(!(i.current.openEvent&&C)||i.current.openEvent.type==="click")?r(!1,z.nativeEvent,"click"):r(!0,z.nativeEvent,"click"))},onKeyDown(z){P.current=void 0,!(z.defaultPrevented||!w||hM(z))&&(z.key===" "&&!fM(l)&&(z.preventDefault(),I.current=!0),z.key==="Enter"&&r(!(n&&m),z.nativeEvent,"click"))},onKeyUp(z){z.defaultPrevented||!w||hM(z)||fM(l)||z.key===" "&&I.current&&(I.current=!1,r(!(n&&m),z.nativeEvent,"click"))}}),[i,l,a,g,w,r,n,C,m]);return M.useMemo(()=>u?{reference:N}:{},[u,N])}const E7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},C7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},pM=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function zw(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:l}=e,{enabled:u=!0,escapeKey:a=!0,outsidePress:m=!0,outsidePressEvent:g="pointerdown",referencePress:w=!1,referencePressEvent:C="pointerdown",ancestorScroll:P=!1,bubbles:I,capture:N}=t,z=Mw(),$=Ao(typeof m=="function"?m:()=>!1),H=typeof m=="function"?$:m,V=M.useRef(!1),q=M.useRef(!1),{escapeKey:te,outsidePress:ue}=pM(I),{escapeKey:fe,outsidePress:Z}=pM(N),le=M.useRef(!1),be=Ao(yt=>{var lt;if(!n||!u||!a||yt.key!=="Escape"||le.current)return;const Nt=(lt=l.current.floatingContext)==null?void 0:lt.nodeId,qe=z?Gm(z.nodesRef.current,Nt):[];if(!te&&(yt.stopPropagation(),qe.length>0)){let _t=!0;if(qe.forEach(Ke=>{var we;if((we=Ke.context)!=null&&we.open&&!Ke.context.dataRef.current.__escapeKeyBubbles){_t=!1;return}}),!_t)return}r(!1,W9(yt)?yt.nativeEvent:yt,"escape-key")}),Re=Ao(yt=>{var lt;const Nt=()=>{var qe;be(yt),(qe=jf(yt))==null||qe.removeEventListener("keydown",Nt)};(lt=jf(yt))==null||lt.addEventListener("keydown",Nt)}),Je=Ao(yt=>{var lt;const Nt=V.current;V.current=!1;const qe=q.current;if(q.current=!1,g==="click"&&qe||Nt||typeof H=="function"&&!H(yt))return;const _t=jf(yt),Ke="["+jv("inert")+"]",we=fl(i.floating).querySelectorAll(Ke);let He=as(_t)?_t:null;for(;He&&!Ku(He);){const bt=id(He);if(Ku(bt)||!as(bt))break;He=bt}if(we.length&&as(_t)&&!X9(_t)&&!ma(_t,i.floating)&&Array.from(we).every(bt=>!ma(He,bt)))return;if(Ds(_t)&&gt){const bt=Ku(_t),It=Cl(_t),qt=/auto|scroll/,fn=bt||qt.test(It.overflowX),wn=bt||qt.test(It.overflowY),an=fn&&_t.clientWidth>0&&_t.scrollWidth>_t.clientWidth,Vt=wn&&_t.clientHeight>0&&_t.scrollHeight>_t.clientHeight,Cn=It.direction==="rtl",Tn=Vt&&(Cn?yt.offsetX<=_t.offsetWidth-_t.clientWidth:yt.offsetX>_t.clientWidth),Fn=an&&yt.offsetY>_t.clientHeight;if(Tn||Fn)return}const Be=(lt=l.current.floatingContext)==null?void 0:lt.nodeId,ct=z&&Gm(z.nodesRef.current,Be).some(bt=>{var It;return fE(yt,(It=bt.context)==null?void 0:It.elements.floating)});if(fE(yt,i.floating)||fE(yt,i.domReference)||ct)return;const xt=z?Gm(z.nodesRef.current,Be):[];if(xt.length>0){let bt=!0;if(xt.forEach(It=>{var qt;if((qt=It.context)!=null&&qt.open&&!It.context.dataRef.current.__outsidePressBubbles){bt=!1;return}}),!bt)return}r(!1,yt,"outside-press")}),Fe=Ao(yt=>{var lt;const Nt=()=>{var qe;Je(yt),(qe=jf(yt))==null||qe.removeEventListener(g,Nt)};(lt=jf(yt))==null||lt.addEventListener(g,Nt)});M.useEffect(()=>{if(!n||!u)return;l.current.__escapeKeyBubbles=te,l.current.__outsidePressBubbles=ue;let yt=-1;function lt(we){r(!1,we,"ancestor-scroll")}function Nt(){window.clearTimeout(yt),le.current=!0}function qe(){yt=window.setTimeout(()=>{le.current=!1},Aw()?5:0)}const _t=fl(i.floating);a&&(_t.addEventListener("keydown",fe?Re:be,fe),_t.addEventListener("compositionstart",Nt),_t.addEventListener("compositionend",qe)),H&&_t.addEventListener(g,Z?Fe:Je,Z);let Ke=[];return P&&(as(i.domReference)&&(Ke=Rh(i.domReference)),as(i.floating)&&(Ke=Ke.concat(Rh(i.floating))),!as(i.reference)&&i.reference&&i.reference.contextElement&&(Ke=Ke.concat(Rh(i.reference.contextElement)))),Ke=Ke.filter(we=>{var He;return we!==((He=_t.defaultView)==null?void 0:He.visualViewport)}),Ke.forEach(we=>{we.addEventListener("scroll",lt,{passive:!0})}),()=>{a&&(_t.removeEventListener("keydown",fe?Re:be,fe),_t.removeEventListener("compositionstart",Nt),_t.removeEventListener("compositionend",qe)),H&&_t.removeEventListener(g,Z?Fe:Je,Z),Ke.forEach(we=>{we.removeEventListener("scroll",lt)}),window.clearTimeout(yt)}},[l,i,a,H,g,n,r,P,u,te,ue,be,fe,Re,Je,Z,Fe]),M.useEffect(()=>{V.current=!1},[H,g]);const Xe=M.useMemo(()=>({onKeyDown:be,...w&&{[E7[C]]:yt=>{r(!1,yt.nativeEvent,"reference-press")},...C!=="click"&&{onClick(yt){r(!1,yt.nativeEvent,"reference-press")}}}}),[be,r,w,C]),gt=M.useMemo(()=>({onKeyDown:be,onMouseDown(){q.current=!0},onMouseUp(){q.current=!0},[C7[g]]:()=>{V.current=!0}}),[be,g]);return M.useMemo(()=>u?{reference:Xe,floating:gt}:{},[u,Xe,gt])}function VP(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Lw(),l=M.useRef({}),[u]=M.useState(()=>c7()),a=UP()!=null,[m,g]=M.useState(r.reference),w=Ao((I,N,z)=>{l.current.openEvent=I?N:void 0,u.emit("openchange",{open:I,event:N,reason:z,nested:a}),n==null||n(I,N,z)}),C=M.useMemo(()=>({setPositionReference:g}),[]),P=M.useMemo(()=>({reference:m||r.reference||null,floating:r.floating||null,domReference:r.reference}),[m,r.reference,r.floating]);return M.useMemo(()=>({dataRef:l,open:t,onOpenChange:w,elements:P,events:u,floatingId:i,refs:C}),[t,w,P,u,i,C])}function Cg(e){e===void 0&&(e={});const{nodeId:t}=e,n=VP({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[l,u]=M.useState(null),[a,m]=M.useState(null),w=(i==null?void 0:i.domReference)||l,C=M.useRef(null),P=Mw();bi(()=>{w&&(C.current=w)},[w]);const I=KW({...e,elements:{...i,...a&&{reference:a}}}),N=M.useCallback(q=>{const te=as(q)?{getBoundingClientRect:()=>q.getBoundingClientRect(),contextElement:q}:q;m(te),I.refs.setReference(te)},[I.refs]),z=M.useCallback(q=>{(as(q)||q===null)&&(C.current=q,u(q)),(as(I.refs.reference.current)||I.refs.reference.current===null||q!==null&&!as(q))&&I.refs.setReference(q)},[I.refs]),$=M.useMemo(()=>({...I.refs,setReference:z,setPositionReference:N,domReference:C}),[I.refs,z,N]),H=M.useMemo(()=>({...I.elements,domReference:w}),[I.elements,w]),V=M.useMemo(()=>({...I,...r,refs:$,elements:H,nodeId:t}),[I,$,H,t,r]);return bi(()=>{r.dataRef.current.floatingContext=V;const q=P==null?void 0:P.nodesRef.current.find(te=>te.id===t);q&&(q.context=V)}),M.useMemo(()=>({...I,context:V,refs:$,elements:H}),[I,$,H,V])}const mM="active",gM="selected";function _E(e,t,n){const r=new Map,i=n==="item";let l=e;if(i&&e){const{[mM]:u,[gM]:a,...m}=e;l=m}return{...n==="floating"&&{tabIndex:-1,[LT]:""},...l,...t.map(u=>{const a=u?u[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((u,a)=>(a&&Object.entries(a).forEach(m=>{let[g,w]=m;if(!(i&&[mM,gM].includes(g)))if(g.indexOf("on")===0){if(r.has(g)||r.set(g,[]),typeof w=="function"){var C;(C=r.get(g))==null||C.push(w),u[g]=function(){for(var P,I=arguments.length,N=new Array(I),z=0;z<I;z++)N[z]=arguments[z];return(P=r.get(g))==null?void 0:P.map($=>$(...N)).find($=>$!==void 0)}}}else u[g]=w}),u),{})}}function Fw(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=M.useCallback(a=>_E(a,e,"reference"),t),l=M.useCallback(a=>_E(a,e,"floating"),n),u=M.useCallback(a=>_E(a,e,"item"),r);return M.useMemo(()=>({getReferenceProps:i,getFloatingProps:l,getItemProps:u}),[i,l,u])}function Bw(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function yM(e,t){return Bw(t,e===BP||e===T_,e===Lh||e===Mh)}function xE(e,t,n){return Bw(t,e===T_,n?e===Lh:e===Mh)||e==="Enter"||e===" "||e===""}function T7(e,t,n){return Bw(t,n?e===Lh:e===Mh,e===T_)}function vM(e,t,n){return Bw(t,n?e===Mh:e===Lh,e===BP)}function YF(e,t){const{open:n,onOpenChange:r,elements:i}=e,{listRef:l,activeIndex:u,onNavigate:a=()=>{},enabled:m=!0,selectedIndex:g=null,allowEscape:w=!1,loop:C=!1,nested:P=!1,rtl:I=!1,virtual:N=!1,focusItemOnOpen:z="auto",focusItemOnHover:$=!0,openOnArrowKeyDown:H=!0,disabledIndices:V=void 0,orientation:q="vertical",cols:te=1,scrollItemIntoView:ue=!0,virtualItemRef:fe,itemSizes:Z,dense:le=!1}=t,be=MT(i.floating),Re=xa(be),Je=UP(),Fe=Mw(),Xe=Ao(()=>{a(lt.current===-1?null:lt.current)}),gt=EF(i.domReference),yt=M.useRef(z),lt=M.useRef(g??-1),Nt=M.useRef(null),qe=M.useRef(!0),_t=M.useRef(Xe),Ke=M.useRef(!!i.floating),we=M.useRef(n),He=M.useRef(!1),Be=M.useRef(!1),ct=xa(V),xt=xa(n),bt=xa(ue),It=xa(g),[qt,fn]=M.useState(),[wn,an]=M.useState(),Vt=Ao(()=>{function De(ft){N?(fn(ft.id),Fe==null||Fe.events.emit("virtualfocus",ft),fe&&(fe.current=ft)):Of(ft,{sync:He.current,preventScroll:!0})}const Ye=l.current[lt.current];Ye&&De(Ye),(He.current?ft=>ft():requestAnimationFrame)(()=>{const ft=l.current[lt.current]||Ye;if(!ft)return;Ye||De(ft);const wt=bt.current;wt&&Tn&&(Be.current||!qe.current)&&(ft.scrollIntoView==null||ft.scrollIntoView(typeof wt=="boolean"?{block:"nearest",inline:"nearest"}:wt))})});bi(()=>{m&&(n&&i.floating?yt.current&&g!=null&&(Be.current=!0,lt.current=g,Xe()):Ke.current&&(lt.current=-1,_t.current()))},[m,n,i.floating,g,Xe]),bi(()=>{if(m&&n&&i.floating)if(u==null){if(He.current=!1,It.current!=null)return;if(Ke.current&&(lt.current=-1,Vt()),(!we.current||!Ke.current)&&yt.current&&(Nt.current!=null||yt.current===!0&&Nt.current==null)){let De=0;const Ye=()=>{l.current[0]==null?(De<2&&(De?requestAnimationFrame:queueMicrotask)(Ye),De++):(lt.current=Nt.current==null||xE(Nt.current,q,I)||P?gE(l,ct.current):tM(l,ct.current),Nt.current=null,Xe())};Ye()}}else Ky(l,u)||(lt.current=u,Vt(),Be.current=!1)},[m,n,i.floating,u,It,P,l,q,I,Xe,Vt,ct]),bi(()=>{var De;if(!m||i.floating||!Fe||N||!Ke.current)return;const Ye=Fe.nodesRef.current,mt=(De=Ye.find(Bt=>Bt.id===Je))==null||(De=De.context)==null?void 0:De.elements.floating,ft=$u(fl(i.floating)),wt=Ye.some(Bt=>Bt.context&&ma(Bt.context.elements.floating,ft));mt&&!wt&&qe.current&&mt.focus({preventScroll:!0})},[m,i.floating,Fe,Je,N]),bi(()=>{if(!m||!Fe||!N||Je)return;function De(Ye){an(Ye.id),fe&&(fe.current=Ye)}return Fe.events.on("virtualfocus",De),()=>{Fe.events.off("virtualfocus",De)}},[m,Fe,N,Je,fe]),bi(()=>{_t.current=Xe,we.current=n,Ke.current=!!i.floating}),bi(()=>{n||(Nt.current=null)},[n]);const Cn=u!=null,Tn=M.useMemo(()=>{function De(mt){if(!n)return;const ft=l.current.indexOf(mt);ft!==-1&&lt.current!==ft&&(lt.current=ft,Xe())}return{onFocus(mt){let{currentTarget:ft}=mt;He.current=!0,De(ft)},onClick:mt=>{let{currentTarget:ft}=mt;return ft.focus({preventScroll:!0})},...$&&{onMouseMove(mt){let{currentTarget:ft}=mt;He.current=!0,Be.current=!1,De(ft)},onPointerLeave(mt){let{pointerType:ft}=mt;if(!(!qe.current||ft==="touch")&&(He.current=!0,lt.current=-1,Xe(),!N)){var wt;(wt=Re.current)==null||wt.focus({preventScroll:!0})}}}}},[n,Re,$,l,Xe,N]),Fn=Ao(De=>{if(qe.current=!1,He.current=!0,De.which===229||!xt.current&&De.currentTarget===Re.current)return;if(P&&vM(De.key,q,I)){uo(De),r(!1,De.nativeEvent,"list-navigation"),Ds(i.domReference)&&(N?Fe==null||Fe.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ye=lt.current,mt=gE(l,V),ft=tM(l,V);if(gt||(De.key==="Home"&&(uo(De),lt.current=mt,Xe()),De.key==="End"&&(uo(De),lt.current=ft,Xe())),te>1){const wt=Z||Array.from({length:l.current.length},()=>({width:1,height:1})),Bt=t7(wt,te,le),pn=Bt.findIndex(it=>it!=null&&!hb(l.current,it,V)),nn=Bt.reduce((it,Mn,ar)=>Mn!=null&&!hb(l.current,Mn,V)?ar:it,-1),ln=Bt[e7({current:Bt.map(it=>it!=null?l.current[it]:null)},{event:De,orientation:q,loop:C,rtl:I,cols:te,disabledIndices:r7([...V||l.current.map((it,Mn)=>hb(l.current,Mn)?Mn:void 0),void 0],Bt),minIndex:pn,maxIndex:nn,prevIndex:n7(lt.current>ft?mt:lt.current,wt,Bt,te,De.key===T_?"bl":De.key===(I?Lh:Mh)?"tr":"tl"),stopEvent:!0})];if(ln!=null&&(lt.current=ln,Xe()),q==="both")return}if(yM(De.key,q)){if(uo(De),n&&!N&&$u(De.currentTarget.ownerDocument)===De.currentTarget){lt.current=xE(De.key,q,I)?mt:ft,Xe();return}xE(De.key,q,I)?C?lt.current=Ye>=ft?w&&Ye!==l.current.length?-1:mt:ko(l,{startingIndex:Ye,disabledIndices:V}):lt.current=Math.min(ft,ko(l,{startingIndex:Ye,disabledIndices:V})):C?lt.current=Ye<=mt?w&&Ye!==-1?l.current.length:ft:ko(l,{startingIndex:Ye,decrement:!0,disabledIndices:V}):lt.current=Math.max(mt,ko(l,{startingIndex:Ye,decrement:!0,disabledIndices:V})),Ky(l,lt.current)&&(lt.current=-1),Xe()}}),Qe=M.useMemo(()=>N&&n&&Cn&&{"aria-activedescendant":wn||qt},[N,n,Cn,wn,qt]),zn=M.useMemo(()=>({"aria-orientation":q==="both"?void 0:q,...gt?{}:Qe,onKeyDown:Fn,onPointerMove(){qe.current=!0}}),[Qe,Fn,q,gt]),Le=M.useMemo(()=>{function De(mt){z==="auto"&&bF(mt.nativeEvent)&&(yt.current=!0)}function Ye(mt){yt.current=z,z==="auto"&&wF(mt.nativeEvent)&&(yt.current=!0)}return{...Qe,onKeyDown(mt){qe.current=!1;const ft=mt.key.startsWith("Arrow"),wt=["Home","End"].includes(mt.key),Bt=ft||wt,pn=T7(mt.key,q,I),nn=vM(mt.key,q,I),ln=yM(mt.key,q),it=(P?pn:ln)||mt.key==="Enter"||mt.key.trim()==="";if(N&&n){const Xn=Fe==null?void 0:Fe.nodesRef.current.find(vn=>vn.parentId==null),ut=Fe&&Xn?h7(Fe.nodesRef.current,Xn.id):null;if(Bt&&ut&&fe){const vn=new KeyboardEvent("keydown",{key:mt.key,bubbles:!0});if(pn||nn){var Mn,ar;const Sn=((Mn=ut.context)==null?void 0:Mn.elements.domReference)===mt.currentTarget,Gr=nn&&!Sn?(ar=ut.context)==null?void 0:ar.elements.domReference:pn?l.current.find(gi=>(gi==null?void 0:gi.id)===qt):null;Gr&&(uo(mt),Gr.dispatchEvent(vn),an(void 0))}if((ln||wt)&&ut.context&&ut.context.open&&ut.parentId&&mt.currentTarget!==ut.context.elements.domReference){var fr;uo(mt),(fr=ut.context.elements.domReference)==null||fr.dispatchEvent(vn);return}}return Fn(mt)}if(!(!n&&!H&&ft)){if(it&&(Nt.current=P&&ln?null:mt.key),P){pn&&(uo(mt),n?(lt.current=gE(l,ct.current),Xe()):r(!0,mt.nativeEvent,"list-navigation"));return}ln&&(g!=null&&(lt.current=g),uo(mt),!n&&H?r(!0,mt.nativeEvent,"list-navigation"):Fn(mt),n&&Xe())}},onFocus(){n&&!N&&(lt.current=-1,Xe())},onPointerDown:Ye,onPointerEnter:Ye,onMouseDown:De,onClick:De}},[qt,Qe,Fn,ct,z,l,P,Xe,r,n,H,q,I,g,Fe,N,fe]);return M.useMemo(()=>m?{reference:Le,floating:zn,item:Tn}:{},[m,Le,zn,Tn])}const k7=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Uw(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:l=!0,role:u="dialog"}=t,a=(n=k7.get(u))!=null?n:u,m=Lw(),w=UP()!=null,C=M.useMemo(()=>a==="tooltip"||u==="label"?{["aria-"+(u==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:m},...a==="menu"&&w&&{role:"menuitem"},...u==="select"&&{"aria-autocomplete":"none"},...u==="combobox"&&{"aria-autocomplete":"list"}},[a,i,w,r,m,u]),P=M.useMemo(()=>{const N={id:i,...a&&{role:a}};return a==="tooltip"||u==="label"?N:{...N,...a==="menu"&&{"aria-labelledby":m}}},[a,i,m,u]),I=M.useCallback(N=>{let{active:z,selected:$}=N;const H={role:"option",...z&&{id:i+"-option"}};switch(u){case"select":return{...H,"aria-selected":z&&$};case"combobox":return{...H,...z&&{"aria-selected":!0}}}return{}},[i,u]);return M.useMemo(()=>l?{reference:C,floating:P,item:I}:{},[l,C,P,I])}const _M=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase());function cm(e,t){return typeof e=="function"?e(t):e}function P7(e,t){const[n,r]=M.useState(e);return e&&!n&&r(!0),M.useEffect(()=>{if(!e&&n){const i=setTimeout(()=>r(!1),t);return()=>clearTimeout(i)}},[e,n,t]),n}function QF(e,t){t===void 0&&(t={});const{open:n,elements:{floating:r}}=e,{duration:i=250}=t,u=(typeof i=="number"?i:i.close)||0,[a,m]=M.useState("unmounted"),g=P7(n,u);return!g&&a==="close"&&m("unmounted"),bi(()=>{if(r){if(n){m("initial");const w=requestAnimationFrame(()=>{m("open")});return()=>{cancelAnimationFrame(w)}}m("close")}},[n,r]),{isMounted:g,status:a}}function A7(e,t){t===void 0&&(t={});const{initial:n={opacity:0},open:r,close:i,common:l,duration:u=250}=t,a=e.placement,m=a.split("-")[0],g=M.useMemo(()=>({side:m,placement:a}),[m,a]),w=typeof u=="number",C=(w?u:u.open)||0,P=(w?u:u.close)||0,[I,N]=M.useState(()=>({...cm(l,g),...cm(n,g)})),{isMounted:z,status:$}=QF(e,{duration:u}),H=xa(n),V=xa(r),q=xa(i),te=xa(l);return bi(()=>{const ue=cm(H.current,g),fe=cm(q.current,g),Z=cm(te.current,g),le=cm(V.current,g)||Object.keys(ue).reduce((be,Re)=>(be[Re]="",be),{});if($==="initial"&&N(be=>({transitionProperty:be.transitionProperty,...Z,...ue})),$==="open"&&N({transitionProperty:Object.keys(le).map(_M).join(","),transitionDuration:C+"ms",...Z,...le}),$==="close"){const be=fe||ue;N({transitionProperty:Object.keys(be).map(_M).join(","),transitionDuration:P+"ms",...Z,...be})}},[P,q,H,V,te,C,$,g]),{isMounted:z,styles:I}}function I7(e,t){var n;const{open:r,dataRef:i}=e,{listRef:l,activeIndex:u,onMatch:a,onTypingChange:m,enabled:g=!0,findMatch:w=null,resetMs:C=750,ignoreKeys:P=[],selectedIndex:I=null}=t,N=M.useRef(),z=M.useRef(""),$=M.useRef((n=I??u)!=null?n:-1),H=M.useRef(null),V=Ao(a),q=Ao(m),te=xa(w),ue=xa(P);bi(()=>{r&&(clearTimeout(N.current),H.current=null,z.current="")},[r]),bi(()=>{if(r&&z.current===""){var Re;$.current=(Re=I??u)!=null?Re:-1}},[r,I,u]);const fe=Ao(Re=>{Re?i.current.typing||(i.current.typing=Re,q(Re)):i.current.typing&&(i.current.typing=Re,q(Re))}),Z=Ao(Re=>{function Je(lt,Nt,qe){const _t=te.current?te.current(Nt,qe):Nt.find(Ke=>(Ke==null?void 0:Ke.toLocaleLowerCase().indexOf(qe.toLocaleLowerCase()))===0);return _t?lt.indexOf(_t):-1}const Fe=l.current;if(z.current.length>0&&z.current[0]!==" "&&(Je(Fe,Fe,z.current)===-1?fe(!1):Re.key===" "&&uo(Re)),Fe==null||ue.current.includes(Re.key)||Re.key.length!==1||Re.ctrlKey||Re.metaKey||Re.altKey)return;r&&Re.key!==" "&&(uo(Re),fe(!0)),Fe.every(lt=>{var Nt,qe;return lt?((Nt=lt[0])==null?void 0:Nt.toLocaleLowerCase())!==((qe=lt[1])==null?void 0:qe.toLocaleLowerCase()):!0})&&z.current===Re.key&&(z.current="",$.current=H.current),z.current+=Re.key,clearTimeout(N.current),N.current=setTimeout(()=>{z.current="",$.current=H.current,fe(!1)},C);const gt=$.current,yt=Je(Fe,[...Fe.slice((gt||0)+1),...Fe.slice(0,(gt||0)+1)],z.current);yt!==-1?(V(yt),H.current=yt):Re.key!==" "&&(z.current="",fe(!1))}),le=M.useMemo(()=>({onKeyDown:Z}),[Z]),be=M.useMemo(()=>({onKeyDown:Z,onKeyUp(Re){Re.key===" "&&fe(!1)}}),[Z,fe]);return M.useMemo(()=>g?{reference:le,floating:be}:{},[g,le,be])}const JF=M.createContext(null),$w=()=>{const e=M.useContext(JF);if(e==null)throw new Error("Combox components must be wrapped in <Combobox />");return e},R7=M.forwardRef(function(t,n){var{children:r,value:i,onInputChange:l}=t,u=Mt(t,["children","value","onInputChange"]);const[a,m]=M.useState(!1),[g,w]=M.useState(null),[C,P]=M.useState(null),[I,N]=M.useState(null),z=M.useRef([]),$=VP({open:a,onOpenChange:m,elements:{reference:g,floating:C}}),H=Uw($,{role:"listbox"}),V=zw($,{escapeKey:!1}),q=YF($,{listRef:z,activeIndex:I,onNavigate:N,virtual:!0,loop:!0}),{getReferenceProps:te,getFloatingProps:ue,getItemProps:fe}=Fw([H,V,q]);return M.createElement(JF.Provider,{value:{value:i,onInputChange:l,open:a,setOpen:m,activeIndex:I,setActiveIndex:N,listRef:z,setInputRef:w,setPopoverRef:P,floatingRootContext:$,getReferenceProps:te,getFloatingProps:ue,getItemProps:fe}},M.createElement("div",Object.assign({ref:n},i===""&&{"data-empty":""},u),r))});function L7(e){const{activeIndex:t,setActiveIndex:n,listRef:r,setInputRef:i,value:l,onInputChange:u,open:a,setOpen:m,getReferenceProps:g}=$w(),{id:w,required:C}=mF({});function P(z){const{value:$}=z.target;u($),m(!0),n(0)}function I(){n(0)}function N(z){var $,H;z.key==="Enter"&&t!=null?(!(($=r.current[t])===null||$===void 0)&&$.getAttribute("data-value")&&u(((H=r.current[t])===null||H===void 0?void 0:H.getAttribute("data-value"))||""),n(null),m(!1)):z.key==="Escape"&&(l!==""?(u(""),m(!0)):m(!1))}return M.createElement("input",Object.assign({ref:i},g(Object.assign(Object.assign({id:w,required:C},e),{autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:l,"aria-autocomplete":"list",onChange:P,onFocus:I,onKeyDown:N,onClick(){m(!a)}}))))}function M7(e){var{onClick:t,children:n}=e,r=Mt(e,["onClick","children"]);const{onInputChange:i,setOpen:l,setActiveIndex:u,floatingRootContext:a}=$w(),{refs:m}=Cg({rootContext:a});return M.createElement("button",Object.assign({},r,{type:"button",tabIndex:-1,onClick:g=>{i(""),l(!0),u(0),t&&t(g)},onPointerDown:g=>{var w;g.preventDefault(),(w=m.domReference.current)===null||w===void 0||w.focus()},onTouchStart:g=>{var w;g.preventDefault(),(w=m.domReference.current)===null||w===void 0||w.focus()}}),n)}function O7(e){var{children:t,offset:n,padding:r,className:i}=e,l=Mt(e,["children","offset","padding","className"]);const{open:u,setPopoverRef:a,getFloatingProps:m,floatingRootContext:g,listRef:w}=$w(),{floatingStyles:C,context:P}=Cg({rootContext:g,whileElementsMounted:zP,placement:"bottom-start",open:u,middleware:[FP(n),YW({padding:120}),BF({apply({rects:I,availableHeight:N,elements:z}){Object.assign(z.floating.style,{minWidth:`${I.reference.width}px`,maxHeight:`${N}px`})},padding:r})]});return M.createElement(Nw,null,u&&M.createElement(jw,{context:P,initialFocus:-1,visuallyHiddenDismiss:!0},M.createElement("div",Object.assign({ref:a},m(Object.assign(Object.assign({},l),{className:i,style:C}))),M.createElement(VF,{elementsRef:w},t))))}function D7(e){var{children:t,value:n,onClick:r}=e,i=Mt(e,["children","value","onClick"]);const{floatingRootContext:l,activeIndex:u,getItemProps:a,onInputChange:m,setOpen:g}=$w(),{refs:w}=Cg({rootContext:l}),C=M.useId(),{ref:P,index:I}=HF();return M.createElement("div",Object.assign({},a({key:n,ref:P,onMouseDown(N){N.preventDefault()},onClick(N){var z;(z=w.domReference.current)===null||z===void 0||z.focus(),m(n),g(!1),r&&r(N)}}),{role:"option",id:C,"data-active-item":u===I,"data-value":n},i),t)}function N7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(R7,Object.assign({className:Ut("gst-combobox",t)},n))}function j7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(L7,Object.assign({className:Ut("gst-combobox__input",t)},n))}function z7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(sn,Object.assign({className:Ut("gst-combobox__input-icon",t)},n))}function F7(e){var{className:t,children:n}=e,r=Mt(e,["className","children"]);return M.createElement(M7,Object.assign({className:Ut("gst-combobox__clear-button",t)},r),M.createElement(sn,{name:"xmark-large"}),M.createElement("span",{className:"gst-u-visually-hidden"},n))}function B7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(O7,Object.assign({className:Ut("gst-combobox__popover",t),offset:4,padding:16},n))}function U7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(D7,Object.assign({className:Ut("gst-combobox__item",t)},n))}function $7(e){var{className:t}=e,n=Mt(e,["className"]);return M.createElement(sn,Object.assign({className:Ut("gst-combobox__item-icon",t)},n))}const V7=M.forwardRef(function(t,n){var{decreaseButtonLabel:r,increaseButtonLabel:i,id:l,labelId:u,min:a,max:m,name:g,value:w,onChange:C,className:P}=t,I=Mt(t,["decreaseButtonLabel","increaseButtonLabel","id","labelId","min","max","name","value","onChange","className"]);return M.createElement("div",Object.assign({className:Ut("gst-counter",P),ref:n},I),M.createElement("button",{type:"button",className:"gst-counter__button","aria-describedby":u,"data-testid":`${l}-decrease-button`,onClick:()=>{w!==a&&C(w-1)},disabled:w===a},M.createElement(sn,{name:"minus",label:r,className:"gst-counter__icon"})),M.createElement("div",{"aria-live":"assertive",className:"gst-u-visually-hidden"},w),M.createElement("input",{id:`${l}`,type:"text",name:g,value:w,readOnly:!0,className:"gst-counter__input"}),M.createElement("button",{type:"button",className:"gst-counter__button","aria-describedby":u,"data-testid":`${l}-increase-button`,onClick:()=>{w!==m&&C(w+1)},disabled:w===m},M.createElement(sn,{name:"plus",label:i,className:"gst-counter__icon"})))}),H7=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-dialog__body",i);return M.createElement("div",Object.assign({},l,{className:u,ref:n}),r)});function Z7({initialOpen:e=!1,open:t,onOpenChange:n,role:r="dialog",transitionStylesProps:i}={}){const[l,u]=M.useState(e),[a,m]=M.useState(),[g,w]=M.useState(),C=t??l,P=n??u,I=Cg({open:C,onOpenChange:P}),{context:N}=I,z=$P(N,{enabled:t==null}),$=zw(N,{outsidePressEvent:"mousedown",enabled:r==="dialog"}),H=Uw(N,{role:r}),V=Fw([z,$,H]),{isMounted:q,styles:te}=A7(N,i),{status:ue}=QF(N);return M.useMemo(()=>Object.assign(Object.assign(Object.assign({open:C,setOpen:P,isMounted:q,status:ue,styles:te},V),I),{labelId:a,descriptionId:g,setLabelId:m,setDescriptionId:w}),[C,P,q,ue,te,V,I,a,g])}const eB=M.createContext(null),Vw=()=>{const e=M.useContext(eB);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function tB(e){var{children:t}=e,n=Mt(e,["children"]);const r=Z7(n);return M.createElement(eB.Provider,{value:r},t)}const nB=M.forwardRef(function(t,n){var{children:r,asChild:i=!1,onClick:l}=t,u=Mt(t,["children","asChild","onClick"]);const{setOpen:a}=Vw(),m=g=>{l&&l(g),a(!1)};return i&&M.isValidElement(r)?M.cloneElement(r,Object.assign({onClick:m},u)):M.createElement("button",Object.assign({type:"button",ref:n,onClick:m},u),r)}),q7=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-dialog__close",i);return M.createElement(nB,{asChild:!0},M.createElement(wp,Object.assign({ref:n,variation:"close",className:u},l),r))}),rB=M.forwardRef(function(t,n){var{overlayClassName:r,initialFocus:i}=t,l=Mt(t,["overlayClassName","initialFocus"]);const u=Vw(),{context:a}=u,m=Mt(u,["context"]),g=Nv([m.refs.setFloating,n]);return m.isMounted?M.createElement(Nw,null,M.createElement(S7,{className:r,"data-state":m.status,lockScroll:!0},M.createElement(jw,{context:a,initialFocus:i},M.createElement("div",Object.assign({ref:g,"aria-labelledby":m.labelId,"aria-describedby":m.descriptionId},m.getFloatingProps(Object.assign({},l)),{style:m.styles}),l.children)))):null}),G7=M.forwardRef(function(t,n){var{heading:r,closeButton:i,children:l,className:u}=t,a=Mt(t,["heading","closeButton","children","className"]);const m=Ut("gst-dialog",u),g=Vw(),{role:w}=g.getFloatingProps(Object.assign({},a));return M.createElement(rB,Object.assign({ref:n,className:m,overlayClassName:"gst-dialog__overlay"},a),r,w!=="alertdialog"&&i,l)}),W7=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-dialog__footer",i);return M.createElement("div",Object.assign({},l,{className:u,ref:n}),r)}),iB=M.forwardRef(function(t,n){var{children:r}=t,i=Mt(t,["children"]);const{setLabelId:l}=Vw(),u=Lw();return M.useLayoutEffect(()=>(l(u),()=>l(void 0)),[u,l]),M.createElement("h1",Object.assign({},i,{ref:n,id:u}),r)}),X7=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-dialog__heading",i);return M.createElement(iB,Object.assign({},l,{className:u,ref:n}),r)});function K7(e){var{children:t}=e,n=Mt(e,["children"]);return M.createElement(tB,Object.assign({},n),M.createElement(Ew,{inverted:!1},t))}const Y7=({initialOpen:e=!1,open:t,onOpenChange:n}={})=>{const r=M.useId(),[i,l]=M.useState(e),u=t??i,a=n??l;return M.useMemo(()=>{const m=`disclosure-trigger-${r}`,g=`disclosure-content-${r}`,C={onClick:()=>a(!u),id:m,"aria-controls":g,"aria-expanded":u},P=Object.assign({role:"region",id:g,"aria-labelledby":m},!u&&{hidden:!0});return{open:u,setOpen:a,triggerProps:C,contentProps:P}},[u,a,r])},sB=M.createContext(null),oB=()=>M.useContext(sB);function Q7(e){var{children:t}=e,n=Mt(e,["children"]);const r=Y7(n);return M.createElement(sB.Provider,{value:r},t)}const J7=M.forwardRef(function(t,n){const r=oB();return M.createElement("div",Object.assign({ref:n},r==null?void 0:r.contentProps,t),t.children)}),eX=M.forwardRef(function(t,n){var{children:r,asChild:i}=t,l=Mt(t,["children","asChild"]);const u=oB();return i&&M.isValidElement(r)?M.cloneElement(r,Object.assign(Object.assign({},l),u==null?void 0:u.triggerProps)):M.createElement("button",Object.assign({ref:n},l,u==null?void 0:u.triggerProps),r)}),nf=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-drawer__body",i);return M.createElement("div",Object.assign({},l,{className:u,ref:n}),r)}),dd=M.forwardRef(function(t,n){var{className:r,large:i,children:l}=t,u=Mt(t,["className","large","children"]);const a=Ut("gst-drawer",r,{"gst-drawer--large":i});return M.createElement(rB,Object.assign({ref:n,className:a,overlayClassName:"gst-drawer__overlay"},u),l)}),su=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-drawer__footer",i);return M.createElement("div",Object.assign({},l,{className:u,ref:n}),r)}),tX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=Ut("gst-drawer__close",i);return M.createElement(nB,{asChild:!0,ref:n},M.createElement(wp,Object.assign({type:"button",variation:"close",className:u},l),r))}),nX=M.forwardRef(function(t,n){var{children:r,closeLabel:i,variation:l,className:u}=t,a=Mt(t,["children","closeLabel","variation","className"]);const m=bp();return M.createElement(Ew,{inverted:l==="brand"&&m.colors.brand.inverted},M.createElement("div",Object.assign({className:Ut("gst-drawer__header",{"gst-drawer__header--variation-brand":l==="brand","gst-drawer__header--inverted":l==="brand"&&m.colors.brand.inverted},u),ref:n},a),M.createElement(iB,{className:Ut("gst-drawer__heading")},r),M.createElement(tX,null,i)))});function rX(e){var{children:t,rtl:n}=e,r=Mt(e,["children","rtl"]);return M.createElement(tB,Object.assign({},r,{transitionStylesProps:{duration:500,initial:{transform:n?"translate3d(-100%, 0, 0)":"translate3d(100%, 0, 0)"},open:{transform:"translate3d(0, 0, 0)"}}}),M.createElement(Ew,{inverted:!1},t))}const iX=dn.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=bp();return dn.createElement("footer",Object.assign({ref:n,className:Ut("gst-footer",{"gst-footer--inverted":u.colors.page.inverted},i)},l),r)}),sX=dn.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return dn.createElement("div",Object.assign({ref:n,className:Ut("gst-footer__top",i)},l),r)}),oX=dn.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return dn.createElement(dn.Fragment,null,dn.createElement("hr",{className:"gst-footer__separator"}),dn.createElement("div",Object.assign({ref:n,className:Ut("gst-footer__bottom",i)},l),r))}),aX=dn.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return dn.createElement("div",Object.assign({ref:n,className:Ut("gst-footer__top-item",i)},l),r)}),lX=dn.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return dn.createElement("div",Object.assign({ref:n,className:Ut("gst-footer__top-item-title",r)},l),i)}),cX=dn.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return dn.createElement("div",Object.assign({ref:n,className:r},l),i)}),uX=dn.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return dn.createElement("div",Object.assign({ref:n,className:r},l),i)}),dX=dn.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return dn.createElement("ul",Object.assign({ref:n,className:Ut("gst-footer__bottom-links",r)},l),i)}),xM=dn.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return dn.createElement("li",Object.assign({ref:n,className:Ut("gst-footer__bottom-links-item",r)},l),i)}),hX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=bp();return M.createElement(Ew,{inverted:u.colors.header.inverted},M.createElement("header",Object.assign({className:Ut("gst-header",{"gst-header--inverted":u.colors.header.inverted},i),ref:n},l),r))}),fX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return M.createElement("div",Object.assign({className:Ut("gst-header__buttons",i),ref:n},l),r)}),pX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return M.createElement("div",Object.assign({className:Ut("gst-header__center",i),ref:n},l),r)});function mX(e){var t,n,r,i,{hotelHomepage:l,hotelName:u,hotelRating:a,className:m}=e,g=Mt(e,["hotelHomepage","hotelName","hotelRating","className"]);const w=bp();return l?M.createElement("a",Object.assign({href:l,title:u,className:Ut("gst-header__logo",m)},g),!((t=w.pictures)===null||t===void 0)&&t.logo?M.createElement(M.Fragment,null,M.createElement("img",{className:"gst-header__logo-image",src:(n=w.pictures)===null||n===void 0?void 0:n.logo,height:"84",alt:""}),M.createElement("div",{className:"gst-u-visually-hidden"},u)):M.createElement(M.Fragment,null,M.createElement("div",{className:"gst-header__logo-label"},u),a?M.createElement("div",{className:"gst-header__logo-rating"},Array(a).fill(null).map((C,P)=>M.createElement(sn,{name:"star",key:`header-rating-star-${P}`,size:"small"}))):null)):M.createElement("div",{className:Ut("gst-header__logo",m)},!((r=w.pictures)===null||r===void 0)&&r.logo?M.createElement("img",{className:"gst-header__logo-image",src:(i=w.pictures)===null||i===void 0?void 0:i.logo,height:"84",alt:`${u} logo`}):M.createElement(M.Fragment,null,M.createElement("div",{className:"gst-header__logo-label"},u),a?M.createElement("div",{className:"gst-header__logo-rating"},Array(a).fill(null).map((C,P)=>M.createElement(sn,{name:"star",key:`header-rating-star-${P}`,size:"small"}))):null))}const sd=M.forwardRef(function(t,n){const r=M.useId(),i=B9(Object.assign({id:r},t)),{children:l,variation:u="default",className:a}=i,m=Mt(i,["children","variation","className"]),g=Ut(`gst-hint gst-hint--variation-${u}`,a);return M.createElement("div",Object.assign({ref:n,id:r,className:g},m),u==="error"?M.createElement(sn,{name:"triangle-exclamation"}):null,l)}),hd=M.forwardRef(function(t,n){const r=O9(t),{disabled:i,required:l,type:u,children:a,className:m}=r,g=Mt(r,["disabled","required","type","children","className"]);return M.createElement("label",Object.assign({className:Ut("gst-label",{"gst-label--required":l,"gst-label--disabled":i,"gst-checkbox-field__label":u==="checkbox","gst-label--type-checkbox":u==="checkbox","gst-radio-field__label":u==="radio","gst-label--type-radio":u==="radio","gst-switch-field__label":u==="switch","gst-label--type-switch":u==="switch"},m)},g,{ref:n}),a)}),aB=M.forwardRef(function(t,n){var{href:r,isExternal:i=!1,children:l,className:u}=t,a=Mt(t,["href","isExternal","children","className"]);const m=Ut("gst-link",u);return M.createElement("a",Object.assign({href:r,target:i?"_blank":void 0,rel:i?"noreferrer noopener":void 0,ref:n,className:m},a),l)});M.forwardRef(function(t,n){var{name:r,size:i=20,className:l}=t,u=Mt(t,["name","size","className"]);const a=Ut("gst-logo__image",`gst-logo__image--name-${r}`,`gst-logo__image--size-${i}`);return M.createElement("span",Object.assign({className:Ut("gst-logo",l),ref:n},u),M.createElement("span",{"aria-hidden":"true",className:a}),M.createElement("span",{className:"gst-u-visually-hidden"},r))});const gX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return M.createElement("div",Object.assign({ref:n,className:Ut("gst-page-layout__content",i)},l),r)}),yX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return M.createElement("div",Object.assign({ref:n,className:Ut("gst-page-layout",i)},l),r)}),vX=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);return M.createElement("main",Object.assign({ref:n,className:Ut("gst-page-layout__main",i)},l),M.createElement("div",{className:"gst-page-layout__main-body"},r))});function _X(e,t){t.current=e.changedTouches[0].clientX}function xX(e,t,n){(t.current||t.current===0)&&n(Math.round(e.changedTouches[0].clientX-t.current))}function bX(e,t,n,r,i,l,u,a){if(l.current||l.current===0){const m=e.changedTouches[0].clientX-l.current,g=n==="ltr"?1:-1,w=Math.sign(m)*g;Math.abs(m)>i/2?w<0&&t<r-1?u(C=>C+=1):w>0&&t>0&&u(C=>C-=1):u(C=>C)}a(0),l.current=null}const wX=M.forwardRef(function({currentIndex:t,documentDirectionModifier:n,picturesLength:r,picturesSliderNavigationDotsLabel:i,picturesSliderNavigationDotButtonLabel:l,goToPicture:u},a){const g=Math.floor(2.5),w=M.useRef(null),C=M.useRef("auto"),P=M.useRef(null),I=M.useRef(null),N=z=>{const{current:$}=P,{current:H}=I;if($&&H&&r>=5&&z>=g&&z<r-g)return($+H)*(z-g)*n};return M.useEffect(()=>{const{current:z}=w;if(z){const $=z.children[0],H=window.getComputedStyle(z);P.current=$.offsetWidth,I.current=parseFloat(H.getPropertyValue("gap")),r>=5&&(C.current=`${P.current*5+I.current*4}px`)}},[r]),M.createElement("div",{className:"gst-pictures-slider__navigation",style:{width:C.current},ref:a},M.createElement("ol",{className:"gst-pictures-slider__navigation-dots","aria-label":i,"aria-live":"polite",ref:w,style:{transform:`translateX(${N(t)}px)`}},r&&Array(r).fill("").map((z,$)=>M.createElement("li",{key:`gst-pictures-slider__navigation-dots-dot-${$}`},M.createElement("button",{type:"button","aria-current":$===t?"true":"false",className:"gst-pictures-slider__navigation-dots-dot",onClick:()=>u($)},M.createElement("span",{className:"gst-u-visually-hidden"},l.replace("{image-number}",`${$+1}`)))))))}),SX=M.forwardRef(function(t,n){var{pictures:r,picture2XWidth:i,picture2XHeight:l,picturesSliderLabel:u,picturesSliderButtonNextLabel:a,picturesSliderButtonPrevLabel:m,picturesSliderControlsLabel:g,picturesSliderNavigationDotsLabel:w,picturesSliderNavigationDotButtonLabel:C,documentDirection:P="ltr",onClickPicturesSlider:I,picturesSliderClickLabel:N,picturesSliderRatio:z="landscape-default",className:$}=t,H=Mt(t,["pictures","picture2XWidth","picture2XHeight","picturesSliderLabel","picturesSliderButtonNextLabel","picturesSliderButtonPrevLabel","picturesSliderControlsLabel","picturesSliderNavigationDotsLabel","picturesSliderNavigationDotButtonLabel","documentDirection","onClickPicturesSlider","picturesSliderClickLabel","picturesSliderRatio","className"]);const{length:V}=r,q=P==="ltr"?-1:1,te=Ut("gst-pictures-slider",$),[ue,fe]=M.useState(0),[Z,le]=M.useState(0),[be,Re]=M.useState(0),Je=M.useRef(null),Fe=M.useRef(null),Xe=M.useMemo(()=>{var Be;const ct=((Be=Je.current)===null||Be===void 0?void 0:Be.getBoundingClientRect().width)||0;return be!==ct&&Re(ct),Z+ue*ct*q},[q,Z,ue,be]),gt=Be=>Be==="prev"?ue!==0:ue<V-1,yt=()=>{ue<V-1&&fe(Be=>Be+1)},lt=()=>{ue>0&&fe(Be=>Be-1)},Nt=Be=>{fe(Be)},qe=Be=>{_X(Be,Fe)},_t=Be=>{bX(Be,ue,P,V,be,Fe,fe,le)},Ke=Be=>{xX(Be,Fe,le)},we=Be=>{(Be.key==="Enter"||Be.key===" ")&&I&&I()},He=M.useCallback(()=>{const{current:Be}=Je;Be&&Re(Be.getBoundingClientRect().width)},[]);return M.useEffect(()=>(window.addEventListener("resize",He),()=>{window.removeEventListener("resize",He)}),[He]),M.useLayoutEffect(()=>{const{current:Be}=Je;Be&&Re(Be.getBoundingClientRect().width)},[Je,Re]),M.createElement("div",Object.assign({className:te,ref:n},H),M.createElement("div",{className:Ut("gst-pictures-slider__container",I&&"gst-pictures-slider__container--clickable"),onClick:I,onKeyDown:I?we:void 0,onTouchStart:qe,onTouchEnd:_t,onTouchMove:Ke,role:I?"button":"region",tabIndex:I?0:void 0,"aria-label":I&&N?N:u},M.createElement("ol",{className:"gst-pictures-slider__list",ref:Je,style:{transform:`translateX(${Xe}px)`}},V&&r.map((Be,ct)=>M.createElement("li",{key:`pictures-slider-image-wrapper-${ct}`,className:Ut("gst-pictures-slider__list-item",`gst-pictures-slider__list-item--${z}`)},M.createElement("img",{src:Be.pictureUrl,srcSet:`${Be.picture2XUrl} 2x`,alt:"",width:i,height:l,loading:"lazy",decoding:"async"}))))),M.createElement("ol",{className:"gst-pictures-slider__controls","aria-label":g},gt("prev")&&M.createElement("li",null,M.createElement("button",{type:"button",className:"gst-pictures-slider__button-previous",onClick:lt},M.createElement(sn,{name:"chevron-left",size:"small",label:m,className:"gst-pictures-slider__button-previous-icon"}))),gt("next")&&M.createElement("li",null,M.createElement("button",{type:"button",className:"gst-pictures-slider__button-next",onClick:yt},M.createElement(sn,{name:"chevron-right",size:"small",label:a,className:"gst-pictures-slider__button-next-icon"})))),V>1?M.createElement(wX,{picturesLength:V,currentIndex:ue,goToPicture:Nt,documentDirectionModifier:q,picturesSliderNavigationDotsLabel:w,picturesSliderNavigationDotButtonLabel:C}):null)});function EX({initialOpen:e=!1,open:t,onOpenChange:n,placement:r="bottom"}={}){const[i,l]=M.useState(e),u=t??i,a=n??l,m=Cg({open:u,onOpenChange:a,placement:r,whileElementsMounted:zP,middleware:[FP(5),FF({padding:5})]}),{context:g}=m,w=$P(g,{enabled:t==null}),C=zw(g),P=Uw(g),I=Fw([w,C,P]);return M.useMemo(()=>Object.assign(Object.assign({open:u,setOpen:a},I),m),[u,a,I,m])}const lB=M.createContext(null),cB=()=>{const e=M.useContext(lB);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function CX(e){var{children:t}=e,n=Mt(e,["children"]);const r=EX(n);return M.createElement(lB.Provider,{value:r},t)}const TX=M.forwardRef(function(t,n){var{children:r,asChild:i=!1}=t,l=Mt(t,["children","asChild"]);const u=cB(),a=r.ref,m=Nv([u.refs.setReference,n,a]);return i&&M.isValidElement(r)?M.cloneElement(r,u.getReferenceProps(Object.assign(Object.assign(Object.assign({ref:m},l),r.props),{style:Object.assign(Object.assign({},l.style),r.props.style),className:Ut(l.className,r.props.className),"data-state":u.open?"open":"closed"}))):M.createElement("button",Object.assign({ref:m,type:"button","data-state":u.open?"open":"closed"},u.getReferenceProps(l)),r)}),kX=M.forwardRef(function(t,n){var{style:r}=t,i=Mt(t,["style"]);const l=cB(),{context:u}=l,a=Mt(l,["context"]),m=Nv([a.refs.setFloating,n]);return u.open?M.createElement(Nw,null,M.createElement(jw,{context:u,modal:!1},M.createElement("div",Object.assign({ref:m,style:Object.assign(Object.assign({},a.floatingStyles),r)},a.getFloatingProps(i)),i.children))):null}),uB=M.createContext({}),Hw=()=>{const e=M.useContext(uB);if(e==null)throw new Error("Combox components must be wrapped in <Select />");return e};function PX(e){var t,{children:n,name:r,defaultValue:i,value:l,onChange:u,autoSubmit:a,placeholder:m}=e,g=Mt(e,["children","name","defaultValue","value","onChange","autoSubmit","placeholder"]);const[w,C]=M.useState(!1),[P,I]=M.useState(null),[N,z]=M.useState(null),[$,H]=M.useState(i??null),[V,q]=M.useState(null),te=M.useRef([]),ue=M.useRef([]),[fe,Z]=M.useState(null),[le,be]=M.useState(null),Re=M.useRef(null),Je=VP({open:w,onOpenChange:C,elements:{reference:fe,floating:le}}),Fe=M.useCallback(ct=>{var xt,bt;if(z(ct),C(!1),ct!==null){q(ue.current[ct]);const It=((xt=te.current[ct])===null||xt===void 0?void 0:xt.getAttribute("data-value"))||"";H(It),u&&u(It),(bt=Re==null?void 0:Re.current)===null||bt===void 0||bt.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}},[u]);function Xe(ct){w?I(ct):Fe(ct)}const gt=YF(Je,{listRef:te,activeIndex:P,selectedIndex:N,onNavigate:I}),yt=I7(Je,{listRef:ue,activeIndex:P,selectedIndex:N,onMatch:Xe}),lt=$P(Je),Nt=zw(Je),qe=Uw(Je,{role:"listbox"}),{getReferenceProps:_t,getFloatingProps:Ke,getItemProps:we}=Fw([gt,yt,lt,Nt,qe]),He=M.useCallback((ct,xt,bt)=>{(xt===i||xt===l)&&(q(bt),z(ct))},[i,l]),Be=M.useMemo(()=>({open:w,setOpen:C,elementsRef:te,labelsRef:ue,activeIndex:P,selectedIndex:N,selectedLabel:V,floatingRootContext:Je,setTriggerRef:Z,setPopoverRef:be,getReferenceProps:_t,getFloatingProps:Ke,getItemProps:we,handleSelect:Fe,registerOption:He,autoSubmit:a,placeholder:m}),[w,C,te,ue,P,N,V,Je,Z,be,_t,Ke,we,Fe,He,a,m]);return M.createElement(uB.Provider,{value:Be},M.createElement("div",Object.assign({},g),n,r?M.createElement("select",{ref:Re,style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},tabIndex:-1,"aria-hidden":!0,name:r,value:$||void 0,onFocus:()=>fe==null?void 0:fe.focus()},(t=te.current)===null||t===void 0?void 0:t.map(ct=>{const xt=ct==null?void 0:ct.getAttribute("data-value");return M.createElement("option",{key:xt,value:xt||void 0},xt)})):null))}function AX(e){var{value:t,label:n,onClick:r}=e,i=Mt(e,["value","label","onClick"]);const{activeIndex:l,selectedIndex:u,getItemProps:a,handleSelect:m,registerOption:g,autoSubmit:w}=Hw(),{ref:C,index:P}=HF({label:n??t});M.useLayoutEffect(()=>{P!==-1&&g(P,t,n??t)},[P,t,n,g]);const I=l===P,N=u===P;return M.createElement("button",Object.assign({ref:C,role:"option",type:w?"submit":"button","aria-selected":N,tabIndex:I?0:-1,"data-active":I,"data-value":t},a({onClick:z=>{m(P),r==null||r(z)}}),i),n??t)}function IX(e){var{children:t,offset:n,padding:r,placement:i,strategy:l,minWidth:u,className:a}=e,m=Mt(e,["children","offset","padding","placement","strategy","minWidth","className"]);const{open:g,setPopoverRef:w,getFloatingProps:C,floatingRootContext:P,elementsRef:I,labelsRef:N}=Hw(),{floatingStyles:z,context:$}=Cg({rootContext:P,whileElementsMounted:zP,placement:i,strategy:l,open:g,middleware:[FP(n),FF({padding:r,mainAxis:!0,crossAxis:!0}),BF({apply({elements:H}){Object.assign(H.floating.style,{minWidth:u})},padding:r})]});return M.createElement(Nw,null,M.createElement(jw,{context:$,modal:!1},M.createElement("div",Object.assign({ref:w},C(Object.assign(Object.assign({},m),{className:a,style:z})),{hidden:!g}),M.createElement(VF,{elementsRef:I,labelsRef:N},t))))}function RX(e){var{children:t}=e,n=Mt(e,["children"]);const{setTriggerRef:r,getReferenceProps:i}=Hw();return M.createElement("button",Object.assign({ref:r,type:"button"},i(),n),t)}function LX(){const{selectedLabel:e,placeholder:t}=Hw();return e??t}const MX=M.forwardRef(function(t,n){var{invalid:r,className:i}=t,l=Mt(t,["invalid","className"]);return M.createElement("input",Object.assign({ref:n,className:i,type:"radio"},r&&{"aria-invalid":!0},l))}),OX=M.forwardRef(function(t,n){const r=L9(t);return M.createElement(MX,Object.assign({ref:n},r))}),dB=M.forwardRef(function(t,n){const r=N9(t),{invalid:i,className:l}=r,u=Mt(r,["invalid","className"]),a=Ut("gst-radio",l);return M.createElement(OX,Object.assign({ref:n,className:a},i&&{"aria-invalid":!0},u))}),DX=M.forwardRef(function(t,n){var{name:r,className:i,defaultValue:l,value:u,onChange:a,required:m,disabled:g,children:w}=t,C=Mt(t,["name","className","defaultValue","value","onChange","required","disabled","children"]);const[P,I]=M.useState([]);return M.createElement(Cw.Provider,{value:{name:r,hintIds:P,addHintId:N=>{I(P.concat([N]))},removeHintId:N=>{const z=P.findIndex($=>$===N);z&&I([...P.slice(0,z),...P.slice(z+1)])},defaultValue:l,value:u,onChange:a,required:m,disabled:g}},M.createElement("fieldset",Object.assign({ref:n,className:i},P.length>0&&{"aria-describedby":P.join("")},C),w))}),hB=M.forwardRef(function(t,n){var{defaultValue:r,name:i,value:l,onChange:u,children:a,className:m}=t,g=Mt(t,["defaultValue","name","value","onChange","children","className"]);const w=Ut("gst-radio-group",m);return M.createElement(DX,Object.assign({ref:n,name:i,defaultValue:r,value:l,onChange:u,className:w},g),a)}),fB=M.forwardRef(function(t,n){var{className:r,orientation:i="vertical",children:l}=t,u=Mt(t,["className","orientation","children"]);return M.createElement("div",Object.assign({ref:n,className:Ut("gst-radio-group__fields",{[`gst-radio-group__fields--orientation-${i}`]:i},r)},u),l)}),NX=M.forwardRef(function(t,n){const r=M.useId(),i=R9(Object.assign({id:r},t)),{children:l}=i,u=Mt(i,["children"]);return M.createElement("div",Object.assign({ref:n},u),l)});M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement(NX,Object.assign({ref:n,className:Ut("gst-radio-group__hint",r)},l),i)});const jX=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement("legend",Object.assign({ref:n,className:r},l),i)}),pB=M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement(jX,Object.assign({ref:n,className:Ut("gst-radio-group__legend",r)},l),i)});var $x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bE,bM;function HP(){if(bM)return bE;bM=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return bE=e,bE}var wE,wM;function zX(){if(wM)return wE;wM=1;var e=typeof $x=="object"&&$x&&$x.Object===Object&&$x;return wE=e,wE}var SE,SM;function gB(){if(SM)return SE;SM=1;var e=zX(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return SE=n,SE}var EE,EM;function FX(){if(EM)return EE;EM=1;var e=gB(),t=function(){return e.Date.now()};return EE=t,EE}var CE,CM;function BX(){if(CM)return CE;CM=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return CE=t,CE}var TE,TM;function UX(){if(TM)return TE;TM=1;var e=BX(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return TE=n,TE}var kE,kM;function yB(){if(kM)return kE;kM=1;var e=gB(),t=e.Symbol;return kE=t,kE}var PE,PM;function $X(){if(PM)return PE;PM=1;var e=yB(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function l(u){var a=n.call(u,i),m=u[i];try{u[i]=void 0;var g=!0}catch{}var w=r.call(u);return g&&(a?u[i]=m:delete u[i]),w}return PE=l,PE}var AE,AM;function VX(){if(AM)return AE;AM=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return AE=n,AE}var IE,IM;function HX(){if(IM)return IE;IM=1;var e=yB(),t=$X(),n=VX(),r="[object Null]",i="[object Undefined]",l=e?e.toStringTag:void 0;function u(a){return a==null?a===void 0?i:r:l&&l in Object(a)?t(a):n(a)}return IE=u,IE}var RE,RM;function ZX(){if(RM)return RE;RM=1;function e(t){return t!=null&&typeof t=="object"}return RE=e,RE}var LE,LM;function qX(){if(LM)return LE;LM=1;var e=HX(),t=ZX(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return LE=r,LE}var ME,MM;function GX(){if(MM)return ME;MM=1;var e=UX(),t=HP(),n=qX(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,a=parseInt;function m(g){if(typeof g=="number")return g;if(n(g))return r;if(t(g)){var w=typeof g.valueOf=="function"?g.valueOf():g;g=t(w)?w+"":w}if(typeof g!="string")return g===0?g:+g;g=e(g);var C=l.test(g);return C||u.test(g)?a(g.slice(2),C?2:8):i.test(g)?r:+g}return ME=m,ME}var OE,OM;function vB(){if(OM)return OE;OM=1;var e=HP(),t=FX(),n=GX(),r="Expected a function",i=Math.max,l=Math.min;function u(a,m,g){var w,C,P,I,N,z,$=0,H=!1,V=!1,q=!0;if(typeof a!="function")throw new TypeError(r);m=n(m)||0,e(g)&&(H=!!g.leading,V="maxWait"in g,P=V?i(n(g.maxWait)||0,m):P,q="trailing"in g?!!g.trailing:q);function te(Xe){var gt=w,yt=C;return w=C=void 0,$=Xe,I=a.apply(yt,gt),I}function ue(Xe){return $=Xe,N=setTimeout(le,m),H?te(Xe):I}function fe(Xe){var gt=Xe-z,yt=Xe-$,lt=m-gt;return V?l(lt,P-yt):lt}function Z(Xe){var gt=Xe-z,yt=Xe-$;return z===void 0||gt>=m||gt<0||V&&yt>=P}function le(){var Xe=t();if(Z(Xe))return be(Xe);N=setTimeout(le,fe(Xe))}function be(Xe){return N=void 0,q&&w?te(Xe):(w=C=void 0,I)}function Re(){N!==void 0&&clearTimeout(N),$=0,w=z=C=N=void 0}function Je(){return N===void 0?I:be(t())}function Fe(){var Xe=t(),gt=Z(Xe);if(w=arguments,C=this,z=Xe,gt){if(N===void 0)return ue(z);if(V)return clearTimeout(N),N=setTimeout(le,m),te(z)}return N===void 0&&(N=setTimeout(le,m)),I}return Fe.cancel=Re,Fe.flush=Je,Fe}return OE=u,OE}var WX=vB(),DE=mB(WX),NE,DM;function XX(){if(DM)return NE;DM=1;var e=vB(),t=HP(),n="Expected a function";function r(i,l,u){var a=!0,m=!0;if(typeof i!="function")throw new TypeError(n);return t(u)&&(a="leading"in u?!!u.leading:a,m="trailing"in u?!!u.trailing:m),e(i,l,{leading:a,maxWait:l,trailing:m})}return NE=r,NE}var KX=XX(),YX=mB(KX),Am=function(){return Am=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Am.apply(this,arguments)};function _B(e){return!e||!e.ownerDocument||!e.ownerDocument.defaultView?window:e.ownerDocument.defaultView}function xB(e){return!e||!e.ownerDocument?document:e.ownerDocument}var bB=function(e){var t={},n=Array.prototype.reduce.call(e,function(r,i){var l=i.name.match(/data-simplebar-(.+)/);if(l){var u=l[1].replace(/\W+(.)/g,function(a,m){return m.toUpperCase()});switch(i.value){case"true":r[u]=!0;break;case"false":r[u]=!1;break;case void 0:r[u]=!0;break;default:r[u]=i.value}}return r},t);return n};function wB(e,t){var n;e&&(n=e.classList).add.apply(n,t.split(" "))}function SB(e,t){e&&t.split(" ").forEach(function(n){e.classList.remove(n)})}function EB(e){return".".concat(e.split(" ").join("."))}var ZP=!!(typeof window<"u"&&window.document&&window.document.createElement),QX=Object.freeze({__proto__:null,addClasses:wB,canUseDOM:ZP,classNamesToQuery:EB,getElementDocument:xB,getElementWindow:_B,getOptions:bB,removeClasses:SB}),pm=null,NM=null;ZP&&window.addEventListener("resize",function(){NM!==window.devicePixelRatio&&(NM=window.devicePixelRatio,pm=null)});function jM(){if(pm===null){if(typeof document>"u")return pm=0,pm;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var n=t.getBoundingClientRect().right;e.removeChild(t),pm=n}return pm}var Qd=_B,jE=xB,JX=bB,Jd=wB,eh=SB,ha=EB,vy=function(){function e(t,n){n===void 0&&(n={});var r=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var i=Qd(r.el);r.scrollXTicking||(i.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(i.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0),r.isScrolling||(r.isScrolling=!0,Jd(r.el,r.classNames.scrolling)),r.showScrollbar("x"),r.showScrollbar("y"),r.onStopScrolling()},this.scrollX=function(){r.axis.x.isOverflowing&&r.positionScrollbar("x"),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&r.positionScrollbar("y"),r.scrollYTicking=!1},this._onStopScrolling=function(){eh(r.el,r.classNames.scrolling),r.options.autoHide&&(r.hideScrollbar("x"),r.hideScrollbar("y")),r.isScrolling=!1},this.onMouseEnter=function(){r.isMouseEntering||(Jd(r.el,r.classNames.mouseEntered),r.showScrollbar("x"),r.showScrollbar("y"),r.isMouseEntering=!0),r.onMouseEntered()},this._onMouseEntered=function(){eh(r.el,r.classNames.mouseEntered),r.options.autoHide&&(r.hideScrollbar("x"),r.hideScrollbar("y")),r.isMouseEntering=!1},this._onMouseMove=function(i){r.mouseX=i.clientX,r.mouseY=i.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this._onWindowResize=function(){r.scrollbarWidth=r.getScrollbarWidth(),r.hideNativeScrollbar()},this.onPointerEvent=function(i){if(!(!r.axis.x.track.el||!r.axis.y.track.el||!r.axis.x.scrollbar.el||!r.axis.y.scrollbar.el)){var l,u;r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(l=r.isWithinBounds(r.axis.x.track.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(u=r.isWithinBounds(r.axis.y.track.rect)),(l||u)&&(i.stopPropagation(),i.type==="pointerdown"&&i.pointerType!=="touch"&&(l&&(r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.x.scrollbar.rect)?r.onDragStart(i,"x"):r.onTrackClick(i,"x")),u&&(r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.scrollbar.rect)?r.onDragStart(i,"y"):r.onTrackClick(i,"y"))))}},this.drag=function(i){var l,u,a,m,g,w,C,P,I,N,z;if(!(!r.draggedAxis||!r.contentWrapperEl)){var $,H=r.axis[r.draggedAxis].track,V=(u=(l=H.rect)===null||l===void 0?void 0:l[r.axis[r.draggedAxis].sizeAttr])!==null&&u!==void 0?u:0,q=r.axis[r.draggedAxis].scrollbar,te=(m=(a=r.contentWrapperEl)===null||a===void 0?void 0:a[r.axis[r.draggedAxis].scrollSizeAttr])!==null&&m!==void 0?m:0,ue=parseInt((w=(g=r.elStyles)===null||g===void 0?void 0:g[r.axis[r.draggedAxis].sizeAttr])!==null&&w!==void 0?w:"0px",10);i.preventDefault(),i.stopPropagation(),r.draggedAxis==="y"?$=i.pageY:$=i.pageX;var fe=$-((P=(C=H.rect)===null||C===void 0?void 0:C[r.axis[r.draggedAxis].offsetAttr])!==null&&P!==void 0?P:0)-r.axis[r.draggedAxis].dragOffset;fe=r.draggedAxis==="x"&&r.isRtl?((N=(I=H.rect)===null||I===void 0?void 0:I[r.axis[r.draggedAxis].sizeAttr])!==null&&N!==void 0?N:0)-q.size-fe:fe;var Z=fe/(V-q.size),le=Z*(te-ue);r.draggedAxis==="x"&&r.isRtl&&(le=!((z=e.getRtlHelpers())===null||z===void 0)&&z.isScrollingToNegative?-le:le),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=le}},this.onEndDrag=function(i){r.isDragging=!1;var l=jE(r.el),u=Qd(r.el);i.preventDefault(),i.stopPropagation(),eh(r.el,r.classNames.dragging),r.onStopScrolling(),l.removeEventListener("mousemove",r.drag,!0),l.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=u.setTimeout(function(){l.removeEventListener("click",r.preventClick,!0),l.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null})},this.preventClick=function(i){i.preventDefault(),i.stopPropagation()},this.el=t,this.options=Am(Am({},e.defaultOptions),n),this.classNames=Am(Am({},e.defaultOptions.classNames),n.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!="object"||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=YX(this._onMouseMove,64),this.onWindowResize=DE(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=DE(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=DE(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var n=t.firstElementChild,r=n==null?void 0:n.firstElementChild;if(!r)return null;document.body.appendChild(n),n.scrollLeft=0;var i=e.getOffset(n),l=e.getOffset(r);n.scrollLeft=-999;var u=e.getOffset(r);return document.body.removeChild(n),e.rtlHelpers={isScrollOriginAtZero:i.left!==l.left,isScrollingToNegative:l.left!==u.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display==="none"||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:jM()}catch{return jM()}},e.getOffset=function(t){var n=t.getBoundingClientRect(),r=jE(t),i=Qd(t);return{top:n.top+(i.pageYOffset||r.documentElement.scrollTop),left:n.left+(i.pageXOffset||r.documentElement.scrollLeft)}},e.prototype.init=function(){ZP&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){var t,n;this.wrapperEl=this.el.querySelector(ha(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(ha(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(ha(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(ha(this.classNames.offset)),this.maskEl=this.el.querySelector(ha(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,ha(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(ha(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(ha(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(ha(this.classNames.track)).concat(ha(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(ha(this.classNames.track)).concat(ha(this.classNames.vertical))),this.axis.x.scrollbar.el=((t=this.axis.x.track.el)===null||t===void 0?void 0:t.querySelector(ha(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=((n=this.axis.y.track.el)===null||n===void 0?void 0:n.querySelector(ha(this.classNames.scrollbar)))||null,this.options.autoHide||(Jd(this.axis.x.scrollbar.el,this.classNames.visible),Jd(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var t=this,n,r=Qd(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),(n=this.contentWrapperEl)===null||n===void 0||n.addEventListener("scroll",this.onScroll),r.addEventListener("resize",this.onWindowResize),!!this.contentEl){if(window.ResizeObserver){var i=!1,l=r.ResizeObserver||ResizeObserver;this.resizeObserver=new l(function(){i&&r.requestAnimationFrame(function(){t.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),r.requestAnimationFrame(function(){i=!0})}this.mutationObserver=new r.MutationObserver(function(){r.requestAnimationFrame(function(){t.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){var t=Qd(this.el);this.elStyles=t.getComputedStyle(this.el),this.isRtl=this.elStyles.direction==="rtl";var n=this.contentEl.offsetWidth,r=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||n>0,l=this.contentWrapperEl.offsetWidth,u=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var m=this.contentEl.scrollHeight,g=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=r?"auto":"100%",this.placeholderEl.style.width=i?"".concat(n||g,"px"):"auto",this.placeholderEl.style.height="".concat(m,"px");var w=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=n!==0&&g>n,this.axis.y.isOverflowing=m>w,this.axis.x.isOverflowing=u==="hidden"?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=a==="hidden"?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible==="x"||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible==="y"||this.options.forceVisible===!0,this.hideNativeScrollbar();var C=this.axis.x.isOverflowing?this.scrollbarWidth:0,P=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&g>l-P,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&m>w-C,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},e.prototype.getScrollbarSize=function(t){var n,r;if(t===void 0&&(t="y"),!this.axis[t].isOverflowing||!this.contentEl)return 0;var i=this.contentEl[this.axis[t].scrollSizeAttr],l=(r=(n=this.axis[t].track.el)===null||n===void 0?void 0:n[this.axis[t].offsetSizeAttr])!==null&&r!==void 0?r:0,u=l/i,a;return a=Math.max(~~(u*l),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(a=Math.min(a,this.options.scrollbarMaxSize)),a},e.prototype.positionScrollbar=function(t){var n,r,i;t===void 0&&(t="y");var l=this.axis[t].scrollbar;if(!(!this.axis[t].isOverflowing||!this.contentWrapperEl||!l.el||!this.elStyles)){var u=this.contentWrapperEl[this.axis[t].scrollSizeAttr],a=((n=this.axis[t].track.el)===null||n===void 0?void 0:n[this.axis[t].offsetSizeAttr])||0,m=parseInt(this.elStyles[this.axis[t].sizeAttr],10),g=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];g=t==="x"&&this.isRtl&&(!((r=e.getRtlHelpers())===null||r===void 0)&&r.isScrollOriginAtZero)?-g:g,t==="x"&&this.isRtl&&(g=!((i=e.getRtlHelpers())===null||i===void 0)&&i.isScrollingToNegative?g:-g);var w=g/(u-m),C=~~((a-l.size)*w);C=t==="x"&&this.isRtl?-C+(a-l.size):C,l.el.style.transform=t==="x"?"translate3d(".concat(C,"px, 0, 0)"):"translate3d(0, ".concat(C,"px, 0)")}},e.prototype.toggleTrackVisibility=function(t){t===void 0&&(t="y");var n=this.axis[t].track.el,r=this.axis[t].scrollbar.el;!n||!r||!this.contentWrapperEl||(this.axis[t].isOverflowing||this.axis[t].forceVisible?(n.style.visibility="visible",this.contentWrapperEl.style[this.axis[t].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(t))):(n.style.visibility="hidden",this.contentWrapperEl.style[this.axis[t].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(t))),this.axis[t].isOverflowing?r.style.display="block":r.style.display="none")},e.prototype.showScrollbar=function(t){t===void 0&&(t="y"),this.axis[t].isOverflowing&&!this.axis[t].scrollbar.isVisible&&(Jd(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(t){t===void 0&&(t="y"),!this.isDragging&&this.axis[t].isOverflowing&&this.axis[t].scrollbar.isVisible&&(eh(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},e.prototype.onMouseMoveForAxis=function(t){t===void 0&&(t="y");var n=this.axis[t];!n.track.el||!n.scrollbar.el||(n.track.rect=n.track.el.getBoundingClientRect(),n.scrollbar.rect=n.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(n.track.rect)?(this.showScrollbar(t),Jd(n.track.el,this.classNames.hover),this.isWithinBounds(n.scrollbar.rect)?Jd(n.scrollbar.el,this.classNames.hover):eh(n.scrollbar.el,this.classNames.hover)):(eh(n.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)))},e.prototype.onMouseLeaveForAxis=function(t){t===void 0&&(t="y"),eh(this.axis[t].track.el,this.classNames.hover),eh(this.axis[t].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)},e.prototype.onDragStart=function(t,n){var r;n===void 0&&(n="y"),this.isDragging=!0;var i=jE(this.el),l=Qd(this.el),u=this.axis[n].scrollbar,a=n==="y"?t.pageY:t.pageX;this.axis[n].dragOffset=a-(((r=u.rect)===null||r===void 0?void 0:r[this.axis[n].offsetAttr])||0),this.draggedAxis=n,Jd(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),this.removePreventClickId===null?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(l.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(t,n){var r=this,i,l,u,a;n===void 0&&(n="y");var m=this.axis[n];if(!(!this.options.clickOnTrack||!m.scrollbar.el||!this.contentWrapperEl)){t.preventDefault();var g=Qd(this.el);this.axis[n].scrollbar.rect=m.scrollbar.el.getBoundingClientRect();var w=this.axis[n].scrollbar,C=(l=(i=w.rect)===null||i===void 0?void 0:i[this.axis[n].offsetAttr])!==null&&l!==void 0?l:0,P=parseInt((a=(u=this.elStyles)===null||u===void 0?void 0:u[this.axis[n].sizeAttr])!==null&&a!==void 0?a:"0px",10),I=this.contentWrapperEl[this.axis[n].scrollOffsetAttr],N=n==="y"?this.mouseY-C:this.mouseX-C,z=N<0?-1:1,$=z===-1?I-P:I+P,H=40,V=function(){r.contentWrapperEl&&(z===-1?I>$&&(I-=H,r.contentWrapperEl[r.axis[n].scrollOffsetAttr]=I,g.requestAnimationFrame(V)):I<$&&(I+=H,r.contentWrapperEl[r.axis[n].scrollOffsetAttr]=I,g.requestAnimationFrame(V)))};V()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var t=Qd(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},e.prototype.findChild=function(t,n){var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;return Array.prototype.filter.call(t.children,function(i){return r.call(i,n)})[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",tabIndex:0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=JX,e.helpers=QX,e}(),Ba=function(){return Ba=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Ba.apply(this,arguments)};function eK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var CB=M.forwardRef(function(e,t){var n=e.children,r=e.scrollableNodeProps,i=r===void 0?{}:r,l=eK(e,["children","scrollableNodeProps"]),u=M.useRef(),a=M.useRef(),m=M.useRef(),g={},w={};Object.keys(l).forEach(function(I){Object.prototype.hasOwnProperty.call(vy.defaultOptions,I)?g[I]=l[I]:w[I]=l[I]});var C=Ba(Ba({},vy.defaultOptions.classNames),g.classNames),P=Ba(Ba({},i),{className:"".concat(C.contentWrapper).concat(i.className?" ".concat(i.className):""),tabIndex:g.tabIndex||vy.defaultOptions.tabIndex,role:"region","aria-label":g.ariaLabel||vy.defaultOptions.ariaLabel});return M.useEffect(function(){var I;return a.current=P.ref?P.ref.current:a.current,u.current&&(I=new vy(u.current,Ba(Ba(Ba({},g),a.current&&{scrollableNode:a.current}),m.current&&{contentNode:m.current})),typeof t=="function"?t(I):t&&(t.current=I)),function(){I==null||I.unMount(),I=null,typeof t=="function"&&t(null)}},[]),M.createElement("div",Ba({"data-simplebar":"init",ref:u},w),M.createElement("div",{className:C.wrapper},M.createElement("div",{className:C.heightAutoObserverWrapperEl},M.createElement("div",{className:C.heightAutoObserverEl})),M.createElement("div",{className:C.mask},M.createElement("div",{className:C.offset},typeof n=="function"?n({scrollableNodeRef:a,scrollableNodeProps:Ba(Ba({},P),{ref:a}),contentNodeRef:m,contentNodeProps:{className:C.contentEl,ref:m}}):M.createElement("div",Ba({},P),M.createElement("div",{className:C.contentEl},n)))),M.createElement("div",{className:C.placeholder})),M.createElement("div",{className:"".concat(C.track," simplebar-horizontal")},M.createElement("div",{className:C.scrollbar})),M.createElement("div",{className:"".concat(C.track," simplebar-vertical")},M.createElement("div",{className:C.scrollbar})))});CB.displayName="SimpleBar";const tK=dn.forwardRef(function(t,n){var{children:r,shadow:i=!1,className:l}=t,u=Mt(t,["children","shadow","className"]);const[a,m]=dn.useState(!1),[g,w]=dn.useState(!1),[C,P]=dn.useState(!1),I=dn.useCallback(N=>{const z=N.target,{scrollHeight:$,scrollTop:H,clientHeight:V}=z,q=$-Math.round(H)===V,te=H===0,ue=H>0&&!q;w(q),P(te),m(ue)},[]);return dn.createElement(CB,Object.assign({classNames:{track:"simplebar-track gst-scrollable__track"},className:Ut("gst-scrollable",l,{"gst-scrollable--shadow":i,"gst-scrollable--scrolling":i&&a,"gst-scrollable--bottom-reached":i&&g,"gst-scrollable--top-reached":i&&C})},u,{scrollableNodeProps:i?{ref:n,onScroll:I}:{ref:n}}),r)});tK.displayName="Scrollable";const nK=M.forwardRef(function(t,n){const r=j9(t),{disabled:i,fullWidth:l,invalid:u,children:a,className:m}=r,g=Mt(r,["disabled","fullWidth","invalid","children","className"]);return M.createElement("div",{className:Ut("gst-select",{"gst-select--invalid":u},{"gst-select--disabled":i},{"gst-select--full-width":l},m)},M.createElement("select",Object.assign({ref:n,className:"gst-select__select"},u&&{"aria-invalid":!0},i&&{disabled:!0},g),a))}),rK=M.forwardRef(function(t,n){var{children:r}=t,i=Mt(t,["children"]);return M.createElement("option",Object.assign({ref:n},i),r)}),iK=M.forwardRef(function(t,n){var{current:r,children:i,className:l}=t,u=Mt(t,["current","children","className"]);const a=Ut("gst-stepper__step",l);return M.createElement("li",Object.assign({ref:n,className:a},r&&{"aria-current":"step"},u),i)}),sK=M.forwardRef(function(t,n){var{children:r,className:i}=t,l=Mt(t,["children","className"]);const u=bp(),a=Ut("gst-stepper",{"gst-stepper--inverted":u.colors.header.inverted},i);return M.createElement("ol",Object.assign({ref:n,className:a},l),r)}),oK=M.forwardRef(function(t,n){const r=F9(t),{pressed:i,className:l,id:u,disabled:a,onClick:m}=r,g=Mt(r,["pressed","className","id","disabled","onClick"]),w=Ut("gst-switch",l);return M.createElement("button",Object.assign({ref:n,type:"button","aria-pressed":i,id:u,className:w,onClick:C=>!a&&m&&m(C),disabled:a},g),M.createElement(sn,{name:"checkbox-checked",size:"small",className:"gst-switch__icon gst-switch__icon-true","aria-hidden":"true"}),M.createElement("span",{className:"gst-switch__thumb","aria-hidden":"true"}),M.createElement(sn,{name:"xmark",size:"small",className:"gst-switch__icon gst-switch__icon-false","aria-hidden":"true"}))}),qP=M.createContext({id:"",lazyMount:!1,selectedIndex:0,setSelectedIndex:()=>{},registerTab:()=>{},unregisterTab:()=>{},registerTabPanel:()=>{},unregisterTabPanel:()=>{},tabRefs:{current:[]},tabPanelRefs:{current:[]},tabMap:new Map,tabPanelMap:new Map});function aK(){const[e,t]=M.useState(null),n=M.useRef(null),{id:r,registerTab:i,unregisterTab:l,tabMap:u,tabRefs:a,selectedIndex:m,setSelectedIndex:g}=M.useContext(qP),w=M.useCallback(C=>{n.current=C,e!==null&&(a.current[e]=C)},[e,a]);return M.useLayoutEffect(()=>{const C=n.current;if(C)return i(C),()=>{l(C)}},[i,l]),M.useLayoutEffect(()=>{const C=n.current?u.get(n.current):null;C!=null&&t(C)},[u]),M.useMemo(()=>({ref:w,index:e??-1,id:r,selectedIndex:m,setSelectedIndex:g,tabRefs:a}),[e,w,r,m,g,a])}function lK(){const[e,t]=M.useState(null),n=M.useRef(null),{id:r,lazyMount:i,registerTabPanel:l,unregisterTabPanel:u,selectedIndex:a,tabPanelMap:m,tabPanelRefs:g}=M.useContext(qP),w=M.useCallback(C=>{n.current=C,e!==null&&(g.current[e]=C)},[e,g]);return M.useLayoutEffect(()=>{const C=n.current;if(C)return l(C),()=>{u(C)}},[l,u]),M.useLayoutEffect(()=>{const C=n.current?m.get(n.current):null;C!=null&&t(C)},[m]),M.useMemo(()=>({ref:w,id:r,lazyMount:i,index:e??-1,selectedIndex:a}),[e,w,r,i,a])}M.forwardRef(function(t,n){var{className:r}=t,i=Mt(t,["className"]);const{index:l,id:u,ref:a,selectedIndex:m,setSelectedIndex:g,tabRefs:w}=aK(),C=MP(a,n),P=I=>{var N,z,$,H;const V=(te,ue)=>{let fe=te;const Z=w.current.length;for(let le=0;le<Z;le++){fe=ue==="forward"?(fe+1)%Z:(fe-1+Z)%Z;const be=w.current[fe];if(be&&!be.disabled)return fe}return te};let q=!1;if(I.key==="Home"){const te=V(-1,"forward");g(te),(N=w.current[te])===null||N===void 0||N.focus(),q=!0}else if(I.key==="End"){const te=V(w.current.length,"backward");g(te),(z=w.current[te])===null||z===void 0||z.focus(),q=!0}else if(I.key==="ArrowRight"){const te=V(l,"forward");g(te),($=w.current[te])===null||$===void 0||$.focus(),q=!0}else if(I.key==="ArrowLeft"){const te=V(l,"backward");g(te),(H=w.current[te])===null||H===void 0||H.focus(),q=!0}q&&(I.preventDefault(),I.stopPropagation())};return M.createElement("button",Object.assign({ref:C,className:Ut("gst-tabs__tab",r),type:"button",role:"tab",id:`tab-${u}-${l}`,"aria-controls":`tabpanel-${u}-${l}`},m===l&&{"aria-selected":m===l},{tabIndex:m===l?0:-1,onClick:()=>{g(l)},onKeyDown:P},i))});M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);return M.createElement("div",Object.assign({ref:n,className:Ut("gst-tabs__tablist",r),role:"tablist"},l),i)});const cK=M.createContext({index:-1,selectedIndex:0});M.forwardRef(function(t,n){var{className:r,children:i}=t,l=Mt(t,["className","children"]);const{selectedIndex:u,id:a,index:m,ref:g,lazyMount:w}=lK(),C=MP(g,n);return M.createElement(cK.Provider,{value:{index:m,selectedIndex:u}},M.createElement("div",Object.assign({ref:C,className:Ut("gst-tabs__tabpanel",r),role:"tabpanel",id:`tabpanel-${a}-${m}`,"aria-labelledby":`tab-${a}-${m}`},u!==m&&{hidden:!0},{tabIndex:u===m?0:-1},l),w?u===m&&i:i))});function zM(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function FM(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}M.forwardRef(function(t,n){var{className:r,children:i,defaultIndex:l=0,lazyMount:u=!1}=t,a=Mt(t,["className","children","defaultIndex","lazyMount"]);const m=M.useId(),[g,w]=M.useState(l),[C,P]=M.useState(()=>new Map),[I,N]=M.useState(()=>new Map),z=M.useCallback(q=>{P(te=>new Map(te).set(q,null))},[]),$=M.useCallback(q=>{N(te=>new Map(te).set(q,null))},[]),H=M.useCallback(q=>{P(te=>{const ue=new Map(te);return ue.delete(q),ue})},[]),V=M.useCallback(q=>{P(te=>{const ue=new Map(te);return ue.delete(q),ue})},[]);return M.useLayoutEffect(()=>{const q=new Map(C);Array.from(q.keys()).sort(zM).forEach((ue,fe)=>{q.set(ue,fe)}),FM(C,q)||P(q)},[C]),M.useLayoutEffect(()=>{const q=new Map(I);Array.from(q.keys()).sort(zM).forEach((ue,fe)=>{q.set(ue,fe)}),FM(I,q)||N(q)},[I]),M.createElement(qP.Provider,{value:M.useMemo(()=>({id:m,lazyMount:u,selectedIndex:g,setSelectedIndex:w,registerTab:z,unregisterTab:H,registerTabPanel:$,unregisterTabPanel:V,tabMap:C,tabPanelMap:I,tabRefs:{current:[]},tabPanelRefs:{current:[]}}),[m,u,g,w,z,H,$,V,C,I])},M.createElement("div",Object.assign({ref:n,className:Ut("gst-tabs",r)},a),i))});const uK=M.forwardRef(function(t,n){const r=mF(t),{invalid:i,fullWidth:l,type:u="text",className:a,postfix:m}=r,g=Mt(r,["invalid","fullWidth","type","className","postfix"]);if(m)return M.createElement("span",{className:Ut("gst-textbox",{"gst-textbox--full-width":l},a)},M.createElement("input",Object.assign({ref:n,className:"gst-textbox__input",type:u},i&&{"aria-invalid":!0},g)),M.createElement("span",{className:"gst-textbox__postfix"},m));const w=Ut("gst-text-input",l&&"gst-text-input--full-width",a);return M.createElement("input",Object.assign({ref:n,className:w,type:u},i&&{"aria-invalid":!0},g))}),dK=M.forwardRef(function(t,n){const r=z9(t),{invalid:i,resize:l,fullWidth:u,className:a}=r,m=Mt(r,["invalid","resize","fullWidth","className"]),g=Ut("gst-textarea",u&&"gst-textarea--full-width",l&&`gst-textarea--resize-${l}`,a);return M.createElement("textarea",Object.assign({ref:n,className:g},i&&{"aria-invalid":!0},m))});function hK(e,{defaultValue:t=!1}={}){const n=M.useCallback(l=>{const u=window.matchMedia(e);return u.addEventListener("change",l),()=>{u.removeEventListener("change",l)}},[e]),r=()=>window.matchMedia(e).matches,i=()=>t;return M.useSyncExternalStore(n,r,i)}const fK={below:{small:"only screen and (max-width: 767.98px)"}},Ir=()=>hK(fK.below.small,{defaultValue:!0});(function(e){if(e.fetch)return;var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(Z){return Z&&DataView.prototype.isPrototypeOf(Z)},i=ArrayBuffer.isView||function(Z){return Z&&n.indexOf(Object.prototype.toString.call(Z))>-1};function l(Z){if(typeof Z!="string"&&(Z=String(Z)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Z))throw new TypeError("Invalid character in header field name");return Z.toLowerCase()}function u(Z){return typeof Z!="string"&&(Z=String(Z)),Z}function a(Z){var le={next:function(){var be=Z.shift();return{done:be===void 0,value:be}}};return t.iterable&&(le[Symbol.iterator]=function(){return le}),le}function m(Z){this.map={},Z instanceof m?Z.forEach(function(le,be){this.append(be,le)},this):Array.isArray(Z)?Z.forEach(function(le){this.append(le[0],le[1])},this):Z&&Object.getOwnPropertyNames(Z).forEach(function(le){this.append(le,Z[le])},this)}m.prototype.append=function(Z,le){Z=l(Z),le=u(le);var be=this.map[Z];this.map[Z]=be?be+","+le:le},m.prototype.delete=function(Z){delete this.map[l(Z)]},m.prototype.get=function(Z){return Z=l(Z),this.has(Z)?this.map[Z]:null},m.prototype.has=function(Z){return this.map.hasOwnProperty(l(Z))},m.prototype.set=function(Z,le){this.map[l(Z)]=u(le)},m.prototype.forEach=function(Z,le){for(var be in this.map)this.map.hasOwnProperty(be)&&Z.call(le,this.map[be],be,this)},m.prototype.keys=function(){var Z=[];return this.forEach(function(le,be){Z.push(be)}),a(Z)},m.prototype.values=function(){var Z=[];return this.forEach(function(le){Z.push(le)}),a(Z)},m.prototype.entries=function(){var Z=[];return this.forEach(function(le,be){Z.push([be,le])}),a(Z)},t.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(Z){if(Z.bodyUsed)return Promise.reject(new TypeError("Already read"));Z.bodyUsed=!0}function w(Z){return new Promise(function(le,be){Z.onload=function(){le(Z.result)},Z.onerror=function(){be(Z.error)}})}function C(Z){var le=new FileReader,be=w(le);return le.readAsArrayBuffer(Z),be}function P(Z){var le=new FileReader,be=w(le);return le.readAsText(Z),be}function I(Z){for(var le=new Uint8Array(Z),be=new Array(le.length),Re=0;Re<le.length;Re++)be[Re]=String.fromCharCode(le[Re]);return be.join("")}function N(Z){if(Z.slice)return Z.slice(0);var le=new Uint8Array(Z.byteLength);return le.set(new Uint8Array(Z)),le.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(Z){if(this._bodyInit=Z,!Z)this._bodyText="";else if(typeof Z=="string")this._bodyText=Z;else if(t.blob&&Blob.prototype.isPrototypeOf(Z))this._bodyBlob=Z;else if(t.formData&&FormData.prototype.isPrototypeOf(Z))this._bodyFormData=Z;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(Z))this._bodyText=Z.toString();else if(t.arrayBuffer&&t.blob&&r(Z))this._bodyArrayBuffer=N(Z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Z)||i(Z)))this._bodyArrayBuffer=N(Z);else throw new Error("unsupported BodyInit type");this.headers.get("content-type")||(typeof Z=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(Z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var Z=g(this);if(Z)return Z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var Z=g(this);if(Z)return Z;if(this._bodyBlob)return P(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function H(Z){var le=Z.toUpperCase();return $.indexOf(le)>-1?le:Z}function V(Z,le){le=le||{};var be=le.body;if(Z instanceof V){if(Z.bodyUsed)throw new TypeError("Already read");this.url=Z.url,this.credentials=Z.credentials,le.headers||(this.headers=new m(Z.headers)),this.method=Z.method,this.mode=Z.mode,!be&&Z._bodyInit!=null&&(be=Z._bodyInit,Z.bodyUsed=!0)}else this.url=String(Z);if(this.credentials=le.credentials||this.credentials||"omit",(le.headers||!this.headers)&&(this.headers=new m(le.headers)),this.method=H(le.method||this.method||"GET"),this.mode=le.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&be)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(be)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})};function q(Z){var le=new FormData;return Z.trim().split("&").forEach(function(be){if(be){var Re=be.split("="),Je=Re.shift().replace(/\+/g," "),Fe=Re.join("=").replace(/\+/g," ");le.append(decodeURIComponent(Je),decodeURIComponent(Fe))}}),le}function te(Z){var le=new m,be=Z.replace(/\r?\n[\t ]+/g," ");return be.split(/\r?\n/).forEach(function(Re){var Je=Re.split(":"),Fe=Je.shift().trim();if(Fe){var Xe=Je.join(":").trim();le.append(Fe,Xe)}}),le}z.call(V.prototype);function ue(Z,le){le||(le={}),this.type="default",this.status=le.status===void 0?200:le.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in le?le.statusText:"OK",this.headers=new m(le.headers),this.url=le.url||"",this._initBody(Z)}z.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},ue.error=function(){var Z=new ue(null,{status:0,statusText:""});return Z.type="error",Z};var fe=[301,302,303,307,308];ue.redirect=function(Z,le){if(fe.indexOf(le)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:le,headers:{location:Z}})},e.Headers=m,e.Request=V,e.Response=ue,e.fetch=function(Z,le){return new Promise(function(be,Re){var Je=new V(Z,le),Fe=new XMLHttpRequest;Fe.onload=function(){var Xe={status:Fe.status,statusText:Fe.statusText,headers:te(Fe.getAllResponseHeaders()||"")};Xe.url="responseURL"in Fe?Fe.responseURL:Xe.headers.get("X-Request-URL");var gt="response"in Fe?Fe.response:Fe.responseText;be(new ue(gt,Xe))},Fe.onerror=function(){Re(new TypeError("Network request failed"))},Fe.ontimeout=function(){Re(new TypeError("Network request failed"))},Fe.open(Je.method,Je.url,!0),Je.credentials==="include"?Fe.withCredentials=!0:Je.credentials==="omit"&&(Fe.withCredentials=!1),"responseType"in Fe&&t.blob&&(Fe.responseType="blob"),Je.headers.forEach(function(Xe,gt){Fe.setRequestHeader(gt,Xe)}),Fe.send(typeof Je._bodyInit>"u"?null:Je._bodyInit)})},e.fetch.polyfill=!0})(typeof self<"u"?self:void 0);const Mm=class Mm{static getSessions(){const t=localStorage.getItem(Mm.storageKey);if(!t)return[];const{sessions:n}=JSON.parse(t);return n||[]}static saveSessions(t){const n=localStorage.getItem(Mm.storageKey);let r={sessions:t};t.length!==0&&(n&&(r={...JSON.parse(n),sessions:t}),localStorage.setItem(Mm.storageKey,JSON.stringify(r)))}static addSession(t,n){const r=this.getSessions();if(r.some(m=>m.key===t&&m.value===n))return;const i=r.filter(m=>m.key!==t),l=Date.now(),u=i.filter(m=>m.expiry>l),a=l+36e5;u.push({key:t,value:n,expiry:a}),this.saveSessions(u)}static getSessionsList(){const t=this.getSessions(),n=Date.now(),r=t.filter(i=>i.expiry>n);return this.saveSessions(r),r.map(i=>`${i.key}=${i.value}`).join(";")}static saveBookingRef(t,n){const r=this.getSessions().find(i=>i.value===n);r!=null&&r.bookingReference||this.saveSessions([{...r,bookingReference:t}])}static getBookingRef(t){const n=this.getSessions().find(r=>r.value===t);return n==null?void 0:n.bookingReference}};Mm.storageKey="dedgebe";let up=Mm;const BM=gc("VITE_REACT_APP_CONVERGENCE_API_URL");class Ji{constructor(){this.rejectTechnicalError=t=>Promise.reject({type:Ta.TechnicalError,messages:[`Unhandled response status code (${t.status}): ${t.statusText}`]}),this.post=(t,n)=>this.fetch(bT(BM,t),{method:"POST",cache:"no-store",body:JSON.stringify(n)}),this.defaultRequestInit={headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-HostName":window.location.hostname,"X-Dedgebe-Mode":"Perroom"},credentials:"omit"}}async fetch(t,n={}){const r=up.getSessionsList(),i=Object.assign({},this.defaultRequestInit,n),l=await fetch(t,{...i,headers:{...this.defaultRequestInit.headers,"X-Dedgebe-Sessions":r}});if(!l.ok)return this.rejectTechnicalError(l);const{headers:u}=l;for(const[m,g]of u.entries())if(m==="x-dedgebe-sessions"){const w=g.endsWith(";")?g.slice(0,-1):g,[C,P]=w.split("=");up.addSession(C,P)}const a=await l.json();return a.type===Ta.Success?Promise.resolve(a):Promise.reject(a)}get(t,n){return this.fetch(bT(BM,t,n),{method:"GET",cache:"no-store"})}}const pK=new v_(document.location);function mK(e=""){if(!(Li!=null&&Li.changeLanguageUrl)||!e){const{path:t,queries:n}=pK.toBackend();return new Ji().get(t,n)}return new Ji().get(Li.changeLanguageUrl.replace("xx-XX",e))}async function gK(e,t){return new Ji().get(Li.fetchRoomsUrl,{page:e,lastPages:e>1,guestPosition:t})}function yK(e){return new Ji().post(Li.submitQuoteUrl,e)}async function vK(){return await new Ji().get(Li.bookingConfirmationUrl)}async function _K(e){return new Ji().get(Li.validateSearchParametersUrl,{promoCode:e.promoCode})}async function xK(e,t){return new Ji().get(Li.fetchCalendarUrl,{monthCount:e,skippedMonths:t})}async function TB(e){return new Ji().post(Li.changeSearchParametersUrl,e)}async function bK(){return new Ji().post(Li.clearBasketUrl,null)}async function wK(){return new Ji().get(Li.fetchHotelsUrl)}async function SK(){return new Ji().get(Li.fetchAlternativeHotelsUrl)}async function EK(e,t,n,r,i,l){const u={roomId:t,rateId:e,occupancyId:n,guestPosition:r,quantity:i,beddingId:l};return await new Ji().post(Li.upsertRoomUrl,u)}async function CK(e,t){return new Ji().post(Li.upsertExtraUrl,{extraId:e.id,roomId:e.roomId,quantity:t,guestPosition:e.guestPosition})}function TK(){return new Ji().post(Li.resetSearchParamsUrl)}function kK(e){return new Ji().post(Li.changeRoomFiltersUrl,{filters:e})}function PK(e){return new Ji().post(Li.changeHotelFiltersUrl,{filters:e})}function AK(e){return new Ji().post(Li.changeRoomSortOrderUrl,{value:e})}function IK(e){return new Ji().post(Li.changeHotelSortOrderUrl,{value:e})}function RK(e){return new Ji().post(Li.changeCurrencyUrl,{currency:e.value})}function LK(){return new Ji().get(Li.fetchSummaryUrl)}function MK(){return new Ji().get(Li.fetchTermsUrl)}function OK(e){return new Ji().post(Li.changeHotelUrl,{id:e})}function DK(){return{type:"FETCH_ROOMS_REQUEST"}}function NK(e,t=!1){return{type:"FETCH_ROOMS_SUCCESS",response:e,needsUpdating:t}}function jK(e,t){return{type:"FETCH_ROOMS_FAILURE",response:e,error:t}}function zK(){return{type:"RESET_SEARCH_PARAMS_REQUEST"}}function FK(){return{type:"RESET_SEARCH_PARAMS_SUCCESS"}}function BK(e){return{type:"RESET_SEARCH_PARAMS_FAILURE",error:e}}function UK(){return{type:"RESET_ROOM_PAGINATION"}}function $K(){return{type:"RESET_ROOMS_REQUEST"}}function kB(){return{type:"RESET_ALTERNATIVE_GUESTS_ALLOCATION"}}function GP(){return{type:"SET_SEARCH_PARAMETERS_REQUEST"}}function Zw(){return{type:"SET_SEARCH_PARAMETERS_SUCCESS"}}function WP(e){return{type:"SET_SEARCH_PARAMETERS_FAILURE",error:e}}function VK(){return{type:"CLEAN_SEARCH_PARAMETERS_FAILURE"}}function qw(e){return{type:"SET_SESSION",session:e}}function HK(e){return{type:"SET_CULTURE",culture:e}}function ZK(){return{type:"SET_CURRENCY_REQUEST"}}function qK(){return{type:"SET_CURRENCY_SUCCESS"}}function GK(){return{type:"SET_CURRENCY_FAILURE"}}function WK(){return{type:"CHANGE_LOCATION_REQUEST"}}const XK=e=>async t=>(await t(WK()),window.top.location.href=e,Promise.resolve());function KK(){return{type:"FETCH_SUMMARY_REQUEST"}}function YK(e){return{type:"FETCH_SUMMARY_SUCCESS",receivedAt:Date.now(),quote:e.summary.quote,paymentOptions:e.summary.paymentOptions,cancellationInsurance:e.summary.cancellationInsurance,countries:e.summary.countries,internationalCodes:e.summary.internationalCodes,titles:e.summary.titles,priceWarnings:e.summary.priceWarnings,occupancyWarning:e.summary.occupancyWarning,updatedAdultCount:e.summary.updatedAdultCount,notEnoughRooms:e.summary.notEnoughRooms,isBookingRequest:e.summary.isBookingRequest,isBasketUnavailable:e.summary.isBasketUnavailable,hasSmsConfirmation:e.summary.hasSmsConfirmation,paymentMethods:e.summary.paymentMethods}}function QK(e){return{type:"FETCH_SUMMARY_FAILURE",error:e}}function JK(){return{type:"SUBMIT_QUOTE_REQUEST"}}function eY(){return{type:"SUBMIT_QUOTE_SUCCESS",receivedAt:Date.now()}}function tY(){return{type:"SUBMIT_QUOTE_FAILURE"}}function dp(){return{type:"CLEAR_QUOTE"}}function nY(){return{type:"FETCH_TERMS_REQUEST"}}function rY(e){return{type:"FETCH_TERMS_SUCCESS",receivedAt:Date.now(),terms:e}}function iY(){return{type:"FETCH_TERMS_FAILURE"}}function ka(e){let t;return e&&typeof e=="object"&&"type"in e&&typeof e.type=="number"&&typeof e.type=="number"&&"messages"in e&&Array.isArray(e.messages)&&e.messages.length>0&&typeof e.messages[0]=="string"?t={type:e.type,messages:e.messages,code:e.code}:e instanceof Error?t={type:Ta.TechnicalError,messages:[e.message]}:t={type:Ta.TechnicalError,messages:[]},t}const sY=e=>{const t=document.location.search,n=/([\?&])currency=([^&]*)/;let r=null;const i=t.match(n);if(i&&(r=decodeURIComponent(i[1])),r!=e){const l=t.replace(n,(a,m)=>`${m}currency=${encodeURIComponent(e)}`),u=window.location.pathname+l+window.location.hash;window.history.replaceState({},"",u)}},UM=4;function $M(){return async(e,t)=>{var m;const n=t(),{session:r,calendar:i}=n,l=i.months.length,u=3+Fq(new Date,((m=r.stay.departureDate)==null?void 0:m.date)??new Date),a=l+UM<u?u:UM;if(oY(i.months,a)){e(lY());try{const{data:g}=await xK(a,l);e(cY(g))}catch(g){e(uY(ka(g)))}}}}function oY(e,t){const n=t+e.length-1;return!e[n]}function aY(){return{type:"CLEAR_CALENDAR"}}function lY(){return{type:"FETCH_CALENDAR_REQUEST"}}function cY(e){return{type:"FETCH_CALENDAR_SUCCESS",calendar:e}}function uY(e){return{type:"FETCH_CALENDAR_FAILURE",error:e}}const Gw=e=>({type:"SET_INVALID_PROMOCODE",invalidPromoCode:e}),OT=e=>({type:"SET_PROMOCODE",promocode:e}),PB=e=>({type:"SET_GUEST_POSITION",guestPositionUsed:e}),hg=e=>async t=>{t(GP());try{const n=await TB(e);return t(qw(n.data)),t(Zw()),!0}catch(n){return t(WP(ka(n))),!1}},dY=e=>async t=>{t(GP());try{return await _K(e),t(Zw()),!0}catch(n){return t(WP(ka(n))),!1}},hY=e=>async(t,n)=>{var a,m,g,w,C,P,I;const r=n(),i=(a=r.session)==null?void 0:a.stay.arrivalDate.date,l=Uq(i,e),u={stay:{arrivalDate:i,departureDate:l},guests:(m=r.session)==null?void 0:m.guests,selectedHotelId:(w=(g=r.session)==null?void 0:g.selectedHotel)==null?void 0:w.id,promoCode:((C=r.session)==null?void 0:C.promoCode)??"",coordinates:((I=(P=r.session)==null?void 0:P.selectedHotel)==null?void 0:I.coordinates)??null,focusedRoomForExtras:null};t(GP());try{const N=await TB(u);return t(qw(N.data)),t(Zw()),!0}catch(N){return t(WP(ka(N))),!1}},fY=e=>async t=>{t(HK(e.value)),t(aY())},pY=e=>async t=>{t(ZK());try{const n=await RK(e);t(qK()),t(qw(n.data)),sY(e.value)}catch{t(GK())}};function mY(){return{type:"CHANGE_ROOM_FILTERS_REQUEST"}}function gY(e){return{type:"CHANGE_ROOM_FILTERS_SUCCESS",session:e}}function yY(e){return{type:"CHANGE_ROOM_FILTERS_FAILURE",error:e}}const XP=e=>async t=>{try{t(mY());const n=await kK(e);return t(gY(n.data)),n&&t(UK()),!0}catch{return t(yY({type:mi.ErrorWithFilters,messages:[]})),!1}};function vY(){return{type:"CHANGE_ROOM_SORT_ORDER_REQUEST"}}function _Y(e){return{type:"CHANGE_ROOM_SORT_ORDER_SUCCESS",session:e}}function xY(e){return{type:"CHANGE_ROOM_SORT_ORDER_FAILURE",error:e}}const AB=e=>async t=>{t(vY());try{const n=await AK(e);return t(_Y(n.data)),!0}catch{return t(xY({type:mi.ErrorWithSortOrder,messages:[]})),!1}},bY=e=>({type:"SET_STAY",stay:e}),wY=e=>{if(!e.departureDate||!e.arrivalDate)return 0;const t=new Date(e.arrivalDate.date),n=new Date(e.departureDate.date),r=t.getTime()-n.getTime();return Math.abs(Math.ceil(r/(1e3*3600*24)))},IB=e=>(t,n)=>{const r=n().session.stay;t(bY({...r,...e,departureDate:e.departureDate?e.departureDate:void 0,nightCount:wY(e)}))},k_=e=>({type:"SET_GUESTS",guests:e}),RB=e=>t=>{t(k_(e))},SY=e=>(t,n)=>{const r=[...n().session.guests],i=r.findIndex(l=>l.position===e.position);r[i]={...r[i],...e},t(k_(r))},EY=e=>(t,n)=>{const i=[...n().session.guests].filter(l=>l.position!==e.position);return t(k_(i)),i},KP=e=>(t,n)=>{const i=[...[...n().session.guests],e];t(k_(i))},CY=()=>(e,t)=>{const r=[...t().session.guests].map((i,l)=>({...i,position:l+1}));e(k_(r))};function TY(){return{type:"CHANGE_HOTEL_REQUEST"}}function kY(){return{type:"CHANGE_HOTEL_SUCCESS"}}function PY(){return{type:"CHANGE_HOTEL_FAILURE"}}const LB=e=>async t=>{t(TY());try{const n=await OK(e);t(qw(n.data)),t(kY())}catch{t(PY())}};function AY(){return{type:"CHANGE_HOTEL_FILTERS_REQUEST"}}function IY(e){return{type:"CHANGE_HOTEL_FILTERS_SUCCESS",session:e}}function RY(e){return{type:"CHANGE_HOTEL_FILTERS_FAILURE",error:e}}const LY=e=>async t=>{try{t(AY());const n=await PK(e);t(IY(n.data))}catch{t(RY({type:dh.ErrorWithFilters,messages:[]}))}};function MY(){return{type:"CHANGE_HOTEL_SORT_ORDER_REQUEST"}}function OY(e){return{type:"CHANGE_HOTEL_SORT_ORDER_SUCCESS",session:e}}function DY(e){return{type:"CHANGE_HOTEL_SORT_ORDER_FAILURE",error:e}}const NY=e=>async t=>{t(MY());try{const n=await IK(e);return t(OY(n.data)),!0}catch{return t(DY({type:dh.ErrorWithSortOrder,messages:[]})),!1}};function jY(e){return{type:"SET_BASKET",basket:e}}function zY(){return{type:"UPSERT_ROOM_REQUEST"}}function FY(e){return{type:"UPSERT_ROOM_SUCCESS",basket:e}}function BY(e){return{type:"UPSERT_ROOM_FAILURE",error:e}}function UY(){return{type:"UPSERT_EXTRA_REQUEST"}}function $Y(e){return{type:"UPSERT_EXTRA_SUCCESS",basket:e}}function VY(e){return{type:"UPSERT_EXTRA_FAILURE",error:e}}function HY(){return{type:"CLEAR_BASKET_REQUEST"}}function ZY(e){return{type:"CLEAR_BASKET_SUCCESS",basket:e}}function qY(e){return{type:"CLEAR_BASKET_FAILURE",error:e}}const Qy=()=>async e=>{e(HY());try{const t=await bK();e(ZY(t.data)),e(dp()),e(PB(1))}catch(t){e(qY(ka(t)))}},MB=(e,t)=>async n=>{const r=t===0;await n(UY());try{const i=await CK(e,t);return n($Y(i.data)),!0}catch(i){let l=ka(i);return l.type!==Ta.SessionExpired&&l.type!==Ta.TechnicalError&&(l={type:r?Xf.ErrorDeleteExtra:Xf.ErrorAddingExtra,messages:l.messages}),n(VY(l)),l.type!==Xf.ErrorDeleteExtra}};function OB(){return async e=>{await e({type:"RESET_BASKET_ERROR"})}}const DB=(e,t,n,r,i)=>async l=>{l(zY());try{const u=await EK(e.id,t.id,e.occupancyId,r,n,i);return u.data!==null?(l(FY(u.data)),u.data):void 0}catch(u){l(BY(ka(u)));return}},GY=()=>async e=>{e({type:"INCOMPLETE_BASKET"})},Ww=()=>async(e,t)=>{const n=t();await e(WY());try{const r=await new Ji().get(n.configuration.controllerUrls.fetchExtrasUrl);await e(XY(r.data));return}catch(r){await e(KY(ka(r)));return}};function WY(){return{type:"FETCH_EXTRAS_REQUEST"}}function XY(e){return{type:"FETCH_EXTRAS_SUCCESS",extras:e.extras}}function KY(e){return{type:"FETCH_EXTRAS_FAILURE",error:e}}const YY=e=>Nf[e],QY=e=>PP[e],NB=()=>async(e,t)=>{const n=t();await e(KK());try{const r=await LK();if(await e(YK(r.data)),r.data.basket&&n.roomSelection.rooms.length){const i={...r.data.basket,rooms:r.data.basket.rooms.map(l=>{const u=n.roomSelection.rooms.find(({id:g})=>g===l.id),a=u==null?void 0:u.rates.find(({id:g})=>g===l.rates[0].id),m={...l.rates[0],isLoyalty:(a==null?void 0:a.isLoyalty)??l.rates[0].isLoyalty};return{...l,rates:m?[m]:[]}})};await e(jY(i))}return}catch(r){await e(QK(ka(r)));return}},jB=e=>({type:"UPDATE_GUEST_INFORMATION",guestInformation:e}),JY=()=>async(e,t)=>{const n=t(),{summary:r}=n,{guestInformation:i}=r,l=(i==null?void 0:i.paymentName)??null,u=r.paymentOptions.find(g=>g.paymentName===l),a=u?u.type:null,m={paymentName:l,paymentType:a,isCancellationInsuranceSelected:!!i.cancellationInsurance,customerDetails:{title:i.title,firstName:i.firstName,lastName:i.lastName,emailAddress:i.email,phoneNumber:i.phone,phoneIndicative:i.phoneCountryCode,country:i.country,arrivalTime:i.checkinTime,addressLines:[(i==null?void 0:i.address)??""],cityName:i==null?void 0:i.city,state:i==null?void 0:i.state,postalCode:i==null?void 0:i.zipcode,marketingConsent:{optin:{hotel:r.quote.marketing.optin.hotel,partners:r.quote.marketing.optin.partners},optinAccepted:{hotel:i.hotelPromotion??!1,partners:i.partnersPromotion??!1}}},guestsPerRooms:eQ(i.guestsRepartition),specialRequest:i.specialRequest,registerLoyalty:!1};e(JK());try{const g=await yK(m);e(eY()),e(XK(g.data.url))}catch{e(tY());const w=document.querySelector(".cvg-summary-container__form");window.scroll({top:(w==null?void 0:w.offsetTop)??0,left:0,behavior:"smooth"})}};function eQ(e){const t={};return e==null||e.forEach((n,r)=>{var i;(i=n==null?void 0:n.guests)==null||i.forEach(l=>{var a,m;const u=`${l.roomId}-${l.occupancyId}-${r}`;t[u]||(t[u]={roomId:l.roomId,occupancyId:l.occupancyId,guests:[]}),(m=(a=t[u])==null?void 0:a.guests)==null||m.push({title:l.title,lastName:l.lastName,firstName:l.firstName,age:l.age})})}),Object.values(t)}/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ii.apply(this,arguments)}var Fi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fi||(Fi={}));const VM="popstate";function tQ(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,i;i=t.map((I,N)=>w(I,typeof I=="string"?null:I.state,N===0?"default":void 0));let l=m(n??i.length-1),u=Fi.Pop,a=null;function m(I){return Math.min(Math.max(I,0),i.length-1)}function g(){return i[l]}function w(I,N,z){N===void 0&&(N=null);let $=fg(i?g().pathname:"/",I,N,z);return hp($.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(I)),$}function C(I){return typeof I=="string"?I:od(I)}return{get index(){return l},get action(){return u},get location(){return g()},createHref:C,createURL(I){return new URL(C(I),"http://localhost")},encodeLocation(I){let N=typeof I=="string"?fd(I):I;return{pathname:N.pathname||"",search:N.search||"",hash:N.hash||""}},push(I,N){u=Fi.Push;let z=w(I,N);l+=1,i.splice(l,i.length,z),r&&a&&a({action:u,location:z,delta:1})},replace(I,N){u=Fi.Replace;let z=w(I,N);i[l]=z,r&&a&&a({action:u,location:z,delta:0})},go(I){u=Fi.Pop;let N=m(l+I),z=i[N];l=N,a&&a({action:u,location:z,delta:I})},listen(I){return a=I,()=>{a=null}}}}function nQ(e){e===void 0&&(e={});function t(r,i){let{pathname:l,search:u,hash:a}=r.location;return fg("",{pathname:l,search:u,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:od(i)}return iQ(t,n,null,e)}function Mr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rQ(){return Math.random().toString(36).substr(2,8)}function HM(e,t){return{usr:e.state,key:e.key,idx:t}}function fg(e,t,n,r){return n===void 0&&(n=null),Ii({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fd(t):t,{state:n,key:t&&t.key||r||rQ()})}function od(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function fd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function iQ(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,u=i.history,a=Fi.Pop,m=null,g=w();g==null&&(g=0,u.replaceState(Ii({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function C(){a=Fi.Pop;let $=w(),H=$==null?null:$-g;g=$,m&&m({action:a,location:z.location,delta:H})}function P($,H){a=Fi.Push;let V=fg(z.location,$,H);g=w()+1;let q=HM(V,g),te=z.createHref(V);try{u.pushState(q,"",te)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;i.location.assign(te)}l&&m&&m({action:a,location:z.location,delta:1})}function I($,H){a=Fi.Replace;let V=fg(z.location,$,H);g=w();let q=HM(V,g),te=z.createHref(V);u.replaceState(q,"",te),l&&m&&m({action:a,location:z.location,delta:0})}function N($){let H=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof $=="string"?$:od($);return V=V.replace(/ $/,"%20"),Mr(H,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,H)}let z={get action(){return a},get location(){return e(i,u)},listen($){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(VM,C),m=$,()=>{i.removeEventListener(VM,C),m=null}},createHref($){return t(i,$)},createURL:N,encodeLocation($){let H=N($);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:P,replace:I,go($){return u.go($)}};return z}var ri;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ri||(ri={}));const sQ=new Set(["lazy","caseSensitive","path","id","index","children"]);function oQ(e){return e.index===!0}function c0(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,l)=>{let u=[...n,String(l)],a=typeof i.id=="string"?i.id:u.join("-");if(Mr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Mr(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),oQ(i)){let m=Ii({},i,t(i),{id:a});return r[a]=m,m}else{let m=Ii({},i,t(i),{id:a,children:void 0});return r[a]=m,i.children&&(m.children=c0(i.children,t,u,r)),m}})}function hh(e,t,n){return n===void 0&&(n="/"),fb(e,t,n,!1)}function fb(e,t,n,r){let i=typeof t=="string"?fd(t):t,l=$h(i.pathname||"/",n);if(l==null)return null;let u=zB(e);lQ(u);let a=null;for(let m=0;a==null&&m<u.length;++m){let g=_Q(l);a=yQ(u[m],g,r)}return a}function aQ(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function zB(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(l,u,a)=>{let m={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(Mr(m.relativePath.startsWith(r),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(r.length));let g=ru([r,m.relativePath]),w=n.concat(m);l.children&&l.children.length>0&&(Mr(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),zB(l.children,t,w,g)),!(l.path==null&&!l.index)&&t.push({path:g,score:mQ(g,l.index),routesMeta:w})};return e.forEach((l,u)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))i(l,u);else for(let m of FB(l.path))i(l,u,m)}),t}function FB(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let u=FB(r.join("/")),a=[];return a.push(...u.map(m=>m===""?l:[l,m].join("/"))),i&&a.push(...u),a.map(m=>e.startsWith("/")&&m===""?"/":m)}function lQ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:gQ(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cQ=/^:[\w-]+$/,uQ=3,dQ=2,hQ=1,fQ=10,pQ=-2,ZM=e=>e==="*";function mQ(e,t){let n=e.split("/"),r=n.length;return n.some(ZM)&&(r+=pQ),t&&(r+=dQ),n.filter(i=>!ZM(i)).reduce((i,l)=>i+(cQ.test(l)?uQ:l===""?hQ:fQ),r)}function gQ(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yQ(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},l="/",u=[];for(let a=0;a<r.length;++a){let m=r[a],g=a===r.length-1,w=l==="/"?t:t.slice(l.length)||"/",C=qM({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),P=m.route;if(!C&&g&&n&&!r[r.length-1].route.index&&(C=qM({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},w)),!C)return null;Object.assign(i,C.params),u.push({params:i,pathname:ru([l,C.pathname]),pathnameBase:wQ(ru([l,C.pathnameBase])),route:P}),C.pathnameBase!=="/"&&(l=ru([l,C.pathnameBase]))}return u}function qM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vQ(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let l=i[0],u=l.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((g,w,C)=>{let{paramName:P,isOptional:I}=w;if(P==="*"){let z=a[C]||"";u=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const N=a[C];return I&&!N?g[P]=void 0:g[P]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:e}}function vQ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),hp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,a,m)=>(r.push({paramName:a,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function _Q(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $h(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function xQ(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?fd(e):e;return{pathname:n?n.startsWith("/")?n:bQ(n,t):t,search:SQ(r),hash:EQ(i)}}function bQ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zE(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function YP(e,t){let n=BB(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function QP(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=fd(e):(i=Ii({},e),Mr(!i.pathname||!i.pathname.includes("?"),zE("?","pathname","search",i)),Mr(!i.pathname||!i.pathname.includes("#"),zE("#","pathname","hash",i)),Mr(!i.search||!i.search.includes("#"),zE("#","search","hash",i)));let l=e===""||i.pathname==="",u=l?"/":i.pathname,a;if(u==null)a=n;else{let C=t.length-1;if(!r&&u.startsWith("..")){let P=u.split("/");for(;P[0]==="..";)P.shift(),C-=1;i.pathname=P.join("/")}a=C>=0?t[C]:"/"}let m=xQ(i,a),g=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}const ru=e=>e.join("/").replace(/\/\/+/g,"/"),wQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Yf=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,Ii({},r,{headers:i}))};class u0{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function zv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const UB=["post","put","patch","delete"],CQ=new Set(UB),TQ=["get",...UB],kQ=new Set(TQ),PQ=new Set([301,302,303,307,308]),AQ=new Set([307,308]),FE={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IQ={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_y={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},JP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RQ=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),$B="remix-router-transitions";function VB(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Mr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let ne=e.detectErrorBoundary;i=ve=>({hasErrorBoundary:ne(ve)})}else i=RQ;let l={},u=c0(e.routes,i,void 0,l),a,m=e.basename||"/",g=e.dataStrategy||DQ,w=e.patchRoutesOnNavigation,C=Ii({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),P=null,I=new Set,N=null,z=null,$=null,H=e.hydrationData!=null,V=hh(u,e.history.location,m),q=!1,te=null;if(V==null&&!w){let ne=ga(404,{pathname:e.history.location.pathname}),{matches:ve,route:Ie}=rO(u);V=ve,te={[Ie.id]:ne}}V&&!e.hydrationData&&Se(V,u,e.history.location.pathname).active&&(V=null);let ue;if(V)if(V.some(ne=>ne.route.lazy))ue=!1;else if(!V.some(ne=>ne.route.loader))ue=!0;else if(C.v7_partialHydration){let ne=e.hydrationData?e.hydrationData.loaderData:null,ve=e.hydrationData?e.hydrationData.errors:null;if(ve){let Ie=V.findIndex(Ee=>ve[Ee.route.id]!==void 0);ue=V.slice(0,Ie+1).every(Ee=>!NT(Ee.route,ne,ve))}else ue=V.every(Ie=>!NT(Ie.route,ne,ve))}else ue=e.hydrationData!=null;else if(ue=!1,V=[],C.v7_partialHydration){let ne=Se(null,u,e.history.location.pathname);ne.active&&ne.matches&&(q=!0,V=ne.matches)}let fe,Z={historyAction:e.history.action,location:e.history.location,matches:V,initialized:ue,navigation:FE,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||te,fetchers:new Map,blockers:new Map},le=Fi.Pop,be=!1,Re,Je=!1,Fe=new Map,Xe=null,gt=!1,yt=!1,lt=[],Nt=new Set,qe=new Map,_t=0,Ke=-1,we=new Map,He=new Set,Be=new Map,ct=new Map,xt=new Set,bt=new Map,It=new Map,qt;function fn(){if(P=e.history.listen(ne=>{let{action:ve,location:Ie,delta:Ee}=ne;if(qt){qt(),qt=void 0;return}hp(It.size===0||Ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=ls({currentLocation:Z.location,nextLocation:Ie,historyAction:ve});if(Ve&&Ee!=null){let Et=new Promise(At=>{qt=At});e.history.go(Ee*-1),Ei(Ve,{state:"blocked",location:Ie,proceed(){Ei(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Et.then(()=>e.history.go(Ee))},reset(){let At=new Map(Z.blockers);At.set(Ve,_y),Vt({blockers:At})}});return}return Qe(ve,Ie)}),n){XQ(t,Fe);let ne=()=>KQ(t,Fe);t.addEventListener("pagehide",ne),Xe=()=>t.removeEventListener("pagehide",ne)}return Z.initialized||Qe(Fi.Pop,Z.location,{initialHydration:!0}),fe}function wn(){P&&P(),Xe&&Xe(),I.clear(),Re&&Re.abort(),Z.fetchers.forEach((ne,ve)=>fr(ve)),Z.blockers.forEach((ne,ve)=>Wn(ve))}function an(ne){return I.add(ne),()=>I.delete(ne)}function Vt(ne,ve){ve===void 0&&(ve={}),Z=Ii({},Z,ne);let Ie=[],Ee=[];C.v7_fetcherPersist&&Z.fetchers.forEach((Ve,Et)=>{Ve.state==="idle"&&(xt.has(Et)?Ee.push(Et):Ie.push(Et))}),xt.forEach(Ve=>{!Z.fetchers.has(Ve)&&!qe.has(Ve)&&Ee.push(Ve)}),[...I].forEach(Ve=>Ve(Z,{deletedFetchers:Ee,viewTransitionOpts:ve.viewTransitionOpts,flushSync:ve.flushSync===!0})),C.v7_fetcherPersist?(Ie.forEach(Ve=>Z.fetchers.delete(Ve)),Ee.forEach(Ve=>fr(Ve))):Ee.forEach(Ve=>xt.delete(Ve))}function Cn(ne,ve,Ie){var Ee,Ve;let{flushSync:Et}=Ie===void 0?{}:Ie,At=Z.actionData!=null&&Z.navigation.formMethod!=null&&ic(Z.navigation.formMethod)&&Z.navigation.state==="loading"&&((Ee=ne.state)==null?void 0:Ee._isRedirect)!==!0,jt;ve.actionData?Object.keys(ve.actionData).length>0?jt=ve.actionData:jt=null:At?jt=Z.actionData:jt=null;let kt=ve.loaderData?tO(Z.loaderData,ve.loaderData,ve.matches||[],ve.errors):Z.loaderData,Ot=Z.blockers;Ot.size>0&&(Ot=new Map(Ot),Ot.forEach((Dn,Nn)=>Ot.set(Nn,_y)));let zt=be===!0||Z.navigation.formMethod!=null&&ic(Z.navigation.formMethod)&&((Ve=ne.state)==null?void 0:Ve._isRedirect)!==!0;a&&(u=a,a=void 0),gt||le===Fi.Pop||(le===Fi.Push?e.history.push(ne,ne.state):le===Fi.Replace&&e.history.replace(ne,ne.state));let In;if(le===Fi.Pop){let Dn=Fe.get(Z.location.pathname);Dn&&Dn.has(ne.pathname)?In={currentLocation:Z.location,nextLocation:ne}:Fe.has(ne.pathname)&&(In={currentLocation:ne,nextLocation:Z.location})}else if(Je){let Dn=Fe.get(Z.location.pathname);Dn?Dn.add(ne.pathname):(Dn=new Set([ne.pathname]),Fe.set(Z.location.pathname,Dn)),In={currentLocation:Z.location,nextLocation:ne}}Vt(Ii({},ve,{actionData:jt,loaderData:kt,historyAction:le,location:ne,initialized:!0,navigation:FE,revalidation:"idle",restoreScrollPosition:pe(ne,ve.matches||Z.matches),preventScrollReset:zt,blockers:Ot}),{viewTransitionOpts:In,flushSync:Et===!0}),le=Fi.Pop,be=!1,Je=!1,gt=!1,yt=!1,lt=[]}async function Tn(ne,ve){if(typeof ne=="number"){e.history.go(ne);return}let Ie=DT(Z.location,Z.matches,m,C.v7_prependBasename,ne,C.v7_relativeSplatPath,ve==null?void 0:ve.fromRouteId,ve==null?void 0:ve.relative),{path:Ee,submission:Ve,error:Et}=GM(C.v7_normalizeFormMethod,!1,Ie,ve),At=Z.location,jt=fg(Z.location,Ee,ve&&ve.state);jt=Ii({},jt,e.history.encodeLocation(jt));let kt=ve&&ve.replace!=null?ve.replace:void 0,Ot=Fi.Push;kt===!0?Ot=Fi.Replace:kt===!1||Ve!=null&&ic(Ve.formMethod)&&Ve.formAction===Z.location.pathname+Z.location.search&&(Ot=Fi.Replace);let zt=ve&&"preventScrollReset"in ve?ve.preventScrollReset===!0:void 0,In=(ve&&ve.flushSync)===!0,Dn=ls({currentLocation:At,nextLocation:jt,historyAction:Ot});if(Dn){Ei(Dn,{state:"blocked",location:jt,proceed(){Ei(Dn,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),Tn(ne,ve)},reset(){let Nn=new Map(Z.blockers);Nn.set(Dn,_y),Vt({blockers:Nn})}});return}return await Qe(Ot,jt,{submission:Ve,pendingError:Et,preventScrollReset:zt,replace:ve&&ve.replace,enableViewTransition:ve&&ve.viewTransition,flushSync:In})}function Fn(){if(ln(),Vt({revalidation:"loading"}),Z.navigation.state!=="submitting"){if(Z.navigation.state==="idle"){Qe(Z.historyAction,Z.location,{startUninterruptedRevalidation:!0});return}Qe(le||Z.historyAction,Z.navigation.location,{overrideNavigation:Z.navigation,enableViewTransition:Je===!0})}}async function Qe(ne,ve,Ie){Re&&Re.abort(),Re=null,le=ne,gt=(Ie&&Ie.startUninterruptedRevalidation)===!0,ie(Z.location,Z.matches),be=(Ie&&Ie.preventScrollReset)===!0,Je=(Ie&&Ie.enableViewTransition)===!0;let Ee=a||u,Ve=Ie&&Ie.overrideNavigation,Et=Ie!=null&&Ie.initialHydration&&Z.matches&&Z.matches.length>0&&!q?Z.matches:hh(Ee,ve,m),At=(Ie&&Ie.flushSync)===!0,jt=Se(Et,Ee,ve.pathname);if(jt.active&&jt.matches&&(Et=jt.matches),!Et){let{error:Un,notFoundMatches:$n,route:ir}=es(ve.pathname);Cn(ve,{matches:$n,loaderData:{},errors:{[ir.id]:Un}},{flushSync:At});return}if(Z.initialized&&!yt&&UQ(Z.location,ve)&&!(Ie&&Ie.submission&&ic(Ie.submission.formMethod))){Cn(ve,{matches:Et},{flushSync:At});return}Re=new AbortController;let kt=um(e.history,ve,Re.signal,Ie&&Ie.submission),Ot;if(Ie&&Ie.pendingError)Ot=[zf(Et).route.id,{type:ri.error,error:Ie.pendingError}];else if(Ie&&Ie.submission&&ic(Ie.submission.formMethod)){let Un=await zn(kt,ve,Ie.submission,Et,jt.active,{replace:Ie.replace,flushSync:At});if(Un.shortCircuited)return;if(Un.pendingActionResult){let[$n,ir]=Un.pendingActionResult;if(Va(ir)&&zv(ir.error)&&ir.error.status===404){Re=null,Cn(ve,{matches:Un.matches,loaderData:{},errors:{[$n]:ir.error}});return}}Et=Un.matches||Et,Ot=Un.pendingActionResult,Ve=BE(ve,Ie.submission),At=!1,jt.active=!1,kt=um(e.history,kt.url,kt.signal)}let{shortCircuited:zt,matches:In,loaderData:Dn,errors:Nn}=await Le(kt,ve,Et,jt.active,Ve,Ie&&Ie.submission,Ie&&Ie.fetcherSubmission,Ie&&Ie.replace,Ie&&Ie.initialHydration===!0,At,Ot);zt||(Re=null,Cn(ve,Ii({matches:In||Et},nO(Ot),{loaderData:Dn,errors:Nn})))}async function zn(ne,ve,Ie,Ee,Ve,Et){Et===void 0&&(Et={}),ln();let At=GQ(ve,Ie);if(Vt({navigation:At},{flushSync:Et.flushSync===!0}),Ve){let Ot=await Ue(Ee,ve.pathname,ne.signal);if(Ot.type==="aborted")return{shortCircuited:!0};if(Ot.type==="error"){let zt=zf(Ot.partialMatches).route.id;return{matches:Ot.partialMatches,pendingActionResult:[zt,{type:ri.error,error:Ot.error}]}}else if(Ot.matches)Ee=Ot.matches;else{let{notFoundMatches:zt,error:In,route:Dn}=es(ve.pathname);return{matches:zt,pendingActionResult:[Dn.id,{type:ri.error,error:In}]}}}let jt,kt=My(Ee,ve);if(!kt.route.action&&!kt.route.lazy)jt={type:ri.error,error:ga(405,{method:ne.method,pathname:ve.pathname,routeId:kt.route.id})};else if(jt=(await pn("action",Z,ne,[kt],Ee,null))[kt.route.id],ne.signal.aborted)return{shortCircuited:!0};if(Hf(jt)){let Ot;return Et&&Et.replace!=null?Ot=Et.replace:Ot=QM(jt.response.headers.get("Location"),new URL(ne.url),m)===Z.location.pathname+Z.location.search,await Bt(ne,jt,!0,{submission:Ie,replace:Ot}),{shortCircuited:!0}}if(_h(jt))throw ga(400,{type:"defer-action"});if(Va(jt)){let Ot=zf(Ee,kt.route.id);return(Et&&Et.replace)!==!0&&(le=Fi.Push),{matches:Ee,pendingActionResult:[Ot.route.id,jt]}}return{matches:Ee,pendingActionResult:[kt.route.id,jt]}}async function Le(ne,ve,Ie,Ee,Ve,Et,At,jt,kt,Ot,zt){let In=Ve||BE(ve,Et),Dn=Et||At||sO(In),Nn=!gt&&(!C.v7_partialHydration||!kt);if(Ee){if(Nn){let mr=De(zt);Vt(Ii({navigation:In},mr!==void 0?{actionData:mr}:{}),{flushSync:Ot})}let Kn=await Ue(Ie,ve.pathname,ne.signal);if(Kn.type==="aborted")return{shortCircuited:!0};if(Kn.type==="error"){let mr=zf(Kn.partialMatches).route.id;return{matches:Kn.partialMatches,loaderData:{},errors:{[mr]:Kn.error}}}else if(Kn.matches)Ie=Kn.matches;else{let{error:mr,notFoundMatches:gs,route:Mi}=es(ve.pathname);return{matches:gs,loaderData:{},errors:{[Mi.id]:mr}}}}let Un=a||u,[$n,ir]=XM(e.history,Z,Ie,Dn,ve,C.v7_partialHydration&&kt===!0,C.v7_skipActionErrorRevalidation,yt,lt,Nt,xt,Be,He,Un,m,zt);if(ts(Kn=>!(Ie&&Ie.some(mr=>mr.route.id===Kn))||$n&&$n.some(mr=>mr.route.id===Kn)),Ke=++_t,$n.length===0&&ir.length===0){let Kn=Sn();return Cn(ve,Ii({matches:Ie,loaderData:{},errors:zt&&Va(zt[1])?{[zt[0]]:zt[1].error}:null},nO(zt),Kn?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:Ot}),{shortCircuited:!0}}if(Nn){let Kn={};if(!Ee){Kn.navigation=In;let mr=De(zt);mr!==void 0&&(Kn.actionData=mr)}ir.length>0&&(Kn.fetchers=Ye(ir)),Vt(Kn,{flushSync:Ot})}ir.forEach(Kn=>{ut(Kn.key),Kn.controller&&qe.set(Kn.key,Kn.controller)});let Zr=()=>ir.forEach(Kn=>ut(Kn.key));Re&&Re.signal.addEventListener("abort",Zr);let{loaderResults:oi,fetcherResults:Ci}=await nn(Z,Ie,$n,ir,ne);if(ne.signal.aborted)return{shortCircuited:!0};Re&&Re.signal.removeEventListener("abort",Zr),ir.forEach(Kn=>qe.delete(Kn.key));let ur=Vx(oi);if(ur)return await Bt(ne,ur.result,!0,{replace:jt}),{shortCircuited:!0};if(ur=Vx(Ci),ur)return He.add(ur.key),await Bt(ne,ur.result,!0,{replace:jt}),{shortCircuited:!0};let{loaderData:Pa,errors:po}=eO(Z,Ie,oi,zt,ir,Ci,bt);bt.forEach((Kn,mr)=>{Kn.subscribe(gs=>{(gs||Kn.done)&&bt.delete(mr)})}),C.v7_partialHydration&&kt&&Z.errors&&(po=Ii({},Z.errors,po));let Wr=Sn(),yi=Gr(Ke),Js=Wr||yi||ir.length>0;return Ii({matches:Ie,loaderData:Pa,errors:po},Js?{fetchers:new Map(Z.fetchers)}:{})}function De(ne){if(ne&&!Va(ne[1]))return{[ne[0]]:ne[1].data};if(Z.actionData)return Object.keys(Z.actionData).length===0?null:Z.actionData}function Ye(ne){return ne.forEach(ve=>{let Ie=Z.fetchers.get(ve.key),Ee=xy(void 0,Ie?Ie.data:void 0);Z.fetchers.set(ve.key,Ee)}),new Map(Z.fetchers)}function mt(ne,ve,Ie,Ee){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ut(ne);let Ve=(Ee&&Ee.flushSync)===!0,Et=a||u,At=DT(Z.location,Z.matches,m,C.v7_prependBasename,Ie,C.v7_relativeSplatPath,ve,Ee==null?void 0:Ee.relative),jt=hh(Et,At,m),kt=Se(jt,Et,At);if(kt.active&&kt.matches&&(jt=kt.matches),!jt){Mn(ne,ve,ga(404,{pathname:At}),{flushSync:Ve});return}let{path:Ot,submission:zt,error:In}=GM(C.v7_normalizeFormMethod,!0,At,Ee);if(In){Mn(ne,ve,In,{flushSync:Ve});return}let Dn=My(jt,Ot),Nn=(Ee&&Ee.preventScrollReset)===!0;if(zt&&ic(zt.formMethod)){ft(ne,ve,Ot,Dn,jt,kt.active,Ve,Nn,zt);return}Be.set(ne,{routeId:ve,path:Ot}),wt(ne,ve,Ot,Dn,jt,kt.active,Ve,Nn,zt)}async function ft(ne,ve,Ie,Ee,Ve,Et,At,jt,kt){ln(),Be.delete(ne);function Ot(mn){if(!mn.route.action&&!mn.route.lazy){let Sr=ga(405,{method:kt.formMethod,pathname:Ie,routeId:ve});return Mn(ne,ve,Sr,{flushSync:At}),!0}return!1}if(!Et&&Ot(Ee))return;let zt=Z.fetchers.get(ne);it(ne,WQ(kt,zt),{flushSync:At});let In=new AbortController,Dn=um(e.history,Ie,In.signal,kt);if(Et){let mn=await Ue(Ve,new URL(Dn.url).pathname,Dn.signal);if(mn.type==="aborted")return;if(mn.type==="error"){Mn(ne,ve,mn.error,{flushSync:At});return}else if(mn.matches){if(Ve=mn.matches,Ee=My(Ve,Ie),Ot(Ee))return}else{Mn(ne,ve,ga(404,{pathname:Ie}),{flushSync:At});return}}qe.set(ne,In);let Nn=_t,$n=(await pn("action",Z,Dn,[Ee],Ve,ne))[Ee.route.id];if(Dn.signal.aborted){qe.get(ne)===In&&qe.delete(ne);return}if(C.v7_fetcherPersist&&xt.has(ne)){if(Hf($n)||Va($n)){it(ne,ih(void 0));return}}else{if(Hf($n))if(qe.delete(ne),Ke>Nn){it(ne,ih(void 0));return}else return He.add(ne),it(ne,xy(kt)),Bt(Dn,$n,!1,{fetcherSubmission:kt,preventScrollReset:jt});if(Va($n)){Mn(ne,ve,$n.error);return}}if(_h($n))throw ga(400,{type:"defer-action"});let ir=Z.navigation.location||Z.location,Zr=um(e.history,ir,In.signal),oi=a||u,Ci=Z.navigation.state!=="idle"?hh(oi,Z.navigation.location,m):Z.matches;Mr(Ci,"Didn't find any matches after fetcher action");let ur=++_t;we.set(ne,ur);let Pa=xy(kt,$n.data);Z.fetchers.set(ne,Pa);let[po,Wr]=XM(e.history,Z,Ci,kt,ir,!1,C.v7_skipActionErrorRevalidation,yt,lt,Nt,xt,Be,He,oi,m,[Ee.route.id,$n]);Wr.filter(mn=>mn.key!==ne).forEach(mn=>{let Sr=mn.key,Hi=Z.fetchers.get(Sr),$r=xy(void 0,Hi?Hi.data:void 0);Z.fetchers.set(Sr,$r),ut(Sr),mn.controller&&qe.set(Sr,mn.controller)}),Vt({fetchers:new Map(Z.fetchers)});let yi=()=>Wr.forEach(mn=>ut(mn.key));In.signal.addEventListener("abort",yi);let{loaderResults:Js,fetcherResults:Kn}=await nn(Z,Ci,po,Wr,Zr);if(In.signal.aborted)return;In.signal.removeEventListener("abort",yi),we.delete(ne),qe.delete(ne),Wr.forEach(mn=>qe.delete(mn.key));let mr=Vx(Js);if(mr)return Bt(Zr,mr.result,!1,{preventScrollReset:jt});if(mr=Vx(Kn),mr)return He.add(mr.key),Bt(Zr,mr.result,!1,{preventScrollReset:jt});let{loaderData:gs,errors:Mi}=eO(Z,Ci,Js,void 0,Wr,Kn,bt);if(Z.fetchers.has(ne)){let mn=ih($n.data);Z.fetchers.set(ne,mn)}Gr(ur),Z.navigation.state==="loading"&&ur>Ke?(Mr(le,"Expected pending action"),Re&&Re.abort(),Cn(Z.navigation.location,{matches:Ci,loaderData:gs,errors:Mi,fetchers:new Map(Z.fetchers)})):(Vt({errors:Mi,loaderData:tO(Z.loaderData,gs,Ci,Mi),fetchers:new Map(Z.fetchers)}),yt=!1)}async function wt(ne,ve,Ie,Ee,Ve,Et,At,jt,kt){let Ot=Z.fetchers.get(ne);it(ne,xy(kt,Ot?Ot.data:void 0),{flushSync:At});let zt=new AbortController,In=um(e.history,Ie,zt.signal);if(Et){let $n=await Ue(Ve,new URL(In.url).pathname,In.signal);if($n.type==="aborted")return;if($n.type==="error"){Mn(ne,ve,$n.error,{flushSync:At});return}else if($n.matches)Ve=$n.matches,Ee=My(Ve,Ie);else{Mn(ne,ve,ga(404,{pathname:Ie}),{flushSync:At});return}}qe.set(ne,zt);let Dn=_t,Un=(await pn("loader",Z,In,[Ee],Ve,ne))[Ee.route.id];if(_h(Un)&&(Un=await eA(Un,In.signal,!0)||Un),qe.get(ne)===zt&&qe.delete(ne),!In.signal.aborted){if(xt.has(ne)){it(ne,ih(void 0));return}if(Hf(Un))if(Ke>Dn){it(ne,ih(void 0));return}else{He.add(ne),await Bt(In,Un,!1,{preventScrollReset:jt});return}if(Va(Un)){Mn(ne,ve,Un.error);return}Mr(!_h(Un),"Unhandled fetcher deferred data"),it(ne,ih(Un.data))}}async function Bt(ne,ve,Ie,Ee){let{submission:Ve,fetcherSubmission:Et,preventScrollReset:At,replace:jt}=Ee===void 0?{}:Ee;ve.response.headers.has("X-Remix-Revalidate")&&(yt=!0);let kt=ve.response.headers.get("Location");Mr(kt,"Expected a Location header on the redirect Response"),kt=QM(kt,new URL(ne.url),m);let Ot=fg(Z.location,kt,{_isRedirect:!0});if(n){let $n=!1;if(ve.response.headers.has("X-Remix-Reload-Document"))$n=!0;else if(JP.test(kt)){const ir=e.history.createURL(kt);$n=ir.origin!==t.location.origin||$h(ir.pathname,m)==null}if($n){jt?t.location.replace(kt):t.location.assign(kt);return}}Re=null;let zt=jt===!0||ve.response.headers.has("X-Remix-Replace")?Fi.Replace:Fi.Push,{formMethod:In,formAction:Dn,formEncType:Nn}=Z.navigation;!Ve&&!Et&&In&&Dn&&Nn&&(Ve=sO(Z.navigation));let Un=Ve||Et;if(AQ.has(ve.response.status)&&Un&&ic(Un.formMethod))await Qe(zt,Ot,{submission:Ii({},Un,{formAction:kt}),preventScrollReset:At||be,enableViewTransition:Ie?Je:void 0});else{let $n=BE(Ot,Ve);await Qe(zt,Ot,{overrideNavigation:$n,fetcherSubmission:Et,preventScrollReset:At||be,enableViewTransition:Ie?Je:void 0})}}async function pn(ne,ve,Ie,Ee,Ve,Et){let At,jt={};try{At=await NQ(g,ne,ve,Ie,Ee,Ve,Et,l,i)}catch(kt){return Ee.forEach(Ot=>{jt[Ot.route.id]={type:ri.error,error:kt}}),jt}for(let[kt,Ot]of Object.entries(At))if($Q(Ot)){let zt=Ot.result;jt[kt]={type:ri.redirect,response:FQ(zt,Ie,kt,Ve,m,C.v7_relativeSplatPath)}}else jt[kt]=await zQ(Ot);return jt}async function nn(ne,ve,Ie,Ee,Ve){let Et=ne.matches,At=pn("loader",ne,Ve,Ie,ve,null),jt=Promise.all(Ee.map(async zt=>{if(zt.matches&&zt.match&&zt.controller){let Dn=(await pn("loader",ne,um(e.history,zt.path,zt.controller.signal),[zt.match],zt.matches,zt.key))[zt.match.route.id];return{[zt.key]:Dn}}else return Promise.resolve({[zt.key]:{type:ri.error,error:ga(404,{pathname:zt.path})}})})),kt=await At,Ot=(await jt).reduce((zt,In)=>Object.assign(zt,In),{});return await Promise.all([ZQ(ve,kt,Ve.signal,Et,ne.loaderData),qQ(ve,Ot,Ee)]),{loaderResults:kt,fetcherResults:Ot}}function ln(){yt=!0,lt.push(...ts()),Be.forEach((ne,ve)=>{qe.has(ve)&&Nt.add(ve),ut(ve)})}function it(ne,ve,Ie){Ie===void 0&&(Ie={}),Z.fetchers.set(ne,ve),Vt({fetchers:new Map(Z.fetchers)},{flushSync:(Ie&&Ie.flushSync)===!0})}function Mn(ne,ve,Ie,Ee){Ee===void 0&&(Ee={});let Ve=zf(Z.matches,ve);fr(ne),Vt({errors:{[Ve.route.id]:Ie},fetchers:new Map(Z.fetchers)},{flushSync:(Ee&&Ee.flushSync)===!0})}function ar(ne){return ct.set(ne,(ct.get(ne)||0)+1),xt.has(ne)&&xt.delete(ne),Z.fetchers.get(ne)||IQ}function fr(ne){let ve=Z.fetchers.get(ne);qe.has(ne)&&!(ve&&ve.state==="loading"&&we.has(ne))&&ut(ne),Be.delete(ne),we.delete(ne),He.delete(ne),C.v7_fetcherPersist&&xt.delete(ne),Nt.delete(ne),Z.fetchers.delete(ne)}function Xn(ne){let ve=(ct.get(ne)||0)-1;ve<=0?(ct.delete(ne),xt.add(ne),C.v7_fetcherPersist||fr(ne)):ct.set(ne,ve),Vt({fetchers:new Map(Z.fetchers)})}function ut(ne){let ve=qe.get(ne);ve&&(ve.abort(),qe.delete(ne))}function vn(ne){for(let ve of ne){let Ie=ar(ve),Ee=ih(Ie.data);Z.fetchers.set(ve,Ee)}}function Sn(){let ne=[],ve=!1;for(let Ie of He){let Ee=Z.fetchers.get(Ie);Mr(Ee,"Expected fetcher: "+Ie),Ee.state==="loading"&&(He.delete(Ie),ne.push(Ie),ve=!0)}return vn(ne),ve}function Gr(ne){let ve=[];for(let[Ie,Ee]of we)if(Ee<ne){let Ve=Z.fetchers.get(Ie);Mr(Ve,"Expected fetcher: "+Ie),Ve.state==="loading"&&(ut(Ie),we.delete(Ie),ve.push(Ie))}return vn(ve),ve.length>0}function gi(ne,ve){let Ie=Z.blockers.get(ne)||_y;return It.get(ne)!==ve&&It.set(ne,ve),Ie}function Wn(ne){Z.blockers.delete(ne),It.delete(ne)}function Ei(ne,ve){let Ie=Z.blockers.get(ne)||_y;Mr(Ie.state==="unblocked"&&ve.state==="blocked"||Ie.state==="blocked"&&ve.state==="blocked"||Ie.state==="blocked"&&ve.state==="proceeding"||Ie.state==="blocked"&&ve.state==="unblocked"||Ie.state==="proceeding"&&ve.state==="unblocked","Invalid blocker state transition: "+Ie.state+" -> "+ve.state);let Ee=new Map(Z.blockers);Ee.set(ne,ve),Vt({blockers:Ee})}function ls(ne){let{currentLocation:ve,nextLocation:Ie,historyAction:Ee}=ne;if(It.size===0)return;It.size>1&&hp(!1,"A router only supports one blocker at a time");let Ve=Array.from(It.entries()),[Et,At]=Ve[Ve.length-1],jt=Z.blockers.get(Et);if(!(jt&&jt.state==="proceeding")&&At({currentLocation:ve,nextLocation:Ie,historyAction:Ee}))return Et}function es(ne){let ve=ga(404,{pathname:ne}),Ie=a||u,{matches:Ee,route:Ve}=rO(Ie);return ts(),{notFoundMatches:Ee,route:Ve,error:ve}}function ts(ne){let ve=[];return bt.forEach((Ie,Ee)=>{(!ne||ne(Ee))&&(Ie.cancel(),ve.push(Ee),bt.delete(Ee))}),ve}function Ae(ne,ve,Ie){if(N=ne,$=ve,z=Ie||null,!H&&Z.navigation===FE){H=!0;let Ee=pe(Z.location,Z.matches);Ee!=null&&Vt({restoreScrollPosition:Ee})}return()=>{N=null,$=null,z=null}}function se(ne,ve){return z&&z(ne,ve.map(Ee=>aQ(Ee,Z.loaderData)))||ne.key}function ie(ne,ve){if(N&&$){let Ie=se(ne,ve);N[Ie]=$()}}function pe(ne,ve){if(N){let Ie=se(ne,ve),Ee=N[Ie];if(typeof Ee=="number")return Ee}return null}function Se(ne,ve,Ie){if(w)if(ne){if(Object.keys(ne[0].params).length>0)return{active:!0,matches:fb(ve,Ie,m,!0)}}else return{active:!0,matches:fb(ve,Ie,m,!0)||[]};return{active:!1,matches:null}}async function Ue(ne,ve,Ie){if(!w)return{type:"success",matches:ne};let Ee=ne;for(;;){let Ve=a==null,Et=a||u,At=l;try{await w({signal:Ie,path:ve,matches:Ee,patch:(Ot,zt)=>{Ie.aborted||YM(Ot,zt,Et,At,i)}})}catch(Ot){return{type:"error",error:Ot,partialMatches:Ee}}finally{Ve&&!Ie.aborted&&(u=[...u])}if(Ie.aborted)return{type:"aborted"};let jt=hh(Et,ve,m);if(jt)return{type:"success",matches:jt};let kt=fb(Et,ve,m,!0);if(!kt||Ee.length===kt.length&&Ee.every((Ot,zt)=>Ot.route.id===kt[zt].route.id))return{type:"success",matches:null};Ee=kt}}function Ge(ne){l={},a=c0(ne,i,void 0,l)}function nt(ne,ve){let Ie=a==null;YM(ne,ve,a||u,l,i),Ie&&(u=[...u],Vt({}))}return fe={get basename(){return m},get future(){return C},get state(){return Z},get routes(){return u},get window(){return t},initialize:fn,subscribe:an,enableScrollRestoration:Ae,navigate:Tn,fetch:mt,revalidate:Fn,createHref:ne=>e.history.createHref(ne),encodeLocation:ne=>e.history.encodeLocation(ne),getFetcher:ar,deleteFetcher:Xn,dispose:wn,getBlocker:gi,deleteBlocker:Wn,patchRoutes:nt,_internalFetchControllers:qe,_internalActiveDeferreds:bt,_internalSetRoutes:Ge},fe}function LQ(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function DT(e,t,n,r,i,l,u,a){let m,g;if(u){m=[];for(let C of t)if(m.push(C),C.route.id===u){g=C;break}}else m=t,g=t[t.length-1];let w=QP(i||".",YP(m,l),$h(e.pathname,n)||e.pathname,a==="path");if(i==null&&(w.search=e.search,w.hash=e.hash),(i==null||i===""||i===".")&&g){let C=tA(w.search);if(g.route.index&&!C)w.search=w.search?w.search.replace(/^\?/,"?index&"):"?index";else if(!g.route.index&&C){let P=new URLSearchParams(w.search),I=P.getAll("index");P.delete("index"),I.filter(z=>z).forEach(z=>P.append("index",z));let N=P.toString();w.search=N?"?"+N:""}}return r&&n!=="/"&&(w.pathname=w.pathname==="/"?n:ru([n,w.pathname])),od(w)}function GM(e,t,n,r){if(!r||!LQ(r))return{path:n};if(r.formMethod&&!HQ(r.formMethod))return{path:n,error:ga(405,{method:r.formMethod})};let i=()=>({path:n,error:ga(400,{type:"invalid-body"})}),l=r.formMethod||"get",u=e?l.toUpperCase():l.toLowerCase(),a=qB(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ic(u))return i();let P=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((I,N)=>{let[z,$]=N;return""+I+z+"="+$+`
`},""):String(r.body);return{path:n,submission:{formMethod:u,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:P}}}else if(r.formEncType==="application/json"){if(!ic(u))return i();try{let P=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:u,formAction:a,formEncType:r.formEncType,formData:void 0,json:P,text:void 0}}}catch{return i()}}}Mr(typeof FormData=="function","FormData is not available in this environment");let m,g;if(r.formData)m=jT(r.formData),g=r.formData;else if(r.body instanceof FormData)m=jT(r.body),g=r.body;else if(r.body instanceof URLSearchParams)m=r.body,g=JM(m);else if(r.body==null)m=new URLSearchParams,g=new FormData;else try{m=new URLSearchParams(r.body),g=JM(m)}catch{return i()}let w={formMethod:u,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(ic(w.formMethod))return{path:n,submission:w};let C=fd(n);return t&&C.search&&tA(C.search)&&m.append("index",""),C.search="?"+m,{path:od(C),submission:w}}function WM(e,t,n){n===void 0&&(n=!1);let r=e.findIndex(i=>i.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function XM(e,t,n,r,i,l,u,a,m,g,w,C,P,I,N,z){let $=z?Va(z[1])?z[1].error:z[1].data:void 0,H=e.createURL(t.location),V=e.createURL(i),q=n;l&&t.errors?q=WM(n,Object.keys(t.errors)[0],!0):z&&Va(z[1])&&(q=WM(n,z[0]));let te=z?z[1].statusCode:void 0,ue=u&&te&&te>=400,fe=q.filter((le,be)=>{let{route:Re}=le;if(Re.lazy)return!0;if(Re.loader==null)return!1;if(l)return NT(Re,t.loaderData,t.errors);if(MQ(t.loaderData,t.matches[be],le)||m.some(Xe=>Xe===le.route.id))return!0;let Je=t.matches[be],Fe=le;return KM(le,Ii({currentUrl:H,currentParams:Je.params,nextUrl:V,nextParams:Fe.params},r,{actionResult:$,actionStatus:te,defaultShouldRevalidate:ue?!1:a||H.pathname+H.search===V.pathname+V.search||H.search!==V.search||HB(Je,Fe)}))}),Z=[];return C.forEach((le,be)=>{if(l||!n.some(gt=>gt.route.id===le.routeId)||w.has(be))return;let Re=hh(I,le.path,N);if(!Re){Z.push({key:be,routeId:le.routeId,path:le.path,matches:null,match:null,controller:null});return}let Je=t.fetchers.get(be),Fe=My(Re,le.path),Xe=!1;P.has(be)?Xe=!1:g.has(be)?(g.delete(be),Xe=!0):Je&&Je.state!=="idle"&&Je.data===void 0?Xe=a:Xe=KM(Fe,Ii({currentUrl:H,currentParams:t.matches[t.matches.length-1].params,nextUrl:V,nextParams:n[n.length-1].params},r,{actionResult:$,actionStatus:te,defaultShouldRevalidate:ue?!1:a})),Xe&&Z.push({key:be,routeId:le.routeId,path:le.path,matches:Re,match:Fe,controller:new AbortController})}),[fe,Z]}function NT(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,i=n!=null&&n[e.id]!==void 0;return!r&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!i}function MQ(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function HB(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function KM(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function YM(e,t,n,r,i){var l;let u;if(e){let g=r[e];Mr(g,"No route found to patch children into: routeId = "+e),g.children||(g.children=[]),u=g.children}else u=n;let a=t.filter(g=>!u.some(w=>ZB(g,w))),m=c0(a,i,[e||"_","patch",String(((l=u)==null?void 0:l.length)||"0")],r);u.push(...m)}function ZB(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var i;return(i=t.children)==null?void 0:i.some(l=>ZB(n,l))}):!1}async function OQ(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Mr(i,"No route found in manifest");let l={};for(let u in r){let m=i[u]!==void 0&&u!=="hasErrorBoundary";hp(!m,'Route "'+i.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!m&&!sQ.has(u)&&(l[u]=r[u])}Object.assign(i,l),Object.assign(i,Ii({},t(i),{lazy:void 0}))}async function DQ(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,l,u)=>Object.assign(i,{[n[u].route.id]:l}),{})}async function NQ(e,t,n,r,i,l,u,a,m,g){let w=l.map(I=>I.route.lazy?OQ(I.route,m,a):void 0),C=l.map((I,N)=>{let z=w[N],$=i.some(V=>V.route.id===I.route.id);return Ii({},I,{shouldLoad:$,resolve:async V=>(V&&r.method==="GET"&&(I.route.lazy||I.route.loader)&&($=!0),$?jQ(t,r,I,z,V,g):Promise.resolve({type:ri.data,result:void 0}))})}),P=await e({matches:C,request:r,params:l[0].params,fetcherKey:u,context:g});try{await Promise.all(w)}catch{}return P}async function jQ(e,t,n,r,i,l){let u,a,m=g=>{let w,C=new Promise((N,z)=>w=z);a=()=>w(),t.signal.addEventListener("abort",a);let P=N=>typeof g!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):g({request:t,params:n.params,context:l},...N!==void 0?[N]:[]),I=(async()=>{try{return{type:"data",result:await(i?i(z=>P(z)):P())}}catch(N){return{type:"error",result:N}}})();return Promise.race([I,C])};try{let g=n.route[e];if(r)if(g){let w,[C]=await Promise.all([m(g).catch(P=>{w=P}),r]);if(w!==void 0)throw w;u=C}else if(await r,g=n.route[e],g)u=await m(g);else if(e==="action"){let w=new URL(t.url),C=w.pathname+w.search;throw ga(405,{method:t.method,pathname:C,routeId:n.route.id})}else return{type:ri.data,result:void 0};else if(g)u=await m(g);else{let w=new URL(t.url),C=w.pathname+w.search;throw ga(404,{pathname:C})}Mr(u.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(g){return{type:ri.error,result:g}}finally{a&&t.signal.removeEventListener("abort",a)}return u}async function zQ(e){let{result:t,type:n}=e;if(GB(t)){let C;try{let P=t.headers.get("Content-Type");P&&/\bapplication\/json\b/.test(P)?t.body==null?C=null:C=await t.json():C=await t.text()}catch(P){return{type:ri.error,error:P}}return n===ri.error?{type:ri.error,error:new u0(t.status,t.statusText,C),statusCode:t.status,headers:t.headers}:{type:ri.data,data:C,statusCode:t.status,headers:t.headers}}if(n===ri.error){if(iO(t)){var r,i;if(t.data instanceof Error){var l,u;return{type:ri.error,error:t.data,statusCode:(l=t.init)==null?void 0:l.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}}return{type:ri.error,error:new u0(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:zv(t)?t.status:void 0,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}}return{type:ri.error,error:t,statusCode:zv(t)?t.status:void 0}}if(VQ(t)){var a,m;return{type:ri.deferred,deferredData:t,statusCode:(a=t.init)==null?void 0:a.status,headers:((m=t.init)==null?void 0:m.headers)&&new Headers(t.init.headers)}}if(iO(t)){var g,w;return{type:ri.data,data:t.data,statusCode:(g=t.init)==null?void 0:g.status,headers:(w=t.init)!=null&&w.headers?new Headers(t.init.headers):void 0}}return{type:ri.data,data:t}}function FQ(e,t,n,r,i,l){let u=e.headers.get("Location");if(Mr(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!JP.test(u)){let a=r.slice(0,r.findIndex(m=>m.route.id===n)+1);u=DT(new URL(t.url),a,i,!0,u,l),e.headers.set("Location",u)}return e}function QM(e,t,n){if(JP.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),l=$h(i.pathname,n)!=null;if(i.origin===t.origin&&l)return i.pathname+i.search+i.hash}return e}function um(e,t,n,r){let i=e.createURL(qB(t)).toString(),l={signal:n};if(r&&ic(r.formMethod)){let{formMethod:u,formEncType:a}=r;l.method=u.toUpperCase(),a==="application/json"?(l.headers=new Headers({"Content-Type":a}),l.body=JSON.stringify(r.json)):a==="text/plain"?l.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?l.body=jT(r.formData):l.body=r.formData}return new Request(i,l)}function jT(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function JM(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function BQ(e,t,n,r,i){let l={},u=null,a,m=!1,g={},w=n&&Va(n[1])?n[1].error:void 0;return e.forEach(C=>{if(!(C.route.id in t))return;let P=C.route.id,I=t[P];if(Mr(!Hf(I),"Cannot handle redirect results in processLoaderData"),Va(I)){let N=I.error;w!==void 0&&(N=w,w=void 0),u=u||{};{let z=zf(e,P);u[z.route.id]==null&&(u[z.route.id]=N)}l[P]=void 0,m||(m=!0,a=zv(I.error)?I.error.status:500),I.headers&&(g[P]=I.headers)}else _h(I)?(r.set(P,I.deferredData),l[P]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!m&&(a=I.statusCode),I.headers&&(g[P]=I.headers)):(l[P]=I.data,I.statusCode&&I.statusCode!==200&&!m&&(a=I.statusCode),I.headers&&(g[P]=I.headers))}),w!==void 0&&n&&(u={[n[0]]:w},l[n[0]]=void 0),{loaderData:l,errors:u,statusCode:a||200,loaderHeaders:g}}function eO(e,t,n,r,i,l,u){let{loaderData:a,errors:m}=BQ(t,n,r,u);return i.forEach(g=>{let{key:w,match:C,controller:P}=g,I=l[w];if(Mr(I,"Did not find corresponding fetcher result"),!(P&&P.signal.aborted))if(Va(I)){let N=zf(e.matches,C==null?void 0:C.route.id);m&&m[N.route.id]||(m=Ii({},m,{[N.route.id]:I.error})),e.fetchers.delete(w)}else if(Hf(I))Mr(!1,"Unhandled fetcher revalidation redirect");else if(_h(I))Mr(!1,"Unhandled fetcher deferred data");else{let N=ih(I.data);e.fetchers.set(w,N)}}),{loaderData:a,errors:m}}function tO(e,t,n,r){let i=Ii({},t);for(let l of n){let u=l.route.id;if(t.hasOwnProperty(u)?t[u]!==void 0&&(i[u]=t[u]):e[u]!==void 0&&l.route.loader&&(i[u]=e[u]),r&&r.hasOwnProperty(u))break}return i}function nO(e){return e?Va(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function zf(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function rO(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ga(e,t){let{pathname:n,routeId:r,method:i,type:l,message:u}=t===void 0?{}:t,a="Unknown Server Error",m="Unknown @remix-run/router error";return e===400?(a="Bad Request",i&&n&&r?m="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":l==="defer-action"?m="defer() is not supported in actions":l==="invalid-body"&&(m="Unable to encode submission body")):e===403?(a="Forbidden",m='Route "'+r+'" does not match URL "'+n+'"'):e===404?(a="Not Found",m='No route matches URL "'+n+'"'):e===405&&(a="Method Not Allowed",i&&n&&r?m="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(m='Invalid request method "'+i.toUpperCase()+'"')),new u0(e||500,a,new Error(m),!0)}function Vx(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,i]=t[n];if(Hf(i))return{key:r,result:i}}}function qB(e){let t=typeof e=="string"?fd(e):e;return od(Ii({},t,{hash:""}))}function UQ(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function $Q(e){return GB(e.result)&&PQ.has(e.result.status)}function _h(e){return e.type===ri.deferred}function Va(e){return e.type===ri.error}function Hf(e){return(e&&e.type)===ri.redirect}function iO(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function VQ(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function GB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function HQ(e){return kQ.has(e.toLowerCase())}function ic(e){return CQ.has(e.toLowerCase())}async function ZQ(e,t,n,r,i){let l=Object.entries(t);for(let u=0;u<l.length;u++){let[a,m]=l[u],g=e.find(P=>(P==null?void 0:P.route.id)===a);if(!g)continue;let w=r.find(P=>P.route.id===g.route.id),C=w!=null&&!HB(w,g)&&(i&&i[g.route.id])!==void 0;_h(m)&&C&&await eA(m,n,!1).then(P=>{P&&(t[a]=P)})}}async function qQ(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:l,controller:u}=n[r],a=t[i];e.find(g=>(g==null?void 0:g.route.id)===l)&&_h(a)&&(Mr(u,"Expected an AbortController for revalidating fetcher deferred result"),await eA(a,u.signal,!0).then(g=>{g&&(t[i]=g)}))}}async function eA(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ri.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ri.error,error:i}}return{type:ri.data,data:e.deferredData.data}}}function tA(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function My(e,t){let n=typeof t=="string"?fd(t).search:t.search;if(e[e.length-1].route.index&&tA(n||""))return e[e.length-1];let r=BB(e);return r[r.length-1]}function sO(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:l,json:u}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(l!=null)return{formMethod:t,formAction:n,formEncType:r,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:u,text:void 0}}}function BE(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function GQ(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function xy(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function WQ(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ih(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function XQ(e,t){try{let n=e.sessionStorage.getItem($B);if(n){let r=JSON.parse(n);for(let[i,l]of Object.entries(r||{}))l&&Array.isArray(l)&&t.set(i,new Set(l||[]))}}catch{}}function KQ(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem($B,JSON.stringify(n))}catch(r){hp(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fv.apply(this,arguments)}const P_=M.createContext(null),WB=M.createContext(null),pd=M.createContext(null),nA=M.createContext(null),hu=M.createContext({outlet:null,matches:[],isDataRoute:!1}),XB=M.createContext(null);function YQ(e,t){let{relative:n}=t===void 0?{}:t;A_()||Mr(!1);let{basename:r,navigator:i}=M.useContext(pd),{hash:l,pathname:u,search:a}=rA(e,{relative:n}),m=u;return r!=="/"&&(m=u==="/"?r:ru([r,u])),i.createHref({pathname:m,search:a,hash:l})}function A_(){return M.useContext(nA)!=null}function Sp(){return A_()||Mr(!1),M.useContext(nA).location}function KB(e){M.useContext(pd).static||M.useLayoutEffect(e)}function YB(){let{isDataRoute:e}=M.useContext(hu);return e?fJ():QQ()}function QQ(){A_()||Mr(!1);let e=M.useContext(P_),{basename:t,future:n,navigator:r}=M.useContext(pd),{matches:i}=M.useContext(hu),{pathname:l}=Sp(),u=JSON.stringify(YP(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return KB(()=>{a.current=!0}),M.useCallback(function(g,w){if(w===void 0&&(w={}),!a.current)return;if(typeof g=="number"){r.go(g);return}let C=QP(g,JSON.parse(u),l,w.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:ru([t,C.pathname])),(w.replace?r.replace:r.push)(C,w.state,w)},[t,r,u,l,e])}const JQ=M.createContext(null);function eJ(e){let t=M.useContext(hu).outlet;return t&&M.createElement(JQ.Provider,{value:e},t)}function tJ(){let{matches:e}=M.useContext(hu),t=e[e.length-1];return t?t.params:{}}function rA(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=M.useContext(pd),{matches:i}=M.useContext(hu),{pathname:l}=Sp(),u=JSON.stringify(YP(i,r.v7_relativeSplatPath));return M.useMemo(()=>QP(e,JSON.parse(u),l,n==="path"),[e,u,l,n])}function nJ(e,t,n,r){A_()||Mr(!1);let{navigator:i,static:l}=M.useContext(pd),{matches:u}=M.useContext(hu),a=u[u.length-1],m=a?a.params:{};a&&a.pathname;let g=a?a.pathnameBase:"/";a&&a.route;let w=Sp(),C;C=w;let P=C.pathname||"/",I=P;if(g!=="/"){let $=g.replace(/^\//,"").split("/");I="/"+P.replace(/^\//,"").split("/").slice($.length).join("/")}let N=!l&&n&&n.matches&&n.matches.length>0?n.matches:hh(e,{pathname:I});return aJ(N&&N.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:ru([g,i.encodeLocation?i.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:ru([g,i.encodeLocation?i.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),u,n,r)}function rJ(){let e=hJ(),t=zv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,null)}const iJ=M.createElement(rJ,null);class sJ extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?M.createElement(hu.Provider,{value:this.props.routeContext},M.createElement(XB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oJ(e){let{routeContext:t,match:n,children:r}=e,i=M.useContext(P_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(hu.Provider,{value:t},r)}function aJ(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let w=u.findIndex(C=>C.route.id&&(a==null?void 0:a[C.route.id])!==void 0);w>=0||Mr(!1),u=u.slice(0,Math.min(u.length,w+1))}let m=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let w=0;w<u.length;w++){let C=u[w];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(g=w),C.route.id){let{loaderData:P,errors:I}=n,N=C.route.loader&&P[C.route.id]===void 0&&(!I||I[C.route.id]===void 0);if(C.route.lazy||N){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,C,P)=>{let I,N=!1,z=null,$=null;n&&(I=a&&C.route.id?a[C.route.id]:void 0,z=C.route.errorElement||iJ,m&&(g<0&&P===0?(pJ("route-fallback"),N=!0,$=null):g===P&&(N=!0,$=C.route.hydrateFallbackElement||null)));let H=t.concat(u.slice(0,P+1)),V=()=>{let q;return I?q=z:N?q=$:C.route.Component?q=M.createElement(C.route.Component,null):C.route.element?q=C.route.element:q=w,M.createElement(oJ,{match:C,routeContext:{outlet:w,matches:H,isDataRoute:n!=null},children:q})};return n&&(C.route.ErrorBoundary||C.route.errorElement||P===0)?M.createElement(sJ,{location:n.location,revalidation:n.revalidation,component:z,error:I,children:V(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):V()},null)}var QB=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QB||{}),Vh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Vh||{});function lJ(e){let t=M.useContext(P_);return t||Mr(!1),t}function iA(e){let t=M.useContext(WB);return t||Mr(!1),t}function cJ(e){let t=M.useContext(hu);return t||Mr(!1),t}function Xw(e){let t=cJ(),n=t.matches[t.matches.length-1];return n.route.id||Mr(!1),n.route.id}function uJ(){return Xw(Vh.UseRouteId)}function sA(){return iA(Vh.UseNavigation).navigation}function dJ(){let e=iA(Vh.UseLoaderData),t=Xw(Vh.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function hJ(){var e;let t=M.useContext(XB),n=iA(Vh.UseRouteError),r=Xw(Vh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fJ(){let{router:e}=lJ(QB.UseNavigateStable),t=Xw(Vh.UseNavigateStable),n=M.useRef(!1);return KB(()=>{n.current=!0}),M.useCallback(function(i,l){l===void 0&&(l={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Fv({fromRouteId:t},l)))},[e,t])}const oO={};function pJ(e,t,n){oO[e]||(oO[e]=!0)}function mJ(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function gJ(e){return eJ(e.context)}function yJ(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Fi.Pop,navigator:l,static:u=!1,future:a}=e;A_()&&Mr(!1);let m=t.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:m,navigator:l,static:u,future:Fv({v7_relativeSplatPath:!1},a)}),[m,a,l,u]);typeof r=="string"&&(r=fd(r));let{pathname:w="/",search:C="",hash:P="",state:I=null,key:N="default"}=r,z=M.useMemo(()=>{let $=$h(w,m);return $==null?null:{location:{pathname:$,search:C,hash:P,state:I,key:N},navigationType:i}},[m,w,C,P,I,N,i]);return z==null?null:M.createElement(pd.Provider,{value:g},M.createElement(nA.Provider,{children:n,value:z}))}new Promise(()=>{});function JB(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:M.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:M.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:M.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function vJ(e,t){return VB({basename:void 0,future:Fv({},void 0,{v7_prependBasename:!0}),history:tQ({initialEntries:void 0,initialIndex:void 0}),hydrationData:void 0,routes:e,mapRouteProperties:JB,dataStrategy:void 0,patchRoutesOnNavigation:void 0}).initialize()}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(this,arguments)}function e3(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,l;for(l=0;l<r.length;l++)i=r[l],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const pb="get",UE="application/x-www-form-urlencoded";function Kw(e){return e!=null&&typeof e.tagName=="string"}function _J(e){return Kw(e)&&e.tagName.toLowerCase()==="button"}function xJ(e){return Kw(e)&&e.tagName.toLowerCase()==="form"}function bJ(e){return Kw(e)&&e.tagName.toLowerCase()==="input"}function wJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function SJ(e,t){return e.button===0&&(!t||t==="_self")&&!wJ(e)}let Hx=null;function EJ(){if(Hx===null)try{new FormData(document.createElement("form"),0),Hx=!1}catch{Hx=!0}return Hx}const CJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $E(e){return e!=null&&!CJ.has(e)?null:e}function TJ(e,t){let n,r,i,l,u;if(xJ(e)){let a=e.getAttribute("action");r=a?$h(a,t):null,n=e.getAttribute("method")||pb,i=$E(e.getAttribute("enctype"))||UE,l=new FormData(e)}else if(_J(e)||bJ(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||a.getAttribute("action");if(r=m?$h(m,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||pb,i=$E(e.getAttribute("formenctype"))||$E(a.getAttribute("enctype"))||UE,l=new FormData(a,e),!EJ()){let{name:g,type:w,value:C}=e;if(w==="image"){let P=g?g+".":"";l.append(P+"x","0"),l.append(P+"y","0")}else g&&l.append(g,C)}}else{if(Kw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pb,r=null,i=UE,u=e}return l&&i==="text/plain"&&(u=l,l=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:l,body:u}}const kJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PJ=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],AJ="6";try{window.__reactRouterVersion=AJ}catch{}function IJ(e,t){return VB({basename:t==null?void 0:t.basename,future:fp({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:nQ({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||RJ(),routes:e,mapRouteProperties:JB,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function RJ(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=fp({},t,{errors:LJ(t.errors)})),t}function LJ(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new u0(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let l=window[i.__subType];if(typeof l=="function")try{let u=new l(i.message);u.stack="",n[r]=u}catch{}}if(n[r]==null){let l=new Error(i.message);l.stack="",n[r]=l}}else n[r]=i;return n}const MJ=M.createContext({isTransitioning:!1}),OJ=M.createContext(new Map),DJ="startTransition",aO=F0[DJ],NJ="flushSync",lO=I8[NJ];function jJ(e){aO?aO(e):e()}function by(e){lO?lO(e):e()}class zJ{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function FJ(e){let{fallbackElement:t,router:n,future:r}=e,[i,l]=M.useState(n.state),[u,a]=M.useState(),[m,g]=M.useState({isTransitioning:!1}),[w,C]=M.useState(),[P,I]=M.useState(),[N,z]=M.useState(),$=M.useRef(new Map),{v7_startTransition:H}=r||{},V=M.useCallback(le=>{H?jJ(le):le()},[H]),q=M.useCallback((le,be)=>{let{deletedFetchers:Re,flushSync:Je,viewTransitionOpts:Fe}=be;le.fetchers.forEach((gt,yt)=>{gt.data!==void 0&&$.current.set(yt,gt.data)}),Re.forEach(gt=>$.current.delete(gt));let Xe=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!Fe||Xe){Je?by(()=>l(le)):V(()=>l(le));return}if(Je){by(()=>{P&&(w&&w.resolve(),P.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:Fe.currentLocation,nextLocation:Fe.nextLocation})});let gt=n.window.document.startViewTransition(()=>{by(()=>l(le))});gt.finished.finally(()=>{by(()=>{C(void 0),I(void 0),a(void 0),g({isTransitioning:!1})})}),by(()=>I(gt));return}P?(w&&w.resolve(),P.skipTransition(),z({state:le,currentLocation:Fe.currentLocation,nextLocation:Fe.nextLocation})):(a(le),g({isTransitioning:!0,flushSync:!1,currentLocation:Fe.currentLocation,nextLocation:Fe.nextLocation}))},[n.window,P,w,$,V]);M.useLayoutEffect(()=>n.subscribe(q),[n,q]),M.useEffect(()=>{m.isTransitioning&&!m.flushSync&&C(new zJ)},[m]),M.useEffect(()=>{if(w&&u&&n.window){let le=u,be=w.promise,Re=n.window.document.startViewTransition(async()=>{V(()=>l(le)),await be});Re.finished.finally(()=>{C(void 0),I(void 0),a(void 0),g({isTransitioning:!1})}),I(Re)}},[V,u,w,n.window]),M.useEffect(()=>{w&&u&&i.location.key===u.location.key&&w.resolve()},[w,P,i.location,u]),M.useEffect(()=>{!m.isTransitioning&&N&&(a(N.state),g({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}),z(void 0))},[m.isTransitioning,N]),M.useEffect(()=>{},[]);let te=M.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:le=>n.navigate(le),push:(le,be,Re)=>n.navigate(le,{state:be,preventScrollReset:Re==null?void 0:Re.preventScrollReset}),replace:(le,be,Re)=>n.navigate(le,{replace:!0,state:be,preventScrollReset:Re==null?void 0:Re.preventScrollReset})}),[n]),ue=n.basename||"/",fe=M.useMemo(()=>({router:n,navigator:te,static:!1,basename:ue}),[n,te,ue]),Z=M.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return M.useEffect(()=>mJ(r,n.future),[r,n.future]),M.createElement(M.Fragment,null,M.createElement(P_.Provider,{value:fe},M.createElement(WB.Provider,{value:i},M.createElement(OJ.Provider,{value:$.current},M.createElement(MJ.Provider,{value:m},M.createElement(yJ,{basename:ue,location:i.location,navigationType:i.historyAction,navigator:te,future:Z},i.initialized||n.future.v7_partialHydration?M.createElement(BJ,{routes:n.routes,future:n.future,state:i}):t))))),null)}const BJ=M.memo(UJ);function UJ(e){let{routes:t,future:n,state:r}=e;return nJ(t,void 0,r,n)}const $J=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oA=M.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:l,replace:u,state:a,target:m,to:g,preventScrollReset:w,viewTransition:C}=t,P=e3(t,kJ),{basename:I}=M.useContext(pd),N,z=!1;if(typeof g=="string"&&VJ.test(g)&&(N=g,$J))try{let q=new URL(window.location.href),te=g.startsWith("//")?new URL(q.protocol+g):new URL(g),ue=$h(te.pathname,I);te.origin===q.origin&&ue!=null?g=ue+te.search+te.hash:z=!0}catch{}let $=YQ(g,{relative:i}),H=ZJ(g,{replace:u,state:a,target:m,preventScrollReset:w,relative:i,viewTransition:C});function V(q){r&&r(q),q.defaultPrevented||H(q)}return M.createElement("a",fp({},P,{href:N||$,onClick:z||l?r:V,ref:n,target:m}))}),Yw=M.forwardRef((e,t)=>{let{fetcherKey:n,navigate:r,reloadDocument:i,replace:l,state:u,method:a=pb,action:m,onSubmit:g,relative:w,preventScrollReset:C,viewTransition:P}=e,I=e3(e,PJ),N=Qw(),z=XJ(m,{relative:w}),$=a.toLowerCase()==="get"?"get":"post",H=V=>{if(g&&g(V),V.defaultPrevented)return;V.preventDefault();let q=V.nativeEvent.submitter,te=(q==null?void 0:q.getAttribute("formmethod"))||a;N(q||V.currentTarget,{fetcherKey:n,method:te,navigate:r,replace:l,state:u,relative:w,preventScrollReset:C,viewTransition:P})};return M.createElement("form",fp({ref:t,method:$,action:z,onSubmit:i?g:H},I))});var zT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zT||(zT={}));var cO;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cO||(cO={}));function HJ(e){let t=M.useContext(P_);return t||Mr(!1),t}function ZJ(e,t){let{target:n,replace:r,state:i,preventScrollReset:l,relative:u,viewTransition:a}=t===void 0?{}:t,m=YB(),g=Sp(),w=rA(e,{relative:u});return M.useCallback(C=>{if(SJ(C,n)){C.preventDefault();let P=r!==void 0?r:od(g)===od(w);m(e,{replace:P,state:i,preventScrollReset:l,relative:u,viewTransition:a})}},[g,m,w,r,i,n,e,l,u,a])}function qJ(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let GJ=0,WJ=()=>"__"+String(++GJ)+"__";function Qw(){let{router:e}=HJ(zT.UseSubmit),{basename:t}=M.useContext(pd),n=uJ();return M.useCallback(function(r,i){i===void 0&&(i={}),qJ();let{action:l,method:u,encType:a,formData:m,body:g}=TJ(r,t);if(i.navigate===!1){let w=i.fetcherKey||WJ();e.fetch(w,n,i.action||l,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||u,formEncType:i.encType||a,flushSync:i.flushSync})}else e.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||u,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function XJ(e,t){let{relative:n}=t===void 0?{}:t,{basename:r}=M.useContext(pd),i=M.useContext(hu);i||Mr(!1);let[l]=i.matches.slice(-1),u=fp({},rA(e||".",{relative:n})),a=Sp();if(e==null){u.search=a.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(C=>C==="")){m.delete("index"),g.filter(P=>P).forEach(P=>m.append("index",P));let C=m.toString();u.search=C?"?"+C:""}}return(!e||e===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:ru([r,u.pathname])),od(u)}const ks=()=>{const{pathname:e}=Sp();return Object.values(Jn).find(t=>new RegExp(`(?:.*)${t.path}(?:/|\\?|$)`).test(e))},KJ=()=>{const e=ks(),t=Si(),{trackRemoveExtra:n}=Vi();return r=>async()=>{switch(n(r),await t(MB(r,0)),e==null?void 0:e.path){case Jn.roomSelection.path:t(dp());break;case Jn.extraSelection.path:await t(Ww()),t(dp());break;case Jn.summary.path:await t(NB());break}}};function YJ(){return async e=>{e(QJ());try{const t=await SK();e(JJ(t.data))}catch(t){e(eee(t.data,ka(t)))}}}function QJ(){return{type:"FETCH_ALTERNATIVE_HOTELS_REQUEST"}}function JJ(e){return{type:"FETCH_ALTERNATIVE_HOTELS_SUCCESS",response:e}}function eee(e,t){return{type:"FETCH_ALTERNATIVE_HOTELS_FAILURE",response:e,error:t}}function _c(e,t,n=!1){return async(r,i)=>{r(DK());try{t&&r(PB(t));const l=await gK(e,t);r(NK(l.data,n))}catch(l){r(jK(l==null?void 0:l.data,ka(l))),l.type===mi.AvailabilityWithAlternativeGuests&&await r(tee()),l.type===mi.NoAvailabilityWithSelectedGuests&&i().configuration.isMultiHotel&&await r(YJ())}}}const tee=()=>async(e,t)=>{var n,r;try{const{session:i,roomSelection:l}=t(),{promoCode:u}=i,{arrivalDate:a,departureDate:m}=i.stay,g=(n=i==null?void 0:i.selectedHotel)==null?void 0:n.id,w=(r=i==null?void 0:i.selectedHotel)==null?void 0:r.coordinates,C={stay:{arrivalDate:a.date,departureDate:m.date},guests:l.alternativeGuestsAllocation,selectedHotelId:g,promoCode:u??"",coordinates:w??null,focusedRoomForExtras:null};await e(hg(C)),await e(_c(1))}catch{}},aA=()=>async e=>{e($K())},nee=e=>async t=>{t(zK());try{await TK(),t(FK()),t(_c(1,e))}catch(n){t(BK(ka(n)))}},ree=1,Ep=(e,t)=>{const n=t.map(u=>u.guestPosition),r=e.map(u=>u.position),i=iee(r,n),l=see(n,r.length);return i.length===0?ree:l||r[r.length-1]===n[n.length-1]?i.reduce((u,a)=>Math.min(u,a)):i.reduce((u,a)=>Math.max(u,a))},iee=(e,t)=>{const n=e.length,r=[];for(let i=0;i<=n;i++)e[i]!==t[i]&&!t.includes(e[i])&&r.push(e[i]);return r},see=(e,t)=>{if(e.length===0)return!0;if(e[0]!==1)return!1;if(e[0]===1&&e.length===1)return!0;for(let n=1;n<t;n++)if(e[n]&&e[n]-e[n-1]!==1)return!1;return!0},oee=e=>(e==null?void 0:e.match(/^[a-z]{2}(-[A-Za-z]+)?(-[A-Z]{2})?$/))!==null,t3=e=>{const{culture:t,hotelId:n}=e;let r=t,i=n;return oee(n)&&(r=n,i=""),{culture:r,hotelId:i}},n3=()=>{const e=tJ();return t3(e)},Rl=()=>{const e=YB(),{culture:t,hotelId:n}=n3();let r=n?`/${n}`:"";return(i,l,u)=>{const a=u??t;r+=a?`/${a}`:"",i!==""?e(`${r}${i}`,l):e(0)}},aee=()=>{const e=Si(),{trackRemoveRoom:t}=Vi(),n=Rl(),r=ks();return(i,l,u)=>async()=>{t(i.room,i.rate);const a=await e(DB(i.rate,i.room,0,i.room.guestPosition));if(a){if(e(dp()),e(kB()),a.rooms.length===0){switch(r==null?void 0:r.name){case"DateSelection":break;case"RoomSelection":case"ExtraSelection":case"Summary":n(Jn.roomSelection.path);break}return}switch(r==null?void 0:r.name){case"DateSelection":break;case"RoomSelection":{const m=Ep(l,u);await e(_c(1,m));break}case"ExtraSelection":await e(Ww());break;case"Summary":n(Jn.roomSelection.path);break}}}},lee=e=>e!=null&&e.skipExtraSelection?e!=null&&e.isComplete?Jn.summary.path:Jn.roomSelection.path:Jn.extraSelection.path,r3=()=>{const e=Si(),t=Rl(),{trackBeginCheckout:n}=Vi();return r=>{const{guests:i}=Fr.getState().session,l=Fr.getState().basket.rooms,u=lee(r);if(u===Jn.summary.path)return n(),t(u);if(u===Jn.roomSelection.path){e(aA());const a=Ep(i,l);e(_c(1,a));return}return t(u)}},i3=()=>{const e=Rl(),{trackBeginCheckout:t}=Vi(),n=ks(),r=Te(l=>l.basket),i=r3();return M.useCallback(()=>{if((n==null?void 0:n.path)===Jn.roomSelection.path&&i(r),(n==null?void 0:n.name)==="ExtraSelection")return r.isComplete?(t(),e(Jn.summary.path)):e(Jn.roomSelection.path)},[r,n==null?void 0:n.name,n==null?void 0:n.path,e,i,t])};function FT(){return async e=>{e(cee());try{const t=await wK();e(uee(t.data))}catch(t){e(dee(t.data,ka(t)))}}}function cee(){return{type:"FETCH_HOTELS_REQUEST"}}function uee(e){return{type:"FETCH_HOTELS_SUCCESS",response:e}}function dee(e,t){return{type:"FETCH_HOTELS_FAILURE",response:e,error:t}}const s3=e=>{var a,m;const{guests:t,promoCode:n}=e,{arrivalDate:r,departureDate:i}=e.stay,l=(a=e==null?void 0:e.selectedHotel)==null?void 0:a.id,u=(m=e==null?void 0:e.selectedHotel)==null?void 0:m.coordinates;return{stay:{arrivalDate:r.date,departureDate:i.date},guests:t,selectedHotelId:l,promoCode:n??"",coordinates:u??null,focusedRoomForExtras:null}},lA=()=>()=>{const{session:t}=Fr.getState();return s3(t)},cA=()=>{const e=sA(),t=Si(),n=Rl(),{rooms:r}=Te(w=>w.basket),i=r.length===0,l=lA(),u=ks(),m=Te(w=>w.session.isFetching)||e.state==="loading";return{isEmptyBasket:i,isLoading:m,onSearch:async()=>{i||(await t(Qy()),t(dp())),await t(CY());const w=await t(hg(l()));if(w)switch(u==null?void 0:u.name){case"HotelSelection":await t(FT());break;case"DateSelection":case"ExtraSelection":case"Summary":n(Jn.roomSelection.path);break;case"RoomSelection":await t(aA()),t(_c(1,1));break}return w}}},Tg=()=>{const e=Te(r=>r.session.guestPositionUsed),t=Te(r=>r.basket.rooms);return{isAccommodatedPosition:t.map(r=>r.guestPosition).includes(e),roomSelected:t,guestPosition:e}},re=(e,t)=>{e.interpolate||(e.interpolate=t);const n=NZ(e),r=e.interpolate?Object.values(e.interpolate):[],i=/^\[.+\/.+\]$/;return r[0]&&i.test(n)?`${r.join(" ")} ${n}`:n};function fu(e){return new Proxy({},{get(t,n){return{tag:n,page:e}}})}const Cs=fu("DateSelection"),yr=fu("HotelSelection"),Lt=fu("RoomSelection"),js=fu("ExtraSelection"),tn=fu("Summary"),Pr=fu("Basket"),yn=fu("HeaderFooterAndErrors");fu("SetAndConfigure");const Ur=fu("Common"),Ho=fu("Confirmation");function Jw(e){return e?(e.addressLines||[]).concat([`${e.zipCode} ${e.city}`,e.district,e.country]).filter(n=>!!n).map(n=>n.replace(",","")):[]}const hee=["phone","email","website"],fee={email:"mailto:",phone:"tel:",website:""},o3={email:new RegExp("^mailto:","i"),phone:new RegExp("^tel:","i"),website:new RegExp("^https?://","i")},pee=(e,t)=>!!t.match(o3[e]),mee=(e,t)=>t.replace(o3[e],""),gee=(e,t)=>pee(e,t)?t:`${fee[e]}${t}`,yee=e=>{if(!e)return;const t=e.offsetTop-window.innerHeight/2;window.scrollTo(0,t)},vee="  ",VE=(e,t,n)=>{switch(e){case void 0:case 0:return;case 1:return`${e} ${t}`;default:return`${e} ${n}`}},kg=(e,t)=>{const n=VE(e.adults,t.adultLabel,t.adultsLabel),r=VE(e.children,t.childLabel,t.childrenLabel),i=VE(e.infants,t.infantLabel,t.infantsLabel);return[n,r,i].filter(Boolean).join(vee)},a3=()=>{const e=re(Lt.Adults),t=re(Lt.Children),n=re(Lt.Infants),r=re(Lt.Adult),i=re(Lt.Child),l=re(Lt.Infant);return u=>kg(u,{adultLabel:r,adultsLabel:e,childLabel:i,childrenLabel:t,infantLabel:l,infantsLabel:n})},l3=M.createContext({selectedItem:null,action:null,onDeleteItem:()=>null,onAddItem:()=>null,onSuccess:()=>null,isDeletingAsync:!1,isConfirmingDelete:!1,onConfirmDelete:()=>null}),uA=({children:e})=>{const{onOpen:t,onClose:n}=LP(),r=ks(),i=Ir(),l=Te($=>$.basket.isUpdating),[u,a]=M.useState(null),[m,g]=M.useState(null),[w,C]=M.useState(!1),P=$=>{a($),g("delete"),i&&(r==null?void 0:r.name)===Jn.summary.name&&t()},I=$=>{a($),g("add")},N=()=>{a(null),g(null),n()},z=()=>C(!0);return y.jsx(l3.Provider,{value:{action:m,selectedItem:u,onDeleteItem:P,onAddItem:I,onSuccess:N,isConfirmingDelete:!!u&&m==="delete",isDeletingAsync:w&&l,onConfirmDelete:z},children:e})},pu=()=>M.useContext(l3),dA=e=>{const{stay:t}=Te(a=>a.session),[n,r]=M.useState({}),i=Si();return e?{stay:n,initializeStay:()=>{r(t)},modifyStay:g=>{r(w=>({...w,...g,departureDate:g.departureDate?g.departureDate:void 0}))}}:{stay:t,initializeStay:()=>null,modifyStay:a=>{i(IB(a))}}},e1=e=>{const{promoCode:t}=Te(a=>a.session),[n,r]=M.useState(""),i=Si();return e?{promoCode:n,initializePromoCode:()=>{r(t)},changePromoCode:g=>{r(g)}}:{promoCode:t,initializePromoCode:()=>null,changePromoCode:a=>{i(OT(a))}}},_ee=e=>{const{guestConstraints:t}=Te(r=>r.configuration),{guests:n}=Te(r=>r.session);return BT(t,n,e)},BT=(e,t,n)=>{const r=t.filter(i=>i.position!==n).reduce((i,l)=>({adults:i.adults-l.adults,children:i.children-l.children,infants:i.infants-l.infants}),{adults:e.adults.maxCount,children:e.children.maxCount,infants:e.infants.maxCount});return{...e,adults:{...e.adults,maxCount:Math.max(r.adults,0)},children:{...e.children,maxCount:Math.max(r.children,0)},infants:{...e.infants,maxCount:Math.max(r.infants,0)}}},hA=()=>{const e=Te(l=>l.configuration.guestConstraints),{guests:t}=Te(l=>l.session),{bookingLimit:n}=Te(l=>l.configuration.bookingEngineConstraints);return{canAddRoom:c3(t,n,e),newGuests:()=>d3(t,e)}},xee=()=>{const e=Te(i=>i.configuration.guestConstraints),{bookingLimit:t}=Te(i=>i.configuration.bookingEngineConstraints);return{canAddRoom:i=>c3(i,t,e),newGuests:i=>d3(i,e)}},c3=(e,t,n)=>u3(e,n)>0&&(!t||e.length<t),u3=(e,t)=>e.reduce((n,r)=>n-r.adults,t.adults.maxCount),d3=(e,t)=>{var n;return{adults:Math.min(u3(e,t),2),children:0,infants:0,position:(((n=e[e.length-1])==null?void 0:n.position)??0)+1}},fA=e=>{const{guests:t}=Te(z=>z.session),[n,r]=M.useState([]),i=Si(),{guestConstraints:l}=Te(z=>z.configuration),{canAddRoom:u,newGuests:a}=xee();if(e){const z=()=>u(n);return{guestsList:n,canAddGuests:z,addGuests:()=>{z()&&r(fe=>[...fe,a(fe)])},modifyGuests:(fe,Z,le)=>{r(be=>{const Re=[...be],Je=Re.findIndex(Fe=>Fe.position===Z);return Re[Je]={...Re[Je],[fe]:le},Re})},deleteGuests:fe=>{r(Z=>Z.filter(le=>le.position!==fe))},initializeGuests:()=>r(t),setGuests:fe=>r(fe),getGuestsConstraints:fe=>BT(l,n,fe)}}const m=()=>u(t);return{guestsList:t,canAddGuests:m,addGuests:()=>{m()&&i(KP(a(t)))},modifyGuests:(z,$,H)=>{i(SY({position:$,[z]:H}))},deleteGuests:z=>{i(EY({position:z}))},initializeGuests:()=>null,setGuests:z=>{i(RB(z))},getGuestsConstraints:z=>BT(l,t,z)}},h3=M.createContext({isDialogOpen:!1,searchParameters:{},onModifySearch:async()=>!1,onCloseModifySearchDialog:()=>null,onApplySearch:()=>null,modifySearchParameters:()=>null,stay:{},initializeStay:()=>null,modifyStay:()=>null,promoCode:"",initializePromoCode:()=>null,changePromoCode:()=>null,guestsList:[],canAddGuests:()=>!1,addGuests:()=>null,deleteGuests:()=>null,modifyGuests:()=>null,initializeGuests:()=>null,getGuestsConstraints:()=>({}),openedPopover:void 0,setOpenedPopover:()=>null,applyPopoverModifications:()=>null}),I_=({children:e,isUsingLocalState:t})=>{const n=Si(),{isEmptyBasket:r,onSearch:i}=cA(),[l,u]=M.useState(!1),[a,m]=M.useState(void 0),[g,w]=M.useState({}),C=lA(),P=async yt=>{if(yt.promoCode){const lt={...C(),promoCode:yt.promoCode};if(!await n(dY(lt)))return!1}return r?(N(yt),await i()):(u(!0),w(yt),!0)},I=()=>{N(g),i(),u(!1)},N=yt=>{yt.guestsList&&n(RB(yt.guestsList)),yt.stay&&n(IB(yt.stay)),yt.promoCode!==void 0&&n(OT(yt.promoCode))},z=()=>u(!1),{stay:$,initializeStay:H,modifyStay:V}=dA(t??!1),{promoCode:q,initializePromoCode:te,changePromoCode:ue}=e1(t??!1),{guestsList:fe,canAddGuests:Z,addGuests:le,deleteGuests:be,modifyGuests:Re,initializeGuests:Je,getGuestsConstraints:Fe}=fA(t??!1),Xe=async()=>{if(l||a===void 0)return;await gt({promoCode:{promoCode:q},stay:{stay:$},guests:{guestsList:fe}}[a])},gt=async yt=>{var Nt;if(await P(yt))m(void 0);else if(a==="stay"){const{session:qe}=Fr.getState();((Nt=qe.error)==null?void 0:Nt.code)===Xy.InvalidPromoCodeStayPeriod&&(n(Gw(qe.promoCode)),n(OT("")),await gt(yt))}};return y.jsx(h3.Provider,{value:{isDialogOpen:l,searchParameters:g,onModifySearch:P,onCloseModifySearchDialog:z,onApplySearch:I,modifySearchParameters:N,stay:$,initializeStay:H,modifyStay:V,promoCode:q,initializePromoCode:te,changePromoCode:ue,guestsList:fe,canAddGuests:Z,addGuests:le,deleteGuests:be,modifyGuests:Re,initializeGuests:Je,getGuestsConstraints:Fe,openedPopover:a,setOpenedPopover:m,applyPopoverModifications:Xe},children:e})},mu=()=>M.useContext(h3),f3=M.createContext({trackPageView:()=>null,trackBackToWebsite:()=>null,trackSearchParameterGuestModification:()=>null,trackSearchParameterDateModification:()=>null,trackSearchParameterRoomModification:()=>null,trackSearchCompleted:()=>null,trackOnloadViewRoomList:()=>null,trackViewRateList:()=>null,trackViewRoomDetails:()=>null,trackViewRateDetails:()=>null,trackOnloadViewExtraList:()=>null,trackViewExtraDetails:()=>null,trackAddRoom:()=>null,trackUpsertExtra:()=>null,trackRemoveRoom:()=>null,trackRemoveExtra:()=>null,trackBeginCheckout:()=>null,trackSelectCancellationInsurance:()=>null,trackSubmitQuote:()=>null,trackPurchase:()=>null,trackLegacyConfirmationPageView:()=>null,trackLegacyTransactionCompleted:()=>null}),Vi=()=>M.useContext(f3),bee=({children:e})=>{const t=Z=>Wi.try.onPageView(Z),n=()=>Wi.try.onBackToWebsite(),r=(Z,le)=>Wi.try.onSearchParameterGuestModification(Z,le),i=Z=>Wi.try.onSearchParameterDateModification({...Z}),l=Z=>Wi.try.onSearchParameterRoomModification(Z),u=()=>{Wi.try.onSearchCompleted()},a=(Z,le)=>{Wi.try.onLoadViewRoomList(Z,le)},m=(Z,le)=>Wi.try.onViewRateList(Z,le),g=(Z,le,be)=>Wi.try.onViewRoomDetails(Z,le,be),w=(Z,le,be)=>Wi.try.onViewRateDetails(Z,le,`${Z.name}-${le.name}`,be),C=(Z,le)=>Wi.try.onLoadViewExtraList(Z,le),P=(Z,le,be)=>Wi.try.onViewExtraDetails(Z,le,be),I=(Z,le)=>Wi.try.onAddRoom(Z,le),N=(Z,le)=>Wi.try.onUpsertExtra(Z,le),z=(Z,le)=>Wi.try.onRemoveRoom(Z,le),$=Z=>Wi.try.onRemoveExtra(Z),H=()=>Wi.try.onBeginCheckout(),V=Z=>Wi.try.onSelectCancellationInsurance(Z),q=()=>Wi.try.onSubmitQuote(),te=(Z,le,be)=>Wi.try.onPurchase(Z,le,be),ue=()=>Wi.try.onLegacyConfirmationPageView(),fe=(Z,le)=>Wi.try.onLegacyTransactionCompleted(Z,le);return y.jsx(f3.Provider,{value:{trackPageView:t,trackBackToWebsite:n,trackSearchParameterGuestModification:r,trackSearchParameterDateModification:i,trackSearchParameterRoomModification:l,trackSearchCompleted:u,trackOnloadViewRoomList:a,trackViewRateList:m,trackViewRoomDetails:g,trackViewRateDetails:w,trackOnloadViewExtraList:C,trackViewExtraDetails:P,trackAddRoom:I,trackUpsertExtra:N,trackRemoveRoom:z,trackRemoveExtra:$,trackBeginCheckout:H,trackSelectCancellationInsurance:V,trackSubmitQuote:q,trackPurchase:te,trackLegacyConfirmationPageView:ue,trackLegacyTransactionCompleted:fe},children:e})},p3=()=>{const e=Te(r=>r.roomSelection.rooms),t=Te(r=>r.basket.rooms),n=e.filter(r=>!t.find(i=>i.id===r.id));return t.concat(n)},md=e=>y.jsx(nX,{closeLabel:re(Lt.CloseButton),...e}),gd=e=>{const t=Te(n=>{var r;return(r=n.configuration.configurationCulture)==null?void 0:r.cultureIsRightToLeft});return y.jsx(rX,{rtl:!!t,...e})},bn=({children:e,...t})=>y.jsx(wp,{loadingLabel:re(Ur.Loading),...t,children:e}),wee=e=>y.jsx(sK,{...e}),See=({title:e,isCurrent:t,className:n})=>y.jsx(iK,{current:t,className:n,children:e}),Eee=({language:e,currency:t,onClick:n})=>{const r=`${e}  ${t}`,i=ks(),l=(i==null?void 0:i.name)===Jn.confirmation.name;return y.jsx(bn,{disabled:l,variation:"secondary","data-testid":"language-and-currency-button",onClick:n,className:"cvg-custom-header-theme",children:r})},Cee=e=>{const t=new v_(document.location).toQueries();if(!(e!=null&&e.activated)||!(e!=null&&e.url)||e.domain==window.location.hostname)return;const n=e.url+t;Tee(n)&&(window.location.href=n)},Tee=e=>{try{return new URL(e),!0}catch{return!1}},kee=e=>{const t=Object.fromEntries(Object.entries(e).map(([n,r])=>[n.replace(/^convergence:/,""),r]));IZ({tags:{...t},tagTransformer:(n,r,i)=>[r,i].join(":"),interpolation:{prefix:"{{",suffix:"}}"}})},m3=async(e="")=>{var n,r,i;const t=await mK(e);Cee((i=(r=(n=t==null?void 0:t.data)==null?void 0:n.configuration)==null?void 0:r.administration)==null?void 0:i.inSite),kee(t.data.events.find(l=>l.type==="SET_CONVERGENCE_TRANSLATIONS").translations),[...t.data.events].forEach(l=>Fr.dispatch(l)),Fr.dispatch(Iee(t.data))};function Pee(e=""){return async t=>{t(Aee());try{await m3(e)}catch(n){t(Ree(ka(n)))}}}function Aee(){return{type:"FETCH_CONFIGURATION_REQUEST"}}function Iee(e){return{type:"FETCH_CONFIGURATION_SUCCESS",response:e}}function Ree(e){return{type:"FETCH_CONFIGURATION_FAILURE",error:e}}const R_=M.createContext({isDrawerOpen:!1,onOpenDrawer:()=>null,onCloseDrawer:()=>null,handleChangeLanguageOrCurrency:()=>null,setLocalLanguage:()=>null,localLanguage:void 0,setLocalCurrency:()=>null,localCurrency:void 0}),Lee=({children:e})=>{const t=Si(),n=ks(),r=Te(te=>te.configuration.cultures.find(ue=>ue.value===te.session.culture)),i=Te(te=>te.configuration.currencies.find(ue=>ue.value===te.session.currency)),[l,u]=M.useState(!1),[a,m]=M.useState(r),[g,w]=M.useState(i),C=!!g&&g!==i,P=!!a&&a!==r,I=()=>u(!0),N=()=>{m(r),w(i),u(!1)},z=Rl(),$=async()=>{C&&await t(pY(g))},H=async()=>{P&&(await t(fY(a)),await t(Pee(a.value)))},V=()=>{if(C||P){if(Yc.getInstance().isInsite())z("");else if(a){const fe=new v_(document.location).ToQueriesWithout(["language"]);z(`${n==null?void 0:n.path}${fe}`,{replace:!0},a.value)}u(!1)}},q=async()=>{t(Gw("")),await $(),await H(),V()};return y.jsx(R_.Provider,{value:{isDrawerOpen:l,onOpenDrawer:I,onCloseDrawer:N,handleChangeLanguageOrCurrency:q,setLocalLanguage:m,localLanguage:a,setLocalCurrency:w,localCurrency:g},children:e})},Mee=()=>{const{onOpenDrawer:e}=M.useContext(R_),t=Te(te=>te.configuration.isMultiHotel),n=Te(te=>{var ue,fe;return(fe=(ue=te.session)==null?void 0:ue.selectedHotel)==null?void 0:fe.name}),r=Te(te=>{var ue;return(ue=te.session.selectedHotel)==null?void 0:ue.websites}),i=Te(te=>{var ue,fe,Z;return(Z=(fe=(ue=te.configuration.configurationTheme)==null?void 0:ue.headerAndFooter)==null?void 0:fe.header)==null?void 0:Z.pageTitle}),l=Te(te=>te.configuration.websiteUrl),u=t?i:n,a=l!==""?l:((r==null?void 0:r.length)??0)>0?r[0]:"",m=Te(te=>{var ue,fe,Z,le,be;return(be=(le=(Z=(fe=(ue=te.configuration)==null?void 0:ue.configurationTheme)==null?void 0:fe.customisation)==null?void 0:Z.colors)==null?void 0:le.header)==null?void 0:be.background}),g=Te(te=>{var ue;return te.configuration.isMultiHotel||(ue=te.session.selectedHotel)==null?void 0:ue.rating}),w=Te(te=>{var ue;return((ue=te.configuration.currencies.find(fe=>fe.value===te.session.currency))==null?void 0:ue.value)??""}),C=Te(te=>te.session.culture.split("-")[1]),P=re(yn.YourStay),I=re(yn.DetailsPayment),N=re(yn.PaymentConfirmation),z=[{id:1,title:P},{id:2,title:I},{id:3,title:N}],$=ks(),H=te=>{const ue=fe=>{const Z=z.find(le=>le.id===fe);Z&&(Z.isCurrent=!0)};switch(te){case"DateSelection":case"RoomSelection":case"ExtraSelection":case"HotelSelection":ue(1);break;case"Summary":ue(2);break}};$!=null&&$.name&&H($.name);const V=()=>y.jsx(wee,{"data-testid":"stepper",children:z.map(te=>y.jsx(See,{title:te.title,isCurrent:te.isCurrent},te.id))}),q=()=>y.jsx(Eee,{language:C,currency:w,onClick:e});return y.jsxs(y.Fragment,{children:[y.jsx(mX,{id:`${m?"header-customized":""}`,hotelHomepage:a,hotelName:u||"",hotelRating:g??0}),y.jsx(pX,{children:V()}),y.jsx(fX,{children:q()})]})},Oee=e=>{switch(typeof e=="string"?YY(e):e){case Nf.Visa:return{label:"Visa",size:"large",name:"cc-visa"};case Nf.MasterCard:return{label:"Master Card",size:"large",name:"cc-mastercard"};case Nf.AmericanExpress:return{label:"American Express",size:"large",name:"cc-amex"};case Nf.DinersClub:return{label:"Diners Club",size:"large",name:"cc-diners-club"};case Nf.Jcb:return{label:"JCB",size:"large",name:"cc-jcb"}}},Dee=e=>{switch(typeof e=="string"?QY(e):e){case PP.Paypal:return{label:"PayPal",size:"large",name:"cc-paypal"}}},g3=({supportedCardTypes:e,supportedPaymentMethods:t})=>y.jsxs("ul",{className:"cvg-supported-payment","data-testid":"footer-hotel-supportedPayments",children:[e==null?void 0:e.map(n=>y.jsx("li",{children:y.jsx(sn,{...Oee(n)})},n)),t==null?void 0:t.map(n=>y.jsx("li",{children:y.jsx(sn,{...Dee(n)})},n))]}),rf=M.createContext({isDrawerOpen:!1,onOpenDrawer:()=>null,onCloseDrawer:()=>null}),Nee=({children:e})=>{const[t,n]=M.useState(!1),[r,i]=M.useState(void 0),l=a=>{i(a),n(!0)},u=()=>n(!1);return y.jsx(rf.Provider,{value:{hotel:r,isDrawerOpen:t,onOpenDrawer:l,onCloseDrawer:u},children:e})},jee=({hotel:e})=>{const{onOpenDrawer:t}=M.useContext(rf);return y.jsxs(y.Fragment,{children:[y.jsx("p",{"data-testid":"footer-hotel-address",children:Jw(e).join(", ")}),e?y.jsx(bn,{variation:"link",onClick:()=>{t(e)},children:re(yn.MoreInformation)}):null]})};function y3(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=y3(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Or(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=y3(e))&&(r&&(r+=" "),r+=t);return r}const v3=e=>y.jsx(aB,{...e}),zee=(e,t)=>mee(e,t),HE=(e,t)=>t?{type:e,value:zee(e,t),href:gee(e,t)}:void 0,pA=e=>{const[t]=(e==null?void 0:e.phones)??[],[n]=(e==null?void 0:e.emails)??[],[r]=(e==null?void 0:e.websites)??[];return[HE("phone",t),HE("email",n),HE("website",r)].filter(l=>!!l)},Qf=({href:e,value:t,className:n})=>y.jsx(v3,{href:e,isExternal:!0,className:Or("cvg-hotel-contact__contact-link",n),children:t}),Fee=({hotel:e})=>{const t=pA(e),n=t.find(l=>l.type=="phone"),r=t.find(l=>l.type=="email"),i=t.find(l=>l.type=="website");return y.jsxs("div",{"data-testid":"footer-hotel-contact",children:[y.jsxs("div",{className:"cvg-hotel-contact__merged-contacts",children:[n?y.jsx("p",{children:y.jsx(Qf,{...n})}):null,n&&r?y.jsx("span",{className:"cvg-hotel-contact__separator",children:" - "}):null,r?y.jsx("p",{children:y.jsx(Qf,{...r})}):null]}),i?y.jsx("p",{children:y.jsx(Qf,{...i})}):null]})},Bee=(e,t)=>()=>{var i,l;const n=(i=t==null?void 0:t.paymentMethods)==null?void 0:i.supportedCardTypes,r=(l=t==null?void 0:t.paymentMethods)==null?void 0:l.supportedPaymentMethods;return[{title:e,content:y.jsx(jee,{hotel:t})},{title:re(yn.ContactSupport),content:y.jsx(Fee,{hotel:t})},{title:re(yn.PaymentMethods),content:y.jsx(g3,{supportedCardTypes:n,supportedPaymentMethods:r})}]},Uee=(e,t)=>[Vee(e),$ee(t)].filter(Boolean),$ee=e=>!!e&&{label:re(yn.PrivacyTerms),href:e,isExternal:!0},Vee=e=>!!e&&{label:re(yn.BookingModification),href:e},Hee=()=>{const e=Te(g=>g.session.selectedHotel),t=Te(g=>g.configuration.isMultiHotel),n=Te(g=>{var w,C,P;return(P=(C=(w=g.configuration.configurationTheme)==null?void 0:w.headerAndFooter)==null?void 0:C.header)==null?void 0:P.pageTitle}),r=Te(g=>g.configuration.modificationUrl),i=Te(g=>g.session.legalNoticeUrl),l=t&&n?n:(e==null?void 0:e.name)??"",u=()=>` ${new Date().getFullYear()} ${l}`,a=g=>Uee(r,t&&g&&g.name===Jn.hotelSelection.name?void 0:i);return{getColumns:t||e===void 0?()=>[]:Bee(l,e),getLinks:a,getCopyright:u}},Zee=({onClick:e})=>{const t=re(yn.Mediation);return y.jsx(bn,{type:"button","data-testId":"mediation-button",variation:"link",onClick:e,children:t})},qee=()=>{const{getColumns:e,getLinks:t,getCopyright:n}=Hee(),r=Ir(),i=Te(m=>{var g;return((g=m.basket.rooms)==null?void 0:g.length)>0}),l=Te(m=>{var g,w,C,P;return((w=(g=m.configuration.configurationLegal)==null?void 0:g.mediation)==null?void 0:w.activated)||((P=(C=m.configuration.configurationLegal)==null?void 0:C.europeanPlatform)==null?void 0:P.activated)}),u=ks(),{onOpenDrawer:a}=E4();return y.jsxs("div",{children:[y.jsx(sX,{children:e().map(m=>y.jsxs(aX,{children:[y.jsx(lX,{children:m.title}),y.jsx(cX,{children:m.content})]},m.title))}),y.jsxs(oX,{children:[y.jsx(uX,{children:n()}),y.jsxs(dX,{children:[t(u).map((m,g)=>{const{label:w,...C}=m;return y.jsx(xM,{children:y.jsx(aB,{...C,children:w})},g)}),l?y.jsx(xM,{children:y.jsx(Zee,{onClick:a})}):null]})]}),r&&i&&((u==null?void 0:u.name)==="RoomSelection"||(u==null?void 0:u.name)==="ExtraSelection")?y.jsx("div",{className:"cvg-footer__empty-button-continue"}):null]})},_3=M.forwardRef((e,t)=>y.jsx(nK,{...e,ref:t}));_3.displayName="Select";const x3=M.forwardRef(({children:e,...t},n)=>y.jsx(rK,{...t,ref:n,children:e}));x3.displayName="SelectOption";const b3=({variation:e,iconName:t,children:n="",...r})=>{const i=typeof n=="string"?n:"";return y.jsx(c9,{label:i,variation:e??"neutral",iconName:t,...r})},Gee=dn.createContext({}),w3=!0;function Wee({baseColor:e,highlightColor:t,width:n,height:r,borderRadius:i,circle:l,direction:u,duration:a,enableAnimation:m=w3,customHighlightBackground:g}){const w={};return u==="rtl"&&(w["--animation-direction"]="reverse"),typeof a=="number"&&(w["--animation-duration"]=`${a}s`),m||(w["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(w.width=n),(typeof r=="string"||typeof r=="number")&&(w.height=r),(typeof i=="string"||typeof i=="number")&&(w.borderRadius=i),l&&(w.borderRadius="50%"),typeof e<"u"&&(w["--base-color"]=e),typeof t<"u"&&(w["--highlight-color"]=t),typeof g=="string"&&(w["--custom-highlight-background"]=g),w}function Oh({count:e=1,wrapper:t,className:n,containerClassName:r,containerTestId:i,circle:l=!1,style:u,...a}){var m,g,w;const C=dn.useContext(Gee),P={...a};for(const[q,te]of Object.entries(a))typeof te>"u"&&delete P[q];const I={...C,...P,circle:l},N={...u,...Wee(I)};let z="react-loading-skeleton";n&&(z+=` ${n}`);const $=(m=I.inline)!==null&&m!==void 0?m:!1,H=[],V=Math.ceil(e);for(let q=0;q<V;q++){let te=N;if(V>e&&q===V-1){const fe=(g=te.width)!==null&&g!==void 0?g:"100%",Z=e%1,le=typeof fe=="number"?fe*Z:`calc(${fe} * ${Z})`;te={...te,width:le}}const ue=dn.createElement("span",{className:z,style:te,key:q},"");$?H.push(ue):H.push(dn.createElement(dn.Fragment,{key:q},ue,dn.createElement("br",null)))}return dn.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":(w=I.enableAnimation)!==null&&w!==void 0?w:w3},t?H.map((q,te)=>dn.createElement(t,{key:te},q)):H)}const L_=({displayedMonths:e=1,stay:t,changeStay:n})=>{const r=Si(),{trackSearchParameterDateModification:i}=Vi(),l=Te(z=>z.configuration.bookingEngineConstraints.maxStayLength),{dayNames:u,months:a,isFetching:m}=Te(z=>z.calendar),g=a.map(z=>({...z,name:z.monthName,year:+z.year})),w=!g.length||!u.length,C=(z,$)=>{!m&&$==="next"&&z+2>=g.length&&r($M())},P=re(Cs.PreviousButtonA11y),I=re(Cs.NextButtonA11y),N=z=>{var $;i({checkIn:z.arrivalDate.date,checkOut:($=z.departureDate)==null?void 0:$.date}),n(z)};return M.useEffect(()=>{!m&&w&&r($M())},[m,w,r]),y.jsxs(y.Fragment,{children:[w?y.jsx(L_.Loading,{}):null,w?null:y.jsx(P9,{dayNames:u,maxStayLength:l,months:g,displayedMonths:e,nextButtonLabel:I,previousButtonLabel:P,stay:t,onChangeStay:N,onClickNavigation:C,className:"cvg-search-bar-dialog-body__accordion-calendar"})]})},Xee=()=>y.jsx("div",{className:"gst-calendar__view",children:Array(2).fill(null).map((e,t)=>y.jsxs("div",{className:"gst-calendar__months",children:[y.jsx("div",{className:"cvg-loading-calendar__header",children:y.jsx(Oh,{width:140})}),y.jsx(Oh,{containerClassName:"cvg-loading-calendar__weekdays",count:7,width:30,inline:!0}),y.jsx("div",{className:"gst-calendar__body",children:Array(30).fill(null).map((n,r)=>y.jsx("div",{className:"cvg-loading-calendar__tile-container",children:y.jsx("div",{className:"cvg-loading-calendar__tile",children:y.jsx(Oh,{circle:!0,inline:!0,height:"100%",width:"100%"})})},r))})]},t))});L_.Loading=Xee;const mA=({id:e,label:t,hint:n,name:r,labelClassName:i,hintClassName:l,containerClassName:u,...a})=>{const m=e,g=`${e}-counter-label`;return y.jsxs("div",{className:Or({containerClassName:u,"cvg-counter__container":!u}),children:[y.jsxs("label",{className:Or("cvg-counter__label",{labelClassName:i}),htmlFor:m,id:g,children:[t,n?y.jsx("span",{className:Or("cvg-counter__hint",l),children:n}):null]}),y.jsx(V7,{id:m,labelId:g,name:r,...a})]})},Kee=e=>e.map(({name:t,value:n})=>({value:n,label:t})),Yu=M.forwardRef(({label:e,hint:t,options:n,className:r,placeholder:i,mandatory:l,showError:u,error:a,id:m,classNameLabel:g,...w},C)=>{const P=`${r||""}`,I=[...Kee(n),{value:"",label:i,disabled:!0,hidden:!0}];return y.jsxs(w_,{className:P,children:[e&&y.jsx(hd,{htmlFor:m,className:g,children:`${e}${l?"*":""}`}),y.jsx(_3,{id:m,name:m,invalid:u,ref:C,...w,children:I.map(N=>{const{label:z,value:$,...H}=N;return y.jsx(x3,{value:$,...H,children:z},$==null?void 0:$.toString())})}),u&&a&&y.jsx(sd,{variation:"error",children:a}),t&&y.jsx(sd,{children:t})]})});Yu.displayName="SelectField";const bl=M.forwardRef(({id:e,label:t,hint:n,error:r,showError:i,showErrorPlaceholder:l,className:u,name:a,mandatory:m,defaultValue:g,placeholder:w,inline:C=!1,fullWidth:P,onChange:I,onBlur:N,errorLabelClass:z=!0,...$},H)=>{const V=i&&r;return y.jsxs(w_,{className:Or(u,{"cvg-text-field--inline":C}),required:m,...$,children:[t?y.jsx("div",{className:Or({"cvg-text-field__label--inline":C},{"cvg-text-field__label--error":i&&z}),children:y.jsx(hd,{htmlFor:e,children:t})}):null,y.jsx(uK,{id:e,defaultValue:g,name:a,placeholder:w,onChange:I,onBlur:N,ref:H,className:Or({"cvg-text-field__input--inline":C}),invalid:i,fullWidth:P,...$}),n?y.jsx(sd,{variation:"default",children:n}):null,V?y.jsx(sd,{variation:"error",children:r}):null,!V&&l?y.jsx("div",{className:"cvg-test-field-error-placeholder"}):null]})});bl.displayName="TextField";const Yee=({children:e,...t})=>y.jsx(p9,{...t,children:e}),Qee=e=>y.jsx(w9,{...e}),S3=({children:e,...t})=>y.jsx(b9,{...t,children:e}),d0=({children:e,...t})=>y.jsx(S9,{...t,children:e}),Hh=({children:e,title:t,price:n,ratePrice:r,...i})=>y.jsxs(m9,{...i,children:[y.jsx(g9,{title:t,price:n,ratePrice:r}),e]}),pg=({children:e,...t})=>y.jsx(y9,{...t,children:e}),E3=M.forwardRef(({id:e,label:t,hint:n,error:r,showError:i,className:l,name:u,mandatory:a,defaultValue:m,placeholder:g,fullWidth:w,...C},P)=>y.jsxs(w_,{className:l,required:a,children:[t&&y.jsx(hd,{htmlFor:e,children:t}),y.jsx(dK,{id:e,defaultValue:m,name:u,placeholder:g,className:"cvg-textarea-field__input",invalid:i,fullWidth:w,ref:P,...C}),y.jsxs(y.Fragment,{children:[n&&y.jsx(sd,{variation:"default",children:n}),i&&r&&y.jsx(sd,{variation:"error",children:r})]})]}));E3.displayName="TextAreaField";const Jee=()=>{const e=Te(r=>{var i,l,u,a;return(a=(u=(l=(i=r.configuration)==null?void 0:i.configurationTheme)==null?void 0:l.headerAndFooter)==null?void 0:u.banner)==null?void 0:a.displayBanner}),t=Te(r=>{var i,l,u,a;return(a=(u=(l=(i=r.configuration)==null?void 0:i.configurationTheme)==null?void 0:l.headerAndFooter)==null?void 0:u.banner)==null?void 0:a.bannerTitle}),n=Te(r=>{var i,l,u,a;return(a=(u=(l=(i=r.configuration)==null?void 0:i.configurationTheme)==null?void 0:l.headerAndFooter)==null?void 0:u.banner)==null?void 0:a.bannerContent});return y.jsx(y.Fragment,{children:e&&y.jsx("div",{className:"cvg-banner-layout__container",children:y.jsxs("div",{className:"cvg-banner-layout__sections",children:[y.jsxs("div",{className:"cvg-banner-layout__section-title",children:[y.jsx(sn,{"data-testid":"circle-info-icon",name:"circle-info"}),y.jsx("h2",{children:t})]}),y.jsx("div",{children:n})]})})})},gA=M.createContext({showMap:!1,isMobileMapDisplayed:!1,setShowMap:()=>null}),ete=({children:e})=>{const[t,n]=M.useState(!1),r=Ir()&&t,i=M.useMemo(()=>({showMap:t,setShowMap:n,isMobileMapDisplayed:r}),[r,t]);return y.jsx(gA.Provider,{value:i,children:e})},C3=()=>{const{isMobileMapDisplayed:e}=M.useContext(gA);return t=>e?null:t},tte=({children:e,header:t,footer:n,...r})=>{const i=C3();return y.jsxs(yX,{...r,children:[i(y.jsx(hX,{children:t})),y.jsxs(vX,{children:[y.jsx(Jee,{}),y.jsx(gX,{children:e})]}),i(y.jsx(iX,{children:n}))]})},nte=({children:e,...t})=>y.jsx(CX,{...t,children:e}),rte=({children:e,className:t})=>y.jsx(kX,{className:t,children:e}),ite=({children:e,className:t,onClick:n,opacity:r})=>y.jsx(TX,{className:Or("cvg-popover-trigger",{"cvg-popover-trigger--opacity":r},t),onClick:n,children:e});var yA=O_(),xr=e=>M_(e,yA),vA=O_();xr.write=e=>M_(e,vA);var t1=O_();xr.onStart=e=>M_(e,t1);var _A=O_();xr.onFrame=e=>M_(e,_A);var xA=O_();xr.onFinish=e=>M_(e,xA);var Wm=[];xr.setTimeout=(e,t)=>{const n=xr.now()+t,r=()=>{const l=Wm.findIndex(u=>u.cancel==r);~l&&Wm.splice(l,1),bh-=~l?1:0},i={time:n,handler:e,cancel:r};return Wm.splice(T3(n),0,i),bh+=1,k3(),i};var T3=e=>~(~Wm.findIndex(t=>t.time>e)||~Wm.length);xr.cancel=e=>{t1.delete(e),_A.delete(e),xA.delete(e),yA.delete(e),vA.delete(e)};xr.sync=e=>{UT=!0,xr.batchedUpdates(e),UT=!1};xr.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...i){t=i,xr.onStart(n)}return r.handler=e,r.cancel=()=>{t1.delete(n),t=null},r};var bA=typeof window<"u"?window.requestAnimationFrame:()=>{};xr.use=e=>bA=e;xr.now=typeof performance<"u"?()=>performance.now():Date.now;xr.batchedUpdates=e=>e();xr.catch=console.error;xr.frameLoop="always";xr.advance=()=>{xr.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):A3()};var xh=-1,bh=0,UT=!1;function M_(e,t){UT?(t.delete(e),e(0)):(t.add(e),k3())}function k3(){xh<0&&(xh=0,xr.frameLoop!=="demand"&&bA(P3))}function ste(){xh=-1}function P3(){~xh&&(bA(P3),xr.batchedUpdates(A3))}function A3(){const e=xh;xh=xr.now();const t=T3(xh);if(t&&(I3(Wm.splice(0,t),n=>n.handler()),bh-=t),!bh){ste();return}t1.flush(),yA.flush(e?Math.min(64,xh-e):16.667),_A.flush(),vA.flush(),xA.flush()}function O_(){let e=new Set,t=e;return{add(n){bh+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return bh-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,bh-=t.size,I3(t,r=>r(n)&&e.add(r)),bh+=e.size,t=e)}}}function I3(e,t){e.forEach(n=>{try{t(n)}catch(r){xr.catch(r)}})}var ote=Object.defineProperty,ate=(e,t)=>{for(var n in t)ote(e,n,{get:t[n],enumerable:!0})},xc={};ate(xc,{assign:()=>cte,colors:()=>Dh,createStringInterpolator:()=>SA,skipAnimation:()=>L3,to:()=>R3,willAdvance:()=>EA});function $T(){}var lte=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Qt={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Bu(e,t){if(Qt.arr(e)){if(!Qt.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Br=(e,t)=>e.forEach(t);function ou(e,t,n){if(Qt.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var qa=e=>Qt.und(e)?[]:Qt.arr(e)?e:[e];function Jy(e,t){if(e.size){const n=Array.from(e);e.clear(),Br(n,t)}}var Oy=(e,...t)=>Jy(e,n=>n(...t)),wA=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),SA,R3,Dh=null,L3=!1,EA=$T,cte=e=>{e.to&&(R3=e.to),e.now&&(xr.now=e.now),e.colors!==void 0&&(Dh=e.colors),e.skipAnimation!=null&&(L3=e.skipAnimation),e.createStringInterpolator&&(SA=e.createStringInterpolator),e.requestAnimationFrame&&xr.use(e.requestAnimationFrame),e.batchedUpdates&&(xr.batchedUpdates=e.batchedUpdates),e.willAdvance&&(EA=e.willAdvance),e.frameLoop&&(xr.frameLoop=e.frameLoop)},ev=new Set,vl=[],ZE=[],h0=0,n1={get idle(){return!ev.size&&!vl.length},start(e){h0>e.priority?(ev.add(e),xr.onStart(ute)):(M3(e),xr(VT))},advance:VT,sort(e){if(h0)xr.onFrame(()=>n1.sort(e));else{const t=vl.indexOf(e);~t&&(vl.splice(t,1),O3(e))}},clear(){vl=[],ev.clear()}};function ute(){ev.forEach(M3),ev.clear(),xr(VT)}function M3(e){vl.includes(e)||O3(e)}function O3(e){vl.splice(dte(vl,t=>t.priority>e.priority),0,e)}function VT(e){const t=ZE;for(let n=0;n<vl.length;n++){const r=vl[n];h0=r.priority,r.idle||(EA(r),r.advance(e),r.idle||t.push(r))}return h0=0,ZE=vl,ZE.length=0,vl=t,vl.length>0}function dte(e,t){const n=e.findIndex(t);return n<0?e.length:n}var hte={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hc="[-+]?\\d*\\.?\\d+",f0=hc+"%";function r1(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var fte=new RegExp("rgb"+r1(hc,hc,hc)),pte=new RegExp("rgba"+r1(hc,hc,hc,hc)),mte=new RegExp("hsl"+r1(hc,f0,f0)),gte=new RegExp("hsla"+r1(hc,f0,f0,hc)),yte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,vte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_te=/^#([0-9a-fA-F]{6})$/,xte=/^#([0-9a-fA-F]{8})$/;function bte(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=_te.exec(e))?parseInt(t[1]+"ff",16)>>>0:Dh&&Dh[e]!==void 0?Dh[e]:(t=fte.exec(e))?(dm(t[1])<<24|dm(t[2])<<16|dm(t[3])<<8|255)>>>0:(t=pte.exec(e))?(dm(t[1])<<24|dm(t[2])<<16|dm(t[3])<<8|hO(t[4]))>>>0:(t=yte.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=xte.exec(e))?parseInt(t[1],16)>>>0:(t=vte.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=mte.exec(e))?(uO(dO(t[1]),Zx(t[2]),Zx(t[3]))|255)>>>0:(t=gte.exec(e))?(uO(dO(t[1]),Zx(t[2]),Zx(t[3]))|hO(t[4]))>>>0:null}function qE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function uO(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,l=qE(i,r,e+1/3),u=qE(i,r,e),a=qE(i,r,e-1/3);return Math.round(l*255)<<24|Math.round(u*255)<<16|Math.round(a*255)<<8}function dm(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function dO(e){return(parseFloat(e)%360+360)%360/360}function hO(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Zx(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function fO(e){let t=bte(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,i=(t&65280)>>>8,l=(t&255)/255;return`rgba(${n}, ${r}, ${i}, ${l})`}var Bv=(e,t,n)=>{if(Qt.fun(e))return e;if(Qt.arr(e))return Bv({range:e,output:t,extrapolate:n});if(Qt.str(e.output[0]))return SA(e);const r=e,i=r.output,l=r.range||[0,1],u=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",m=r.easing||(g=>g);return g=>{const w=Ste(g,l);return wte(g,l[w],l[w+1],i[w],i[w+1],m,u,a,r.map)}};function wte(e,t,n,r,i,l,u,a,m){let g=m?m(e):e;if(g<t){if(u==="identity")return g;u==="clamp"&&(g=t)}if(g>n){if(a==="identity")return g;a==="clamp"&&(g=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?g=-g:n===1/0?g=g-t:g=(g-t)/(n-t),g=l(g),r===-1/0?g=-g:i===1/0?g=g+r:g=g*(i-r)+r,g)}function Ste(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var CA={linear:e=>e,easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},Uv=Symbol.for("FluidValue.get"),mg=Symbol.for("FluidValue.observers"),yl=e=>!!(e&&e[Uv]),ya=e=>e&&e[Uv]?e[Uv]():e,pO=e=>e[mg]||null;function Ete(e,t){e.eventObserved?e.eventObserved(t):e(t)}function $v(e,t){const n=e[mg];n&&n.forEach(r=>{Ete(r,t)})}var D3=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Cte(this,e)}},Cte=(e,t)=>N3(e,Uv,t);function Pg(e,t){if(e[Uv]){let n=e[mg];n||N3(e,mg,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Vv(e,t){const n=e[mg];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[mg]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var N3=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),mb=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Tte=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,mO=new RegExp(`(${mb.source})(%|[a-z]+)`,"i"),kte=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,i1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,j3=e=>{const[t,n]=Pte(e);if(!t||wA())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||e}else{if(n&&i1.test(n))return j3(n);if(n)return n}return e},Pte=e=>{const t=i1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},GE,Ate=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,z3=e=>{GE||(GE=Dh?new RegExp(`(${Object.keys(Dh).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(l=>ya(l).replace(i1,j3).replace(Tte,fO).replace(GE,fO)),n=t.map(l=>l.match(mb).map(Number)),i=n[0].map((l,u)=>n.map(a=>{if(!(u in a))throw Error('The arity of each "output" value must be equal');return a[u]})).map(l=>Bv({...e,output:l}));return l=>{var m;const u=!mO.test(t[0])&&((m=t.find(g=>mO.test(g)))==null?void 0:m.replace(mb,""));let a=0;return t[0].replace(mb,()=>`${i[a++](l)}${u||""}`).replace(kte,Ate)}},TA="react-spring: ",F3=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${TA}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Ite=F3(console.warn);function Rte(){Ite(`${TA}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Lte=F3(console.warn);function Mte(){Lte(`${TA}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function s1(e){return Qt.str(e)&&(e[0]=="#"||/\d/.test(e)||!wA()&&i1.test(e)||e in(Dh||{}))}var kA=wA()?M.useEffect:M.useLayoutEffect,Ote=()=>{const e=M.useRef(!1);return kA(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function B3(){const e=M.useState()[1],t=Ote();return()=>{t.current&&e(Math.random())}}function Dte(e,t){const[n]=M.useState(()=>({inputs:t,result:e()})),r=M.useRef(),i=r.current;let l=i;return l?t&&l.inputs&&Nte(t,l.inputs)||(l={inputs:t,result:e()}):l=n,M.useEffect(()=>{r.current=l,i==n&&(n.inputs=n.result=void 0)},[l]),l.result}function Nte(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var U3=e=>M.useEffect(e,jte),jte=[];function gO(e){const t=M.useRef();return M.useEffect(()=>{t.current=e}),t.current}var Hv=Symbol.for("Animated:node"),zte=e=>!!e&&e[Hv]===e,Zc=e=>e&&e[Hv],PA=(e,t)=>lte(e,Hv,t),o1=e=>e&&e[Hv]&&e[Hv].getPayload(),$3=class{constructor(){PA(this,this)}getPayload(){return this.payload||[]}},D_=class extends $3{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Qt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new D_(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Qt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Qt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Zv=class extends D_{constructor(e){super(0),this._string=null,this._toString=Bv({output:[e,e]})}static create(e){return new Zv(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Qt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Bv({output:[this.getValue(),e]})),this._value=0,super.reset()}},p0={dependencies:null},a1=class extends $3{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return ou(this.source,(n,r)=>{zte(n)?t[r]=n.getValue(e):yl(n)?t[r]=ya(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Br(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return ou(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){p0.dependencies&&yl(e)&&p0.dependencies.add(e);const t=o1(e);t&&Br(t,n=>this.add(n))}},V3=class extends a1{constructor(e){super(e)}static create(e){return new V3(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Fte)),!0)}};function Fte(e){return(s1(e)?Zv:D_).create(e)}function HT(e){const t=Zc(e);return t?t.constructor:Qt.arr(e)?V3:s1(e)?Zv:D_}var yO=(e,t)=>{const n=!Qt.fun(e)||e.prototype&&e.prototype.isReactComponent;return M.forwardRef((r,i)=>{const l=M.useRef(null),u=n&&M.useCallback(N=>{l.current=$te(i,N)},[i]),[a,m]=Ute(r,t),g=B3(),w=()=>{const N=l.current;if(n&&!N)return;(N?t.applyAnimatedValues(N,a.getValue(!0)):!1)===!1&&g()},C=new Bte(w,m),P=M.useRef();kA(()=>(P.current=C,Br(m,N=>Pg(N,C)),()=>{P.current&&(Br(P.current.deps,N=>Vv(N,P.current)),xr.cancel(P.current.update))})),M.useEffect(w,[]),U3(()=>()=>{const N=P.current;Br(N.deps,z=>Vv(z,N))});const I=t.getComponentProps(a.getValue());return M.createElement(e,{...I,ref:u})})},Bte=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&xr.write(this.update)}};function Ute(e,t){const n=new Set;return p0.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new a1(e),p0.dependencies=null,[e,n]}function $te(e,t){return e&&(Qt.fun(e)?e(t):e.current=t),t}var vO=Symbol.for("AnimatedComponent"),Vte=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=i=>new a1(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},l=u=>{const a=_O(u)||"Anonymous";return Qt.str(u)?u=l[u]||(l[u]=yO(u,i)):u=u[vO]||(u[vO]=yO(u,i)),u.displayName=`Animated(${a})`,u};return ou(e,(u,a)=>{Qt.arr(e)&&(a=_O(u)),l[a]=l(u)}),{animated:l}},_O=e=>Qt.str(e)?e:e&&Qt.str(e.displayName)?e.displayName:Qt.fun(e)&&e.name||null;function Ff(e,...t){return Qt.fun(e)?e(...t):e}var tv=(e,t)=>e===!0||!!(t&&e&&(Qt.fun(e)?e(t):qa(e).includes(t))),H3=(e,t)=>Qt.obj(e)?t&&e[t]:e,Z3=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Hte=e=>e,AA=(e,t=Hte)=>{let n=Zte;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const l=t(e[i],i);Qt.und(l)||(r[i]=l)}return r},Zte=["config","onProps","onStart","onChange","onPause","onResume","onRest"],qte={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Gte(e){const t={};let n=0;if(ou(e,(r,i)=>{qte[i]||(t[i]=r,n++)}),n)return t}function q3(e){const t=Gte(e);if(t){const n={to:t};return ou(e,(r,i)=>i in t||(n[i]=r)),n}return{...e}}function qv(e){return e=ya(e),Qt.arr(e)?e.map(qv):s1(e)?xc.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Wte(e){for(const t in e)return!0;return!1}function ZT(e){return Qt.fun(e)||Qt.arr(e)&&Qt.obj(e[0])}function Xte(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function Kte(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var IA={default:{tension:170,friction:26}},qT={...IA.default,mass:1,damping:1,easing:CA.linear,clamp:!1},Yte=class{constructor(){this.velocity=0,Object.assign(this,qT)}};function Qte(e,t,n){n&&(n={...n},xO(n,t),t={...n,...t}),xO(e,t),Object.assign(e,t);for(const u in qT)e[u]==null&&(e[u]=qT[u]);let{frequency:r,damping:i}=e;const{mass:l}=e;return Qt.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*l,e.friction=4*Math.PI*i*l/r),e}function xO(e,t){if(!Qt.und(t.decay))e.duration=void 0;else{const n=!Qt.und(t.tension)||!Qt.und(t.friction);(n||!Qt.und(t.frequency)||!Qt.und(t.damping)||!Qt.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var bO=[],Jte=class{constructor(){this.changed=!1,this.values=bO,this.toValues=null,this.fromValues=bO,this.config=new Yte,this.immediate=!1}};function G3(e,{key:t,props:n,defaultProps:r,state:i,actions:l}){return new Promise((u,a)=>{let m,g,w=tv(n.cancel??(r==null?void 0:r.cancel),t);if(w)I();else{Qt.und(n.pause)||(i.paused=tv(n.pause,t));let N=r==null?void 0:r.pause;N!==!0&&(N=i.paused||tv(N,t)),m=Ff(n.delay||0,t),N?(i.resumeQueue.add(P),l.pause()):(l.resume(),P())}function C(){i.resumeQueue.add(P),i.timeouts.delete(g),g.cancel(),m=g.time-xr.now()}function P(){m>0&&!xc.skipAnimation?(i.delayed=!0,g=xr.setTimeout(I,m),i.pauseQueue.add(C),i.timeouts.add(g)):I()}function I(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(C),i.timeouts.delete(g),e<=(i.cancelId||0)&&(w=!0);try{l.start({...n,callId:e,cancel:w},u)}catch(N){a(N)}}})}var RA=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Xm(e.get()):t.every(n=>n.noop)?W3(e.get()):lc(e.get(),t.every(n=>n.finished)),W3=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),lc=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),Xm=e=>({value:e,cancelled:!0,finished:!1});function X3(e,t,n,r){const{callId:i,parentId:l,onRest:u}=t,{asyncTo:a,promise:m}=n;return!l&&e===a&&!t.reset?m:n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const g=AA(t,($,H)=>H==="onRest"?void 0:$);let w,C;const P=new Promise(($,H)=>(w=$,C=H)),I=$=>{const H=i<=(n.cancelId||0)&&Xm(r)||i!==n.asyncId&&lc(r,!1);if(H)throw $.result=H,C($),$},N=($,H)=>{const V=new wO,q=new SO;return(async()=>{if(xc.skipAnimation)throw Gv(n),q.result=lc(r,!1),C(q),q;I(V);const te=Qt.obj($)?{...$}:{...H,to:$};te.parentId=i,ou(g,(fe,Z)=>{Qt.und(te[Z])&&(te[Z]=fe)});const ue=await r.start(te);return I(V),n.paused&&await new Promise(fe=>{n.resumeQueue.add(fe)}),ue})()};let z;if(xc.skipAnimation)return Gv(n),lc(r,!1);try{let $;Qt.arr(e)?$=(async H=>{for(const V of H)await N(V)})(e):$=Promise.resolve(e(N,r.stop.bind(r))),await Promise.all([$.then(w),P]),z=lc(r.get(),!0,!1)}catch($){if($ instanceof wO)z=$.result;else if($ instanceof SO)z=$.result;else throw $}finally{i==n.asyncId&&(n.asyncId=l,n.asyncTo=l?a:void 0,n.promise=l?m:void 0)}return Qt.fun(u)&&xr.batchedUpdates(()=>{u(z,r,r.item)}),z})()}function Gv(e,t){Jy(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var wO=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SO=class extends Error{constructor(){super("SkipAnimationSignal")}},GT=e=>e instanceof LA,ene=1,LA=class extends D3{constructor(){super(...arguments),this.id=ene++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Zc(this);return e&&e.getValue()}to(...e){return xc.to(this,e)}interpolate(...e){return Rte(),xc.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){$v(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||n1.sort(this),$v(this,{type:"priority",parent:this,priority:e})}},pp=Symbol.for("SpringPhase"),K3=1,Y3=2,Q3=4,WE=e=>(e[pp]&K3)>0,th=e=>(e[pp]&Y3)>0,wy=e=>(e[pp]&Q3)>0,EO=(e,t)=>t?e[pp]|=Y3|K3:e[pp]&=-3,CO=(e,t)=>t?e[pp]|=Q3:e[pp]&=-5,tne=class extends LA{constructor(e,t){if(super(),this.animation=new Jte,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Qt.und(e)||!Qt.und(t)){const n=Qt.obj(e)?{...e}:{...t,from:e};Qt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(th(this)||this._state.asyncTo)||wy(this)}get goal(){return ya(this.animation.to)}get velocity(){const e=Zc(this);return e instanceof D_?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return WE(this)}get isAnimating(){return th(this)}get isPaused(){return wy(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:l}=r,u=o1(r.to);!u&&yl(r.to)&&(i=qa(ya(r.to))),r.values.forEach((g,w)=>{if(g.done)return;const C=g.constructor==Zv?1:u?u[w].lastPosition:i[w];let P=r.immediate,I=C;if(!P){if(I=g.lastPosition,l.tension<=0){g.done=!0;return}let N=g.elapsedTime+=e;const z=r.fromValues[w],$=g.v0!=null?g.v0:g.v0=Qt.arr(l.velocity)?l.velocity[w]:l.velocity;let H;const V=l.precision||(z==C?.005:Math.min(1,Math.abs(C-z)*.001));if(Qt.und(l.duration))if(l.decay){const q=l.decay===!0?.998:l.decay,te=Math.exp(-(1-q)*N);I=z+$/(1-q)*(1-te),P=Math.abs(g.lastPosition-I)<=V,H=$*te}else{H=g.lastVelocity==null?$:g.lastVelocity;const q=l.restVelocity||V/10,te=l.clamp?0:l.bounce,ue=!Qt.und(te),fe=z==C?g.v0>0:z<C;let Z,le=!1;const be=1,Re=Math.ceil(e/be);for(let Je=0;Je<Re&&(Z=Math.abs(H)>q,!(!Z&&(P=Math.abs(C-I)<=V,P)));++Je){ue&&(le=I==C||I>C==fe,le&&(H=-H*te,I=C));const Fe=-l.tension*1e-6*(I-C),Xe=-l.friction*.001*H,gt=(Fe+Xe)/l.mass;H=H+gt*be,I=I+H*be}}else{let q=1;l.duration>0&&(this._memoizedDuration!==l.duration&&(this._memoizedDuration=l.duration,g.durationProgress>0&&(g.elapsedTime=l.duration*g.durationProgress,N=g.elapsedTime+=e)),q=(l.progress||0)+N/this._memoizedDuration,q=q>1?1:q<0?0:q,g.durationProgress=q),I=z+l.easing(q)*(C-z),H=(I-g.lastPosition)/e,P=q==1}g.lastVelocity=H,Number.isNaN(I)&&(console.warn("Got NaN while animating:",this),P=!0)}u&&!u[w].done&&(P=!1),P?g.done=!0:t=!1,g.setValue(I,l.round)&&(n=!0)});const a=Zc(this),m=a.getValue();if(t){const g=ya(r.to);(m!==g||n)&&!l.decay?(a.setValue(g),this._onChange(g)):n&&l.decay&&this._onChange(m),this._stop()}else n&&this._onChange(m)}set(e){return xr.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(th(this)){const{to:e,config:t}=this.animation;xr.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Qt.und(e)?(n=this.queue||[],this.queue=[]):n=[Qt.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>RA(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Gv(this._state,e&&this._lastCallId),xr.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Qt.obj(n)?n[t]:n,(n==null||ZT(n))&&(n=void 0),r=Qt.obj(r)?r[t]:r,r==null&&(r=void 0);const i={to:n,from:r};return WE(this)||(e.reverse&&([n,r]=[r,n]),r=ya(r),Qt.und(r)?Zc(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,AA(e,(u,a)=>/^on/.test(a)?H3(u,n):u)),kO(this,e,"onProps"),Ey(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const l=this._state;return G3(++this._lastCallId,{key:n,props:e,defaultProps:r,state:l,actions:{pause:()=>{wy(this)||(CO(this,!0),Oy(l.pauseQueue),Ey(this,"onPause",lc(this,Sy(this,this.animation.to)),this))},resume:()=>{wy(this)&&(CO(this,!1),th(this)&&this._resume(),Oy(l.resumeQueue),Ey(this,"onResume",lc(this,Sy(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(u=>{if(e.loop&&u.finished&&!(t&&u.noop)){const a=J3(e);if(a)return this._update(a,!0)}return u})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(Xm(this));const r=!Qt.und(e.to),i=!Qt.und(e.from);if(r||i)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Xm(this));const{key:l,defaultProps:u,animation:a}=this,{to:m,from:g}=a;let{to:w=m,from:C=g}=e;i&&!r&&(!t.default||Qt.und(w))&&(w=C),t.reverse&&([w,C]=[C,w]);const P=!Bu(C,g);P&&(a.from=C),C=ya(C);const I=!Bu(w,m);I&&this._focus(w);const N=ZT(t.to),{config:z}=a,{decay:$,velocity:H}=z;(r||i)&&(z.velocity=0),t.config&&!N&&Qte(z,Ff(t.config,l),t.config!==u.config?Ff(u.config,l):void 0);let V=Zc(this);if(!V||Qt.und(w))return n(lc(this,!0));const q=Qt.und(t.reset)?i&&!t.default:!Qt.und(C)&&tv(t.reset,l),te=q?C:this.get(),ue=qv(w),fe=Qt.num(ue)||Qt.arr(ue)||s1(ue),Z=!N&&(!fe||tv(u.immediate||t.immediate,l));if(I){const Je=HT(w);if(Je!==V.constructor)if(Z)V=this._set(ue);else throw Error(`Cannot animate between ${V.constructor.name} and ${Je.name}, as the "to" prop suggests`)}const le=V.constructor;let be=yl(w),Re=!1;if(!be){const Je=q||!WE(this)&&P;(I||Je)&&(Re=Bu(qv(te),ue),be=!Re),(!Bu(a.immediate,Z)&&!Z||!Bu(z.decay,$)||!Bu(z.velocity,H))&&(be=!0)}if(Re&&th(this)&&(a.changed&&!q?be=!0:be||this._stop(m)),!N&&((be||yl(m))&&(a.values=V.getPayload(),a.toValues=yl(w)?null:le==Zv?[1]:qa(ue)),a.immediate!=Z&&(a.immediate=Z,!Z&&!q&&this._set(m)),be)){const{onRest:Je}=a;Br(rne,Xe=>kO(this,t,Xe));const Fe=lc(this,Sy(this,m));Oy(this._pendingCalls,Fe),this._pendingCalls.add(n),a.changed&&xr.batchedUpdates(()=>{var Xe;a.changed=!q,Je==null||Je(Fe,this),q?Ff(u.onRest,Fe):(Xe=a.onStart)==null||Xe.call(a,Fe,this)})}q&&this._set(te),N?n(X3(t.to,t,this._state,this)):be?this._start():th(this)&&!I?this._pendingCalls.add(n):n(W3(te))}_focus(e){const t=this.animation;e!==t.to&&(pO(this)&&this._detach(),t.to=e,pO(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;yl(t)&&(Pg(t,this),GT(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;yl(e)&&Vv(e,this)}_set(e,t=!0){const n=ya(e);if(!Qt.und(n)){const r=Zc(this);if(!r||!Bu(n,r.getValue())){const i=HT(n);!r||r.constructor!=i?PA(this,i.create(n)):r.setValue(n),r&&xr.batchedUpdates(()=>{this._onChange(n,t)})}}return Zc(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ey(this,"onStart",lc(this,Sy(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Ff(this.animation.onChange,e,this)),Ff(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Zc(this).reset(ya(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),th(this)||(EO(this,!0),wy(this)||this._resume())}_resume(){xc.skipAnimation?this.finish():n1.start(this)}_stop(e,t){if(th(this)){EO(this,!1);const n=this.animation;Br(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),$v(this,{type:"idle",parent:this});const r=t?Xm(this.get()):lc(this.get(),Sy(this,e??n.to));Oy(this._pendingCalls,r),n.changed&&(n.changed=!1,Ey(this,"onRest",r,this))}}};function Sy(e,t){const n=qv(t),r=qv(e.get());return Bu(r,n)}function J3(e,t=e.loop,n=e.to){const r=Ff(t);if(r){const i=r!==!0&&q3(r),l=(i||e).reverse,u=!i||i.reset;return Wv({...e,loop:t,default:!1,pause:void 0,to:!l||ZT(n)?n:void 0,from:u?e.from:void 0,reset:u,...i})}}function Wv(e){const{to:t,from:n}=e=q3(e),r=new Set;return Qt.obj(t)&&TO(t,r),Qt.obj(n)&&TO(n,r),e.keys=r.size?Array.from(r):null,e}function nne(e){const t=Wv(e);return Qt.und(t.default)&&(t.default=AA(t)),t}function TO(e,t){ou(e,(n,r)=>n!=null&&t.add(r))}var rne=["onStart","onRest","onChange","onPause","onResume"];function kO(e,t,n){e.animation[n]=t[n]!==Z3(t,n)?H3(t[n],e.key):void 0}function Ey(e,t,...n){var r,i,l,u;(i=(r=e.animation)[t])==null||i.call(r,...n),(u=(l=e.defaultProps)[t])==null||u.call(l,...n)}var ine=["onStart","onChange","onRest"],sne=1,one=class{constructor(e,t){this.id=sne++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Qt.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Wv(e)),this}start(e){let{queue:t}=this;return e?t=qa(e).map(Wv):this.queue=[],this._flush?this._flush(this,t):(i4(this,t),WT(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Br(qa(t),r=>n[r].stop(!!e))}else Gv(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Qt.und(e))this.start({pause:!0});else{const t=this.springs;Br(qa(e),n=>t[n].pause())}return this}resume(e){if(Qt.und(e))this.start({pause:!1});else{const t=this.springs;Br(qa(e),n=>t[n].resume())}return this}each(e){ou(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Jy(e,([a,m])=>{m.value=this.get(),a(m,this,this._item)}));const l=!r&&this._started,u=i||l&&n.size?this.get():null;i&&t.size&&Jy(t,([a,m])=>{m.value=u,a(m,this,this._item)}),l&&(this._started=!1,Jy(n,([a,m])=>{m.value=u,a(m,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;xr.onFrame(this._onFrame)}};function WT(e,t){return Promise.all(t.map(n=>e4(e,n))).then(n=>RA(e,n))}async function e4(e,t,n){const{keys:r,to:i,from:l,loop:u,onRest:a,onResolve:m}=t,g=Qt.obj(t.default)&&t.default;u&&(t.loop=!1),i===!1&&(t.to=null),l===!1&&(t.from=null);const w=Qt.arr(i)||Qt.fun(i)?i:void 0;w?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):Br(ine,z=>{const $=t[z];if(Qt.fun($)){const H=e._events[z];t[z]=({finished:V,cancelled:q})=>{const te=H.get($);te?(V||(te.finished=!1),q&&(te.cancelled=!0)):H.set($,{value:null,finished:V||!1,cancelled:q||!1})},g&&(g[z]=t[z])}});const C=e._state;t.pause===!C.paused?(C.paused=t.pause,Oy(t.pause?C.pauseQueue:C.resumeQueue)):C.paused&&(t.pause=!0);const P=(r||Object.keys(e.springs)).map(z=>e.springs[z].start(t)),I=t.cancel===!0||Z3(t,"cancel")===!0;(w||I&&C.asyncId)&&P.push(G3(++e._lastAsyncId,{props:t,state:C,actions:{pause:$T,resume:$T,start(z,$){I?(Gv(C,e._lastAsyncId),$(Xm(e))):(z.onRest=a,$(X3(w,z,C,e)))}}})),C.paused&&await new Promise(z=>{C.resumeQueue.add(z)});const N=RA(e,await Promise.all(P));if(u&&N.finished&&!(n&&N.noop)){const z=J3(t,u,i);if(z)return i4(e,[z]),e4(e,z,!0)}return m&&xr.batchedUpdates(()=>m(N,e,e.item)),N}function PO(e,t){const n={...e.springs};return t&&Br(qa(t),r=>{Qt.und(r.keys)&&(r=Wv(r)),Qt.obj(r.to)||(r={...r,to:void 0}),r4(n,r,i=>n4(i))}),t4(e,n),n}function t4(e,t){ou(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Pg(n,e))})}function n4(e,t){const n=new tne;return n.key=e,t&&Pg(n,t),n}function r4(e,t,n){t.keys&&Br(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function i4(e,t){Br(t,n=>{r4(e.springs,n,r=>n4(r,e))})}var l1=({children:e,...t})=>{const n=M.useContext(m0),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=Dte(()=>({pause:r,immediate:i}),[r,i]);const{Provider:l}=m0;return M.createElement(l,{value:t},e)},m0=ane(l1,{});l1.Provider=m0.Provider;l1.Consumer=m0.Consumer;function ane(e,t){return Object.assign(e,M.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var lne=()=>{const e=[],t=function(r){Mte();const i=[];return Br(e,(l,u)=>{if(Qt.und(r))i.push(l.start());else{const a=n(r,l,u);a&&i.push(l.start(a))}}),i};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const i=e.indexOf(r);~i&&e.splice(i,1)},t.pause=function(){return Br(e,r=>r.pause(...arguments)),this},t.resume=function(){return Br(e,r=>r.resume(...arguments)),this},t.set=function(r){Br(e,(i,l)=>{const u=Qt.fun(r)?r(l,i):r;u&&i.set(u)})},t.start=function(r){const i=[];return Br(e,(l,u)=>{if(Qt.und(r))i.push(l.start());else{const a=this._getProps(r,l,u);a&&i.push(l.start(a))}}),i},t.stop=function(){return Br(e,r=>r.stop(...arguments)),this},t.update=function(r){return Br(e,(i,l)=>i.update(this._getProps(r,i,l))),this};const n=function(r,i,l){return Qt.fun(r)?r(l,i):r};return t._getProps=n,t};function cne(e,t,n){const r=Qt.fun(t)&&t;r&&!n&&(n=[]);const i=M.useMemo(()=>r||arguments.length==3?lne():void 0,[]),l=M.useRef(0),u=B3(),a=M.useMemo(()=>({ctrls:[],queue:[],flush(H,V){const q=PO(H,V);return l.current>0&&!a.queue.length&&!Object.keys(q).some(ue=>!H.springs[ue])?WT(H,V):new Promise(ue=>{t4(H,q),a.queue.push(()=>{ue(WT(H,V))}),u()})}}),[]),m=M.useRef([...a.ctrls]),g=[],w=gO(e)||0;M.useMemo(()=>{Br(m.current.slice(e,w),H=>{Xte(H,i),H.stop(!0)}),m.current.length=e,C(w,e)},[e]),M.useMemo(()=>{C(0,Math.min(w,e))},n);function C(H,V){for(let q=H;q<V;q++){const te=m.current[q]||(m.current[q]=new one(null,a.flush)),ue=r?r(q,te):t[q];ue&&(g[q]=nne(ue))}}const P=m.current.map((H,V)=>PO(H,g[V])),I=M.useContext(l1),N=gO(I),z=I!==N&&Wte(I);kA(()=>{l.current++,a.ctrls=m.current;const{queue:H}=a;H.length&&(a.queue=[],Br(H,V=>V())),Br(m.current,(V,q)=>{i==null||i.add(V),z&&V.start({default:I});const te=g[q];te&&(Kte(V,te.ref),V.ref?V.queue.push(te):V.start(te))})}),U3(()=>()=>{Br(a.ctrls,H=>H.stop(!0))});const $=P.map(H=>({...H}));return i?[$,i]:$}function s4(e,t){const n=Qt.fun(e),[[r],i]=cne(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,i]:r}var une=class extends LA{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Bv(...t);const n=this._get(),r=HT(n);PA(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Bu(t,n)||(Zc(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&AO(this._active)&&XE(this)}_get(){const e=Qt.arr(this.source)?this.source.map(ya):qa(ya(this.source));return this.calc(...e)}_start(){this.idle&&!AO(this._active)&&(this.idle=!1,Br(o1(this),e=>{e.done=!1}),xc.skipAnimation?(xr.batchedUpdates(()=>this.advance()),XE(this)):n1.start(this))}_attach(){let e=1;Br(qa(this.source),t=>{yl(t)&&Pg(t,this),GT(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Br(qa(this.source),e=>{yl(e)&&Vv(e,this)}),this._active.clear(),XE(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=qa(this.source).reduce((t,n)=>Math.max(t,(GT(n)?n.priority:0)+1),0))}};function dne(e){return e.idle!==!1}function AO(e){return!e.size||Array.from(e).every(dne)}function XE(e){e.idle||(e.idle=!0,Br(o1(e),t=>{t.done=!0}),$v(e,{type:"idle",parent:e}))}xc.assign({createStringInterpolator:z3,to:(e,t)=>new une(e,t)});var o4=/^--/;function hne(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!o4.test(e)&&!(nv.hasOwnProperty(e)&&nv[e])?t+"px":(""+t).trim()}var IO={};function fne(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:i,children:l,scrollTop:u,scrollLeft:a,viewBox:m,...g}=t,w=Object.values(g),C=Object.keys(g).map(P=>n||e.hasAttribute(P)?P:IO[P]||(IO[P]=P.replace(/([A-Z])/g,I=>"-"+I.toLowerCase())));l!==void 0&&(e.textContent=l);for(const P in i)if(i.hasOwnProperty(P)){const I=hne(P,i[P]);o4.test(P)?e.style.setProperty(P,I):e.style[P]=I}C.forEach((P,I)=>{e.setAttribute(P,w[I])}),r!==void 0&&(e.className=r),u!==void 0&&(e.scrollTop=u),a!==void 0&&(e.scrollLeft=a),m!==void 0&&e.setAttribute("viewBox",m)}var nv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pne=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),mne=["Webkit","Ms","Moz","O"];nv=Object.keys(nv).reduce((e,t)=>(mne.forEach(n=>e[pne(n,t)]=e[t]),e),nv);var gne=/^(matrix|translate|scale|rotate|skew)/,yne=/^(translate)/,vne=/^(rotate|skew)/,KE=(e,t)=>Qt.num(e)&&e!==0?e+t:e,gb=(e,t)=>Qt.arr(e)?e.every(n=>gb(n,t)):Qt.num(e)?e===t:parseFloat(e)===t,_ne=class extends a1{constructor({x:e,y:t,z:n,...r}){const i=[],l=[];(e||t||n)&&(i.push([e||0,t||0,n||0]),l.push(u=>[`translate3d(${u.map(a=>KE(a,"px")).join(",")})`,gb(u,0)])),ou(r,(u,a)=>{if(a==="transform")i.push([u||""]),l.push(m=>[m,m===""]);else if(gne.test(a)){if(delete r[a],Qt.und(u))return;const m=yne.test(a)?"px":vne.test(a)?"deg":"";i.push(qa(u)),l.push(a==="rotate3d"?([g,w,C,P])=>[`rotate3d(${g},${w},${C},${KE(P,m)})`,gb(P,0)]:g=>[`${a}(${g.map(w=>KE(w,m)).join(",")})`,gb(g,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new xne(i,l)),super(r)}},xne=class extends D3{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Br(this.inputs,(n,r)=>{const i=ya(n[0]),[l,u]=this.transforms[r](Qt.arr(i)?i:n.map(ya));e+=" "+l,t=t&&u}),t?"none":e}observerAdded(e){e==1&&Br(this.inputs,t=>Br(t,n=>yl(n)&&Pg(n,this)))}observerRemoved(e){e==0&&Br(this.inputs,t=>Br(t,n=>yl(n)&&Vv(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),$v(this,e)}},bne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];xc.assign({batchedUpdates:Ca.unstable_batchedUpdates,createStringInterpolator:z3,colors:hte});var wne=Vte(bne,{applyAnimatedValues:fne,createAnimatedStyle:e=>new _ne(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),yd=wne.animated;const Sne=e=>s4({y:e?"0%":"100%",opacity:e?1:0,config:{duration:300,easing:CA.easeInOutQuad,...IA.default}}),Ene=yd(K7),Cne=yd(G7),Tne=yd(H7),kne=yd(X7),Pne=yd(W7),Ane=yd(q7),MA=({children:e,...t})=>y.jsx(Ene,{...t,children:e}),OA=({children:e,heading:t,headingClassName:n,open:r,closeButton:i,...l})=>{const u=Sne(r);return y.jsx(Cne,{heading:y.jsx(kne,{className:n,children:t}),style:u,closeButton:i,...l,children:e})},DA=({children:e})=>y.jsx(Tne,{children:e}),NA=({className:e,children:t})=>y.jsx(Pne,{className:e,children:t}),jA=({children:e,...t})=>y.jsx(Ane,{...t,children:e}),Xo=({children:e,...t})=>y.jsx(u9,{...t,children:e}),Ko=({children:e})=>y.jsx(f9,{children:e}),wc=({children:e})=>y.jsx(h9,{children:e}),N_=({children:e})=>y.jsx(d9,{children:e}),a4=({legend:e,groups:t,register:n,showError:r,error:i,inline:l,...u})=>y.jsxs(hB,{...u,children:[e?y.jsx(pB,{children:e}):null,y.jsx(fB,{orientation:l?"horizontal":"vertical",children:t.map((a,m)=>y.jsxs(gF,{...n?n(u.name):{},children:[y.jsx(dB,{value:a.id}),y.jsx(hd,{children:a.label})]},`${a.id}-${m}`))}),r&&i?y.jsx(sd,{variation:"error",children:i}):null]}),l4=(e=!1)=>e?"rtl":"ltr",Ag=({galleryPicturesLength:e,...t})=>{const n=Te(r=>{var i;return(i=r.configuration.configurationCulture)==null?void 0:i.cultureIsRightToLeft});return y.jsx(SX,{...t,documentDirection:l4(n),picturesSliderButtonNextLabel:re(Ur.Next),picturesSliderButtonPrevLabel:re(Ur.Previous),picturesSliderControlsLabel:"Pictures slider controls",picturesSliderLabel:"Pictures slider",picturesSliderNavigationDotButtonLabel:`Go to picture ${e}`,picturesSliderNavigationDotsLabel:"Pictures slider navigation dots buttons"})},Ine=({children:e,open:t,onOpenChange:n})=>y.jsx(Q7,{open:t,onOpenChange:n,children:e}),Rne=({children:e,asChild:t})=>y.jsx(eX,{asChild:t,children:e}),Lne=({children:e})=>y.jsx(J7,{children:e}),Mne=({room:e,...t})=>{var g,w;const{beds:n,id:r,name:i,area:l,defaultOccupancy:u,amenities:a,galleryPictures:m}=e;return y.jsxs("article",{"data-testid":`room-details-card-${r}`,...t,className:"cvg-room-details-card",children:[m&&m.length>0?y.jsx(Ag,{picture2XHeight:332,picture2XWidth:272,pictures:m,picturesSliderRatio:"landscape-wide",galleryPicturesLength:m.length}):null,y.jsxs("div",{className:"cvg-room-details-card__info",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:i}),y.jsxs("ul",{className:"cvg-typo-body-small cvg-room-details-card__info-list",children:[y.jsxs("li",{className:"cvg-room-details-card__info-list-item",children:[y.jsx(sn,{name:"user-group",size:"small"}),u]}),l?y.jsxs("li",{className:"cvg-room-details-card__info-list-item",children:[y.jsx(sn,{name:"arrows-maximize",size:"small"}),e.area]}):null,(g=e.beds)!=null&&g.length?y.jsxs("li",{className:"cvg-room-details-card__info-list-item",children:[y.jsx(sn,{name:"bed-front",size:"small"}),((w=e.beds)==null?void 0:w.length)>1?re(Lt.MultipleBedsOption):e.beds]}):null]}),e.summary?y.jsx("p",{className:"cvg-typo-body-small cvg-room-details-card__info-summary",dangerouslySetInnerHTML:{__html:e.summary}}):null]}),y.jsxs("div",{className:"cvg-room-details-card__bedding cvg-room-details-card__bedding--hidden",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:re(Lt.BeddingOptionsTitle)}),y.jsx("ul",{className:"cvg-typo-body cvg-room-details-card__bedding-list",children:y.jsx("li",{children:n==null?void 0:n.join(", ")})})]}),a&&a.length>0?y.jsxs("div",{className:"cvg-room-details-card__amenities",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:re(Lt.FacilitiesTitle)}),y.jsx("div",{className:"cvg-room-details-card__amenities-list-container",children:y.jsx("ul",{className:"cvg-typo-body-small cvg-room-details-card__amenities-list",children:a==null?void 0:a.map(C=>y.jsx("li",{className:"cvg-room-details-card__amenities-item",children:C},C))})})]}):null]})},j_=({label:e,calculationMode:t,className:n})=>{const r=t==="Percentage"||t==="PercentageWoExtras"?e:`-${e}`;return y.jsx(b3,{variation:"positive",className:n,children:t==="None"?re(Lt.SpecialOfferAmountDisplay,{amount:""}):re(Lt.SpecialOfferAmountDisplay,{amount:r})})},One=({bestRate:e,promoCode:t,calculationMode:n,onClose:r})=>y.jsxs("div",{className:"cvg-room-details-card__footer",children:[y.jsxs("div",{className:"cvg-room-details-card__footer-pricing-container",children:[t&&n&&y.jsx(j_,{calculationMode:n,label:t}),e&&y.jsxs("div",{className:"cvg-room-details-card__footer-pricing",children:[y.jsx("span",{className:"cvg-typo-body",children:`${re(Lt.StartingPriceIndicator)}`}),y.jsx("span",{className:"cvg-typo-heading-3",children:`${e[0].averagePrice}`})]})]}),y.jsx(bn,{variation:"brand",onClick:r,className:"cvg-room-details-card__button",children:re(Lt.RatesDisplayButton)})]}),Dne=e=>({id:e.id.toString(),defaultOccupancy:e.defaultOccupancy,name:e.name,area:e==null?void 0:e.area,beds:e==null?void 0:e.beds,galleryPictures:e.galleryPictures,summary:e==null?void 0:e.summary,amenities:e==null?void 0:e.amenities}),Nne=e=>{const t=p3();return{getRoomDetailsContent:u=>{const a=t.find(m=>m.id===u);return a&&y.jsx(Mne,{room:Dne(a)})},getRoomDetailsFooter:(u,a)=>{const m=t.find(w=>w.id===u),g=m&&[...m.rates].sort((w,C)=>w.priceAmount-C.priceAmount);return y.jsx(One,{...a,bestRate:g})},openRoomDetails:u=>e({roomId:u}),getRoomDetailsTitle:()=>re(Lt.RoomDetailsViewLink)}},jne=(e,t)=>{const n=[],r=new b_(t);for(const i of e){n.push({day:r.toShortLocaleDate(i.start),price:i.value.convertedText});const l=zne(i.start,i.end);l>1&&Fne(i.start,l-1).map(a=>{n.push({day:r.toShortLocaleDate(a),price:i.value.convertedText})})}return n},zne=(e,t)=>{const n=new Date(e),l=(new Date(t).getTime()-n.getTime())/(1e3*3600*24);return l>=0?l:0},Fne=(e,t)=>{const n=new Date(e),r=[];for(let i=0;i<t;i++)r.push(new Date(n.setDate(n.getDate()+1)));return r},Bne=({roomDailyPrice:e})=>{const t=Te(i=>{var l,u;return(u=(l=i.configuration)==null?void 0:l.configurationCulture)==null?void 0:u.culture}),n=t?jne(e.dailyRoomPrice,t):[],r=n==null?void 0:n.length;return y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(r==1?Lt.TotalNightsCountIndicatorOther:Lt.TotalNightsCountIndicator,{nights:r})}),y.jsx("div",{children:n.map(i=>y.jsxs("div",{className:"cvg-rate-details-card__daily-prices",children:[y.jsx("span",{className:"cvg-rate-details-card__daily-price cvg-typo-body-small",children:i.day}),y.jsx("span",{className:"cvg-typo-body-small",children:i.price})]},i.day))})]})},Une=({rate:e})=>{var t,n;return y.jsxs("article",{"data-testid":`rate-details-card-${e.id}`,className:"cvg-rate-details-card",children:[e.galleryPictures.length>0&&y.jsx(Ag,{galleryPicturesLength:e.galleryPictures.length,picture2XHeight:332,picture2XWidth:272,pictures:e.galleryPictures}),y.jsx("h2",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:e.name}),y.jsxs("div",{className:"cvg-typo-body-small cvg-rate-details-card__info",children:[y.jsxs("p",{className:"cvg-rate-details-card__info-occupancy",children:[y.jsx(sn,{name:"user-group",size:"small"}),e.occupancyText]}),y.jsxs("ul",{children:[y.jsx("li",{children:e.typeText}),y.jsx("li",{children:e.breakfast}),y.jsx("li",{children:e.internet}),y.jsx("li",{children:e.cancelConditionsName})]}),e.promoCode?y.jsx("div",{className:"cvg-rate-details-card__item",children:e.promoCode?y.jsx(j_,{calculationMode:__[e.promoCode.calculationMode],label:e.promoCode.discount}):null}):null]}),e.summary?y.jsx("div",{className:"cvg-typo-body-small cvg-typo-body--breakpoint-small cvg-rate-details-card__summary",dangerouslySetInnerHTML:{__html:e.summary}}):null,y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Lt.CancellationPolicyDetails)}),y.jsx("p",{className:"cvg-typo-body-small",children:e.cancelConditionsSummary})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Lt.DepositInformation)}),y.jsx("p",{className:"cvg-typo-body-small",children:e.deposit})]}),e.includedTaxes.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.IncludedTaxesFees)}),e.includedTaxes.map((r,i)=>y.jsxs("p",{className:"cvg-typo-body-small",children:[r.name,": ",r.text]},i))]}),((t=e.excludedTaxes)==null?void 0:t.length)>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.TaxesFeesUponBooking)}),e.excludedTaxes.map((r,i)=>y.jsxs("p",{className:"cvg-typo-body-small",children:[r.name,": ",r.text]},i))]}),((n=e.onSiteTaxes)==null?void 0:n.length)>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.TaxesFeesPaidHotel)}),e.onSiteTaxes.map((r,i)=>y.jsxs("p",{className:"cvg-typo-body-small",children:[r.name,": ",r.text]},i))]}),y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Lt.AverageNightlyRateDisplay)}),y.jsx("p",{className:"cvg-typo-body-small",children:e.averagePrice})]}),e.roomDailyPrice?y.jsx(Bne,{roomDailyPrice:e.roomDailyPrice}):null]})},$ne=({onClose:e})=>y.jsx("div",{className:"cvg-drawer-card__footer",children:y.jsx(bn,{variation:"brand",onClick:e,className:"cvg-drawer-card__button",children:re(Lt.CloseButton)})}),Vne=e=>({id:e.id,breakfast:e.breakfast,cancelConditionsName:e.cancelConditionsName,cancelConditionsSummary:e.cancelConditionsSummary,deposit:e.deposit,includedTaxes:e.includedTaxes,excludedTaxes:e.excludedTaxes,promoCode:e.promoCode,name:e.name,internet:e.internet,occupancyText:e.occupancyText,averagePrice:e.averagePrice,onSiteTaxes:e.onSiteTaxes,galleryPictures:e.galleryPictures,typeText:e.typeText,summary:e.summary,roomDailyPrice:e.roomDailyPrice}),Hne=e=>{const t=p3();return{getRateDetailsContent:u=>{const a=t.find(g=>g.id===u.roomId),m=a==null?void 0:a.rates.find(g=>g.id===(u==null?void 0:u.rateId)&&u.occupancyId===g.occupancyId);return m&&y.jsx(Une,{rate:Vne(m)})},getRateDetailsFooter:u=>y.jsx($ne,{...u}),openRateDetails:u=>e({roomRateOccupancy:u}),getRateDetailsTitle:()=>re(Lt.RateDetailsInformation)}};var c4=typeof global=="object"&&global&&global.Object===Object&&global,Zne=typeof self=="object"&&self&&self.Object===Object&&self,vd=c4||Zne||Function("return this")(),gg=vd.Symbol,u4=Object.prototype,qne=u4.hasOwnProperty,Gne=u4.toString,Cy=gg?gg.toStringTag:void 0;function Wne(e){var t=qne.call(e,Cy),n=e[Cy];try{e[Cy]=void 0;var r=!0}catch{}var i=Gne.call(e);return r&&(t?e[Cy]=n:delete e[Cy]),i}var Xne=Object.prototype,Kne=Xne.toString;function Yne(e){return Kne.call(e)}var Qne="[object Null]",Jne="[object Undefined]",RO=gg?gg.toStringTag:void 0;function z_(e){return e==null?e===void 0?Jne:Qne:RO&&RO in Object(e)?Wne(e):Yne(e)}function Xv(e){return e!=null&&typeof e=="object"}var g0=Array.isArray;function d4(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ere="[object AsyncFunction]",tre="[object Function]",nre="[object GeneratorFunction]",rre="[object Proxy]";function h4(e){if(!d4(e))return!1;var t=z_(e);return t==tre||t==nre||t==ere||t==rre}var YE=vd["__core-js_shared__"],LO=function(){var e=/[^.]+$/.exec(YE&&YE.keys&&YE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ire(e){return!!LO&&LO in e}var sre=Function.prototype,ore=sre.toString;function Cp(e){if(e!=null){try{return ore.call(e)}catch{}try{return e+""}catch{}}return""}var are=/[\\^$.*+?()[\]{}|]/g,lre=/^\[object .+?Constructor\]$/,cre=Function.prototype,ure=Object.prototype,dre=cre.toString,hre=ure.hasOwnProperty,fre=RegExp("^"+dre.call(hre).replace(are,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pre(e){if(!d4(e)||ire(e))return!1;var t=h4(e)?fre:lre;return t.test(Cp(e))}function mre(e,t){return e==null?void 0:e[t]}function Ig(e,t){var n=mre(e,t);return pre(n)?n:void 0}var XT=Ig(vd,"WeakMap"),gre=9007199254740991,yre=/^(?:0|[1-9]\d*)$/;function vre(e,t){var n=typeof e;return t=t??gre,!!t&&(n=="number"||n!="symbol"&&yre.test(e))&&e>-1&&e%1==0&&e<t}function f4(e,t){return e===t||e!==e&&t!==t}var _re=9007199254740991;function p4(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_re}function xre(e){return e!=null&&p4(e.length)&&!h4(e)}var bre=Object.prototype;function wre(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||bre;return e===n}function Sre(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ere="[object Arguments]";function MO(e){return Xv(e)&&z_(e)==Ere}var m4=Object.prototype,Cre=m4.hasOwnProperty,Tre=m4.propertyIsEnumerable,kre=MO(function(){return arguments}())?MO:function(e){return Xv(e)&&Cre.call(e,"callee")&&!Tre.call(e,"callee")};function Pre(){return!1}var g4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OO=g4&&typeof module=="object"&&module&&!module.nodeType&&module,Are=OO&&OO.exports===g4,DO=Are?vd.Buffer:void 0,Ire=DO?DO.isBuffer:void 0,KT=Ire||Pre,Rre="[object Arguments]",Lre="[object Array]",Mre="[object Boolean]",Ore="[object Date]",Dre="[object Error]",Nre="[object Function]",jre="[object Map]",zre="[object Number]",Fre="[object Object]",Bre="[object RegExp]",Ure="[object Set]",$re="[object String]",Vre="[object WeakMap]",Hre="[object ArrayBuffer]",Zre="[object DataView]",qre="[object Float32Array]",Gre="[object Float64Array]",Wre="[object Int8Array]",Xre="[object Int16Array]",Kre="[object Int32Array]",Yre="[object Uint8Array]",Qre="[object Uint8ClampedArray]",Jre="[object Uint16Array]",eie="[object Uint32Array]",Ai={};Ai[qre]=Ai[Gre]=Ai[Wre]=Ai[Xre]=Ai[Kre]=Ai[Yre]=Ai[Qre]=Ai[Jre]=Ai[eie]=!0;Ai[Rre]=Ai[Lre]=Ai[Hre]=Ai[Mre]=Ai[Zre]=Ai[Ore]=Ai[Dre]=Ai[Nre]=Ai[jre]=Ai[zre]=Ai[Fre]=Ai[Bre]=Ai[Ure]=Ai[$re]=Ai[Vre]=!1;function tie(e){return Xv(e)&&p4(e.length)&&!!Ai[z_(e)]}function nie(e){return function(t){return e(t)}}var y4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rv=y4&&typeof module=="object"&&module&&!module.nodeType&&module,rie=rv&&rv.exports===y4,QE=rie&&c4.process,NO=function(){try{var e=rv&&rv.require&&rv.require("util").types;return e||QE&&QE.binding&&QE.binding("util")}catch{}}(),jO=NO&&NO.isTypedArray,v4=jO?nie(jO):tie,iie=Object.prototype,sie=iie.hasOwnProperty;function oie(e,t){var n=g0(e),r=!n&&kre(e),i=!n&&!r&&KT(e),l=!n&&!r&&!i&&v4(e),u=n||r||i||l,a=u?Sre(e.length,String):[],m=a.length;for(var g in e)sie.call(e,g)&&!(u&&(g=="length"||i&&(g=="offset"||g=="parent")||l&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||vre(g,m)))&&a.push(g);return a}function aie(e,t){return function(n){return e(t(n))}}var lie=aie(Object.keys,Object),cie=Object.prototype,uie=cie.hasOwnProperty;function die(e){if(!wre(e))return lie(e);var t=[];for(var n in Object(e))uie.call(e,n)&&n!="constructor"&&t.push(n);return t}function hie(e){return xre(e)?oie(e):die(e)}var Kv=Ig(Object,"create");function fie(){this.__data__=Kv?Kv(null):{},this.size=0}function pie(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mie="__lodash_hash_undefined__",gie=Object.prototype,yie=gie.hasOwnProperty;function vie(e){var t=this.__data__;if(Kv){var n=t[e];return n===mie?void 0:n}return yie.call(t,e)?t[e]:void 0}var _ie=Object.prototype,xie=_ie.hasOwnProperty;function bie(e){var t=this.__data__;return Kv?t[e]!==void 0:xie.call(t,e)}var wie="__lodash_hash_undefined__";function Sie(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Kv&&t===void 0?wie:t,this}function mp(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mp.prototype.clear=fie;mp.prototype.delete=pie;mp.prototype.get=vie;mp.prototype.has=bie;mp.prototype.set=Sie;function Eie(){this.__data__=[],this.size=0}function c1(e,t){for(var n=e.length;n--;)if(f4(e[n][0],t))return n;return-1}var Cie=Array.prototype,Tie=Cie.splice;function kie(e){var t=this.__data__,n=c1(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Tie.call(t,n,1),--this.size,!0}function Pie(e){var t=this.__data__,n=c1(t,e);return n<0?void 0:t[n][1]}function Aie(e){return c1(this.__data__,e)>-1}function Iie(e,t){var n=this.__data__,r=c1(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function _d(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_d.prototype.clear=Eie;_d.prototype.delete=kie;_d.prototype.get=Pie;_d.prototype.has=Aie;_d.prototype.set=Iie;var Yv=Ig(vd,"Map");function Rie(){this.size=0,this.__data__={hash:new mp,map:new(Yv||_d),string:new mp}}function Lie(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function u1(e,t){var n=e.__data__;return Lie(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Mie(e){var t=u1(this,e).delete(e);return this.size-=t?1:0,t}function Oie(e){return u1(this,e).get(e)}function Die(e){return u1(this,e).has(e)}function Nie(e,t){var n=u1(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Tp(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Tp.prototype.clear=Rie;Tp.prototype.delete=Mie;Tp.prototype.get=Oie;Tp.prototype.has=Die;Tp.prototype.set=Nie;function jie(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function zie(){this.__data__=new _d,this.size=0}function Fie(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Bie(e){return this.__data__.get(e)}function Uie(e){return this.__data__.has(e)}var $ie=200;function Vie(e,t){var n=this.__data__;if(n instanceof _d){var r=n.__data__;if(!Yv||r.length<$ie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Tp(r)}return n.set(e,t),this.size=n.size,this}function Nh(e){var t=this.__data__=new _d(e);this.size=t.size}Nh.prototype.clear=zie;Nh.prototype.delete=Fie;Nh.prototype.get=Bie;Nh.prototype.has=Uie;Nh.prototype.set=Vie;function Hie(e,t){for(var n=-1,r=e==null?0:e.length,i=0,l=[];++n<r;){var u=e[n];t(u,n,e)&&(l[i++]=u)}return l}function Zie(){return[]}var qie=Object.prototype,Gie=qie.propertyIsEnumerable,zO=Object.getOwnPropertySymbols,Wie=zO?function(e){return e==null?[]:(e=Object(e),Hie(zO(e),function(t){return Gie.call(e,t)}))}:Zie;function Xie(e,t,n){var r=t(e);return g0(e)?r:jie(r,n(e))}function FO(e){return Xie(e,hie,Wie)}var YT=Ig(vd,"DataView"),QT=Ig(vd,"Promise"),JT=Ig(vd,"Set"),BO="[object Map]",Kie="[object Object]",UO="[object Promise]",$O="[object Set]",VO="[object WeakMap]",HO="[object DataView]",Yie=Cp(YT),Qie=Cp(Yv),Jie=Cp(QT),ese=Cp(JT),tse=Cp(XT),ah=z_;(YT&&ah(new YT(new ArrayBuffer(1)))!=HO||Yv&&ah(new Yv)!=BO||QT&&ah(QT.resolve())!=UO||JT&&ah(new JT)!=$O||XT&&ah(new XT)!=VO)&&(ah=function(e){var t=z_(e),n=t==Kie?e.constructor:void 0,r=n?Cp(n):"";if(r)switch(r){case Yie:return HO;case Qie:return BO;case Jie:return UO;case ese:return $O;case tse:return VO}return t});var ZO=vd.Uint8Array,nse="__lodash_hash_undefined__";function rse(e){return this.__data__.set(e,nse),this}function ise(e){return this.__data__.has(e)}function y0(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Tp;++t<n;)this.add(e[t])}y0.prototype.add=y0.prototype.push=rse;y0.prototype.has=ise;function sse(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ose(e,t){return e.has(t)}var ase=1,lse=2;function _4(e,t,n,r,i,l){var u=n&ase,a=e.length,m=t.length;if(a!=m&&!(u&&m>a))return!1;var g=l.get(e),w=l.get(t);if(g&&w)return g==t&&w==e;var C=-1,P=!0,I=n&lse?new y0:void 0;for(l.set(e,t),l.set(t,e);++C<a;){var N=e[C],z=t[C];if(r)var $=u?r(z,N,C,t,e,l):r(N,z,C,e,t,l);if($!==void 0){if($)continue;P=!1;break}if(I){if(!sse(t,function(H,V){if(!ose(I,V)&&(N===H||i(N,H,n,r,l)))return I.push(V)})){P=!1;break}}else if(!(N===z||i(N,z,n,r,l))){P=!1;break}}return l.delete(e),l.delete(t),P}function cse(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function use(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var dse=1,hse=2,fse="[object Boolean]",pse="[object Date]",mse="[object Error]",gse="[object Map]",yse="[object Number]",vse="[object RegExp]",_se="[object Set]",xse="[object String]",bse="[object Symbol]",wse="[object ArrayBuffer]",Sse="[object DataView]",qO=gg?gg.prototype:void 0,JE=qO?qO.valueOf:void 0;function Ese(e,t,n,r,i,l,u){switch(n){case Sse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case wse:return!(e.byteLength!=t.byteLength||!l(new ZO(e),new ZO(t)));case fse:case pse:case yse:return f4(+e,+t);case mse:return e.name==t.name&&e.message==t.message;case vse:case xse:return e==t+"";case gse:var a=cse;case _se:var m=r&dse;if(a||(a=use),e.size!=t.size&&!m)return!1;var g=u.get(e);if(g)return g==t;r|=hse,u.set(e,t);var w=_4(a(e),a(t),r,i,l,u);return u.delete(e),w;case bse:if(JE)return JE.call(e)==JE.call(t)}return!1}var Cse=1,Tse=Object.prototype,kse=Tse.hasOwnProperty;function Pse(e,t,n,r,i,l){var u=n&Cse,a=FO(e),m=a.length,g=FO(t),w=g.length;if(m!=w&&!u)return!1;for(var C=m;C--;){var P=a[C];if(!(u?P in t:kse.call(t,P)))return!1}var I=l.get(e),N=l.get(t);if(I&&N)return I==t&&N==e;var z=!0;l.set(e,t),l.set(t,e);for(var $=u;++C<m;){P=a[C];var H=e[P],V=t[P];if(r)var q=u?r(V,H,P,t,e,l):r(H,V,P,e,t,l);if(!(q===void 0?H===V||i(H,V,n,r,l):q)){z=!1;break}$||($=P=="constructor")}if(z&&!$){var te=e.constructor,ue=t.constructor;te!=ue&&"constructor"in e&&"constructor"in t&&!(typeof te=="function"&&te instanceof te&&typeof ue=="function"&&ue instanceof ue)&&(z=!1)}return l.delete(e),l.delete(t),z}var Ase=1,GO="[object Arguments]",WO="[object Array]",qx="[object Object]",Ise=Object.prototype,XO=Ise.hasOwnProperty;function Rse(e,t,n,r,i,l){var u=g0(e),a=g0(t),m=u?WO:ah(e),g=a?WO:ah(t);m=m==GO?qx:m,g=g==GO?qx:g;var w=m==qx,C=g==qx,P=m==g;if(P&&KT(e)){if(!KT(t))return!1;u=!0,w=!1}if(P&&!w)return l||(l=new Nh),u||v4(e)?_4(e,t,n,r,i,l):Ese(e,t,m,n,r,i,l);if(!(n&Ase)){var I=w&&XO.call(e,"__wrapped__"),N=C&&XO.call(t,"__wrapped__");if(I||N){var z=I?e.value():e,$=N?t.value():t;return l||(l=new Nh),i(z,$,n,r,l)}}return P?(l||(l=new Nh),Pse(e,t,n,r,i,l)):!1}function x4(e,t,n,r,i){return e===t?!0:e==null||t==null||!Xv(e)&&!Xv(t)?e!==e&&t!==t:Rse(e,t,n,r,x4,i)}function Lse(e,t){return x4(e,t)}const Km=M.forwardRef(({label:e,hint:t,error:n,showError:r,mandatory:i,name:l,className:u,...a},m)=>y.jsxs(U9,{className:u,required:i,children:[y.jsx(V9,{name:l,ref:m,...a,invalid:r}),e&&y.jsx(hd,{children:e}),t&&y.jsx(sd,{children:t}),r&&n&&y.jsx(sd,{variation:"error",children:n})]}));Km.displayName="Checkbox";const Mse=()=>{const e=Te(t=>t.session.error);return y.jsx(y.Fragment,{children:e&&(e.type===mi.ErrorWithFilters||e.type===mi.ErrorWithSortOrder)?y.jsx(Xo,{variation:"error",direction:"row",children:y.jsx(Ko,{children:re(yn.ErrorGeneralRetry)})}):null})},Ose=()=>{const e=Te(r=>r.roomSelection.filters),{stateFilters:t,setStateFilters:n}=gu();return y.jsxs("div",{className:"cvg-filter-rooms",children:[y.jsx(Mse,{}),e.map(r=>y.jsxs("fieldset",{className:"cvg-filter-rooms__filter",children:[y.jsx("legend",{className:"cvg-typo-heading-5  cvg-typo-heading-4--breakpoint-small cvg-filter-rooms__legend",children:r.name}),r.values.map(i=>{const l=`${r.id}-${i==null?void 0:i.id}`;return y.jsx(Km,{name:i.name,checked:t[l],onChange:()=>n({...t,[l]:!t[l]}),label:i.name},i.id)})]},r.id))]})},Dse=({onClearFilters:e,onApplyFilters:t})=>{const n=Te(u=>u.roomSelection.isFetching),r=Te(u=>u.session.isFetching),i=re(Lt.ApplyFilterButton),l=re(Lt.ClearButton);return y.jsxs("div",{className:"cvg-filters-rooms-footer",children:[y.jsx(bn,{variation:"brand",loading:r||n,onClick:t,children:i}),y.jsx(bn,{variation:"secondary",onClick:e,children:l})]})},Nse=(e,t)=>{const n=Si(),r=Te(N=>N.roomSelection.filters),i=Te(N=>N.session.roomFilters),l=Te(N=>N.session.guests),u=Te(N=>N.basket.rooms),a=ek(r,i),m=(N,z)=>async()=>{const $=$se(z());let H=!1,V=!0;const{isFirstApply:q,hasCleanFilters:te,hasModifyFilters:ue}=jse($,i);if((q||te||ue)&&(H=!0,V=await n(XP($))),V&&H){const fe=Ep(l,u);await n(_c(1,fe))}V&&N()},g=()=>{e(ek(r))};return{getFilterTitle:()=>re(Lt.FilterResultsOption),getFilterRoomsContent:()=>y.jsx(Ose,{}),getFilterRoomsFooter:(N,z)=>y.jsx(Dse,{onApplyFilters:m(N,z),onClearFilters:g}),openFilter:()=>{t({filter:!0}),e(a)}}};function jse(e,t){const n=e.length>0&&t.length===0,r=e.length===0&&t.length>0,i=e.length>0&&t.length>0&&!Lse(e,t);return{isFirstApply:n,hasCleanFilters:r,hasModifyFilters:i}}const zse=()=>{const{includedTaxes:e,excludedTaxes:t,onSiteTaxes:n}=Te(r=>r.summary.quote);return y.jsxs("article",{"data-testid":"taxes-details",className:"cvg-taxes-details",children:[e.length>0&&y.jsxs("div",{"data-testid":"taxes-details-included",children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.IncludedTaxesFees)}),e.map((r,i)=>y.jsxs("p",{className:"cvg-typo-body-small cvg-typo-body--breakpoint-small",children:[r.name,": ",r.summary]},i))]}),(t==null?void 0:t.length)>0&&y.jsxs("div",{"data-testid":"taxes-details-excluded",children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.TaxesFeesUponBooking)}),t.map((r,i)=>y.jsxs("p",{className:"cvg-typo-body-small cvg-typo-body--breakpoint-small",children:[r.name,": ",r.summary]},i))]}),(n==null?void 0:n.length)>0&&y.jsxs("div",{"data-testid":"taxes-details-onsite",children:[y.jsx("h3",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:re(Ur.TaxesFeesPaidHotel)}),n.map((r,i)=>y.jsx("p",{className:"cvg-typo-body-small cvg-typo-body--breakpoint-small",children:r},i))]})]})},Fse=({onClose:e})=>y.jsx("div",{className:"cvg-room-details-card__footer",children:y.jsx(bn,{variation:"brand",onClick:e,className:"cvg-room-details-card__button",children:re(Lt.CloseButton)})}),Bse=e=>({getTaxesDetailsContent:()=>y.jsx(zse,{}),getTaxesDetailsFooter:l=>y.jsx(Fse,{...l}),openTaxesDetails:()=>{e({taxes:!0})},getTaxesDetailsTitle:()=>re(Ur.TaxesFeesDetails)}),Use={roomId:void 0,roomRateOccupancy:void 0,filter:void 0,taxes:void 0},b4=M.createContext({isOpen:!1,openRoomDetails:()=>null,openRateDetails:()=>null,openFilter:()=>null,openTaxesDetails:()=>null,onClose:()=>null,content:null,title:void 0,footer:null,stateFilters:{},setStateFilters:()=>null}),gu=()=>M.useContext(b4),w4=({children:e})=>{const[t,n]=M.useState(Use),[r,i]=M.useState({}),l=()=>r,u=()=>n({roomId:void 0,roomRateOccupancy:void 0,filter:void 0,taxes:void 0}),a=!!(t.roomId||t.roomRateOccupancy||t.filter||t.taxes),{getRoomDetailsContent:m,getRoomDetailsFooter:g,openRoomDetails:w,getRoomDetailsTitle:C}=Nne(n),{getRateDetailsContent:P,getRateDetailsFooter:I,openRateDetails:N,getRateDetailsTitle:z}=Hne(n),{getFilterRoomsContent:$,getFilterRoomsFooter:H,getFilterTitle:V,openFilter:q}=Nse(i,n),{getTaxesDetailsContent:te,getTaxesDetailsFooter:ue,getTaxesDetailsTitle:fe,openTaxesDetails:Z}=Bse(n),le=()=>{if(t.roomId)return C();if(t.roomRateOccupancy)return z();if(t.filter)return V();if(t.taxes)return fe()},be=()=>t.roomId?m(t.roomId):t.roomRateOccupancy?P(t.roomRateOccupancy):t.filter?$():t.taxes?te():null,Re=()=>t.roomId?g(t.roomId,{onClose:u}):t.roomRateOccupancy?I({onClose:u}):t.filter?H(u,l):t.taxes?ue({onClose:u}):null;return y.jsx(b4.Provider,{value:{isOpen:a,openRoomDetails:w,openRateDetails:N,openFilter:q,openTaxesDetails:Z,onClose:u,title:le(),content:be(),footer:Re(),setStateFilters:i,stateFilters:r},children:e})},ek=(e,t=[])=>{let n={};return e.map(r=>{const{values:i,id:l}=r,u=i.reduce((a,m)=>{const g=`${l}-${m.id}`,w=t.find(C=>C.id===l);return a[g]||(a[g]=!!(w!=null&&w.values.find(C=>C===m.id))),a},{});n={...n,...u}}),n},$se=e=>Object.entries(e).filter(i=>i[1]).reduce((i,l)=>{const[u,a]=l[0].split("-"),m=i.find(g=>g.id===u);return m?m.values.push(a):i=i.concat({id:u,values:[a]}),i},[]),S4=M.createContext({isDrawerOpen:!1,onOpenDrawer:()=>null,onCloseDrawer:()=>null}),Vse=({children:e})=>{const[t,n]=M.useState(!1),r=()=>n(!0),i=()=>n(!1);return y.jsx(S4.Provider,{value:{isDrawerOpen:t,onOpenDrawer:r,onCloseDrawer:i},children:e})},E4=()=>M.useContext(S4),C4=M.createContext({isLoading:!1,setIsLoading:()=>null}),zA=({children:e})=>{const[t,n]=M.useState(!1);return y.jsx(C4.Provider,{value:{isLoading:t,setIsLoading:n},children:e})},T4=()=>M.useContext(C4),d1=()=>{const e=Ir(),t=ks();return e?"mobile":(t==null?void 0:t.name)===Jn.dateSelection.name?"desktop":"desktopCondensed"},Hse=({promoCode:e,placeholder:t,dataTestId:n})=>{const r=d1(),i=!e||e===""?t:e,l=`cvg-search-bar-info__section${e==""?"--placeholder":""}`,{iconSize:u,typo:a}=FA(r),m=()=>y.jsx(y.Fragment,{children:y.jsxs("div",{className:Or("cvg-search-bar-info__section",{"cvg-search-bar-info__section--placeholder":e==""}),children:[y.jsx(sn,{name:"tag",size:u,className:"cvg-search-bar-info-item__icon"}),y.jsx("div",{className:a,children:i})]})});return y.jsx(BA,{dataTestId:n,placeholder:t,className:l??"",renderContent:m,displayMode:r})},Zse=(e,t)=>`cvg-search-bar-info-item__container${e==="desktopCondensed"?"--condensed":""} ${t}`,FA=e=>e==="mobile"?{iconSize:"small",typo:"cvg-typo-search-mobile"}:e==="desktop"?{iconSize:"large",typo:"cvg-typo-search-desktop-secondary"}:{iconSize:"default",typo:"cvg-typo-search-desktop-condensed"},qse=e=>e==="guest"?{iconName:"user-group",iconClassName:"cvg-search-bar-info-item__icon cvg-search-bar-info-item__icon-guest"}:{iconName:"door-closed",iconClassName:"cvg-search-bar-info-item__icon"},k4=({text:e,placeholder:t,dataTestId:n,className:r,type:i})=>{const l=d1(),{iconName:u,iconClassName:a}=qse(i),{iconSize:m,typo:g}=FA(l),w=()=>y.jsx(y.Fragment,{children:e?y.jsxs("div",{className:"cvg-search-bar-info-item__guest-room",children:[y.jsx(sn,{className:a,name:u,size:m}),y.jsx("div",{className:g,children:e})]}):null});return y.jsx(BA,{dataTestId:n,placeholder:t,className:r??"",renderContent:w,displayMode:l})},Gse=(e,t)=>e==="mobile"?"cvg-typo-search-mobile":e==="desktopCondensed"?"cvg-typo-search-desktop-condensed":t==="day"?"cvg-typo-search-desktop-primary":"cvg-typo-search-desktop-secondary",Wse=({title:e,date:t,dataTestId:n})=>{const r=d1(),i=Zse(r,"cvg-search-bar-date-info-item"),l=(a,m)=>y.jsx("div",{className:Gse(r,a.type),children:a.value},a.type+a.value+m),u=()=>t&&t.length>0?y.jsx(y.Fragment,{children:t.filter(a=>a.value.trim()!=="").map(l)}):null;return y.jsx(BA,{title:r==="desktop"?e:"",dataTestId:n,placeholder:re(Cs.DatePlaceholder),className:i,renderContent:u,displayMode:r})},BA=({title:e,dataTestId:t,className:n,placeholder:r,displayMode:i,renderContent:l})=>{const u=i==="mobile";return y.jsxs("div",{className:Or(n,{"cvg-typo-search-mobile":u}),"data-testid":t,children:[y.jsx("p",{className:Or("cvg-search-bar-info-item__title",{"cvg-typo-search-label-small":u,"cvg-typo-search-label":!u}),children:e}),y.jsx(Xse,{placeholder:r,dataTestId:"search-bar-info-item-value",displayMode:i,children:l()})]})},Xse=({children:e,placeholder:t,dataTestId:n,displayMode:r})=>y.jsx("div",{className:Or("cvg-search-bar-info-item__content",{"cvg-search-bar-info-item__content--condensed":r==="desktopCondensed"}),"data-testid":n,children:e||Kse(t,r)}),Kse=(e,t)=>y.jsx("p",{className:Or("cvg-search-bar-info-item__info-placeholder",{"--condensed":t==="desktopCondensed"},FA(t).typo),children:e}),P4=({title:e,dataTestId:t,stayDate:n})=>{const r=d1(),{culture:i}=Te(a=>a.session),l=new b_(i),u=r==="desktopCondensed"||r==="mobile"?l.toShortFormatPartsLocaleDate(n==null?void 0:n.date):l.toLongFormatPartsLocaleDate(n==null?void 0:n.date);return y.jsx(Wse,{dataTestId:t,date:u,title:e})},v0=({stay:e})=>{const{stay:t}=Te(i=>i.session),n=e??t,r=re(Cs.StayCheckInTitle);return y.jsx(P4,{dataTestId:"arrival-date-display",title:r,stayDate:n.arrivalDate})},_0=({stay:e})=>{const{stay:t}=Te(i=>i.session),n=e??t,r=re(Cs.StayCheckOutTitle);return y.jsx(P4,{dataTestId:"departure-date-display",title:r,stayDate:n.departureDate})},Yse=e=>{const{onModifySearch:t}=mu(),{initializeStay:n,modifyStay:r,stay:i}=dA(!0);return{CalendarDrawerHeader:()=>{const g=re(Ur.ChooseYourStayDates);return y.jsxs("div",{className:"cvg-search-bar-info__section-container",children:[y.jsx("div",{children:g}),y.jsxs("div",{className:"cvg-search-bar-info__section",children:[y.jsx(sn,{name:"calendar",size:"small"}),y.jsx(v0,{stay:i}),y.jsx(sn,{name:"arrow-right",size:"small"}),y.jsx(_0,{stay:i})]})]})},CalendarDrawerContent:()=>y.jsx(L_,{stay:i,changeStay:r}),CalendarDrawerFooter:()=>{var C;const g=re(Lt.ApplyFilterButton),w=async()=>{t({stay:i}),e()};return y.jsx(su,{children:y.jsx(bn,{fullWidth:!0,variation:"brand",onClick:w,disabled:!((C=i.departureDate)!=null&&C.date),children:g})})},initializeCalendarDrawer:()=>{n()}}},Qse=({guestConstraint:e,overrideMaxCount:t,name:n,label:r,count:i,setCount:l})=>{const{maxCount:u}=e;return y.jsx(mA,{label:r,id:`guests-${n}`,decreaseButtonLabel:re(Cs.DecreaseButtonA11y),increaseButtonLabel:re(Cs.IncreaseButtonA11y),name:n,min:1,max:t??u,value:i,onChange:l,labelClassName:"cvg-typo-heading-5 cvg-typo-heading-3--breakpoint-small",hintClassName:"cvg-typo-body-small cvg-typo-body--breakpoint-small"})},Jse=({minAge:e,maxAge:t})=>e===void 0||t===void 0?void 0:re(t>1?Ur.UpToYearsOld:Ur.UpToYearOld,{age:t.toString()}),KO=({guestConstraint:e,overrideMaxCount:t,name:n,label:r,count:i,setCount:l})=>{const{isVisible:u,maxCount:a}=e,m=Jse(e);return y.jsx(y.Fragment,{children:u?y.jsx(mA,{label:r,id:`guests-${n}`,decreaseButtonLabel:re(Cs.DecreaseButtonA11y),increaseButtonLabel:re(Cs.IncreaseButtonA11y),name:n,min:0,max:t??a,value:i,onChange:l,hint:m,labelClassName:"cvg-typo-heading-5 cvg-typo-heading-3--breakpoint-small",hintClassName:"cvg-typo-body-small cvg-typo-body--breakpoint-small"}):null})},A4=()=>y.jsx("div",{className:"cvg-guests-separator"}),I4=({guests:e,guestConstraints:t,roomNumber:n,showSeparator:r,showDelete:i,onChange:l,onDelete:u})=>{const{adults:a,children:m,infants:g,position:w}=e;return y.jsxs("div",{className:"cvg-occupancy-selector","data-testid":"occupancy-selector",children:[y.jsxs("div",{className:"cvg-occupancy-selector__title",children:[y.jsx("div",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small cvg-occupancy-selector-title__info",children:re(Cs.RoomWithIndex,{position:n})}),i&&u?y.jsx(bn,{variation:"link",onClick:()=>u(w),children:re(Pr.ItemDeletionLink)}):null]}),y.jsxs("div",{className:"cvg-occupancy-selector__counters",children:[y.jsx(Qse,{guestConstraint:t.adults,name:"adults",label:re(Cs.AdultCountInput),count:a,setCount:l("adults",w)}),y.jsx(KO,{guestConstraint:t.children,name:"children",label:re(Cs.ChildCountInput),count:m,setCount:l("children",w)}),y.jsx(KO,{guestConstraint:{...t.infants,maxAge:(t.infants.maxAge??0)-1},name:"infants",label:re(Cs.InfantCountInput),count:g,setCount:l("infants",w)})]}),r?y.jsx(A4,{}):null]})},UA=({guestsList:e,canAddGuests:t,addGuests:n,deleteGuests:r,modifyGuests:i,getGuestsConstraints:l})=>{const{trackSearchParameterGuestModification:u}=Vi(),a=(m,g)=>async w=>{u(m,w),i(m,g,w)};return y.jsxs("div",{className:"cvg-guests",children:[e.map((m,g)=>y.jsx(I4,{roomNumber:g+1,showSeparator:g+1<e.length,guests:m,guestConstraints:l(m.position),showDelete:e.length>1,onChange:a,onDelete:r},m.position)),y.jsx(bn,{"data-testid":"add-room-button",icon:"plus",variation:"secondary",disabled:!t(),fullWidth:!0,onClick:n,children:re(Pr.AddRoomButton)})]})},x0=({guestsList:e})=>{const{guests:t}=Te(l=>l.session),r=(e??t).reduce((l,u)=>l+u.adults+u.children+u.infants,0),i=r?`${r}`:"";return y.jsx(k4,{dataTestId:"guest-display",text:i,placeholder:"",type:"guest"})},b0=({guestsList:e})=>{const{guests:t}=Te(r=>r.session),n=e??t;return y.jsx(k4,{dataTestId:"room-display",text:`${n.length}`,placeholder:"",type:"room"})},eoe=e=>{const{onModifySearch:t}=mu(),{addGuests:n,canAddGuests:r,deleteGuests:i,getGuestsConstraints:l,modifyGuests:u,initializeGuests:a,guestsList:m}=fA(!0);return{GuestsDrawerHeader:()=>{const I=re(Ur.ChooseYourOccupancy);return y.jsxs("div",{className:"cvg-search-bar-info__guest",children:[y.jsx("div",{children:I}),y.jsxs("div",{className:"cvg-search-bar-info__guest-room",children:[y.jsx(x0,{guestsList:m}),y.jsx(b0,{guestsList:m})]})]})},GuestsDrawerContent:()=>y.jsx(UA,{guestsList:m,canAddGuests:r,addGuests:n,deleteGuests:i,modifyGuests:u,getGuestsConstraints:l}),GuestsDrawerFooter:()=>{const I=re(Lt.ApplyFilterButton),N=async()=>{t({guestsList:m}),e()};return y.jsx(su,{children:y.jsx(bn,{fullWidth:!0,variation:"brand",onClick:N,children:I})})},initializeGuestsDrawer:()=>{a()}}},YO="promocode_input",h1=({promoCode:e,changePromoCode:t,showLabel:n,classname:r,isPopover:i})=>{const l=Ir(),u=Te(w=>w.configuration.bookingEngineConstraints.isPromoCodeVisible),a=w=>{const{value:C}=w.currentTarget;t(C)},m=re(Cs.PromoCodeField),g=Te(w=>{var C;return(C=w.session.error)==null?void 0:C.messages[0]});return M.useEffect(()=>{if(g){const w=document.getElementById(YO);yee(w)}},[g]),y.jsx(y.Fragment,{children:u?y.jsx("div",{className:Or("cvg-promocode",r??""),"data-testid":"promocode",children:y.jsx(bl,{fullWidth:l||i,id:YO,"data-id":"promocode_input",label:`${n?m:""}`,defaultValue:e,onChange:a,error:g,showError:!!g,className:"cvg-promocode__full-width",showErrorPlaceholder:!l})}):null})},toe=e=>{const{onModifySearch:t}=mu(),{changePromoCode:n,initializePromoCode:r,promoCode:i}=e1(!0),l=Si();return{PromoCodeDrawerHeader:()=>{const w=re(Ur.ApplyPromotionalCode);return y.jsx("div",{children:w})},PromoCodeDrawerFooter:()=>{const w=re(Lt.ApplyFilterButton),C=async()=>{await t({promoCode:i})&&e()};return y.jsx(su,{children:y.jsx(bn,{fullWidth:!0,variation:"brand",onClick:C,children:w})})},PromoCodeDrawerContent:()=>y.jsx(h1,{promoCode:i,changePromoCode:n}),initializePromoCodeDrawer:()=>{r(),l(Zw())}}},R4=M.createContext({isOpen:!1,onOpenPromoCode:()=>null,onClosePromoCode:()=>null,onOpenGuests:()=>null,onCloseGuests:()=>null,onOpenCalendar:()=>null,onCloseCalendar:()=>null,content:null,title:null,footer:null,type:void 0}),QO={promoCode:void 0,guests:void 0,calendar:void 0},f1=({children:e})=>{const[t,n]=M.useState(QO),r=!!(t.promoCode||t.guests||t.calendar),i=()=>n(QO),l=()=>{N(),n({promoCode:"promocode"})},u=()=>i(),a=()=>{V(),n({guests:"guests"})},m=()=>i(),g=()=>{fe(),n({calendar:"calendar"})},w=()=>i(),{PromoCodeDrawerContent:C,PromoCodeDrawerFooter:P,PromoCodeDrawerHeader:I,initializePromoCodeDrawer:N}=toe(u),{GuestsDrawerContent:z,GuestsDrawerFooter:$,GuestsDrawerHeader:H,initializeGuestsDrawer:V}=eoe(m),{CalendarDrawerContent:q,CalendarDrawerFooter:te,CalendarDrawerHeader:ue,initializeCalendarDrawer:fe}=Yse(w),Z=()=>t.promoCode==="promocode"?I():t.guests==="guests"?H():t.calendar==="calendar"?ue():null,le=()=>t.promoCode==="promocode"?C():t.guests==="guests"?z():t.calendar==="calendar"?q():null,be=()=>t.promoCode==="promocode"?P():t.guests==="guests"?$():t.calendar==="calendar"?te():null;return y.jsx(R4.Provider,{value:{isOpen:r,onOpenPromoCode:l,onClosePromoCode:u,onOpenGuests:a,onCloseGuests:m,onOpenCalendar:g,onCloseCalendar:w,title:Z(),content:le(),footer:be(),type:t.promoCode||t.guests||t.calendar},children:e})},L4=()=>M.useContext(R4),noe=()=>{const{handleChangeLanguageOrCurrency:e,onCloseDrawer:t}=M.useContext(R_),n=Te(l=>l.configuration.isFetching||l.session.isFetching),r=re(yn.Cancel),i=re(yn.Select);return y.jsxs("div",{className:"cvg-language-currency-drawer__footer",children:[y.jsx(bn,{"data-testid":"cancel_language_currency",variation:"secondary",onClick:t,disabled:n,children:r}),y.jsx(bn,{"data-testid":"confirm_language_currency",loading:n,variation:"brand",onClick:e,children:i})]})},roe=()=>{const{setLocalLanguage:e,localLanguage:t,setLocalCurrency:n,localCurrency:r}=M.useContext(R_),i=re(yn.LanguageOption),l=Te(w=>w.configuration.cultures),u=w=>{const C=l.find(P=>P.value===w.target.value);e(C)},a=re(yn.CurrencyOption),m=Te(w=>w.configuration.currencies),g=w=>{const C=m.find(P=>P.value===w.target.value);n(C||void 0)};return y.jsxs("div",{className:"cvg-language-currency-drawer__content",children:[y.jsx(Yu,{fullWidth:!0,onChange:u,options:l,value:(t==null?void 0:t.value)??"",id:"language",name:"language",label:i,"data-testid":"change-language-input"}),y.jsx(Yu,{fullWidth:!0,label:a,onChange:g,options:m,value:(r==null?void 0:r.value)??"",id:"currency",name:"currency","data-testid":"change-currency-input"})]})},ioe=()=>{const{isDrawerOpen:e,onCloseDrawer:t}=M.useContext(R_),n=re(yn.LanguageCurrencySelect);return y.jsx(gd,{open:e,onOpenChange:t,children:y.jsxs(dd,{children:[y.jsx(md,{children:n}),y.jsx(nf,{children:y.jsx(roe,{})}),y.jsx(su,{children:y.jsx(noe,{})})]})})},p1=({open:e=!1,onOpenChange:t,heading:n,description:r,showCloseIcon:i,buttonLabel:l,onClick:u,closeOnOverlayClick:a})=>{const m=Ir();return y.jsx(MA,{"data-testid":"default-dialog-element",open:e,onOpenChange:t,closeOnOverlayClick:a,children:y.jsxs(OA,{open:e,"data-testid":"default-dialog-element",heading:n,closeButton:i?y.jsx(jA,{"data-testid":"default-dialog-close-icon","aria-label":re(Lt.CloseButton)}):null,children:[y.jsx(DA,{children:y.jsx("p",{children:r})}),y.jsx(NA,{className:"cvg-default-dialog-footer",children:y.jsx(bn,{variation:"brand",fullWidth:m,onClick:u,className:"cvg-default-dialog-button","data-testid":"default-dialog-button",children:l})})]})})},soe=()=>{const e=Si(),{action:t,selectedItem:n,onSuccess:r}=pu(),l=!!Te(C=>C.basket.error)&&t==="add"&&(n==null?void 0:n.type)!==null,u=n&&n.type==="room",a=re(u?yn.AddRoomErrorTitle:yn.AddExtraErrorTitle),m=re(u?yn.AddRoomErrorMessage:yn.AddExtraErrorMessage),g=re(yn.OkLabel),w=()=>{e(OB()),r()};return y.jsx(p1,{open:l,description:m,heading:a,onClick:w,buttonLabel:g,closeOnOverlayClick:!0})},M4=()=>{const e=Te(t=>t.configuration.controllerUrls.appIndexUrl);return()=>{document.location.replace(e)}},ooe=()=>{const e=re(yn.SessionExpired),t=re(yn.ReloadToContinue),n=re(yn.PageReload),r=M4();return y.jsx(p1,{open:!0,description:t,heading:e,onClick:r,buttonLabel:n})},$A=()=>{const{isDialogOpen:e,onCloseModifySearchDialog:t,onApplySearch:n}=mu(),r=re(yn.BookingModification),i=re(Lt.BasketDeletionMessage),l=re(Lt.BasketDeletionButton);return y.jsx(p1,{open:e,onOpenChange:t,description:i,heading:r,showCloseIcon:!0,onClick:n,buttonLabel:l,closeOnOverlayClick:!0})},aoe=({children:e})=>{const t=Te(a=>{var m;return(m=a.calendar)==null?void 0:m.error}),n=Te(a=>{var m;return(m=a.session)==null?void 0:m.error}),r=Te(a=>{var m;return(m=a.roomSelection)==null?void 0:m.error}),i=Te(a=>{var m;return(m=a.basket)==null?void 0:m.error}),l=Te(a=>{var m;return(m=a.summary)==null?void 0:m.error});return[t,n,r,i,l].some(a=>(a==null?void 0:a.type)===3)?y.jsxs(y.Fragment,{children:[e,y.jsx(ooe,{})]}):y.jsx(y.Fragment,{children:e})},loe=()=>{const{pathname:e}=Sp();return M.useEffect(()=>{setTimeout(()=>{coe()},500)},[e]),null},coe=()=>{document.documentElement.scrollTo({top:0,left:0,behavior:"smooth"})},O4=({rating:e,className:t})=>e>0?y.jsx("div",{className:Or("cvg-hotel-rating",t),children:Array(e).fill(null).map((n,r)=>y.jsx(sn,{name:"star",size:"small","data-testid":"star-icon"},`hotel-rating-star-${r}`))}):null,uoe=({name:e,address:t,pictures:n,rating:r,summary:i})=>y.jsxs("div",{className:"cvg-hotel-description",children:[n&&n.length>0?y.jsx(Ag,{className:"cvg-hotel-description__pictures",pictures:n,picture2XWidth:749,picture2XHeight:561,galleryPicturesLength:n.length,picturesSliderRatio:"landscape-wide"}):null,y.jsxs("div",{className:"cvg-hotel-description__name",children:[y.jsx("p",{className:"cvg-typo-heading-4",children:e}),r?y.jsx(O4,{rating:r}):null]}),y.jsxs("div",{className:"cvg-hotel__address",children:[y.jsx(sn,{name:"location-dot"}),y.jsx("p",{className:"cvg-typo-body-small",children:t})]}),i?y.jsx("p",{className:"cvg-typo-body-small",dangerouslySetInnerHTML:{__html:i??""}}):null]}),D4=e=>e&&e.length>0?e.charAt(e.length-1)===" "?e:`${e} `:e,doe=({contacts:e})=>{const t=Ir(),n={phone:re(yn.PhoneNumberColon),email:re(yn.EmailAddressColon),website:re(yn.WebsiteColon)};return e&&e.length>0?y.jsxs("div",{className:"cvg-hotel-details__container",children:[y.jsx("h3",{children:re(yn.ContactSupport)}),y.jsx("div",{className:"cvg-hotel-details__content",children:e.map(r=>y.jsxs("div",{className:"cvg-typo-body",children:[D4(n[r.type]),t?y.jsx("br",{}):null,y.jsx(Qf,{className:"cvg-hotel-details__contact-link",...r})]},r.type))})]}):null},hoe=({direction:e})=>e?y.jsxs("div",{className:"cvg-hotel-details__content",children:[y.jsx("h3",{children:re(yn.HotelHowto)}),y.jsx("p",{className:"cvg-typo-body-small",dangerouslySetInnerHTML:{__html:e??""}})]}):null,eC=(e,t)=>t?{type:e,value:t}:void 0,foe=({checkin:e,checkout:t,openingHours:n})=>[eC("checkin",e),eC("checkout",t),eC("openingHours",n)].filter(i=>!!i),poe=e=>{const t=Ir(),n=foe(e),r={checkin:re(t?yn.HotelCheckinColon:yn.HotelCheckin),checkout:re(t?yn.HotelCheckoutColon:yn.HotelCheckout),openingHours:re(t?yn.ReceptionOpeningHoursColon:yn.ReceptionOpeningHours)},i=Or({"cvg-hotel-details__content":t,"cvg-hotel-details__opening-hours-list":!t}),l=t?"":"cvg-hotel-details__opening-hours-item";return n&&n.length>0?y.jsxs("div",{className:"cvg-hotel-details__container",children:[y.jsx("h3",{children:re(yn.HotelInformation)}),y.jsx("div",{className:i,children:n.map(u=>y.jsxs("p",{className:Or("cvg-typo-body",l),children:[D4(r[u.type]),!t&&y.jsx("br",{}),y.jsx("span",{className:"cvg-typo-heading-4",children:u.value})]},u.type))})]}):null},moe=({amenities:e})=>e&&(e==null?void 0:e.length)>0?y.jsxs("div",{className:"cvg-hotel-details__content",children:[y.jsx("h3",{children:re(yn.HotelServices)}),y.jsx("div",{className:"cvg-hotel-details__amenities-list-container",children:y.jsx("ul",{className:"cvg-hotel-details__amenities-list",children:e.map(t=>y.jsx("li",{className:"cvg-typo-body-small cvg-hotel-details__amenities-item",children:t},t))})})]}):null,goe=({hotel:e})=>{const t=pA(e),{amenities:n,direction:r,checkin:i,checkout:l,receptionOpeningHours:u}=e;return y.jsxs(y.Fragment,{children:[y.jsx(doe,{contacts:t}),y.jsx(poe,{checkin:i,checkout:l,openingHours:u==null?void 0:u.openingHours}),y.jsx(hoe,{direction:r}),y.jsx(moe,{amenities:n})]})},tC=(e,t)=>e.map(n=>n[t].toString()).join(","),N4=({hotelId:e,onClick:t,className:n})=>{const r=Te(I=>I.session),i=Ir(),l=Te(I=>I.session.stay.arrivalDate.date),u=Te(I=>{var N;return(N=I.session.stay.departureDate)==null?void 0:N.date}),a=Te(I=>I.session.guests),m=tC(a,"adults"),g=tC(r.guests,"children"),w=tC(r.guests,"infants"),C=Te(I=>I.session.promoCode),P=Te(I=>I.session.currency);return y.jsxs(Yw,{action:`/${e}/${r.culture}${Jn.roomSelection.path}`,method:"get",...!i&&{target:"_blank",rel:"noopener noreferrer"},reloadDocument:!0,children:[y.jsx("input",{type:"hidden",name:"arrivalDate",value:l}),u?y.jsx("input",{type:"hidden",name:"departureDate",value:u}):null,m!=="0"?y.jsx("input",{type:"hidden",name:"selectedAdultCount",value:m}):null,g!=="0"?y.jsx("input",{type:"hidden",name:"selectedChildCount",value:g}):null,w!=="0"?y.jsx("input",{type:"hidden",name:"selectedInfantCount",value:w}):null,C!==""?y.jsx("input",{type:"hidden",name:"promoCode",value:C}):null,y.jsx("input",{type:"hidden",name:"currency",value:P}),y.jsx(bn,{variation:"brand",className:n,onClick:t,type:"submit",children:re(yr.ViewRates)})]})},yoe=({hotelId:e,price:t})=>{const n=Te(i=>i.configuration.displayConstraints.ratePriceDisplayMode),{onCloseDrawer:r}=M.useContext(rf);return y.jsxs(su,{className:"cvg-hotel-drawer-footer",children:[t?y.jsxs("div",{className:"cvg-hotel-drawer-footer__starting-price",children:[y.jsx("span",{children:re(yr.StartingFrom)}),y.jsx("span",{className:"cvg-typo-price-1",children:t}),y.jsx("span",{className:"cvg-typo-body-tiny cvg-hotel-drawer-footer__rate-per",children:re(n==="Average"?yr.RatePerNightLabel:yr.RatePerStayLabel)})]}):null,y.jsx(N4,{hotelId:e,onClick:()=>{r()},className:"cvg-hotel-drawer-footer__view-rates"})]})},voe=()=>{const{isDrawerOpen:e,onCloseDrawer:t,hotel:n}=M.useContext(rf),r=ks(),i=(r==null?void 0:r.name)===Jn.hotelSelection.name;return n?y.jsx(gd,{open:e,onOpenChange:t,children:y.jsxs(dd,{children:[y.jsx(md,{children:re(yn.MoreInformation)}),y.jsxs(nf,{className:"cvg-hotel-drawer-body",children:[y.jsx(uoe,{name:n.name,address:Jw(n).join(", "),pictures:n.galleryPictures,rating:n.rating,summary:n.summary}),y.jsx(goe,{hotel:n})]}),i?y.jsx(yoe,{..."price"in n&&{price:n.price},hotelId:n.id}):null]})}):null},_oe=(e,t)=>{const n=/\[(.*?)\]\((.*?)\)/g;return e.replace(n,(r,i,l)=>`<a class=${t} href="${l}" target="_blank">${i}</a>`)},xoe=()=>{const{isDrawerOpen:e,onCloseDrawer:t}=E4(),n=re(yn.Mediation);return y.jsx(gd,{open:e,onOpenChange:t,children:y.jsxs(dd,{children:[y.jsx(md,{children:n}),y.jsx(nf,{children:y.jsx(boe,{})})]})})},boe=()=>{const t=`[${re(yn.EuropeanPlatformMediation)}](https://ec.europa.eu/consumers/odr/main/?event=main.home2.show)`,n=Te(m=>m.session.culture),r=Te(m=>{var P,I,N;const g=(N=(I=(P=m.configuration)==null?void 0:P.configurationLegal)==null?void 0:I.mediation)==null?void 0:N.information,w=g==null?void 0:g.find(z=>z.culture===n);if(w!=null&&w.value)return w.value;const C=g==null?void 0:g.find(z=>z.culture==="en-US");return(C==null?void 0:C.value)??""}),i=Te(m=>{var g,w;return(w=(g=m.configuration.configurationLegal)==null?void 0:g.europeanPlatform)==null?void 0:w.activated}),l=Te(m=>{var g,w,C;return(C=(w=(g=m.configuration)==null?void 0:g.configurationLegal)==null?void 0:w.mediation)==null?void 0:C.activated}),u=[];i&&u.push({key:"eu-platform",text:t}),l&&u.push({key:"mediation",text:r});const a=u.map(m=>({...m,text:_oe(m.text,"cvg-mediation-drawer-link gst-link")}));return y.jsx("div",{className:"cvg-mediation-drawer-content",children:y.jsx("ul",{className:"cvg-mediation-drawer-list",children:a.map(m=>y.jsx("li",{"data-testid":m.key,dangerouslySetInnerHTML:{__html:m.text}},m.key))})})},m1=()=>{const e=Te(g=>g.extraSelection.isFetching),t=Te(g=>g.summary.isFetching),n=Te(g=>g.session.isFetching),r=Ir(),i=ks(),l=(i==null?void 0:i.name)===Jn.extraSelection.name?"extra_continue_button":"continue_button",u=i3(),a=e||t||n,m=r?{variation:"brand"}:{variation:"brand",icon:"arrow-right"};return y.jsx(bn,{...m,loading:a,onClick:u,fullWidth:r,"data-testid":l,children:re(Pr.ContinueButton)})};function j4(e,t,n){const r=e.culture??t,i=e.hotelId??n;let l=i?`/${i}`:"";return l+=r?`/${r}`:"",l}const VA=(e={})=>{const{culture:t,hotelId:n}=n3();return j4(e,t,n)},woe=({className:e})=>{const t=Te(l=>l.basket.rooms.length>0),n=Te(l=>l.basket.skipExtraSelection),r=VA(),i=re(tn.ReturnToExtrasLink);return t&&!n&&y.jsx(bn,{className:e,iconPosition:"start",icon:"chevron-left",variation:"tertiary",asChild:!0,children:y.jsx(oA,{to:`${r}${Jn.extraSelection.path}`,children:i})})},HA=()=>{const e=Te(m=>m.basket.total),t=Te(m=>{var g;return(g=m.summary.quote)==null?void 0:g.total}),n=Te(m=>{var g;return(g=m.summary.guestInformation)==null?void 0:g.cancellationInsurance}),r=Te(m=>{var g;return(g=m.summary.cancellationInsurance)==null?void 0:g.totalPrice}),i=n&&r||t||e,l=Te(m=>m.basket.rateTotal),a=Te(m=>{var g;return(g=m.summary.quote)==null?void 0:g.rateTotal})||l;return{total:i,totalInHotelCurrency:a}},z4=()=>{const e=Ir(),{onOpen:t}=LP(),n=Te(C=>C.basket.rooms),r=n.reduce((C,P)=>C+P.rates[0].selectedQuantity,0),i=Te(C=>{var P;return(P=C.basket.hotelExtras)==null?void 0:P.length}),{total:l}=HA(),u=n.reduce((C,P)=>{var I;return C+(((I=P.extras)==null?void 0:I.length)??0)},0),a=i+u,m=i>0||u>0,g=re(r===1?Pr.RoomCountIndicator:Pr.RoomCountIndicatorOther),w=re(a===1?Pr.ExtraCountIndicator:Pr.ExtraCountIndicatorOther);return y.jsx(bn,{variation:"brand",className:"cvg-basket-panel__button","data-testid":"basket-panel-button",onClick:t,children:y.jsxs("div",{className:"cvg-basket-panel__container",children:[y.jsxs("div",{className:"cvg-basket-panel__details",children:[y.jsx(sn,{name:"suitcase",size:e?"medium":"large"}),y.jsxs("div",{className:"cvg-typo-body-tiny cvg-typo-body--breakpoint-small cvg-basket-panel__rooms-extras",children:[y.jsx("p",{children:`${r} ${g}`}),m?y.jsx("p",{children:`${a} ${w}`}):null]})]}),y.jsxs("div",{className:"cvg-basket-panel__chevron",children:[y.jsx("div",{children:l}),y.jsx(sn,{name:e?"chevron-down":"chevron-right"})]})]})})},F4=({readonly:e=!1})=>{const{isOpen:t,onClose:n,content:r,title:i,footer:l}=gu();return y.jsx(gd,{open:t,onOpenChange:n,children:y.jsxs(dd,{children:[y.jsx(md,{children:i}),y.jsx(nf,{children:r}),!e&&y.jsx(su,{children:l})]})})},Soe=()=>{const e=Te(w=>w.session.culture),t=Te(w=>w.session.stay.arrivalDate),n=Te(w=>w.session.stay.departureDate??{date:"",displayDate:""}),r=Te(w=>{var C;return((C=w.session.selectedHotel)==null?void 0:C.checkin)??""}),i=Te(w=>{var C;return((C=w.session.selectedHotel)==null?void 0:C.checkout)??""}),l=Te(w=>w.session.stay.nightCount),u=new b_(e),a=`${re(Pr.CheckinTimeDisplay)} ${u.toLocaleTime(r)}`,m=`${re(Pr.CheckoutTimeDisplay)} ${u.toLocaleTime(i)}`,g=re(l>1?Pr.TotalStayDurationDisplayOther:Pr.TotalStayDurationDisplay,{days:l+1,nights:l});return y.jsx(Qee,{totalStay:g,arrivalDate:t,checkIn:r?a:void 0,departureDate:n,checkOut:i?m:void 0})},Eoe=()=>{const e=Te(t=>t.basket.error);return y.jsx(y.Fragment,{children:e&&e.type===Xf.ErrorDeleteExtra&&y.jsx(Xo,{variation:"error",direction:"row",children:y.jsx(Ko,{children:re(yn.ErrorGeneralRetry)})})})},Coe=({extra:e,isExtraInBasket:t,selectedQuantity:n,selectQuantity:r,readonly:i=!1})=>{const l=re(js.QuantitySelectorDropdown),u=e.prices.length>1,a=e.prices.find(m=>m.quantity===(n===0?1:n));return y.jsxs("article",{"data-testid":`extra-details-card-${e.id}`,className:"cvg-extra-details-card",children:[e.galleryPictures.length>0&&y.jsx(Ag,{picture2XWidth:332,picture2XHeight:272,pictures:e.galleryPictures,galleryPicturesLength:e.galleryPictures.length}),y.jsx(Eoe,{}),e!=null&&e.summary?y.jsx("p",{dangerouslySetInnerHTML:{__html:e.summary},className:"cvg-typo-body-small"}):null,y.jsxs("div",{className:Or("cvg-extra-details-card__pricing",{"":!i&&u,"--single-price":!(!i&&u)}),children:[!i&&u?y.jsx(mA,{label:l,decreaseButtonLabel:"",increaseButtonLabel:"",min:t?0:1,id:"",name:"extra",max:e.prices.length,value:n,onChange:r,"data-testid":"extra-counter",labelClassName:"cvg-typo-heading-5",containerClassName:"cvg-extra-details-card__counter-container"}):null,y.jsxs("div",{className:"cvg-extra-details-card__pricing-details",children:[y.jsxs("div",{className:"cvg-extra-details-card__pricing-details-prices",children:[y.jsx("p",{className:"cvg-typo-price-strike",children:a!=null&&a.crossedOutPrice?`${a.crossedOutPrice} `:null}),y.jsx("p",{className:"cvg-typo-heading-3",children:a==null?void 0:a.price})]}),y.jsx("div",{className:"cvg-typo-body-tiny",children:`${e.unitPrice} ${e.counting}`})]})]})]})},Toe=({isToRemovedExtra:e,isExtraInBasket:t,onClose:n,addOrRemoveExtra:r})=>{const i=re(yn.Cancel),l=koe(),{isUpdating:u}=Te(m=>m.basket),{isFetching:a}=Te(m=>m.extraSelection);return y.jsxs("div",{className:"cvg-extra-details-card__footer",children:[y.jsx(bn,{variation:"secondary",onClick:n,"data-testid":"extra_footer_cancel_button",children:i}),y.jsx(bn,{variation:"brand",loading:u||a,onClick:r,"data-testid":"extra_footer_add_basket_button",children:l(e,t)})]})},koe=()=>{const e=re(js.RemoveActionLink),t=re(js.AddExtraButton),n=re(js.UpdateActionLink),r=re(yn.PageReload),i=Te(l=>l.basket.error);return(l,u)=>i&&i.type===Xf.ErrorDeleteExtra?r:u?l?e:n:t},ZA=({extra:e,onClose:t,readonly:n=!1})=>{const r=Si(),{onAddItem:i,onSuccess:l}=pu(),{trackUpsertExtra:u}=Vi(),a=Te(V=>V.basket.hotelExtras),g=Te(V=>V.basket.rooms).reduce((V,q)=>V.concat(q.extras),[]),w=a.concat(g),C=e&&e.prices.length>1,P=e&&e.prices.length===0,I=w.find(V=>V.id===(e==null?void 0:e.id)&&V.guestPosition===(e==null?void 0:e.guestPosition)),N=!I||P?(e==null?void 0:e.prices[0].quantity)??1:C?e.selectedQuantity:0,[z,$]=M.useState(N);M.useEffect(()=>{$(N)},[N,e]);const H=M.useCallback(async()=>{if(e&&(i({type:"extra",extraId:e.productId,guestPosition:e.guestPosition}),e)){u(e,z);const V=await r(MB(e,z));l(),await r(Ww()),V&&(r(dp()),t())}},[r,e,z,i,t,l,u]);return y.jsx(gd,{open:!!e,onOpenChange:t,children:y.jsxs(dd,{children:[y.jsx(md,{children:e==null?void 0:e.name}),y.jsx(nf,{children:e?y.jsx(Coe,{extra:e,isExtraInBasket:!!I,selectedQuantity:z,selectQuantity:$,readonly:n},e.id):null}),!n&&y.jsx(su,{children:y.jsx(Toe,{isToRemovedExtra:z===0,isExtraInBasket:!!I,onClose:t,addOrRemoveExtra:H})})]})})},Poe=()=>{const{onDeleteItem:e}=pu(),{trackViewRateDetails:t,trackViewRoomDetails:n,trackViewExtraDetails:r}=Vi(),i=Te(fe=>fe.basket.rooms),l=re(Pr.RoomLabel),u=re(Lt.Adults),a=re(Lt.Children),m=re(Lt.Infants),g=re(Lt.Adult),w=re(Lt.Child),C=re(Lt.Infant),P=re(Pr.ItemDeletionLink),I=async(fe,Z)=>{e({type:"room",roomRateId:{roomId:fe.id,rateId:Z.id,occupancyId:Z.occupancyId},guestPosition:fe.guestPosition})},N=fe=>{e({type:"extra",extraId:fe.productId,guestPosition:fe.guestPosition})},{openRoomDetails:z,openRateDetails:$}=gu(),H=(fe,Z)=>{z(fe.id),n(fe,Z+1,"basket-rooms")},V=(fe,Z,le)=>{$({rateId:Z.id,roomId:fe.id,occupancyId:Z.occupancyId}),t(fe,Z,le+1)},[q,te]=M.useState(),ue=(fe,Z)=>{te(fe),r(fe,"basket-rooms-extras",Z+1)};return y.jsx(Hh,{title:l,children:i.map((fe,Z)=>fe.rates.map((le,be)=>y.jsx(S3,{"data-testid":"basket-room",deleteLabel:P,name:`${le.selectedQuantity} x ${fe.name}`,occupancy:kg(le.occupancy,{adultLabel:g,childLabel:w,infantLabel:C,adultsLabel:u,childrenLabel:a,infantsLabel:m}),onClickDelete:()=>I(fe,le),onClickRateInfo:()=>V(fe,le,be+1),onClickRoomInfo:()=>H(fe,Z),price:le.prices[0].price,rateName:le.name,children:fe.extras.map((Re,Je)=>y.jsxs(M.Fragment,{children:[y.jsx(ZA,{extra:q,onClose:()=>te(void 0),readonly:!0}),y.jsx(d0,{"data-testid":"basket-room-extra",deleteLabel:P,name:`${Re.selectedQuantity} x ${Re.name}`,onClickDelete:()=>N(Re),onClickInfo:()=>ue(Re,Je+1),price:Re.basketPrice})]},Re.id))},le.id)))})},Aoe=()=>{const{trackViewExtraDetails:e}=Vi(),{onDeleteItem:t}=pu(),n=g=>{t({type:"extra",extraId:g.productId,guestPosition:g.guestPosition})},[r,i]=M.useState(),l=(g,w)=>{i(g),e(g,"basket-hotel-extras",w+1)},u=Te(g=>g.basket.hotelExtras),a=re(Pr.ExtrasLabel),m=re(Pr.ItemDeletionLink);return y.jsx(y.Fragment,{children:u.length>0&&y.jsx(Hh,{title:a,children:u.map((g,w)=>y.jsxs(M.Fragment,{children:[y.jsx(ZA,{extra:r,onClose:()=>i(void 0),readonly:!0}),y.jsx(d0,{deleteLabel:m,"data-testid":"basket-hotel-extra",name:`${g.selectedQuantity} x ${g.name}`,nameBold:!0,onClickDelete:()=>n(g),onClickInfo:()=>l(g,w+1),price:g.basketPrice},g.id)]},g.id))})})},Ioe=()=>{const e=Te(n=>n.basket.discountCode),t=re(Pr.DiscountInformationDisplay);return y.jsx(y.Fragment,{children:e&&y.jsx(Hh,{title:t,children:y.jsx(pg,{name:e.code??t,price:e.discount,priceBold:!0})})})},Roe=()=>{const e=Te(i=>i.summary.cancellationInsurance),t=Te(i=>{var l;return(l=i.summary.guestInformation)==null?void 0:l.cancellationInsurance}),n=re(Pr.CancellationInsuranceOption),r=re(Pr.InsuranceOption);return y.jsx(y.Fragment,{children:e&&t&&y.jsx(Hh,{title:r,children:y.jsx(pg,{name:n,price:e.price})})})},Loe=()=>{const e=Te(u=>{var a;return(a=u.summary.quote)==null?void 0:a.excludedTotalTaxes}),t=Te(u=>{var a;return(a=u.summary.quote)==null?void 0:a.includedTotalTaxes}),{openTaxesDetails:n}=gu(),r=re(Ur.TaxesFees),i=re(Ur.IncludedTaxesFees),l=re(Ur.TaxesFeesUponBooking);return y.jsx(y.Fragment,{children:(e||t)&&y.jsxs(Hh,{"data-testid":"basket-taxes-section",title:r,children:[t&&y.jsx(pg,{name:i,onClickInfo:n,price:t}),e&&y.jsx(pg,{name:l,onClickInfo:n,price:e})]})})},Moe=()=>{const{total:e,totalInHotelCurrency:t}=HA(),n=Te(m=>m.session.currency!==m.basket.rateCurrency),r=Te(m=>{var g;return(g=m.summary.quote)==null?void 0:g.onSiteTotalTaxes}),{openTaxesDetails:i}=gu(),l=re(Pr.TotalCostSummary),u=re(Ur.TaxesFeesPaidHotel),a=`${re(Pr.OrLabel)} ${t}`;return y.jsxs(y.Fragment,{children:[y.jsx(Hh,{price:e,ratePrice:n?a:void 0,title:l,"data-testid":"basket-total-section",children:y.jsx(y.Fragment,{})}),y.jsx(Hh,{title:"",children:r&&y.jsx(pg,{name:u,onClickInfo:i,price:r})})]})},B4=(e,t)=>{var u;if((t==null?void 0:t.type)!=="room")return;const{roomRateId:n,guestPosition:r}=t,i=e.find(a=>a.id===n.roomId&&a.guestPosition===r),l=(u=i==null?void 0:i.rates)==null?void 0:u.find(a=>a.id===n.rateId&&a.occupancyId===n.occupancyId);if(i&&l)return{room:i,rate:l}},U4=(e,t)=>{if((t==null?void 0:t.type)!=="extra")return;const{extraId:n,guestPosition:r}=t;return e.find(i=>i.productId===n&&i.guestPosition===r)},Ooe=()=>{const e=re(yn.ErrorGeneralRetry);return y.jsx(Xo,{variation:"error",direction:"row",children:y.jsx(Ko,{children:e})})},Doe=()=>{const{selectedItem:e,action:t}=pu(),n=Te($=>$.basket.error),r=Te($=>$.basket.rooms),i=Te($=>$.basket.hotelExtras),l=B4(r,e),u=[...i,...r.map($=>$.extras).flat()],a=U4(u,e),m=!!n&&t==="delete",g=re(Pr.ItemDeletionConfirmationDialog),w=re(Lt.Adults),C=re(Lt.Children),P=re(Lt.Infants),I=re(Lt.Adult),N=re(Lt.Child),z=re(Lt.Infant);return y.jsxs("div",{className:"cvg-basket-delete-item-content",children:[m&&y.jsx(Ooe,{}),y.jsx("p",{className:"cvg-typo-body-small",children:g}),e&&t==="delete"&&y.jsx(y.Fragment,{children:e.type==="room"&&(l!=null&&l.rate)&&(l!=null&&l.room)?y.jsx(S3,{"data-testid":"basket-room",deleteLabel:"",name:`${l.rate.selectedQuantity} x ${l.room.name}`,occupancy:kg(l.rate.occupancy,{adultLabel:I,childLabel:N,infantLabel:z,adultsLabel:w,childrenLabel:C,infantsLabel:P}),onClickDelete:()=>null,onClickRateInfo:()=>null,onClickRoomInfo:()=>null,price:l.rate.prices[0].price,rateName:l.rate.name,children:l.room.extras.map($=>y.jsx(d0,{"data-testid":"basket-room-extra",deleteLabel:"",name:`${$.selectedQuantity} x ${$.name}`,onClickDelete:()=>null,onClickInfo:()=>null,price:$.price},$.id))},l.rate.id):y.jsx(y.Fragment,{children:a&&y.jsx(d0,{"data-testid":"basket-extra",deleteLabel:"",name:`${a.selectedQuantity} x ${a.name}`,onClickDelete:()=>null,onClickInfo:()=>null,price:a.price},a.id)})})]})},Noe=()=>{const e=ks(),t=(e==null?void 0:e.name)===Jn.summary.name;return y.jsx("div",{className:Or({"cvg-basket-delete-item-summary":t}),children:y.jsx(Doe,{})})},joe=()=>{const e=Te(n=>{var r;return(r=n.summary.quote)==null?void 0:r.bookingFees}),t=re(Pr.BookingFeesTitle);return y.jsx(y.Fragment,{children:e&&y.jsx(Hh,{title:"",children:y.jsx(pg,{name:t,price:e})})})},$4=()=>{const e=ks(),{isConfirmingDelete:t}=pu(),r=(e==null?void 0:e.name)===Jn.summary.name?re(yn.YourStay):void 0;return y.jsxs(w4,{children:[y.jsx(F4,{readonly:!0}),y.jsx(Yee,{title:r,children:t?y.jsx(Noe,{}):y.jsxs(y.Fragment,{children:[y.jsx(Soe,{}),y.jsx(Poe,{}),y.jsx(Aoe,{}),y.jsx(Ioe,{}),y.jsx(Roe,{}),y.jsx(joe,{}),y.jsx(Loe,{}),y.jsx(Moe,{})]})})]})},tk=()=>{const e=ks(),t=Ir(),n=KJ(),r=aee(),{selectedItem:i,onSuccess:l,isDeletingAsync:u,onConfirmDelete:a}=pu(),m=(e==null?void 0:e.name)===Jn.summary.name,g=Te(H=>H.basket.rooms),w=Te(H=>H.basket.hotelExtras),C=Te(H=>H.session.guests),P=async()=>{a();const H=B4(g,i);H&&await r(H,C,g)()},I=async()=>{a();const H=[...w,...g.map(q=>q.extras).flat()],V=U4(H,i);V&&await n(V)()},N=async()=>{(i==null?void 0:i.type)==="room"?await P():await I(),l()},z=re(yn.Cancel),$=re(Pr.ItemDeletionLink).toLocaleUpperCase();return y.jsxs("div",{className:Or({"cvg-basket-delete-item-footer-summary cvg-basket-delete-item-footer-summary__shadow":m,"cvg-basket-delete-item-footer":!m}),children:[y.jsx(bn,{variation:"secondary",className:"cvg-basket-delete-item-footer__cancel-button",onClick:l,disabled:u,fullWidth:t,children:z}),y.jsx(bn,{variation:"brand",className:"cvg-basket-delete-item-footer__delete-button",fullWidth:t,loading:u,onClick:N,children:$})]})},V4=({children:e})=>y.jsxs(y.Fragment,{children:[y.jsx(soe,{}),e]}),zoe=()=>{const e=i3(),{total:t}=HA();return y.jsxs("div",{className:"cvg-basket-drawer-footer",children:[y.jsxs("div",{className:"cvg-basket-drawer-footer__total",children:[y.jsx("h3",{children:re(Pr.TotalCostSummary)}),y.jsx("p",{className:"cvg-typo-price-1",children:t})]}),y.jsx(bn,{variation:"brand",icon:"arrow-right",fullWidth:!0,onClick:e,children:re(Pr.ContinueButton).toLocaleUpperCase()})]})},Foe=()=>{const{isConfirmingDelete:e}=pu(),t=ks();return(t==null?void 0:t.name)===Jn.roomSelection.name&&e?y.jsx(su,{children:y.jsx(tk,{})}):y.jsx(su,{children:e?y.jsx(tk,{}):y.jsx(zoe,{})})},Boe=()=>{const e=re(yn.YourStay);return y.jsxs(y.Fragment,{children:[y.jsx(sn,{name:"suitcase",size:"large",label:e}),y.jsx("span",{className:"cvg-typo-heading-3",children:e})]})},qA=()=>{const{isOpen:e,onClose:t}=LP(),n=ks(),r=(n==null?void 0:n.name)!==Jn.summary.name;return y.jsx(gd,{open:e,onOpenChange:t,children:y.jsxs(dd,{children:[r?y.jsx(md,{variation:"brand",children:y.jsx(Boe,{})}):null,y.jsx(nf,{className:"cvg-basket-drawer-container",children:y.jsx($4,{})}),y.jsx(Foe,{})]})})},g1=()=>{const{isOpen:e,onClosePromoCode:t,title:n,content:r,footer:i,type:l}=L4(),u=()=>{t()};return y.jsx(gd,{open:e,onOpenChange:u,children:y.jsxs(dd,{id:`drawer-${l}-search-bar-header`,children:[y.jsx(md,{children:n}),y.jsx(nf,{children:y.jsx("div",{className:"cvg-basket-drawer-container",children:r})}),i]})})},Uoe=[Xy.InvalidPromoCode,Xy.InvalidPromoCodeBookingPeriod,Xy.InvalidPromoCodeStayPeriod],H4=()=>{const e=Te(i=>i.session.error),t=(e&&e.type===Ta.BusinessError&&!!e.code&&Uoe.includes(e.code))??!1,n=Si();return{hasPromoCodeError:t,clearPromoCodeError:()=>{t&&n(VK())}}},JO=()=>{const e=re(yn.PageLoadError),t=re(yn.TechnicalIssueRetry),n=re(yn.PageReload);return y.jsxs(Rv,{className:"cvg-card",children:[y.jsx(Ov,{variation:"negative"}),y.jsx(Dv,{children:e}),y.jsx(Mv,{children:t}),y.jsx(Lv,{children:y.jsx(bn,{variation:"secondary",onClick:()=>window.location.reload(),children:n})})]})},$oe=({children:e})=>{const{hasPromoCodeError:t}=H4(),n=Te(u=>u.roomSelection.error),i=Te(u=>u.session.error)||n,l={[mi.BusinessError]:y.jsx(JO,{}),[mi.TechnicalError]:y.jsx(JO,{}),[mi.ErrorWithFilters]:y.jsx(y.Fragment,{children:e}),[mi.ErrorWithSortOrder]:y.jsx(y.Fragment,{children:e})};return t?y.jsx(y.Fragment,{children:e}):i&&[mi.BusinessError,mi.TechnicalError,mi.ErrorWithFilters,mi.ErrorWithSortOrder].includes(i.type)?l[i.type]:y.jsx(y.Fragment,{children:e})},Z4=({promoCode:e})=>{const{promoCode:t}=Te(i=>i.session),n=re(Ur.CodePlaceholder),r=e!==void 0?e:t;return y.jsx(Hse,{placeholder:n,promoCode:r,dataTestId:"promoCode-display"})},GA=({type:e,initialize:t,showApply:n,canApply:r,trigger:i,children:l,forceClose:u,className:a})=>{const m=Ir(),{isDialogOpen:g,openedPopover:w,setOpenedPopover:C,applyPopoverModifications:P}=mu(),{isLoading:I}=cA(),N=w===e,z=w&&w!==e,$=()=>C(e),H=M.useCallback(()=>C(void 0),[C]),V=q=>{g||(q?(t(),$()):H())};return M.useEffect(()=>{u&&H()},[H,u]),m?y.jsx(y.Fragment,{children:i}):y.jsxs(nte,{placement:"bottom-start",open:N,onOpenChange:V,children:[y.jsx(ite,{opacity:z,onClick:()=>V(!N),children:i}),y.jsxs(rte,{className:Or("cvg-searchbar-popover",a),children:[y.jsx("div",{className:"cvg-searchbar-popover__body",children:l}),n?y.jsx("div",{className:"cvg-searchbar-popover__footer",children:y.jsx(bn,{"data-testid":"apply-button",variation:"brand",onClick:()=>{I||P()},loading:I,disabled:!r,children:re(Lt.ApplyFilterButton)})}):null]})]})},Voe=({children:e})=>{const{promoCode:t,initializePromoCode:n,changePromoCode:r}=mu(),i=Te(a=>a.configuration.bookingEngineConstraints.isPromoCodeVisible),{clearPromoCodeError:l}=H4(),u=()=>{l(),n()};return i&&y.jsx(GA,{type:"promoCode",initialize:u,showApply:!0,canApply:!0,trigger:e,children:y.jsx("div",{className:"cvg-promocode__container",children:y.jsx(h1,{promoCode:t,changePromoCode:r,isPopover:!0,showLabel:!0})})})},q4=({children:e,showApply:t})=>{var g;const{stay:n,initializeStay:r,modifyStay:i}=mu(),[l,u]=M.useState(!1),a=()=>{r(),u(!1)},m=w=>{var C;i(w),!t&&!l&&((C=w.departureDate)!=null&&C.date)&&setTimeout(()=>{u(!0)},500)};return y.jsx(GA,{type:"stay",initialize:a,showApply:t,trigger:e,canApply:!!((g=n.departureDate)!=null&&g.date),forceClose:l,className:"cvg-date-popover",children:y.jsx("div",{className:"cvg-date-selection__calendar-block",children:y.jsx(L_,{stay:n,changeStay:m,displayedMonths:2})})})},G4=({children:e,showApply:t})=>{const{guestsList:n,canAddGuests:r,addGuests:i,deleteGuests:l,modifyGuests:u,initializeGuests:a,getGuestsConstraints:m}=mu();return y.jsx(GA,{type:"guests",initialize:a,showApply:t,trigger:e,canApply:!0,children:y.jsx(UA,{guestsList:n??[],canAddGuests:r,addGuests:i,deleteGuests:l,modifyGuests:u,getGuestsConstraints:m})})};function Hoe({formRef:e,currentLocation:t,value:n,setValue:r,filteredItems:i}){const l=M.useRef(null),u=M.useRef([]),[a,m]=M.useState(!1),[g,w]=M.useState(0),C=M.useId(),P=M.useId(),I=M.useId(),N=M.useId(),z=Qw();return y.jsxs(y.Fragment,{children:[y.jsxs(w_,{children:[y.jsx(hd,{htmlFor:C,id:P,className:"gst-u-visually-hidden",children:re(yr.Location)}),y.jsx("input",{type:"hidden",name:"location",value:n}),y.jsxs("button",{className:"cvg-typo-search-mobile cvg-search-bar-mobile-location__combobox",type:"button",role:"combobox","aria-autocomplete":"none","aria-controls":N,"aria-labelledby":P,"aria-haspopup":"dialog","aria-expanded":a?"true":"false",onClick:()=>{m(!a)},id:C,children:[y.jsx(sn,{name:"location-dot",size:"small"}),y.jsx("span",{className:Or({"cvg-search-bar-mobile-location__combobox-placeholder":n===""}),children:n!==""?n:re(yr.AllLocations)})]})]}),y.jsx(gd,{open:a,onOpenChange:$=>{$||r(t),m($)},children:y.jsxs(dd,{id:N,initialFocus:l,children:[y.jsxs("div",{className:"cvg-search-bar-mobile-location__drawer-header",children:[y.jsx(md,{children:re(Ur.ChooseYourDestination)}),y.jsxs("div",{className:"gst-combobox cvg-search-bar-mobile-location__drawer-combobox",...n===""&&{"data-empty":""},children:[y.jsx("input",{className:"gst-combobox__input",placeholder:re(yr.AllLocations),ref:l,type:"text",role:"searchbox","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":C,"aria-controls":I,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:$=>{var H,V;if(["ArrowUp","ArrowDown"].includes($.key)){$.preventDefault(),$.stopPropagation();const q=u.current.length,te=$.key==="ArrowDown"?1:-1,ue=((g===null?0:g)+te+q)%q;(H=u.current[ue])==null||H.focus(),w(ue)}else $.key==="Enter"&&g!=null?((V=u.current[g])!=null&&V.getAttribute("data-value")&&Ca.flushSync(()=>{var q;r(((q=u.current[g])==null?void 0:q.getAttribute("data-value"))||"")}),w(null),m(!1),z(e.current)):$.key==="Escape"&&n!==""&&($.stopPropagation(),r(""),w(0))},value:n,onChange:$=>{const{value:H}=$.target;r(H),w(0)}}),y.jsx(sn,{name:"location-dot",className:"gst-combobox__input-icon"}),y.jsxs("button",{className:"gst-combobox__clear-button",type:"button",tabIndex:-1,onClick:()=>{r(""),w(0)},onPointerDown:$=>{var H;$.preventDefault(),(H=l.current)==null||H.focus()},onTouchStart:$=>{var H;$.preventDefault(),(H=l.current)==null||H.focus()},children:[y.jsx(sn,{name:"xmark-large"}),y.jsx("span",{className:"gst-u-visually-hidden",children:"Clear"})]})]})]}),y.jsxs("div",{className:"cvg-search-bar-mobile-location__drawer-body",children:[y.jsx("div",{className:"cvg-typo-body-small gst-combobox__popover-hint",children:re(yr.SearchForCountryOrCity)}),y.jsx("div",{role:"listbox","aria-labelledby":C,id:I,children:i.map(($,H)=>y.jsxs("div",{className:"gst-combobox__item",role:"option","data-value":$.value,"aria-selected":n===$.value?"true":"false","data-active-item":g===H,ref:V=>u.current[H]=V,onClick:()=>{Ca.flushSync(()=>{r($.value)}),m(!1),z(e.current)},"aria-posinset":H+1,"aria-setsize":i.length,children:[y.jsx(sn,{name:$.icon,className:"gst-combobox__item-icon"}),y.jsx("span",{children:$.label?$.label:$.value})]},$.value))})]})]})})]})}function Zoe({formRef:e,initialValue:t,value:n,setValue:r,filteredItems:i,opacity:l}){const u=Qw(),a=M.useRef(null);return M.useEffect(()=>{function m(g){g.target&&a.current&&!a.current.contains(g.target)&&t!==n&&u(e.current)}return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[a]),y.jsxs(w_,{className:Or("cvg-search-bar-desktop-location__field",{"cvg-search-bar-desktop-location__field--opacity":l}),ref:a,children:[y.jsx(hd,{className:"gst-u-visually-hidden",children:re(yr.Location)}),y.jsxs(N7,{value:n,onInputChange:m=>{Ca.flushSync(()=>{r(m)})},className:"cvg-search-bar-desktop-location__combobox",children:[y.jsx(j7,{name:"location",placeholder:re(yr.AllLocations),className:"cvg-search-bar-desktop-location__combobox-input",onBlur:()=>{t!==n&&u(e.current)}}),y.jsx(z7,{name:"location-dot",className:"cvg-search-bar-desktop-location__combobox-input-icon"}),y.jsx(F7,{className:"cvg-search-bar-desktop-location__combobox-clear-button",children:"Clear"}),y.jsxs(B7,{children:[y.jsx("div",{className:"gst-combobox__popover-hint",children:re(yr.SearchForCountryOrCity)}),i.map(m=>y.jsxs(U7,{value:m.value,"aria-selected":n===m.value?"true":"false",onClick:()=>{t!==m.value&&u(e.current)},children:[y.jsx($7,{name:m.icon}),m.label?m.label:m.value]},m.value))]})]})]})}function eD(e,t,n){var r,i;return(i=(r=t.find(l=>l.id===e))==null?void 0:r.values.find(l=>{var u;return l.id===((u=n.find(a=>a.id===e))==null?void 0:u.values[0])}))==null?void 0:i.name}function W4(){const e=Te(P=>P.session.stay.arrivalDate.date),t=Te(P=>{var I;return(I=P.session.stay.departureDate)==null?void 0:I.date}),n=Te(P=>P.session.hotelFilters),r=Te(P=>P.hotelSelection.filters),i=eD("City",r,n)||eD("Country",r,n)||"",l=r.filter(P=>P.id==="City"||P.id==="Country").reduce((P,I)=>P.concat(I.values.map(N=>({icon:"location-dot",value:N.name,label:N.name}))),[{icon:"location-dot",label:re(yr.AllLocations),value:""}]),[u,a]=M.useState(i),m=M.useMemo(()=>{const P=l.filter(I=>I.value.toLowerCase().includes(u.toLowerCase()));return u===""||P.length===0?l:P},[l,u]),g=Ir(),w=M.useRef(null),{openedPopover:C}=mu();return y.jsxs(Yw,{ref:w,method:"GET",className:"cvg-location",children:[y.jsx("input",{type:"hidden",name:"arrivalDate",value:e}),y.jsx("input",{type:"hidden",name:"departureDate",value:t}),g?y.jsx(Hoe,{formRef:w,currentLocation:i,value:u,setValue:a,filteredItems:m}):y.jsx(Zoe,{initialValue:i,formRef:w,value:u,setValue:a,filteredItems:m,opacity:!!C})]})}const qoe=({stay:e,className:t})=>{const n=ks(),r=Te(N=>N.configuration.bookingEngineConstraints.isPromoCodeVisible),i=Or("cvg-modify-search__title",t),{openedPopover:l,stay:u,promoCode:a,guestsList:m}=mu(),g=l==="stay"?u:e,w=l==="promoCode"?a:void 0,C=l==="guests"?m:void 0,I=Te(N=>N.hotelSelection.filters).some(N=>N.id==="City"||N.id==="Country");return y.jsxs("div",{className:i,children:[(n==null?void 0:n.name)===Jn.hotelSelection.name&&I?y.jsxs(y.Fragment,{children:[y.jsx(W4,{}),y.jsx("div",{className:"cvg-modify-search__title-separator"})]}):null,y.jsx(q4,{showApply:!0,children:y.jsxs("div",{className:"cvg-modify-search__title-item cvg-modify-search__title-item-stay",children:[y.jsx(sn,{name:"calendar",className:"cvg-modify-search__title-item-icon"}),y.jsx(v0,{stay:g}),y.jsx(sn,{name:"arrow-right",className:"cvg-modify-search__title-item-icon"}),y.jsx(_0,{stay:g})]})}),y.jsx("div",{className:"cvg-modify-search__title-separator"}),y.jsx(G4,{showApply:!0,children:y.jsxs("div",{className:"cvg-modify-search__title-item cvg-modify-search__title-item-guest",children:[y.jsx(x0,{guestsList:C}),y.jsx(b0,{guestsList:C})]})}),r?y.jsx("div",{className:"cvg-modify-search__title-separator"}):null,y.jsx(Voe,{children:y.jsx("div",{className:"cvg-modify-search__title-item",children:y.jsx(Z4,{promoCode:w})})})]})},Goe=({isBasketVisible:e})=>{const t=ks(),n=Te(u=>u.session.stay.arrivalDate,(u,a)=>u.date===a.date),r=Te(u=>u.session.stay.departureDate,(u,a)=>(u==null?void 0:u.date)===(a==null?void 0:a.date)),i={arrivalDate:n,departureDate:r},l=M.useRef(null);return y.jsxs("div",{ref:l,onClick:()=>{const{current:u}=l;u!==null&&u.scrollIntoView({behavior:"smooth"})},className:Or({"cvg-search-panel__desktop--basket":e&&(t==null?void 0:t.name)!==Jn.summary.name,"cvg-search-panel__desktop":!(e&&(t==null?void 0:t.name)!==Jn.summary.name)}),children:[y.jsx(qoe,{stay:i,className:"cvg-search-panel"}),e&&(t==null?void 0:t.name)!==Jn.summary.name?y.jsx(z4,{}):null]})},X4=()=>{const e=M.createRef(),[t,n]=M.useState(!1),[r,i]=M.useState(0);return M.useEffect(()=>{var l;e.current&&i((l=e==null?void 0:e.current)==null?void 0:l.offsetTop)},[e,i]),M.useEffect(()=>{const l=()=>{if(!e.current)return;const u=window.scrollY>r;n(u)};return window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l)},[n,e,r]),{stickyRef:e,isSticky:t}},WA=({children:e,isMobile:t=!1,isBasket:n=!1})=>{const{isSticky:r,stickyRef:i}=X4();return y.jsx("div",{ref:i,onClick:()=>{const{current:l}=i;l!==null&&!t&&l.scrollIntoView({behavior:"smooth"})},className:Or({"cvg-bar--sticky":r&&t&&!n},"cvg-search-bar"),children:e})},XA=()=>{const e=ks(),t=Ir(),n=re(Cs.StayGuestTitle),{onOpenGuests:r,onOpenCalendar:i,onOpenPromoCode:l}=L4(),{isPromoCodeVisible:u}=Te(g=>g.configuration.bookingEngineConstraints),m=Te(g=>g.hotelSelection.filters).some(g=>g.id==="City"||g.id==="Country");return y.jsxs("div",{className:"cvg-search-bar-info",children:[(e==null?void 0:e.name)===Jn.hotelSelection.name&&m?y.jsx(W4,{}):null,y.jsx(q4,{children:t?y.jsx("button",{className:"cvg-search-bar__button",onClick:i,children:y.jsxs("div",{className:"cvg-search-bar-info__section",children:[y.jsx(sn,{name:"calendar",size:"small",className:"cvg-search-bar-info-item__icon"}),y.jsx(v0,{}),y.jsx(sn,{name:"arrow-right",size:"small",className:"cvg-search-bar-info-item__icon"}),y.jsx(_0,{})]})}):y.jsxs("div",{className:"cvg-popover-trigger cvg-search-bar-info__section",children:[y.jsx(v0,{}),y.jsx(_0,{})]})}),!t&&y.jsx("div",{className:"cvg-search-bar__separator"}),y.jsx(G4,{children:t?y.jsx("button",{className:"cvg-search-bar__button",onClick:r,children:y.jsx("div",{className:"cvg-search-bar-info__section",children:y.jsxs("div",{className:"cvg-search-bar-info__guest-room",children:[y.jsx(x0,{}),y.jsx(b0,{})]})})}):y.jsx("div",{className:"cvg-popover-trigger cvg-search-bar-info__section",children:y.jsxs("div",{className:"cvg-search-bar-info-item__container",children:[y.jsx("p",{className:"cvg-search-bar-info-item__title cvg-typo-search-label",children:n}),y.jsxs("div",{className:"cvg-search-bar-info__guest-room",children:[y.jsx(x0,{}),y.jsx(b0,{})]})]})})}),t&&u?y.jsx("button",{className:"cvg-search-bar__button",onClick:l,children:y.jsx(Z4,{})}):null]})},Woe=({isBasketVisible:e})=>{const{isSticky:t,stickyRef:n}=X4();return y.jsxs(y.Fragment,{children:[y.jsx(WA,{isMobile:!0,isBasket:e,children:y.jsx(XA,{})}),e?y.jsx("div",{ref:n,className:Or({"cvg-bar--sticky":t}),children:y.jsx(z4,{})}):null]})},Rg=({isBasketVisible:e=!1})=>{const t=Ir();return y.jsx(y.Fragment,{children:t?y.jsx(Woe,{isBasketVisible:e}):y.jsx(Goe,{isBasketVisible:e})})},Xoe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO5SURBVHgBpVbdUdtAEN49KZlMXqJUEKcC3AEyDYS8gQOxqACnAtsVABUgEwJ5gzQQiwpiOjAVxDxkhplIt/n27PMYj4xlsuOZk+9nv9vbb787poqWbMdR/orqbKgmRDXtM4Z+25xuwwcaptfZuIofXjVhbyeOmbmDmXURGTLTCIB3blAoYuINjMX4zthIevYt6z8L0AMJPOHX0yiWRXj+Pcv2d+KEmFvwWAusNNLv2agy4Odm3BHhBBEdhESjnLkNoBb+j7Bg6CPE9zt81xFlhH9ZYG2vIERruIO+9OziZ2/Rd1gGZom3Q5GGNfQB36cIsR/8offL8pTsxLXcSLsw/AtAx8ZaXXv1ublFi6BcBpZb+fjCmCMRG4VCB8uOpwy4YN0gjwOxX6zhK3xfz4PywuRBgMgKByb355eDhJ5he7uNFJG+UVBEPRArB5pnHTN+kg4wSde6XNnouWBqk7USFUzbCuZYPjUHuN+MQRAaGaEbIW7rMa7hn1qfto4+7cbt+T6cFHzwoZJO/yvrZ4Ak3DIkKdjYJZa0as7UNBVWZPuF0PV8v/oQlr4yHOnp+ShNksSRFu7ZZdZHUW8GBZ3QGlYYlAFJVrbJ8CUdw2crfEVDFQ5VK5M/qIJQpiGjpsbrRDcx7gSWemUjaZqNBcqkGBAPJxwGHXWM3WoL0gxpDfO5f3KTVm4n6iR32oYIGSohY9RHNNPIyoa8OHI8NcVpb823hp5pjnXw4OurqhlEpvr4zrdVFyrrtG5XThQcp5BKYqStEYs6Ea5pixqsl63RXO03t079fy0FNDVl9kpAwxsMwrBMWuMpq9cPIqwpdRfXfL3IUtQSe1Ct1yrR6cbYUuSOHaWnGEap6ykLJvXz16ZdtljlyoHubl1hY5uqSqsAi8AcQkiyKZszvW0cabwShBaFKtKaHlk5KMk9uPJjVb1OfEjianSqZNo/uy32dxuDCbDWJX/4ejlo0H+Y88d8w2SVIx34e6/9s7JwYIZPA9VElvE8Sda1lq6Fj9Da1CkRrjw/9ugC3mvGXYPoDC5gaOQRdhap6q99AQPsr6Uv4eQC/nF+8bNbCrgImhtKcJEeQv9SFnuyDFiZbV+DIMhZIXKiN0deAlYK6EEB1GKWrinoJmfqglSbmDwGaR49ojCvrpKFlPRxjx7n+NbUoKb7i2BLAWfHg1cASmbk35sqZ3gabliit9PFIxWM2RNy7lm5TPJWPoTn3pvusQt3t5ojH6GqFKhXx1Ni+BRQZcBZxNOn/rIIqz71/wGVVi8DpLtzFwAAAABJRU5ErkJggg==",Koe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKnSURBVHgBrVbNchJBEO6eRS3jJT5B9q4G4gu45AUgN9iCSE4eY54A8gTiSW9QBiFVXuAFZLjpSUh8gM0b4MVYBUzbvfwUgd1lK+Sr2pphevrrnu7pHhAiUHKd1BggG7XHjKDd/Kb7YXIVpSzkSPgmTC4y9SjagUSUUAgQqXrR1J0geSHviAOnURyhJ5Dw8GB/CSH3vXsCGhBShZzjhO2x1oizzu7+a/sdAVaJ6OTqt+eFKff73r/9F/ZPRKylkvZwcO0NVvfgIpGEuwi4B4ocMtRPIJzVm+HJu+NUzrEnbITjkQIDfQIYcHyHcgGw4DqVWazbhuAmcQu63tZDuAfE0JhDphD2iDBLSD0/yTLhRH6ELVG/1B4P8gE7/lzGRFzlqXf4Xo6eMFCfkW2EirPJj7HCrpADgT+XyxBHN5aBEUoxkW40daXR0iUC6oyeQimObiwDiLDLN+NmaWkoa3F0N+ZgWkSYkXnRdfZk5BpJzWS6can1Vgb4jA4CeTxbVDT/7vGQIZbxqLczAOIxDDj+9eU1voZ2HF1FBEOpYnh4+JwKCfoIkIQHBkreDOiEJKmYT5clmeEJw8w8wXNME02BnZb3liSuwjdtFUTnqLDGBZVerVCp2okib91D6llmPcF+UQKWJ2M6uiOQpnfspn/BligwR8E9rAQL8+l60T2swT3xlnWFY3kNg4zwA0IXze8nEBPSl2hHfZhwj260uqVIA3Mj3NOTytDRpq4p5OMdboTEtbJCLgjsRbLR8A3xu2YuvKD8hO4g5w07QeQCK0z56trTyZc2P3b4KfnKRn6bfyzLj13nlGWfJ4bOv7a61TAehA1YvAWA2vprzmSNnqmyMZS1iNKbQrixXQuB9ZgOCMwfCYf/GULrlg7ivmqxUcw5paj/QEH4DxmyNrGRvBP/AAAAAElFTkSuQmCC",Yoe=({className:e,guaranteeType:t})=>({OfficialWebSite:y.jsx("img",{src:Xoe,alt:"",className:e}),SecuredTransaction:y.jsx("img",{src:Koe,alt:"",className:e})})[t],Qoe=({guaranteeType:e,label:t,description:n})=>y.jsxs("li",{className:"cvg-reassurance-item",children:[y.jsx(Yoe,{guaranteeType:e}),y.jsxs("div",{className:"cvg-reassurance-item__content",children:[y.jsx("span",{className:"cvg-typo-heading-3 cvg-reassurance-item__label",children:t}),!!n&&y.jsx("p",{className:"cvg-typo-body-small cvg-reassurance-item__description",children:n})]})]}),Joe=e=>e.map(t=>({guaranteeType:t.type,label:t.title})),eae=()=>{const e=C3(),t=Te(r=>r.configuration.guarantees),n=Joe(t);return e(y.jsx("div",{className:"cvg-reassurance","data-testid":"reassurance",children:y.jsx("ul",{className:"cvg-reassurance__list",children:n.map((r,i)=>y.jsx(Qoe,{...r},i))})}))};function y1({children:e,className:t}){return y.jsx("div",{className:Or("cvg-card",t),children:e})}const tae=()=>{const e=Te(g=>g.configuration.isMultiHotel),t=Te(g=>g.session.selectedHotel),{onOpenDrawer:n}=M.useContext(rf),r=!!t,i=t==null?void 0:t.name,l=Jw(t).join(", "),u=t==null?void 0:t.rating,a=r?()=>{n(t)}:void 0,m=re(js.ExtraDetailsLink);return e&&r?y.jsxs("div",{className:"cvg-hotel-header",children:[y.jsxs("div",{className:"cvg-typo-heading-5 cvg-typo-heading-1--breakpoint-small cvg-hotel-header__title",children:[i,u?y.jsx(O4,{rating:u,className:"cvg-hotel-header__rating"}):null]}),y.jsxs("span",{className:"cvg-hotel-header__address",children:[y.jsx(sn,{name:"location-dot"}),l]}),y.jsx(bn,{"data-testid":"hotel-header-details-link",variation:"link",onClick:a,children:m})]}):null},Nu={header:"#F5F4F0",brand:"#8A6F4C",page:"#E8E7DE",whiteForeground:"#FFFFFF",headerForeground:"#525252",pageForeground:"#525252"},nae=e=>{var n,r,i,l,u,a,m,g,w,C,P,I,N,z,$,H,V,q,te,ue,fe,Z,le,be;return{pictures:{logo:(r=(n=e==null?void 0:e.customisation)==null?void 0:n.pictures)==null?void 0:r.logoUrl,background:(l=(i=e==null?void 0:e.customisation)==null?void 0:i.pictures)==null?void 0:l.backgroundImageUrl},fonts:{default:((a=(u=e==null?void 0:e.customisation)==null?void 0:u.fonts)==null?void 0:a.primary)??""},colors:{brand:{color:((w=(g=(m=e==null?void 0:e.customisation)==null?void 0:m.colors)==null?void 0:g.actionButton)==null?void 0:w.background)??Nu.brand,inverted:(((I=(P=(C=e==null?void 0:e.customisation)==null?void 0:C.colors)==null?void 0:P.actionButton)==null?void 0:I.foreground)??Nu.whiteForeground)===Nu.whiteForeground},header:{color:(($=(z=(N=e==null?void 0:e.customisation)==null?void 0:N.colors)==null?void 0:z.header)==null?void 0:$.background)??Nu.header,inverted:(((q=(V=(H=e==null?void 0:e.customisation)==null?void 0:H.colors)==null?void 0:V.header)==null?void 0:q.foreground)??Nu.headerForeground)===Nu.whiteForeground},page:{color:((fe=(ue=(te=e==null?void 0:e.customisation)==null?void 0:te.colors)==null?void 0:ue.pageAndFooter)==null?void 0:fe.background)??Nu.page,inverted:(((be=(le=(Z=e==null?void 0:e.customisation)==null?void 0:Z.colors)==null?void 0:le.pageAndFooter)==null?void 0:be.foreground)??Nu.pageForeground)===Nu.whiteForeground}}}},rae=()=>{const e=Te(l=>{var u;return(u=l.configuration.configurationCulture)==null?void 0:u.cultureTwoLetterISOLanguageName}),t=Te(l=>{var u;return(u=l.configuration.configurationCulture)==null?void 0:u.cultureIsRightToLeft}),n=Te(l=>l.configuration.configurationTheme),r=Te(l=>{var u,a,m;return(m=(a=(u=l.configuration.configurationTheme)==null?void 0:u.headerAndFooter)==null?void 0:a.header)==null?void 0:m.faviconUrl}),i=nae(n);return y.jsxs(y.Fragment,{children:[y.jsxs(rd,{children:[y.jsx("html",{lang:e,dir:l4(t)}),r?y.jsx("link",{rel:"icon",href:r}):[y.jsx("link",{rel:"icon",type:"ico",href:"./favicon.ico"},"ico"),y.jsx("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"./favicon-16x16.png"},"png-16x16"),y.jsx("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"./favicon-32x32.png"},"png-32x32"),y.jsx("link",{rel:"apple-touch-icon",sizes:"180x180",href:"./apple-touch-icon.png"},"apple-touch-icon"),y.jsx("link",{rel:"manifest",href:"./site.webmanifest"},"manifest")]]}),y.jsx(loe,{}),y.jsx(Lee,{children:y.jsx(Vse,{children:y.jsx(Nee,{children:y.jsx(ete,{children:y.jsx(v9,{theme:i,children:y.jsxs(tte,{header:y.jsx(Mee,{}),footer:y.jsx(qee,{}),children:[y.jsxs(aoe,{children:[y.jsx(tae,{}),y.jsx(gJ,{}),y.jsx(ioe,{}),y.jsx(voe,{}),y.jsx(xoe,{})]}),y.jsx(eae,{})]})})})})})})]})},tD=()=>{const e=Ir(),t=re(yn.PageLoadError),n=re(yn.ErrorGeneralRetry),r=re(yn.PageReload);return y.jsxs(y.Fragment,{children:[y.jsx(Rg,{}),y.jsx("div",{className:"cvg-calendar-error",children:y.jsx("div",{className:"cvg-calendar-error-banner",children:y.jsxs(Xo,{direction:e?"column":"row",variation:"error",children:[y.jsx(Ko,{children:t}),y.jsx(wc,{children:n}),y.jsx(N_,{children:y.jsx(bn,{variation:"secondary",onClick:()=>window.location.reload(),children:r})})]})})})]})},iae=({children:e})=>{const t=Te(r=>r.calendar.error),n={[Ta.BusinessError]:y.jsx(tD,{}),[Ta.TechnicalError]:y.jsx(tD,{})};return t?n[t.type]??y.jsx(y.Fragment,{children:e}):y.jsx(y.Fragment,{children:e})},KA=e=>[Bh.RoomSelection,Bh.HotelSelection].includes(e),K4=e=>e.rooms.length>0,sae=(e,t)=>!e||t,oae=e=>KA(e),aae=(e,t)=>KA(e)&&K4(t)&&!t.skipExtraSelection,lae=(e,t)=>KA(e)&&K4(t),cae=()=>y.jsx(WA,{isMobile:!0,children:y.jsx(XA,{})}),Y4=()=>{const e=Ir(),{isLoading:t,onSearch:n}=cA(),r=Te(u=>u.session.stay.departureDate,(u,a)=>(u==null?void 0:u.date)===(a==null?void 0:a.date)),i=re(Cs.SearchAction),l=()=>{n()};return y.jsx(bn,{type:"button",icon:"arrow-right",variation:"brand-large",fullWidth:e,onClick:l,disabled:!r,loading:t,"data-testid":"search-bar-info-search-button",children:i})},uae=()=>{const e=Te(a=>!!a.session.promoCode),[t,n]=M.useState(e),r=re(Ur.ApplyPromotionalCode),{promoCode:i,changePromoCode:l}=e1(!1);return Te(a=>a.configuration.bookingEngineConstraints.isPromoCodeVisible)&&y.jsxs(Ine,{"data-testid":"promocode-disclosure",open:t,onOpenChange:n,children:[y.jsx(Rne,{asChild:!0,children:y.jsxs("div",{className:"cvg-promocode-disclosure-trigger__content ",children:[y.jsx(nD,{}),y.jsxs("div",{className:"cvg-typo-body cvg-promocode-disclosure-trigger__button","data-testid":"promocode-disclosure-button",children:[y.jsx("div",{className:"cvg-promocode-disclosure-trigger__button-label",children:r}),y.jsx(sn,{name:t?"chevron-up":"chevron-down",size:"medium"})]}),y.jsx(nD,{})]})}),y.jsx(Lne,{children:y.jsx(h1,{promoCode:i,changePromoCode:l,showLabel:!0})})]})},nD=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"2",viewBox:"0 0 396 2",fill:"none",children:y.jsx("path",{d:"M1 1L395 1",stroke:"#D4D4D4",strokeLinecap:"round"})}),dae=()=>y.jsxs(WA,{children:[y.jsxs("div",{className:"cvg-date-selection-search-bar",children:[y.jsx(XA,{}),y.jsx(Y4,{})]}),y.jsx("div",{className:"cvg-promo-code-search-bar",children:y.jsx(uae,{})})]}),hae=()=>{const{guestsList:e,canAddGuests:t,addGuests:n,deleteGuests:r,modifyGuests:i,getGuestsConstraints:l}=fA(!1),{stay:u,modifyStay:a}=dA(!1),{promoCode:m,changePromoCode:g}=e1(!1);return y.jsxs("div",{className:"cvg-date-selection",children:[y.jsx(cae,{}),y.jsxs("div",{className:"cvg-date-selection__content",children:[y.jsx("div",{className:"cvg-date-selection__content--centered",children:y.jsx(L_,{stay:u,changeStay:a})}),y.jsx("hr",{className:"cvg-date-selection__separator"}),y.jsx(UA,{guestsList:e,canAddGuests:t,addGuests:n,deleteGuests:r,modifyGuests:i,getGuestsConstraints:l}),y.jsx("hr",{className:"cvg-date-selection__separator"}),y.jsx(h1,{promoCode:m,changePromoCode:g,classname:"cvg-date-selection__promocode",showLabel:!0}),y.jsx("div",{className:"cvg-date-selection__search-button--mobile",children:y.jsx(Y4,{})})]})]})},fae=()=>y.jsx("div",{className:"cvg-date-selection",children:y.jsx(dae,{})}),pae=async()=>{const{session:e,configuration:t}=Fr.getState();return sae(t.isMultiHotel,!!(e!=null&&e.selectedHotel))?{}:Yf("/")},mae=()=>{const{trackPageView:e}=Vi(),t=Si();M.useEffect(()=>{e("DateSelection")},[]);const n=Te(a=>{var m,g;return((g=(m=a.session)==null?void 0:m.selectedHotel)==null?void 0:g.name)??""}),r=`${re(Cs.SelectStay)} | ${n}`,i=Te(a=>{var m;return(m=a.session)==null?void 0:m.guests}),{newGuests:l}=hA();M.useEffect(()=>{i.length===0&&t(KP(l()))},[i.length,t,l]);const u=Ir();return y.jsxs(y.Fragment,{children:[y.jsx(rd,{children:y.jsx("title",{children:r})}),y.jsx("h1",{className:"gst-u-visually-hidden",children:r}),y.jsx(iae,{children:y.jsx(I_,{children:u?y.jsx(hae,{}):y.jsx(fae,{})})})]})};function Q4(e,t){const n=M.useRef(t);M.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function J4(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const gae=1;function yae(e){return Object.freeze({__version:gae,map:e})}function rl(e,t){return Object.freeze({...e,...t})}const e5=M.createContext(null),v1=e5.Provider;function kp(){const e=M.useContext(e5);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function YA(e){function t(n,r){const{instance:i,context:l}=e(n).current;return M.useImperativeHandle(r,()=>i),n.children==null?null:dn.createElement(v1,{value:l},n.children)}return M.forwardRef(t)}function vae(e){function t(n,r){const[i,l]=M.useState(!1),{instance:u}=e(n,l).current;M.useImperativeHandle(r,()=>u),M.useEffect(function(){i&&u.update()},[u,i,n.children]);const a=u._contentNode;return a?Ca.createPortal(n.children,a):null}return M.forwardRef(t)}function t5(e){function t(n,r){const{instance:i}=e(n).current;return M.useImperativeHandle(r,()=>i),null}return M.forwardRef(t)}function n5(e){return function(n){const r=kp(),i=e(n,r),{instance:l}=i.current,u=M.useRef(n.position),{position:a}=n;return M.useEffect(function(){return l.addTo(r.map),function(){l.remove()}},[r.map,l]),M.useEffect(function(){a!=null&&a!==u.current&&(l.setPosition(a),u.current=a)},[l,a]),i}}function QA(e,t){const n=M.useRef();M.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function F_(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function _ae(e,t){return function(r,i){const l=kp(),u=e(F_(r,l),l);return Q4(l.map,r.attribution),QA(u.current,r.eventHandlers),t(u.current,l,r,i),u}}var nk={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(cc,function(n){var r="1.9.4";function i(h){var b,A,F,X;for(A=1,F=arguments.length;A<F;A++){X=arguments[A];for(b in X)h[b]=X[b]}return h}var l=Object.create||function(){function h(){}return function(b){return h.prototype=b,new h}}();function u(h,b){var A=Array.prototype.slice;if(h.bind)return h.bind.apply(h,A.call(arguments,1));var F=A.call(arguments,2);return function(){return h.apply(b,F.length?F.concat(A.call(arguments)):arguments)}}var a=0;function m(h){return"_leaflet_id"in h||(h._leaflet_id=++a),h._leaflet_id}function g(h,b,A){var F,X,de,je;return je=function(){F=!1,X&&(de.apply(A,X),X=!1)},de=function(){F?X=arguments:(h.apply(A,arguments),setTimeout(je,b),F=!0)},de}function w(h,b,A){var F=b[1],X=b[0],de=F-X;return h===F&&A?h:((h-X)%de+de)%de+X}function C(){return!1}function P(h,b){if(b===!1)return h;var A=Math.pow(10,b===void 0?6:b);return Math.round(h*A)/A}function I(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function N(h){return I(h).split(/\s+/)}function z(h,b){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?l(h.options):{});for(var A in b)h.options[A]=b[A];return h.options}function $(h,b,A){var F=[];for(var X in h)F.push(encodeURIComponent(A?X.toUpperCase():X)+"="+encodeURIComponent(h[X]));return(!b||b.indexOf("?")===-1?"?":"&")+F.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function V(h,b){return h.replace(H,function(A,F){var X=b[F];if(X===void 0)throw new Error("No value provided for variable "+A);return typeof X=="function"&&(X=X(b)),X})}var q=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function te(h,b){for(var A=0;A<h.length;A++)if(h[A]===b)return A;return-1}var ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var Z=0;function le(h){var b=+new Date,A=Math.max(0,16-(b-Z));return Z=b+A,window.setTimeout(h,A)}var be=window.requestAnimationFrame||fe("RequestAnimationFrame")||le,Re=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function Je(h,b,A){if(A&&be===le)h.call(b);else return be.call(window,u(h,b))}function Fe(h){h&&Re.call(window,h)}var Xe={__proto__:null,extend:i,create:l,bind:u,get lastId(){return a},stamp:m,throttle:g,wrapNum:w,falseFn:C,formatNum:P,trim:I,splitWords:N,setOptions:z,getParamString:$,template:V,isArray:q,indexOf:te,emptyImageUrl:ue,requestFn:be,cancelFn:Re,requestAnimFrame:Je,cancelAnimFrame:Fe};function gt(){}gt.extend=function(h){var b=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},A=b.__super__=this.prototype,F=l(A);F.constructor=b,b.prototype=F;for(var X in this)Object.prototype.hasOwnProperty.call(this,X)&&X!=="prototype"&&X!=="__super__"&&(b[X]=this[X]);return h.statics&&i(b,h.statics),h.includes&&(yt(h.includes),i.apply(null,[F].concat(h.includes))),i(F,h),delete F.statics,delete F.includes,F.options&&(F.options=A.options?l(A.options):{},i(F.options,h.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){A.callInitHooks&&A.callInitHooks.call(this),this._initHooksCalled=!0;for(var de=0,je=F._initHooks.length;de<je;de++)F._initHooks[de].call(this)}},b},gt.include=function(h){var b=this.prototype.options;return i(this.prototype,h),h.options&&(this.prototype.options=b,this.mergeOptions(h.options)),this},gt.mergeOptions=function(h){return i(this.prototype.options,h),this},gt.addInitHook=function(h){var b=Array.prototype.slice.call(arguments,1),A=typeof h=="function"?h:function(){this[h].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(A),this};function yt(h){if(!(typeof L>"u"||!L||!L.Mixin)){h=q(h)?h:[h];for(var b=0;b<h.length;b++)h[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(h,b,A){if(typeof h=="object")for(var F in h)this._on(F,h[F],b);else{h=N(h);for(var X=0,de=h.length;X<de;X++)this._on(h[X],b,A)}return this},off:function(h,b,A){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var F in h)this._off(F,h[F],b);else{h=N(h);for(var X=arguments.length===1,de=0,je=h.length;de<je;de++)X?this._off(h[de]):this._off(h[de],b,A)}return this},_on:function(h,b,A,F){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(h,b,A)===!1){A===this&&(A=void 0);var X={fn:b,ctx:A};F&&(X.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(X)}},_off:function(h,b,A){var F,X,de;if(this._events&&(F=this._events[h],!!F)){if(arguments.length===1){if(this._firingCount)for(X=0,de=F.length;X<de;X++)F[X].fn=C;delete this._events[h];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var je=this._listens(h,b,A);if(je!==!1){var ot=F[je];this._firingCount&&(ot.fn=C,this._events[h]=F=F.slice()),F.splice(je,1)}}},fire:function(h,b,A){if(!this.listens(h,A))return this;var F=i({},b,{type:h,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var X=this._events[h];if(X){this._firingCount=this._firingCount+1||1;for(var de=0,je=X.length;de<je;de++){var ot=X[de],ht=ot.fn;ot.once&&this.off(h,ht,ot.ctx),ht.call(ot.ctx||this,F)}this._firingCount--}}return A&&this._propagateEvent(F),this},listens:function(h,b,A,F){typeof h!="string"&&console.warn('"string" type argument expected');var X=b;typeof b!="function"&&(F=!!b,X=void 0,A=void 0);var de=this._events&&this._events[h];if(de&&de.length&&this._listens(h,X,A)!==!1)return!0;if(F){for(var je in this._eventParents)if(this._eventParents[je].listens(h,b,A,F))return!0}return!1},_listens:function(h,b,A){if(!this._events)return!1;var F=this._events[h]||[];if(!b)return!!F.length;A===this&&(A=void 0);for(var X=0,de=F.length;X<de;X++)if(F[X].fn===b&&F[X].ctx===A)return X;return!1},once:function(h,b,A){if(typeof h=="object")for(var F in h)this._on(F,h[F],b,!0);else{h=N(h);for(var X=0,de=h.length;X<de;X++)this._on(h[X],b,A,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[m(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[m(h)],this},_propagateEvent:function(h){for(var b in this._eventParents)this._eventParents[b].fire(h.type,i({layer:h.target,propagatedFrom:h.target},h),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var Nt=gt.extend(lt);function qe(h,b,A){this.x=A?Math.round(h):h,this.y=A?Math.round(b):b}var _t=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};qe.prototype={clone:function(){return new qe(this.x,this.y)},add:function(h){return this.clone()._add(Ke(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(Ke(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new qe(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new qe(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_t(this.x),this.y=_t(this.y),this},distanceTo:function(h){h=Ke(h);var b=h.x-this.x,A=h.y-this.y;return Math.sqrt(b*b+A*A)},equals:function(h){return h=Ke(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=Ke(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function Ke(h,b,A){return h instanceof qe?h:q(h)?new qe(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new qe(h.x,h.y):new qe(h,b,A)}function we(h,b){if(h)for(var A=b?[h,b]:h,F=0,X=A.length;F<X;F++)this.extend(A[F])}we.prototype={extend:function(h){var b,A;if(!h)return this;if(h instanceof qe||typeof h[0]=="number"||"x"in h)b=A=Ke(h);else if(h=He(h),b=h.min,A=h.max,!b||!A)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=A.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(A.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(A.y,this.max.y)),this},getCenter:function(h){return Ke((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return Ke(this.min.x,this.max.y)},getTopRight:function(){return Ke(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var b,A;return typeof h[0]=="number"||h instanceof qe?h=Ke(h):h=He(h),h instanceof we?(b=h.min,A=h.max):b=A=h,b.x>=this.min.x&&A.x<=this.max.x&&b.y>=this.min.y&&A.y<=this.max.y},intersects:function(h){h=He(h);var b=this.min,A=this.max,F=h.min,X=h.max,de=X.x>=b.x&&F.x<=A.x,je=X.y>=b.y&&F.y<=A.y;return de&&je},overlaps:function(h){h=He(h);var b=this.min,A=this.max,F=h.min,X=h.max,de=X.x>b.x&&F.x<A.x,je=X.y>b.y&&F.y<A.y;return de&&je},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var b=this.min,A=this.max,F=Math.abs(b.x-A.x)*h,X=Math.abs(b.y-A.y)*h;return He(Ke(b.x-F,b.y-X),Ke(A.x+F,A.y+X))},equals:function(h){return h?(h=He(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function He(h,b){return!h||h instanceof we?h:new we(h,b)}function Be(h,b){if(h)for(var A=b?[h,b]:h,F=0,X=A.length;F<X;F++)this.extend(A[F])}Be.prototype={extend:function(h){var b=this._southWest,A=this._northEast,F,X;if(h instanceof xt)F=h,X=h;else if(h instanceof Be){if(F=h._southWest,X=h._northEast,!F||!X)return this}else return h?this.extend(bt(h)||ct(h)):this;return!b&&!A?(this._southWest=new xt(F.lat,F.lng),this._northEast=new xt(X.lat,X.lng)):(b.lat=Math.min(F.lat,b.lat),b.lng=Math.min(F.lng,b.lng),A.lat=Math.max(X.lat,A.lat),A.lng=Math.max(X.lng,A.lng)),this},pad:function(h){var b=this._southWest,A=this._northEast,F=Math.abs(b.lat-A.lat)*h,X=Math.abs(b.lng-A.lng)*h;return new Be(new xt(b.lat-F,b.lng-X),new xt(A.lat+F,A.lng+X))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof xt||"lat"in h?h=bt(h):h=ct(h);var b=this._southWest,A=this._northEast,F,X;return h instanceof Be?(F=h.getSouthWest(),X=h.getNorthEast()):F=X=h,F.lat>=b.lat&&X.lat<=A.lat&&F.lng>=b.lng&&X.lng<=A.lng},intersects:function(h){h=ct(h);var b=this._southWest,A=this._northEast,F=h.getSouthWest(),X=h.getNorthEast(),de=X.lat>=b.lat&&F.lat<=A.lat,je=X.lng>=b.lng&&F.lng<=A.lng;return de&&je},overlaps:function(h){h=ct(h);var b=this._southWest,A=this._northEast,F=h.getSouthWest(),X=h.getNorthEast(),de=X.lat>b.lat&&F.lat<A.lat,je=X.lng>b.lng&&F.lng<A.lng;return de&&je},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,b){return h?(h=ct(h),this._southWest.equals(h.getSouthWest(),b)&&this._northEast.equals(h.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ct(h,b){return h instanceof Be?h:new Be(h,b)}function xt(h,b,A){if(isNaN(h)||isNaN(b))throw new Error("Invalid LatLng object: ("+h+", "+b+")");this.lat=+h,this.lng=+b,A!==void 0&&(this.alt=+A)}xt.prototype={equals:function(h,b){if(!h)return!1;h=bt(h);var A=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return A<=(b===void 0?1e-9:b)},toString:function(h){return"LatLng("+P(this.lat,h)+", "+P(this.lng,h)+")"},distanceTo:function(h){return qt.distance(this,bt(h))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(h){var b=180*h/40075017,A=b/Math.cos(Math.PI/180*this.lat);return ct([this.lat-b,this.lng-A],[this.lat+b,this.lng+A])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function bt(h,b,A){return h instanceof xt?h:q(h)&&typeof h[0]!="object"?h.length===3?new xt(h[0],h[1],h[2]):h.length===2?new xt(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new xt(h.lat,"lng"in h?h.lng:h.lon,h.alt):b===void 0?null:new xt(h,b,A)}var It={latLngToPoint:function(h,b){var A=this.projection.project(h),F=this.scale(b);return this.transformation._transform(A,F)},pointToLatLng:function(h,b){var A=this.scale(b),F=this.transformation.untransform(h,A);return this.projection.unproject(F)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var b=this.projection.bounds,A=this.scale(h),F=this.transformation.transform(b.min,A),X=this.transformation.transform(b.max,A);return new we(F,X)},infinite:!1,wrapLatLng:function(h){var b=this.wrapLng?w(h.lng,this.wrapLng,!0):h.lng,A=this.wrapLat?w(h.lat,this.wrapLat,!0):h.lat,F=h.alt;return new xt(A,b,F)},wrapLatLngBounds:function(h){var b=h.getCenter(),A=this.wrapLatLng(b),F=b.lat-A.lat,X=b.lng-A.lng;if(F===0&&X===0)return h;var de=h.getSouthWest(),je=h.getNorthEast(),ot=new xt(de.lat-F,de.lng-X),ht=new xt(je.lat-F,je.lng-X);return new Be(ot,ht)}},qt=i({},It,{wrapLng:[-180,180],R:6371e3,distance:function(h,b){var A=Math.PI/180,F=h.lat*A,X=b.lat*A,de=Math.sin((b.lat-h.lat)*A/2),je=Math.sin((b.lng-h.lng)*A/2),ot=de*de+Math.cos(F)*Math.cos(X)*je*je,ht=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*ht}}),fn=6378137,wn={R:fn,MAX_LATITUDE:85.0511287798,project:function(h){var b=Math.PI/180,A=this.MAX_LATITUDE,F=Math.max(Math.min(A,h.lat),-A),X=Math.sin(F*b);return new qe(this.R*h.lng*b,this.R*Math.log((1+X)/(1-X))/2)},unproject:function(h){var b=180/Math.PI;return new xt((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*b,h.x*b/this.R)},bounds:function(){var h=fn*Math.PI;return new we([-h,-h],[h,h])}()};function an(h,b,A,F){if(q(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=b,this._c=A,this._d=F}an.prototype={transform:function(h,b){return this._transform(h.clone(),b)},_transform:function(h,b){return b=b||1,h.x=b*(this._a*h.x+this._b),h.y=b*(this._c*h.y+this._d),h},untransform:function(h,b){return b=b||1,new qe((h.x/b-this._b)/this._a,(h.y/b-this._d)/this._c)}};function Vt(h,b,A,F){return new an(h,b,A,F)}var Cn=i({},qt,{code:"EPSG:3857",projection:wn,transformation:function(){var h=.5/(Math.PI*wn.R);return Vt(h,.5,-h,.5)}()}),Tn=i({},Cn,{code:"EPSG:900913"});function Fn(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function Qe(h,b){var A="",F,X,de,je,ot,ht;for(F=0,de=h.length;F<de;F++){for(ot=h[F],X=0,je=ot.length;X<je;X++)ht=ot[X],A+=(X?"L":"M")+ht.x+" "+ht.y;A+=b?Ve.svg?"z":"x":""}return A||"M0 0"}var zn=document.documentElement.style,Le="ActiveXObject"in window,De=Le&&!document.addEventListener,Ye="msLaunchUri"in navigator&&!("documentMode"in document),mt=Ee("webkit"),ft=Ee("android"),wt=Ee("android 2")||Ee("android 3"),Bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pn=ft&&Ee("Google")&&Bt<537&&!("AudioNode"in window),nn=!!window.opera,ln=!Ye&&Ee("chrome"),it=Ee("gecko")&&!mt&&!nn&&!Le,Mn=!ln&&Ee("safari"),ar=Ee("phantom"),fr="OTransition"in zn,Xn=navigator.platform.indexOf("Win")===0,ut=Le&&"transition"in zn,vn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wt,Sn="MozPerspective"in zn,Gr=!window.L_DISABLE_3D&&(ut||vn||Sn)&&!fr&&!ar,gi=typeof orientation<"u"||Ee("mobile"),Wn=gi&&mt,Ei=gi&&vn,ls=!window.PointerEvent&&window.MSPointerEvent,es=!!(window.PointerEvent||ls),ts="ontouchstart"in window||!!window.TouchEvent,Ae=!window.L_NO_TOUCH&&(ts||es),se=gi&&nn,ie=gi&&it,pe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Se=function(){var h=!1;try{var b=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",C,b),window.removeEventListener("testPassiveEventSupport",C,b)}catch{}return h}(),Ue=function(){return!!document.createElement("canvas").getContext}(),Ge=!!(document.createElementNS&&Fn("svg").createSVGRect),nt=!!Ge&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ne=!Ge&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var b=h.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),ve=navigator.platform.indexOf("Mac")===0,Ie=navigator.platform.indexOf("Linux")===0;function Ee(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var Ve={ie:Le,ielt9:De,edge:Ye,webkit:mt,android:ft,android23:wt,androidStock:pn,opera:nn,chrome:ln,gecko:it,safari:Mn,phantom:ar,opera12:fr,win:Xn,ie3d:ut,webkit3d:vn,gecko3d:Sn,any3d:Gr,mobile:gi,mobileWebkit:Wn,mobileWebkit3d:Ei,msPointer:ls,pointer:es,touch:Ae,touchNative:ts,mobileOpera:se,mobileGecko:ie,retina:pe,passiveEvents:Se,canvas:Ue,svg:Ge,vml:ne,inlineSvg:nt,mac:ve,linux:Ie},Et=Ve.msPointer?"MSPointerDown":"pointerdown",At=Ve.msPointer?"MSPointerMove":"pointermove",jt=Ve.msPointer?"MSPointerUp":"pointerup",kt=Ve.msPointer?"MSPointerCancel":"pointercancel",Ot={touchstart:Et,touchmove:At,touchend:jt,touchcancel:kt},zt={touchstart:ur,touchmove:Ci,touchend:Ci,touchcancel:Ci},In={},Dn=!1;function Nn(h,b,A){return b==="touchstart"&&oi(),zt[b]?(A=zt[b].bind(this,A),h.addEventListener(Ot[b],A,!1),A):(console.warn("wrong event specified:",b),C)}function Un(h,b,A){if(!Ot[b]){console.warn("wrong event specified:",b);return}h.removeEventListener(Ot[b],A,!1)}function $n(h){In[h.pointerId]=h}function ir(h){In[h.pointerId]&&(In[h.pointerId]=h)}function Zr(h){delete In[h.pointerId]}function oi(){Dn||(document.addEventListener(Et,$n,!0),document.addEventListener(At,ir,!0),document.addEventListener(jt,Zr,!0),document.addEventListener(kt,Zr,!0),Dn=!0)}function Ci(h,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var A in In)b.touches.push(In[A]);b.changedTouches=[b],h(b)}}function ur(h,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&Di(b),Ci(h,b)}function Pa(h){var b={},A,F;for(F in h)A=h[F],b[F]=A&&A.bind?A.bind(h):A;return h=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var po=200;function Wr(h,b){h.addEventListener("dblclick",b);var A=0,F;function X(de){if(de.detail!==1){F=de.detail;return}if(!(de.pointerType==="mouse"||de.sourceCapabilities&&!de.sourceCapabilities.firesTouchEvents)){var je=Y(de);if(!(je.some(function(ht){return ht instanceof HTMLLabelElement&&ht.attributes.for})&&!je.some(function(ht){return ht instanceof HTMLInputElement||ht instanceof HTMLSelectElement}))){var ot=Date.now();ot-A<=po?(F++,F===2&&b(Pa(de))):F=1,A=ot}}}return h.addEventListener("click",X),{dblclick:b,simDblclick:X}}function yi(h,b){h.removeEventListener("dblclick",b.dblclick),h.removeEventListener("click",b.simDblclick)}var Js=vr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kn=vr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mr=Kn==="webkitTransition"||Kn==="OTransition"?Kn+"End":"transitionend";function gs(h){return typeof h=="string"?document.getElementById(h):h}function Mi(h,b){var A=h.style[b]||h.currentStyle&&h.currentStyle[b];if((!A||A==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(h,null);A=F?F[b]:null}return A==="auto"?null:A}function mn(h,b,A){var F=document.createElement(h);return F.className=b||"",A&&A.appendChild(F),F}function Sr(h){var b=h.parentNode;b&&b.removeChild(h)}function Hi(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function $r(h){var b=h.parentNode;b&&b.lastChild!==h&&b.appendChild(h)}function mo(h){var b=h.parentNode;b&&b.firstChild!==h&&b.insertBefore(h,b.firstChild)}function Ps(h,b){if(h.classList!==void 0)return h.classList.contains(b);var A=Yo(h);return A.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(A)}function lr(h,b){if(h.classList!==void 0)for(var A=N(b),F=0,X=A.length;F<X;F++)h.classList.add(A[F]);else if(!Ps(h,b)){var de=Yo(h);yu(h,(de?de+" ":"")+b)}}function Dr(h,b){h.classList!==void 0?h.classList.remove(b):yu(h,I((" "+Yo(h)+" ").replace(" "+b+" "," ")))}function yu(h,b){h.className.baseVal===void 0?h.className=b:h.className.baseVal=b}function Yo(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function Oi(h,b){"opacity"in h.style?h.style.opacity=b:"filter"in h.style&&Lo(h,b)}function Lo(h,b){var A=!1,F="DXImageTransform.Microsoft.Alpha";try{A=h.filters.item(F)}catch{if(b===1)return}b=Math.round(b*100),A?(A.Enabled=b!==100,A.Opacity=b):h.style.filter+=" progid:"+F+"(opacity="+b+")"}function vr(h){for(var b=document.documentElement.style,A=0;A<h.length;A++)if(h[A]in b)return h[A];return!1}function Mo(h,b,A){var F=b||new qe(0,0);h.style[Js]=(Ve.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(A?" scale("+A+")":"")}function Qr(h,b){h._leaflet_pos=b,Ve.any3d?Mo(h,b):(h.style.left=b.x+"px",h.style.top=b.y+"px")}function As(h){return h._leaflet_pos||new qe(0,0)}var Aa,Qo,Ia;if("onselectstart"in document)Aa=function(){nr(window,"selectstart",Di)},Qo=function(){jr(window,"selectstart",Di)};else{var Oo=vr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Aa=function(){if(Oo){var h=document.documentElement.style;Ia=h[Oo],h[Oo]="none"}},Qo=function(){Oo&&(document.documentElement.style[Oo]=Ia,Ia=void 0)}}function Do(){nr(window,"dragstart",Di)}function Ra(){jr(window,"dragstart",Di)}var Sc,Ll;function Ec(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(cs(),Sc=h,Ll=h.style.outlineStyle,h.style.outlineStyle="none",nr(window,"keydown",cs))}function cs(){Sc&&(Sc.style.outlineStyle=Ll,Sc=void 0,Ll=void 0,jr(window,"keydown",cs))}function sl(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function ns(h){var b=h.getBoundingClientRect();return{x:b.width/h.offsetWidth||1,y:b.height/h.offsetHeight||1,boundingClientRect:b}}var rs={__proto__:null,TRANSFORM:Js,TRANSITION:Kn,TRANSITION_END:mr,get:gs,getStyle:Mi,create:mn,remove:Sr,empty:Hi,toFront:$r,toBack:mo,hasClass:Ps,addClass:lr,removeClass:Dr,setClass:yu,getClass:Yo,setOpacity:Oi,testProp:vr,setTransform:Mo,setPosition:Qr,getPosition:As,get disableTextSelection(){return Aa},get enableTextSelection(){return Qo},disableImageDrag:Do,enableImageDrag:Ra,preventOutline:Ec,restoreOutline:cs,getSizedParentNode:sl,getScale:ns};function nr(h,b,A,F){if(b&&typeof b=="object")for(var X in b)vu(h,X,b[X],A);else{b=N(b);for(var de=0,je=b.length;de<je;de++)vu(h,b[de],A,F)}return this}var Is="_leaflet_events";function jr(h,b,A,F){if(arguments.length===1)Ml(h),delete h[Is];else if(b&&typeof b=="object")for(var X in b)go(h,X,b[X],A);else if(b=N(b),arguments.length===2)Ml(h,function(ot){return te(b,ot)!==-1});else for(var de=0,je=b.length;de<je;de++)go(h,b[de],A,F);return this}function Ml(h,b){for(var A in h[Is]){var F=A.split(/\d/)[0];(!b||b(F))&&go(h,F,null,null,A)}}var Jo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vu(h,b,A,F){var X=b+m(A)+(F?"_"+m(F):"");if(h[Is]&&h[Is][X])return this;var de=function(ot){return A.call(F||h,ot||window.event)},je=de;!Ve.touchNative&&Ve.pointer&&b.indexOf("touch")===0?de=Nn(h,b,de):Ve.touch&&b==="dblclick"?de=Wr(h,de):"addEventListener"in h?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?h.addEventListener(Jo[b]||b,de,Ve.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(de=function(ot){ot=ot||window.event,ze(h,ot)&&je(ot)},h.addEventListener(Jo[b],de,!1)):h.addEventListener(b,je,!1):h.attachEvent("on"+b,de),h[Is]=h[Is]||{},h[Is][X]=de}function go(h,b,A,F,X){X=X||b+m(A)+(F?"_"+m(F):"");var de=h[Is]&&h[Is][X];if(!de)return this;!Ve.touchNative&&Ve.pointer&&b.indexOf("touch")===0?Un(h,b,de):Ve.touch&&b==="dblclick"?yi(h,de):"removeEventListener"in h?h.removeEventListener(Jo[b]||b,de,!1):h.detachEvent("on"+b,de),h[Is][X]=null}function ea(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function _u(h){return vu(h,"wheel",ea),this}function Ol(h){return nr(h,"mousedown touchstart dblclick contextmenu",ea),h._leaflet_disable_click=!0,this}function Di(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function Xr(h){return Di(h),ea(h),this}function Y(h){if(h.composedPath)return h.composedPath();for(var b=[],A=h.target;A;)b.push(A),A=A.parentNode;return b}function he(h,b){if(!b)return new qe(h.clientX,h.clientY);var A=ns(b),F=A.boundingClientRect;return new qe((h.clientX-F.left)/A.x-b.clientLeft,(h.clientY-F.top)/A.y-b.clientTop)}var _e=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ge(h){return Ve.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/_e:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function ze(h,b){var A=b.relatedTarget;if(!A)return!0;try{for(;A&&A!==h;)A=A.parentNode}catch{return!1}return A!==h}var st={__proto__:null,on:nr,off:jr,stopPropagation:ea,disableScrollPropagation:_u,disableClickPropagation:Ol,preventDefault:Di,stop:Xr,getPropagationPath:Y,getMousePosition:he,getWheelDelta:ge,isExternalTarget:ze,addListener:nr,removeListener:jr},dt=Nt.extend({run:function(h,b,A,F){this.stop(),this._el=h,this._inProgress=!0,this._duration=A||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=As(h),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Je(this._animate,this),this._step()},_step:function(h){var b=+new Date-this._startTime,A=this._duration*1e3;b<A?this._runFrame(this._easeOut(b/A),h):(this._runFrame(1),this._complete())},_runFrame:function(h,b){var A=this._startPos.add(this._offset.multiplyBy(h));b&&A._round(),Qr(this._el,A),this.fire("step")},_complete:function(){Fe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),vt=Nt.extend({options:{crs:Cn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,b){b=z(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(bt(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kn&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nr(this._proxy,mr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,b,A){if(b=b===void 0?this._zoom:this._limitZoom(b),h=this._limitCenter(bt(h),b,this.options.maxBounds),A=A||{},this._stop(),this._loaded&&!A.reset&&A!==!0){A.animate!==void 0&&(A.zoom=i({animate:A.animate},A.zoom),A.pan=i({animate:A.animate,duration:A.duration},A.pan));var F=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,b,A.zoom):this._tryAnimatedPan(h,A.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(h,b,A.pan&&A.pan.noMoveStart),this},setZoom:function(h,b){return this._loaded?this.setView(this.getCenter(),h,{zoom:b}):(this._zoom=h,this)},zoomIn:function(h,b){return h=h||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,b)},zoomOut:function(h,b){return h=h||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,b)},setZoomAround:function(h,b,A){var F=this.getZoomScale(b),X=this.getSize().divideBy(2),de=h instanceof qe?h:this.latLngToContainerPoint(h),je=de.subtract(X).multiplyBy(1-1/F),ot=this.containerPointToLatLng(X.add(je));return this.setView(ot,b,{zoom:A})},_getBoundsCenterZoom:function(h,b){b=b||{},h=h.getBounds?h.getBounds():ct(h);var A=Ke(b.paddingTopLeft||b.padding||[0,0]),F=Ke(b.paddingBottomRight||b.padding||[0,0]),X=this.getBoundsZoom(h,!1,A.add(F));if(X=typeof b.maxZoom=="number"?Math.min(b.maxZoom,X):X,X===1/0)return{center:h.getCenter(),zoom:X};var de=F.subtract(A).divideBy(2),je=this.project(h.getSouthWest(),X),ot=this.project(h.getNorthEast(),X),ht=this.unproject(je.add(ot).divideBy(2).add(de),X);return{center:ht,zoom:X}},fitBounds:function(h,b){if(h=ct(h),!h.isValid())throw new Error("Bounds are not valid.");var A=this._getBoundsCenterZoom(h,b);return this.setView(A.center,A.zoom,b)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,b){return this.setView(h,this._zoom,{pan:b})},panBy:function(h,b){if(h=Ke(h).round(),b=b||{},!h.x&&!h.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){lr(this._mapPane,"leaflet-pan-anim");var A=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,A,b.duration||.25,b.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,b,A){if(A=A||{},A.animate===!1||!Ve.any3d)return this.setView(h,b,A);this._stop();var F=this.project(this.getCenter()),X=this.project(h),de=this.getSize(),je=this._zoom;h=bt(h),b=b===void 0?je:b;var ot=Math.max(de.x,de.y),ht=ot*this.getZoomScale(je,b),Pt=X.distanceTo(F)||1,cn=1.42,er=cn*cn;function br(xi){var pr=xi?-1:1,gf=xi?ht:ot,zg=ht*ht-ot*ot+pr*er*er*Pt*Pt,yf=2*gf*er*Pt,vf=zg/yf,Yl=Math.sqrt(vf*vf+1)-vf,zp=Yl<1e-9?-18:Math.log(Yl);return zp}function ys(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function Zi(xi){return(Math.exp(xi)+Math.exp(-xi))/2}function Us(xi){return ys(xi)/Zi(xi)}var qi=br(0);function hs(xi){return ot*(Zi(qi)/Zi(qi+cn*xi))}function hn(xi){return ot*(Zi(qi)*Us(qi+cn*xi)-ys(qi))/er}function jd(xi){return 1-Math.pow(1-xi,1.5)}var pf=Date.now(),mf=(br(1)-qi)/cn,Nc=A.duration?1e3*A.duration:1e3*mf*.8;function Kl(){var xi=(Date.now()-pf)/Nc,pr=jd(xi)*mf;xi<=1?(this._flyToFrame=Je(Kl,this),this._move(this.unproject(F.add(X.subtract(F).multiplyBy(hn(pr)/Pt)),je),this.getScaleZoom(ot/hs(pr),je),{flyTo:!0})):this._move(h,b)._moveEnd(!0)}return this._moveStart(!0,A.noMoveStart),Kl.call(this),this},flyToBounds:function(h,b){var A=this._getBoundsCenterZoom(h,b);return this.flyTo(A.center,A.zoom,b)},setMaxBounds:function(h){return h=ct(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var b=this.options.minZoom;return this.options.minZoom=h,this._loaded&&b!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var b=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&b!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,b){this._enforcingBounds=!0;var A=this.getCenter(),F=this._limitCenter(A,this._zoom,ct(h));return A.equals(F)||this.panTo(F,b),this._enforcingBounds=!1,this},panInside:function(h,b){b=b||{};var A=Ke(b.paddingTopLeft||b.padding||[0,0]),F=Ke(b.paddingBottomRight||b.padding||[0,0]),X=this.project(this.getCenter()),de=this.project(h),je=this.getPixelBounds(),ot=He([je.min.add(A),je.max.subtract(F)]),ht=ot.getSize();if(!ot.contains(de)){this._enforcingBounds=!0;var Pt=de.subtract(ot.getCenter()),cn=ot.extend(de).getSize().subtract(ht);X.x+=Pt.x<0?-cn.x:cn.x,X.y+=Pt.y<0?-cn.y:cn.y,this.panTo(this.unproject(X),b),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=i({animate:!1,pan:!0},h===!0?{animate:!0}:h);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var A=this.getSize(),F=b.divideBy(2).round(),X=A.divideBy(2).round(),de=F.subtract(X);return!de.x&&!de.y?this:(h.animate&&h.pan?this.panBy(de):(h.pan&&this._rawPanBy(de),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:A}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=i({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=u(this._handleGeolocationResponse,this),A=u(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,A,h):navigator.geolocation.getCurrentPosition(b,A,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var b=h.code,A=h.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+A+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var b=h.coords.latitude,A=h.coords.longitude,F=new xt(b,A),X=F.toBounds(h.coords.accuracy*2),de=this._locateOptions;if(de.setView){var je=this.getBoundsZoom(X);this.setView(F,de.maxZoom?Math.min(je,de.maxZoom):je)}var ot={latlng:F,bounds:X,timestamp:h.timestamp};for(var ht in h.coords)typeof h.coords[ht]=="number"&&(ot[ht]=h.coords[ht]);this.fire("locationfound",ot)}},addHandler:function(h,b){if(!b)return this;var A=this[h]=new b(this);return this._handlers.push(A),this.options[h]&&A.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Sr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Fe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)Sr(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,b){var A="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),F=mn("div",A,b||this._mapPane);return h&&(this._panes[h]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),b=this.unproject(h.getBottomLeft()),A=this.unproject(h.getTopRight());return new Be(b,A)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,b,A){h=ct(h),A=Ke(A||[0,0]);var F=this.getZoom()||0,X=this.getMinZoom(),de=this.getMaxZoom(),je=h.getNorthWest(),ot=h.getSouthEast(),ht=this.getSize().subtract(A),Pt=He(this.project(ot,F),this.project(je,F)).getSize(),cn=Ve.any3d?this.options.zoomSnap:1,er=ht.x/Pt.x,br=ht.y/Pt.y,ys=b?Math.max(er,br):Math.min(er,br);return F=this.getScaleZoom(ys,F),cn&&(F=Math.round(F/(cn/100))*(cn/100),F=b?Math.ceil(F/cn)*cn:Math.floor(F/cn)*cn),Math.max(X,Math.min(de,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new qe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,b){var A=this._getTopLeftPoint(h,b);return new we(A,A.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,b){var A=this.options.crs;return b=b===void 0?this._zoom:b,A.scale(h)/A.scale(b)},getScaleZoom:function(h,b){var A=this.options.crs;b=b===void 0?this._zoom:b;var F=A.zoom(h*A.scale(b));return isNaN(F)?1/0:F},project:function(h,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(bt(h),b)},unproject:function(h,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(Ke(h),b)},layerPointToLatLng:function(h){var b=Ke(h).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(h){var b=this.project(bt(h))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(bt(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(ct(h))},distance:function(h,b){return this.options.crs.distance(bt(h),bt(b))},containerPointToLayerPoint:function(h){return Ke(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return Ke(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var b=this.containerPointToLayerPoint(Ke(h));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(bt(h)))},mouseEventToContainerPoint:function(h){return he(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var b=this._container=gs(h);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nr(b,"scroll",this._onScroll,this),this._containerId=m(b)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,lr(h,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=Mi(h,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Qr(this._mapPane,new qe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lr(h.markerPane,"leaflet-zoom-hide"),lr(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,b,A){Qr(this._mapPane,new qe(0,0));var F=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var X=this._zoom!==b;this._moveStart(X,A)._move(h,b)._moveEnd(X),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(h,b){return h&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(h,b,A,F){b===void 0&&(b=this._zoom);var X=this._zoom!==b;return this._zoom=b,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),F?A&&A.pinch&&this.fire("zoom",A):((X||A&&A.pinch)&&this.fire("zoom",A),this.fire("move",A)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Fe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){Qr(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[m(this._container)]=this;var b=h?jr:nr;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Fe(this._resizeRequest),this._resizeRequest=Je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,b){for(var A=[],F,X=b==="mouseout"||b==="mouseover",de=h.target||h.srcElement,je=!1;de;){if(F=this._targets[m(de)],F&&(b==="click"||b==="preclick")&&this._draggableMoved(F)){je=!0;break}if(F&&F.listens(b,!0)&&(X&&!ze(de,h)||(A.push(F),X))||de===this._container)break;de=de.parentNode}return!A.length&&!je&&!X&&this.listens(b,!0)&&(A=[this]),A},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var b=h.target||h.srcElement;if(!(!this._loaded||b._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(b))){var A=h.type;A==="mousedown"&&Ec(b),this._fireDOMEvent(h,A)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,b,A){if(h.type==="click"){var F=i({},h);F.type="preclick",this._fireDOMEvent(F,F.type,A)}var X=this._findEventTargets(h,b);if(A){for(var de=[],je=0;je<A.length;je++)A[je].listens(b,!0)&&de.push(A[je]);X=de.concat(X)}if(X.length){b==="contextmenu"&&Di(h);var ot=X[0],ht={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var Pt=ot.getLatLng&&(!ot._radius||ot._radius<=10);ht.containerPoint=Pt?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(h),ht.layerPoint=this.containerPointToLayerPoint(ht.containerPoint),ht.latlng=Pt?ot.getLatLng():this.layerPointToLatLng(ht.layerPoint)}for(je=0;je<X.length;je++)if(X[je].fire(b,ht,!0),ht.originalEvent._stopped||X[je].options.bubblingMouseEvents===!1&&te(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,b=this._handlers.length;h<b;h++)this._handlers[h].disable()},whenReady:function(h,b){return this._loaded?h.call(b||this,{target:this}):this.on("load",h,b),this},_getMapPanePos:function(){return As(this._mapPane)||new qe(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,b){var A=h&&b!==void 0?this._getNewPixelOrigin(h,b):this.getPixelOrigin();return A.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,b){var A=this.getSize()._divideBy(2);return this.project(h,b)._subtract(A)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,b,A){var F=this._getNewPixelOrigin(A,b);return this.project(h,b)._subtract(F)},_latLngBoundsToNewLayerBounds:function(h,b,A){var F=this._getNewPixelOrigin(A,b);return He([this.project(h.getSouthWest(),b)._subtract(F),this.project(h.getNorthWest(),b)._subtract(F),this.project(h.getSouthEast(),b)._subtract(F),this.project(h.getNorthEast(),b)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,b,A){if(!A)return h;var F=this.project(h,b),X=this.getSize().divideBy(2),de=new we(F.subtract(X),F.add(X)),je=this._getBoundsOffset(de,A,b);return Math.abs(je.x)<=1&&Math.abs(je.y)<=1?h:this.unproject(F.add(je),b)},_limitOffset:function(h,b){if(!b)return h;var A=this.getPixelBounds(),F=new we(A.min.add(h),A.max.add(h));return h.add(this._getBoundsOffset(F,b))},_getBoundsOffset:function(h,b,A){var F=He(this.project(b.getNorthEast(),A),this.project(b.getSouthWest(),A)),X=F.min.subtract(h.min),de=F.max.subtract(h.max),je=this._rebound(X.x,-de.x),ot=this._rebound(X.y,-de.y);return new qe(je,ot)},_rebound:function(h,b){return h+b>0?Math.round(h-b)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(b))},_limitZoom:function(h){var b=this.getMinZoom(),A=this.getMaxZoom(),F=Ve.any3d?this.options.zoomSnap:1;return F&&(h=Math.round(h/F)*F),Math.max(b,Math.min(A,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,b){var A=this._getCenterOffset(h)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(A)?!1:(this.panBy(A,b),!0)},_createAnimProxy:function(){var h=this._proxy=mn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(b){var A=Js,F=this._proxy.style[A];Mo(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),F===this._proxy.style[A]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Sr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),b=this.getZoom();Mo(this._proxy,this.project(h,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,b,A){if(this._animatingZoom)return!0;if(A=A||{},!this._zoomAnimated||A.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(b),X=this._getCenterOffset(h)._divideBy(1-1/F);return A.animate!==!0&&!this.getSize().contains(X)?!1:(Je(function(){this._moveStart(!0,A.noMoveStart||!1)._animateZoom(h,b,!0)},this),!0)},_animateZoom:function(h,b,A,F){this._mapPane&&(A&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=b,lr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:b,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Dr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ct(h,b){return new vt(h,b)}var Rt=gt.extend({options:{position:"topright"},initialize:function(h){z(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var b=this._map;return b&&b.removeControl(this),this.options.position=h,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var b=this._container=this.onAdd(h),A=this.getPosition(),F=h._controlCorners[A];return lr(b,"leaflet-control"),A.indexOf("bottom")!==-1?F.insertBefore(b,F.firstChild):F.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Sr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Jt=function(h){return new Rt(h)};vt.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},b="leaflet-",A=this._controlContainer=mn("div",b+"control-container",this._container);function F(X,de){var je=b+X+" "+b+de;h[X+de]=mn("div",je,A)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)Sr(this._controlCorners[h]);Sr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bn=Rt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,b,A,F){return A<F?-1:F<A?1:0}},initialize:function(h,b,A){z(this,A),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in h)this._addLayer(h[F],F);for(F in b)this._addLayer(b[F],F,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return Rt.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,b){return this._addLayer(h,b),this._map?this._update():this},addOverlay:function(h,b){return this._addLayer(h,b,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var b=this._getLayer(m(h));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){lr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(lr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):Dr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",b=this._container=mn("div",h),A=this.options.collapsed;b.setAttribute("aria-haspopup",!0),Ol(b),_u(b);var F=this._section=mn("section",h+"-list");A&&(this._map.on("click",this.collapse,this),nr(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var X=this._layersLink=mn("a",h+"-toggle",b);X.href="#",X.title="Layers",X.setAttribute("role","button"),nr(X,{keydown:function(de){de.keyCode===13&&this._expandSafely()},click:function(de){Di(de),this._expandSafely()}},this),A||this.expand(),this._baseLayersList=mn("div",h+"-base",F),this._separator=mn("div",h+"-separator",F),this._overlaysList=mn("div",h+"-overlays",F),b.appendChild(F)},_getLayer:function(h){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&m(this._layers[b].layer)===h)return this._layers[b]},_addLayer:function(h,b,A){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:b,overlay:A}),this.options.sortLayers&&this._layers.sort(u(function(F,X){return this.options.sortFunction(F.layer,X.layer,F.name,X.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hi(this._baseLayersList),Hi(this._overlaysList),this._layerControlInputs=[];var h,b,A,F,X=0;for(A=0;A<this._layers.length;A++)F=this._layers[A],this._addItem(F),b=b||F.overlay,h=h||!F.overlay,X+=F.overlay?0:1;return this.options.hideSingleBase&&(h=h&&X>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=b&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var b=this._getLayer(m(h.target)),A=b.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;A&&this._map.fire(A,b)},_createRadioElement:function(h,b){var A='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(b?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=A,F.firstChild},_addItem:function(h){var b=document.createElement("label"),A=this._map.hasLayer(h.layer),F;h.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=A):F=this._createRadioElement("leaflet-base-layers_"+m(this),A),this._layerControlInputs.push(F),F.layerId=m(h.layer),nr(F,"click",this._onInputClick,this);var X=document.createElement("span");X.innerHTML=" "+h.name;var de=document.createElement("span");b.appendChild(de),de.appendChild(F),de.appendChild(X);var je=h.overlay?this._overlaysList:this._baseLayersList;return je.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,b,A,F=[],X=[];this._handlingClick=!0;for(var de=h.length-1;de>=0;de--)b=h[de],A=this._getLayer(b.layerId).layer,b.checked?F.push(A):b.checked||X.push(A);for(de=0;de<X.length;de++)this._map.hasLayer(X[de])&&this._map.removeLayer(X[de]);for(de=0;de<F.length;de++)this._map.hasLayer(F[de])||this._map.addLayer(F[de]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,b,A,F=this._map.getZoom(),X=h.length-1;X>=0;X--)b=h[X],A=this._getLayer(b.layerId).layer,b.disabled=A.options.minZoom!==void 0&&F<A.options.minZoom||A.options.maxZoom!==void 0&&F>A.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,nr(h,"click",Di),this.expand();var b=this;setTimeout(function(){jr(h,"click",Di),b._preventClick=!1})}}),Wt=function(h,b,A){return new Bn(h,b,A)},rr=Rt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var b="leaflet-control-zoom",A=mn("div",b+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,b+"-in",A,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,b+"-out",A,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),A},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,b,A,F,X){var de=mn("a",A,F);return de.innerHTML=h,de.href="#",de.title=b,de.setAttribute("role","button"),de.setAttribute("aria-label",b),Ol(de),nr(de,"click",Xr),nr(de,"click",X,this),nr(de,"click",this._refocusOnMap,this),de},_updateDisabled:function(){var h=this._map,b="leaflet-disabled";Dr(this._zoomInButton,b),Dr(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(lr(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(lr(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new rr,this.addControl(this.zoomControl))});var Tr=function(h){return new rr(h)},ai=Rt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var b="leaflet-control-scale",A=mn("div",b),F=this.options;return this._addScales(F,b+"-line",A),h.on(F.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),A},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,b,A){h.metric&&(this._mScale=mn("div",b,A)),h.imperial&&(this._iScale=mn("div",b,A))},_update:function(){var h=this._map,b=h.getSize().y/2,A=h.distance(h.containerPointToLatLng([0,b]),h.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(A)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var b=this._getRoundNum(h),A=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,A,b/h)},_updateImperial:function(h){var b=h*3.2808399,A,F,X;b>5280?(A=b/5280,F=this._getRoundNum(A),this._updateScale(this._iScale,F+" mi",F/A)):(X=this._getRoundNum(b),this._updateScale(this._iScale,X+" ft",X/b))},_updateScale:function(h,b,A){h.style.width=Math.round(this.options.maxWidth*A)+"px",h.innerHTML=b},_getRoundNum:function(h){var b=Math.pow(10,(Math.floor(h)+"").length-1),A=h/b;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:1,b*A}}),Zn=function(h){return new ai(h)},gr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vi=Rt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?gr+" ":"")+"Leaflet</a>"},initialize:function(h){z(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=mn("div","leaflet-control-attribution"),Ol(this._container);for(var b in h._layers)h._layers[b].getAttribution&&this.addAttribution(h._layers[b].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var b in this._attributions)this._attributions[b]&&h.push(b);var A=[];this.options.prefix&&A.push(this.options.prefix),h.length&&A.push(h.join(", ")),this._container.innerHTML=A.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new vi().addTo(this)});var Ti=function(h){return new vi(h)};Rt.Layers=Bn,Rt.Zoom=rr,Rt.Scale=ai,Rt.Attribution=vi,Jt.layers=Wt,Jt.zoom=Tr,Jt.scale=Zn,Jt.attribution=Ti;var Jr=gt.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jr.addTo=function(h,b){return h.addHandler(b,this),this};var is={Events:lt},zs=Ve.touch?"touchstart mousedown":"mousedown",eo=Nt.extend({options:{clickTolerance:3},initialize:function(h,b,A,F){z(this,F),this._element=h,this._dragStartTarget=b||h,this._preventOutline=A},enable:function(){this._enabled||(nr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(eo._dragging===this&&this.finishDrag(!0),jr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!Ps(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){eo._dragging===this&&this.finishDrag();return}if(!(eo._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(eo._dragging=this,this._preventOutline&&Ec(this._element),Do(),Aa(),!this._moving)){this.fire("down");var b=h.touches?h.touches[0]:h,A=sl(this._element);this._startPoint=new qe(b.clientX,b.clientY),this._startPos=As(this._element),this._parentScale=ns(A);var F=h.type==="mousedown";nr(document,F?"mousemove":"touchmove",this._onMove,this),nr(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var b=h.touches&&h.touches.length===1?h.touches[0]:h,A=new qe(b.clientX,b.clientY)._subtract(this._startPoint);!A.x&&!A.y||Math.abs(A.x)+Math.abs(A.y)<this.options.clickTolerance||(A.x/=this._parentScale.x,A.y/=this._parentScale.y,Di(h),this._moved||(this.fire("dragstart"),this._moved=!0,lr(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(A),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),Qr(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){Dr(document.body,"leaflet-dragging"),this._lastTarget&&(Dr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),jr(document,"mousemove touchmove",this._onMove,this),jr(document,"mouseup touchend touchcancel",this._onUp,this),Ra(),Qo();var b=this._moved&&this._moving;this._moving=!1,eo._dragging=!1,b&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function bd(h,b,A){var F,X=[1,4,2,8],de,je,ot,ht,Pt,cn,er,br;for(de=0,cn=h.length;de<cn;de++)h[de]._code=Rs(h[de],b);for(ot=0;ot<4;ot++){for(er=X[ot],F=[],de=0,cn=h.length,je=cn-1;de<cn;je=de++)ht=h[de],Pt=h[je],ht._code&er?Pt._code&er||(br=Nl(Pt,ht,er,b,A),br._code=Rs(br,b),F.push(br)):(Pt._code&er&&(br=Nl(Pt,ht,er,b,A),br._code=Rs(br,b),F.push(br)),F.push(ht));h=F}return h}function sf(h,b){var A,F,X,de,je,ot,ht,Pt,cn;if(!h||h.length===0)throw new Error("latlngs not passed");Fs(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var er=bt([0,0]),br=ct(h),ys=br.getNorthWest().distanceTo(br.getSouthWest())*br.getNorthEast().distanceTo(br.getNorthWest());ys<1700&&(er=Dl(h));var Zi=h.length,Us=[];for(A=0;A<Zi;A++){var qi=bt(h[A]);Us.push(b.project(bt([qi.lat-er.lat,qi.lng-er.lng])))}for(ot=ht=Pt=0,A=0,F=Zi-1;A<Zi;F=A++)X=Us[A],de=Us[F],je=X.y*de.x-de.y*X.x,ht+=(X.x+de.x)*je,Pt+=(X.y+de.y)*je,ot+=je*3;ot===0?cn=Us[0]:cn=[ht/ot,Pt/ot];var hs=b.unproject(Ke(cn));return bt([hs.lat+er.lat,hs.lng+er.lng])}function Dl(h){for(var b=0,A=0,F=0,X=0;X<h.length;X++){var de=bt(h[X]);b+=de.lat,A+=de.lng,F++}return bt([b/F,A/F])}var Og={__proto__:null,clipPolygon:bd,polygonCenter:sf,centroid:Dl};function xu(h,b){if(!b||!h.length)return h.slice();var A=b*b;return h=Np(h,A),h=Dp(h,A),h}function Op(h,b,A){return Math.sqrt(jl(h,b,A,!0))}function Dg(h,b,A){return jl(h,b,A)}function Dp(h,b){var A=h.length,F=typeof Uint8Array<"u"?Uint8Array:Array,X=new F(A);X[0]=X[A-1]=1,wd(h,X,b,0,A-1);var de,je=[];for(de=0;de<A;de++)X[de]&&je.push(h[de]);return je}function wd(h,b,A,F,X){var de=0,je,ot,ht;for(ot=F+1;ot<=X-1;ot++)ht=jl(h[ot],h[F],h[X],!0),ht>de&&(je=ot,de=ht);de>A&&(b[je]=1,wd(h,b,A,F,je),wd(h,b,A,je,X))}function Np(h,b){for(var A=[h[0]],F=1,X=0,de=h.length;F<de;F++)af(h[F],h[X])>b&&(A.push(h[F]),X=F);return X<de-1&&A.push(h[de-1]),A}var Sd;function of(h,b,A,F,X){var de=F?Sd:Rs(h,A),je=Rs(b,A),ot,ht,Pt;for(Sd=je;;){if(!(de|je))return[h,b];if(de&je)return!1;ot=de||je,ht=Nl(h,b,ot,A,X),Pt=Rs(ht,A),ot===de?(h=ht,de=Pt):(b=ht,je=Pt)}}function Nl(h,b,A,F,X){var de=b.x-h.x,je=b.y-h.y,ot=F.min,ht=F.max,Pt,cn;return A&8?(Pt=h.x+de*(ht.y-h.y)/je,cn=ht.y):A&4?(Pt=h.x+de*(ot.y-h.y)/je,cn=ot.y):A&2?(Pt=ht.x,cn=h.y+je*(ht.x-h.x)/de):A&1&&(Pt=ot.x,cn=h.y+je*(ot.x-h.x)/de),new qe(Pt,cn,X)}function Rs(h,b){var A=0;return h.x<b.min.x?A|=1:h.x>b.max.x&&(A|=2),h.y<b.min.y?A|=4:h.y>b.max.y&&(A|=8),A}function af(h,b){var A=b.x-h.x,F=b.y-h.y;return A*A+F*F}function jl(h,b,A,F){var X=b.x,de=b.y,je=A.x-X,ot=A.y-de,ht=je*je+ot*ot,Pt;return ht>0&&(Pt=((h.x-X)*je+(h.y-de)*ot)/ht,Pt>1?(X=A.x,de=A.y):Pt>0&&(X+=je*Pt,de+=ot*Pt)),je=h.x-X,ot=h.y-de,F?je*je+ot*ot:new qe(X,de)}function Fs(h){return!q(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"}function bu(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fs(h)}function Ed(h,b){var A,F,X,de,je,ot,ht,Pt;if(!h||h.length===0)throw new Error("latlngs not passed");Fs(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var cn=bt([0,0]),er=ct(h),br=er.getNorthWest().distanceTo(er.getSouthWest())*er.getNorthEast().distanceTo(er.getNorthWest());br<1700&&(cn=Dl(h));var ys=h.length,Zi=[];for(A=0;A<ys;A++){var Us=bt(h[A]);Zi.push(b.project(bt([Us.lat-cn.lat,Us.lng-cn.lng])))}for(A=0,F=0;A<ys-1;A++)F+=Zi[A].distanceTo(Zi[A+1])/2;if(F===0)Pt=Zi[0];else for(A=0,de=0;A<ys-1;A++)if(je=Zi[A],ot=Zi[A+1],X=je.distanceTo(ot),de+=X,de>F){ht=(de-F)/X,Pt=[ot.x-ht*(ot.x-je.x),ot.y-ht*(ot.y-je.y)];break}var qi=b.unproject(Ke(Pt));return bt([qi.lat+cn.lat,qi.lng+cn.lng])}var zl={__proto__:null,simplify:xu,pointToSegmentDistance:Op,closestPointOnSegment:Dg,clipSegment:of,_getEdgeIntersection:Nl,_getBitCode:Rs,_sqClosestPointOnSegment:jl,isFlat:Fs,_flat:bu,polylineCenter:Ed},wu={project:function(h){return new qe(h.lng,h.lat)},unproject:function(h){return new xt(h.y,h.x)},bounds:new we([-180,-90],[180,90])},lf={R:6378137,R_MINOR:6356752314245179e-9,bounds:new we([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var b=Math.PI/180,A=this.R,F=h.lat*b,X=this.R_MINOR/A,de=Math.sqrt(1-X*X),je=de*Math.sin(F),ot=Math.tan(Math.PI/4-F/2)/Math.pow((1-je)/(1+je),de/2);return F=-A*Math.log(Math.max(ot,1e-10)),new qe(h.lng*b*A,F)},unproject:function(h){for(var b=180/Math.PI,A=this.R,F=this.R_MINOR/A,X=Math.sqrt(1-F*F),de=Math.exp(-h.y/A),je=Math.PI/2-2*Math.atan(de),ot=0,ht=.1,Pt;ot<15&&Math.abs(ht)>1e-7;ot++)Pt=X*Math.sin(je),Pt=Math.pow((1-Pt)/(1+Pt),X/2),ht=Math.PI/2-2*Math.atan(de*Pt)-je,je+=ht;return new xt(je*b,h.x*b/A)}},_i={__proto__:null,LonLat:wu,Mercator:lf,SphericalMercator:wn},Ng=i({},qt,{code:"EPSG:3395",projection:lf,transformation:function(){var h=.5/(Math.PI*lf.R);return Vt(h,.5,-h,.5)}()}),dr=i({},qt,{code:"EPSG:4326",projection:wu,transformation:Vt(1/180,1,-1/180,.5)}),Cd=i({},It,{projection:wu,transformation:Vt(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,b){var A=b.lng-h.lng,F=b.lat-h.lat;return Math.sqrt(A*A+F*F)},infinite:!0});It.Earth=qt,It.EPSG3395=Ng,It.EPSG3857=Cn,It.EPSG900913=Tn,It.EPSG4326=dr,It.Simple=Cd;var Er=Nt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[m(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[m(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var b=h.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var A=this.getEvents();b.on(A,this),this.once("remove",function(){b.off(A,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var b=m(h);return this._layers[b]?this:(this._layers[b]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var b=m(h);return this._layers[b]?(this._loaded&&h.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return m(h)in this._layers},eachLayer:function(h,b){for(var A in this._layers)h.call(b,this._layers[A]);return this},_addLayers:function(h){h=h?q(h)?h:[h]:[];for(var b=0,A=h.length;b<A;b++)this.addLayer(h[b])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[m(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var b=m(h);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,b=-1/0,A=this._getZoomSpan();for(var F in this._zoomBoundLayers){var X=this._zoomBoundLayers[F].options;h=X.minZoom===void 0?h:Math.min(h,X.minZoom),b=X.maxZoom===void 0?b:Math.max(b,X.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=h===1/0?void 0:h,A!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Lr=Er.extend({initialize:function(h,b){z(this,b),this._layers={};var A,F;if(h)for(A=0,F=h.length;A<F;A++)this.addLayer(h[A])},addLayer:function(h){var b=this.getLayerId(h);return this._layers[b]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var b=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(h){var b=typeof h=="number"?h:this.getLayerId(h);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var b=Array.prototype.slice.call(arguments,1),A,F;for(A in this._layers)F=this._layers[A],F[h]&&F[h].apply(F,b);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,b){for(var A in this._layers)h.call(b,this._layers[A]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return m(h)}}),Fl=function(h,b){return new Lr(h,b)},to=Lr.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),Lr.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),Lr.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new Be;for(var b in this._layers){var A=this._layers[b];h.extend(A.getBounds?A.getBounds():A.getLatLng())}return h}}),Su=function(h,b){return new to(h,b)},ol=gt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){z(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,b){var A=this._getIconUrl(h);if(!A){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(A,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(F,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(h,b){var A=this.options,F=A[b+"Size"];typeof F=="number"&&(F=[F,F]);var X=Ke(F),de=Ke(b==="shadow"&&A.shadowAnchor||A.iconAnchor||X&&X.divideBy(2,!0));h.className="leaflet-marker-"+b+" "+(A.className||""),de&&(h.style.marginLeft=-de.x+"px",h.style.marginTop=-de.y+"px"),X&&(h.style.width=X.x+"px",h.style.height=X.y+"px")},_createImg:function(h,b){return b=b||document.createElement("img"),b.src=h,b},_getIconUrl:function(h){return Ve.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function Bl(h){return new ol(h)}var ta=ol.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof ta.imagePath!="string"&&(ta.imagePath=this._detectIconPath()),(this.options.imagePath||ta.imagePath)+ol.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var b=function(A,F,X){var de=F.exec(A);return de&&de[X]};return h=b(h,/^url\((['"])?(.+)\1\)$/,2),h&&b(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=mn("div","leaflet-default-icon-path",document.body),b=Mi(h,"background-image")||Mi(h,"backgroundImage");if(document.body.removeChild(h),b=this._stripUrl(b),b)return b;var A=document.querySelector('link[href$="leaflet.css"]');return A?A.href.substring(0,A.href.length-11-1):""}}),no=Jr.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new eo(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lr(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var b=this._marker,A=b._map,F=this._marker.options.autoPanSpeed,X=this._marker.options.autoPanPadding,de=As(b._icon),je=A.getPixelBounds(),ot=A.getPixelOrigin(),ht=He(je.min._subtract(ot).add(X),je.max._subtract(ot).subtract(X));if(!ht.contains(de)){var Pt=Ke((Math.max(ht.max.x,de.x)-ht.max.x)/(je.max.x-ht.max.x)-(Math.min(ht.min.x,de.x)-ht.min.x)/(je.min.x-ht.min.x),(Math.max(ht.max.y,de.y)-ht.max.y)/(je.max.y-ht.max.y)-(Math.min(ht.min.y,de.y)-ht.min.y)/(je.min.y-ht.min.y)).multiplyBy(F);A.panBy(Pt,{animate:!1}),this._draggable._newPos._add(Pt),this._draggable._startPos._add(Pt),Qr(b._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=Je(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(Fe(this._panRequest),this._panRequest=Je(this._adjustPan.bind(this,h)))},_onDrag:function(h){var b=this._marker,A=b._shadow,F=As(b._icon),X=b._map.layerPointToLatLng(F);A&&Qr(A,F),b._latlng=X,h.latlng=X,h.oldLatLng=this._oldLatLng,b.fire("move",h).fire("drag",h)},_onDragEnd:function(h){Fe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),Cc=Er.extend({options:{icon:new ta,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,b){z(this,b),this._latlng=bt(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var b=this._latlng;return this._latlng=bt(h),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),A=h.icon.createIcon(this._icon),F=!1;A!==this._icon&&(this._icon&&this._removeIcon(),F=!0,h.title&&(A.title=h.title),A.tagName==="IMG"&&(A.alt=h.alt||"")),lr(A,b),h.keyboard&&(A.tabIndex="0",A.setAttribute("role","button")),this._icon=A,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nr(A,"focus",this._panOnFocus,this);var X=h.icon.createShadow(this._shadow),de=!1;X!==this._shadow&&(this._removeShadow(),de=!0),X&&(lr(X,b),X.alt=""),this._shadow=X,h.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),X&&de&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jr(this._icon,"focus",this._panOnFocus,this),Sr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Sr(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&Qr(this._icon,h),this._shadow&&Qr(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var b=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(lr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),no)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new no(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&Oi(this._icon,h),this._shadow&&Oi(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var b=this.options.icon.options,A=b.iconSize?Ke(b.iconSize):Ke(0,0),F=b.iconAnchor?Ke(b.iconAnchor):Ke(0,0);h.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:A.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cf(h,b){return new Cc(h,b)}var na=Er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return z(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ra=na.extend({options:{fill:!0,radius:10},initialize:function(h,b){z(this,b),this._latlng=bt(h),this._radius=this.options.radius},setLatLng:function(h){var b=this._latlng;return this._latlng=bt(h),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var b=h&&h.radius||this._radius;return na.prototype.setStyle.call(this,h),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,b=this._radiusY||h,A=this._clickTolerance(),F=[h+A,b+A];this._pxBounds=new we(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Eu(h,b){return new ra(h,b)}var Ul=ra.extend({initialize:function(h,b,A){if(typeof b=="number"&&(b=i({},A,{radius:b})),z(this,b),this._latlng=bt(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new Be(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:na.prototype.setStyle,_project:function(){var h=this._latlng.lng,b=this._latlng.lat,A=this._map,F=A.options.crs;if(F.distance===qt.distance){var X=Math.PI/180,de=this._mRadius/qt.R/X,je=A.project([b+de,h]),ot=A.project([b-de,h]),ht=je.add(ot).divideBy(2),Pt=A.unproject(ht).lat,cn=Math.acos((Math.cos(de*X)-Math.sin(b*X)*Math.sin(Pt*X))/(Math.cos(b*X)*Math.cos(Pt*X)))/X;(isNaN(cn)||cn===0)&&(cn=de/Math.cos(Math.PI/180*b)),this._point=ht.subtract(A.getPixelOrigin()),this._radius=isNaN(cn)?0:ht.x-A.project([Pt,h-cn]).x,this._radiusY=ht.y-je.y}else{var er=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=A.latLngToLayerPoint(this._latlng),this._radius=this._point.x-A.latLngToLayerPoint(er).x}this._updateBounds()}});function Tc(h,b,A){return new Ul(h,b,A)}var ro=na.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,b){z(this,b),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var b=1/0,A=null,F=jl,X,de,je=0,ot=this._parts.length;je<ot;je++)for(var ht=this._parts[je],Pt=1,cn=ht.length;Pt<cn;Pt++){X=ht[Pt-1],de=ht[Pt];var er=F(h,X,de,!0);er<b&&(b=er,A=F(h,X,de))}return A&&(A.distance=Math.sqrt(b)),A},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ed(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,b){return b=b||this._defaultShape(),h=bt(h),b.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new Be,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return Fs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var b=[],A=Fs(h),F=0,X=h.length;F<X;F++)A?(b[F]=bt(h[F]),this._bounds.extend(b[F])):b[F]=this._convertLatLngs(h[F]);return b},_project:function(){var h=new we;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),b=new qe(h,h);this._rawPxBounds&&(this._pxBounds=new we([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(h,b,A){var F=h[0]instanceof xt,X=h.length,de,je;if(F){for(je=[],de=0;de<X;de++)je[de]=this._map.latLngToLayerPoint(h[de]),A.extend(je[de]);b.push(je)}else for(de=0;de<X;de++)this._projectLatlngs(h[de],b,A)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,A,F,X,de,je,ot,ht;for(A=0,X=0,de=this._rings.length;A<de;A++)for(ht=this._rings[A],F=0,je=ht.length;F<je-1;F++)ot=of(ht[F],ht[F+1],h,F,!0),ot&&(b[X]=b[X]||[],b[X].push(ot[0]),(ot[1]!==ht[F+1]||F===je-2)&&(b[X].push(ot[1]),X++))}},_simplifyPoints:function(){for(var h=this._parts,b=this.options.smoothFactor,A=0,F=h.length;A<F;A++)h[A]=xu(h[A],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,b){var A,F,X,de,je,ot,ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(A=0,de=this._parts.length;A<de;A++)for(ot=this._parts[A],F=0,je=ot.length,X=je-1;F<je;X=F++)if(!(!b&&F===0)&&Op(h,ot[X],ot[F])<=ht)return!0;return!1}});function Td(h,b){return new ro(h,b)}ro._flat=bu;var No=ro.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var b=ro.prototype._convertLatLngs.call(this,h),A=b.length;return A>=2&&b[0]instanceof xt&&b[0].equals(b[A-1])&&b.pop(),b},_setLatLngs:function(h){ro.prototype._setLatLngs.call(this,h),Fs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,b=this.options.weight,A=new qe(b,b);if(h=new we(h.min.subtract(A),h.max.add(A)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,X=this._rings.length,de;F<X;F++)de=bd(this._rings[F],h,!0),de.length&&this._parts.push(de)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var b=!1,A,F,X,de,je,ot,ht,Pt;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(de=0,ht=this._parts.length;de<ht;de++)for(A=this._parts[de],je=0,Pt=A.length,ot=Pt-1;je<Pt;ot=je++)F=A[je],X=A[ot],F.y>h.y!=X.y>h.y&&h.x<(X.x-F.x)*(h.y-F.y)/(X.y-F.y)+F.x&&(b=!b);return b||ro.prototype._containsPoint.call(this,h,!0)}});function kc(h,b){return new No(h,b)}var ia=to.extend({initialize:function(h,b){z(this,b),this._layers={},h&&this.addData(h)},addData:function(h){var b=q(h)?h:h.features,A,F,X;if(b){for(A=0,F=b.length;A<F;A++)X=b[A],(X.geometries||X.geometry||X.features||X.coordinates)&&this.addData(X);return this}var de=this.options;if(de.filter&&!de.filter(h))return this;var je=Pc(h,de);return je?(je.feature=Vl(h),je.defaultOptions=je.options,this.resetStyle(je),de.onEachFeature&&de.onEachFeature(h,je),this.addLayer(je)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=i({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(b){this._setLayerStyle(b,h)},this)},_setLayerStyle:function(h,b){h.setStyle&&(typeof b=="function"&&(b=b(h.feature)),h.setStyle(b))}});function Pc(h,b){var A=h.type==="Feature"?h.geometry:h,F=A?A.coordinates:null,X=[],de=b&&b.pointToLayer,je=b&&b.coordsToLatLng||Ac,ot,ht,Pt,cn;if(!F&&!A)return null;switch(A.type){case"Point":return ot=je(F),Rr(de,h,ot,b);case"MultiPoint":for(Pt=0,cn=F.length;Pt<cn;Pt++)ot=je(F[Pt]),X.push(Rr(de,h,ot,b));return new to(X);case"LineString":case"MultiLineString":return ht=kd(F,A.type==="LineString"?0:1,je),new ro(ht,b);case"Polygon":case"MultiPolygon":return ht=kd(F,A.type==="Polygon"?1:2,je),new No(ht,b);case"GeometryCollection":for(Pt=0,cn=A.geometries.length;Pt<cn;Pt++){var er=Pc({geometry:A.geometries[Pt],type:"Feature",properties:h.properties},b);er&&X.push(er)}return new to(X);case"FeatureCollection":for(Pt=0,cn=A.features.length;Pt<cn;Pt++){var br=Pc(A.features[Pt],b);br&&X.push(br)}return new to(X);default:throw new Error("Invalid GeoJSON object.")}}function Rr(h,b,A,F){return h?h(b,A):new Cc(A,F&&F.markersInheritOptions&&F)}function Ac(h){return new xt(h[1],h[0],h[2])}function kd(h,b,A){for(var F=[],X=0,de=h.length,je;X<de;X++)je=b?kd(h[X],b-1,A):(A||Ac)(h[X]),F.push(je);return F}function Pd(h,b){return h=bt(h),h.alt!==void 0?[P(h.lng,b),P(h.lat,b),P(h.alt,b)]:[P(h.lng,b),P(h.lat,b)]}function La(h,b,A,F){for(var X=[],de=0,je=h.length;de<je;de++)X.push(b?La(h[de],Fs(h[de])?0:b-1,A,F):Pd(h[de],F));return!b&&A&&X.length>0&&X.push(X[0].slice()),X}function $l(h,b){return h.feature?i({},h.feature,{geometry:b}):Vl(b)}function Vl(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var Ad={toGeoJSON:function(h){return $l(this,{type:"Point",coordinates:Pd(this.getLatLng(),h)})}};Cc.include(Ad),Ul.include(Ad),ra.include(Ad),ro.include({toGeoJSON:function(h){var b=!Fs(this._latlngs),A=La(this._latlngs,b?1:0,!1,h);return $l(this,{type:(b?"Multi":"")+"LineString",coordinates:A})}}),No.include({toGeoJSON:function(h){var b=!Fs(this._latlngs),A=b&&!Fs(this._latlngs[0]),F=La(this._latlngs,A?2:b?1:0,!0,h);return b||(F=[F]),$l(this,{type:(A?"Multi":"")+"Polygon",coordinates:F})}}),Lr.include({toMultiPoint:function(h){var b=[];return this.eachLayer(function(A){b.push(A.toGeoJSON(h).geometry.coordinates)}),$l(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(h){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(h);var A=b==="GeometryCollection",F=[];return this.eachLayer(function(X){if(X.toGeoJSON){var de=X.toGeoJSON(h);if(A)F.push(de.geometry);else{var je=Vl(de);je.type==="FeatureCollection"?F.push.apply(F,je.features):F.push(je)}}}),A?$l(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function uf(h,b){return new ia(h,b)}var Id=uf,Hl=Er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,b,A){this._url=h,this._bounds=ct(b),z(this,A)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Sr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&$r(this._image),this},bringToBack:function(){return this._map&&mo(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=ct(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",b=this._image=h?this._url:mn("img");if(lr(b,"leaflet-image-layer"),this._zoomAnimated&&lr(b,"leaflet-zoom-animated"),this.options.className&&lr(b,this.options.className),b.onselectstart=C,b.onmousemove=C,b.onload=u(this.fire,this,"load"),b.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(h){var b=this._map.getZoomScale(h.zoom),A=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;Mo(this._image,A,b)},_reset:function(){var h=this._image,b=new we(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),A=b.getSize();Qr(h,b.min),h.style.width=A.x+"px",h.style.height=A.y+"px"},_updateOpacity:function(){Oi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),Ic=function(h,b,A){return new Hl(h,b,A)},Zl=Hl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",b=this._image=h?this._url:mn("video");if(lr(b,"leaflet-image-layer"),this._zoomAnimated&&lr(b,"leaflet-zoom-animated"),this.options.className&&lr(b,this.options.className),b.onselectstart=C,b.onmousemove=C,b.onloadeddata=u(this.fire,this,"load"),h){for(var A=b.getElementsByTagName("source"),F=[],X=0;X<A.length;X++)F.push(A[X].src);this._url=A.length>0?F:[b.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var de=0;de<this._url.length;de++){var je=mn("source");je.src=this._url[de],b.appendChild(je)}}});function Rc(h,b,A){return new Zl(h,b,A)}var Rd=Hl.extend({_initImage:function(){var h=this._image=this._url;lr(h,"leaflet-image-layer"),this._zoomAnimated&&lr(h,"leaflet-zoom-animated"),this.options.className&&lr(h,this.options.className),h.onselectstart=C,h.onmousemove=C}});function Lc(h,b,A){return new Rd(h,b,A)}var Bs=Er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,b){h&&(h instanceof xt||q(h))?(this._latlng=bt(h),z(this,b)):(z(this,h),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&Oi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&Oi(this._container,1),this.bringToFront(),this.options.interactive&&(lr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(Oi(this._container,0),this._removeTimeout=setTimeout(u(Sr,void 0,this._container),200)):Sr(this._container),this.options.interactive&&(Dr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=bt(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&$r(this._container),this},bringToBack:function(){return this._map&&mo(this._container),this},_prepareOpen:function(h){var b=this._source;if(!b._map)return!1;if(b instanceof to){b=null;var A=this._source._layers;for(var F in A)if(A[F]._map){b=A[F];break}if(!b)return!1;this._source=b}if(!h)if(b.getCenter)h=b.getCenter();else if(b.getLatLng)h=b.getLatLng();else if(b.getBounds)h=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")h.innerHTML=b;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),b=Ke(this.options.offset),A=this._getAnchor();this._zoomAnimated?Qr(this._container,h.add(A)):b=b.add(h).add(A);var F=this._containerBottom=-b.y,X=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=F+"px",this._container.style.left=X+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(h,b,A,F){var X=b;return X instanceof h||(X=new h(F).setContent(b)),A&&X.setLatLng(A),X}}),Er.include({_initOverlay:function(h,b,A,F){var X=A;return X instanceof h?(z(X,F),X._source=this):(X=b&&!F?b:new h(F,this),X.setContent(A)),X}});var ql=Bs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,Bs.prototype.openOn.call(this,h)},onAdd:function(h){Bs.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof na||this._source.on("preclick",ea))},onRemove:function(h){Bs.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof na||this._source.off("preclick",ea))},getEvents:function(){var h=Bs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",b=this._container=mn("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),A=this._wrapper=mn("div",h+"-content-wrapper",b);if(this._contentNode=mn("div",h+"-content",A),Ol(b),_u(this._contentNode),nr(b,"contextmenu",ea),this._tipContainer=mn("div",h+"-tip-container",b),this._tip=mn("div",h+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=mn("a",h+"-close-button",b);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',nr(F,"click",function(X){Di(X),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,b=h.style;b.width="",b.whiteSpace="nowrap";var A=h.offsetWidth;A=Math.min(A,this.options.maxWidth),A=Math.max(A,this.options.minWidth),b.width=A+1+"px",b.whiteSpace="",b.height="";var F=h.offsetHeight,X=this.options.maxHeight,de="leaflet-popup-scrolled";X&&F>X?(b.height=X+"px",lr(h,de)):Dr(h,de),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var b=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),A=this._getAnchor();Qr(this._container,b.add(A))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,b=parseInt(Mi(this._container,"marginBottom"),10)||0,A=this._container.offsetHeight+b,F=this._containerWidth,X=new qe(this._containerLeft,-A-this._containerBottom);X._add(As(this._container));var de=h.layerPointToContainerPoint(X),je=Ke(this.options.autoPanPadding),ot=Ke(this.options.autoPanPaddingTopLeft||je),ht=Ke(this.options.autoPanPaddingBottomRight||je),Pt=h.getSize(),cn=0,er=0;de.x+F+ht.x>Pt.x&&(cn=de.x+F-Pt.x+ht.x),de.x-cn-ot.x<0&&(cn=de.x-ot.x),de.y+A+ht.y>Pt.y&&(er=de.y+A-Pt.y+ht.y),de.y-er-ot.y<0&&(er=de.y-ot.y),(cn||er)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([cn,er]))}},_getAnchor:function(){return Ke(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ld=function(h,b){return new ql(h,b)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(h,b,A){return this._initOverlay(ql,h,b,A).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),Er.include({bindPopup:function(h,b){return this._popup=this._initOverlay(ql,this._popup,h,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof to||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){Xr(h);var b=h.layer||h.target;if(this._popup._source===b&&!(b instanceof na)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=b,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var Mc=Bs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){Bs.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){Bs.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=Bs.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",b=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mn("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var b,A,F=this._map,X=this._container,de=F.latLngToContainerPoint(F.getCenter()),je=F.layerPointToContainerPoint(h),ot=this.options.direction,ht=X.offsetWidth,Pt=X.offsetHeight,cn=Ke(this.options.offset),er=this._getAnchor();ot==="top"?(b=ht/2,A=Pt):ot==="bottom"?(b=ht/2,A=0):ot==="center"?(b=ht/2,A=Pt/2):ot==="right"?(b=0,A=Pt/2):ot==="left"?(b=ht,A=Pt/2):je.x<de.x?(ot="right",b=0,A=Pt/2):(ot="left",b=ht+(cn.x+er.x)*2,A=Pt/2),h=h.subtract(Ke(b,A,!0)).add(cn).add(er),Dr(X,"leaflet-tooltip-right"),Dr(X,"leaflet-tooltip-left"),Dr(X,"leaflet-tooltip-top"),Dr(X,"leaflet-tooltip-bottom"),lr(X,"leaflet-tooltip-"+ot),Qr(X,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&Oi(this._container,h)},_animateZoom:function(h){var b=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(b)},_getAnchor:function(){return Ke(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jg=function(h,b){return new Mc(h,b)};vt.include({openTooltip:function(h,b,A){return this._initOverlay(Mc,h,b,A).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),Er.include({bindTooltip:function(h,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mc,this._tooltip,h,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var b=h?"off":"on",A={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?A.add=this._openTooltip:(A.mouseover=this._openTooltip,A.mouseout=this.closeTooltip,A.click=this._openTooltip,this._map?this._addFocusListeners():A.add=this._addFocusListeners),this._tooltip.options.sticky&&(A.mousemove=this._moveTooltip),this[b](A),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof to||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var b=typeof h.getElement=="function"&&h.getElement();b&&(nr(b,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),nr(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var b=typeof h.getElement=="function"&&h.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var b=h.latlng,A,F;this._tooltip.options.sticky&&h.originalEvent&&(A=this._map.mouseEventToContainerPoint(h.originalEvent),F=this._map.containerPointToLayerPoint(A),b=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(b)}});var df=ol.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var b=h&&h.tagName==="DIV"?h:document.createElement("div"),A=this.options;if(A.html instanceof Element?(Hi(b),b.appendChild(A.html)):b.innerHTML=A.html!==!1?A.html:"",A.bgPos){var F=Ke(A.bgPos);b.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function Md(h){return new df(h)}ol.Default=ta;var Gl=Er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){z(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),Sr(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&($r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof qe?h:new qe(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var b=this.getPane().children,A=-h(-1/0,1/0),F=0,X=b.length,de;F<X;F++)de=b[F].style.zIndex,b[F]!==this._container&&de&&(A=h(A,+de));isFinite(A)&&(this.options.zIndex=A+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){Oi(this._container,this.options.opacity);var h=+new Date,b=!1,A=!1;for(var F in this._tiles){var X=this._tiles[F];if(!(!X.current||!X.loaded)){var de=Math.min(1,(h-X.loaded)/200);Oi(X.el,de),de<1?b=!0:(X.active?A=!0:this._onOpaqueTile(X),X.active=!0)}}A&&!this._noPrune&&this._pruneTiles(),b&&(Fe(this._fadeFrame),this._fadeFrame=Je(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=mn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,b=this.options.maxZoom;if(h!==void 0){for(var A in this._levels)A=Number(A),this._levels[A].el.children.length||A===h?(this._levels[A].el.style.zIndex=b-Math.abs(h-A),this._onUpdateLevel(A)):(Sr(this._levels[A].el),this._removeTilesAtZoom(A),this._onRemoveLevel(A),delete this._levels[A]);var F=this._levels[h],X=this._map;return F||(F=this._levels[h]={},F.el=mn("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=b,F.origin=X.project(X.unproject(X.getPixelOrigin()),h).round(),F.zoom=h,this._setZoomTransform(F,X.getCenter(),X.getZoom()),C(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var h,b,A=this._map.getZoom();if(A>this.options.maxZoom||A<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)b=this._tiles[h],b.retain=b.current;for(h in this._tiles)if(b=this._tiles[h],b.current&&!b.active){var F=b.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var b in this._tiles)this._tiles[b].coords.z===h&&this._removeTile(b)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)Sr(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,b,A,F){var X=Math.floor(h/2),de=Math.floor(b/2),je=A-1,ot=new qe(+X,+de);ot.z=+je;var ht=this._tileCoordsToKey(ot),Pt=this._tiles[ht];return Pt&&Pt.active?(Pt.retain=!0,!0):(Pt&&Pt.loaded&&(Pt.retain=!0),je>F?this._retainParent(X,de,je,F):!1)},_retainChildren:function(h,b,A,F){for(var X=2*h;X<2*h+2;X++)for(var de=2*b;de<2*b+2;de++){var je=new qe(X,de);je.z=A+1;var ot=this._tileCoordsToKey(je),ht=this._tiles[ot];if(ht&&ht.active){ht.retain=!0;continue}else ht&&ht.loaded&&(ht.retain=!0);A+1<F&&this._retainChildren(X,de,A+1,F)}},_resetView:function(h){var b=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var b=this.options;return b.minNativeZoom!==void 0&&h<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<h?b.maxNativeZoom:h},_setView:function(h,b,A,F){var X=Math.round(b);this.options.maxZoom!==void 0&&X>this.options.maxZoom||this.options.minZoom!==void 0&&X<this.options.minZoom?X=void 0:X=this._clampZoom(X);var de=this.options.updateWhenZooming&&X!==this._tileZoom;(!F||de)&&(this._tileZoom=X,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),X!==void 0&&this._update(h),A||this._pruneTiles(),this._noPrune=!!A),this._setZoomTransforms(h,b)},_setZoomTransforms:function(h,b){for(var A in this._levels)this._setZoomTransform(this._levels[A],h,b)},_setZoomTransform:function(h,b,A){var F=this._map.getZoomScale(A,h.zoom),X=h.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(b,A)).round();Ve.any3d?Mo(h.el,X,F):Qr(h.el,X)},_resetGrid:function(){var h=this._map,b=h.options.crs,A=this._tileSize=this.getTileSize(),F=this._tileZoom,X=this._map.getPixelWorldBounds(this._tileZoom);X&&(this._globalTileRange=this._pxBoundsToTileRange(X)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,b.wrapLng[0]],F).x/A.x),Math.ceil(h.project([0,b.wrapLng[1]],F).x/A.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([b.wrapLat[0],0],F).y/A.x),Math.ceil(h.project([b.wrapLat[1],0],F).y/A.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var b=this._map,A=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),F=b.getZoomScale(A,this._tileZoom),X=b.project(h,this._tileZoom).floor(),de=b.getSize().divideBy(F*2);return new we(X.subtract(de),X.add(de))},_update:function(h){var b=this._map;if(b){var A=this._clampZoom(b.getZoom());if(h===void 0&&(h=b.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(h),X=this._pxBoundsToTileRange(F),de=X.getCenter(),je=[],ot=this.options.keepBuffer,ht=new we(X.getBottomLeft().subtract([ot,-ot]),X.getTopRight().add([ot,-ot]));if(!(isFinite(X.min.x)&&isFinite(X.min.y)&&isFinite(X.max.x)&&isFinite(X.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pt in this._tiles){var cn=this._tiles[Pt].coords;(cn.z!==this._tileZoom||!ht.contains(new qe(cn.x,cn.y)))&&(this._tiles[Pt].current=!1)}if(Math.abs(A-this._tileZoom)>1){this._setView(h,A);return}for(var er=X.min.y;er<=X.max.y;er++)for(var br=X.min.x;br<=X.max.x;br++){var ys=new qe(br,er);if(ys.z=this._tileZoom,!!this._isValidTile(ys)){var Zi=this._tiles[this._tileCoordsToKey(ys)];Zi?Zi.current=!0:je.push(ys)}}if(je.sort(function(qi,hs){return qi.distanceTo(de)-hs.distanceTo(de)}),je.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Us=document.createDocumentFragment();for(br=0;br<je.length;br++)this._addTile(je[br],Us);this._level.el.appendChild(Us)}}}},_isValidTile:function(h){var b=this._map.options.crs;if(!b.infinite){var A=this._globalTileRange;if(!b.wrapLng&&(h.x<A.min.x||h.x>A.max.x)||!b.wrapLat&&(h.y<A.min.y||h.y>A.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(h);return ct(this.options.bounds).overlaps(F)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var b=this._map,A=this.getTileSize(),F=h.scaleBy(A),X=F.add(A),de=b.unproject(F,h.z),je=b.unproject(X,h.z);return[de,je]},_tileCoordsToBounds:function(h){var b=this._tileCoordsToNwSe(h),A=new Be(b[0],b[1]);return this.options.noWrap||(A=this._map.wrapLatLngBounds(A)),A},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var b=h.split(":"),A=new qe(+b[0],+b[1]);return A.z=+b[2],A},_removeTile:function(h){var b=this._tiles[h];b&&(Sr(b.el),delete this._tiles[h],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){lr(h,"leaflet-tile");var b=this.getTileSize();h.style.width=b.x+"px",h.style.height=b.y+"px",h.onselectstart=C,h.onmousemove=C,Ve.ielt9&&this.options.opacity<1&&Oi(h,this.options.opacity)},_addTile:function(h,b){var A=this._getTilePos(h),F=this._tileCoordsToKey(h),X=this.createTile(this._wrapCoords(h),u(this._tileReady,this,h));this._initTile(X),this.createTile.length<2&&Je(u(this._tileReady,this,h,null,X)),Qr(X,A),this._tiles[F]={el:X,coords:h,current:!0},b.appendChild(X),this.fire("tileloadstart",{tile:X,coords:h})},_tileReady:function(h,b,A){b&&this.fire("tileerror",{error:b,tile:A,coords:h});var F=this._tileCoordsToKey(h);A=this._tiles[F],A&&(A.loaded=+new Date,this._map._fadeAnimated?(Oi(A.el,0),Fe(this._fadeFrame),this._fadeFrame=Je(this._updateOpacity,this)):(A.active=!0,this._pruneTiles()),b||(lr(A.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:A.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?Je(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var b=new qe(this._wrapX?w(h.x,this._wrapX):h.x,this._wrapY?w(h.y,this._wrapY):h.y);return b.z=h.z,b},_pxBoundsToTileRange:function(h){var b=this.getTileSize();return new we(h.min.unscaleBy(b).floor(),h.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function Cu(h){return new Gl(h)}var sa=Gl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,b){this._url=h,b=z(this,b),b.detectRetina&&Ve.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,b){return this._url===h&&b===void 0&&(b=!0),this._url=h,b||this.redraw(),this},createTile:function(h,b){var A=document.createElement("img");return nr(A,"load",u(this._tileOnLoad,this,b,A)),nr(A,"error",u(this._tileOnError,this,b,A)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(A.referrerPolicy=this.options.referrerPolicy),A.alt="",A.src=this.getTileUrl(h),A},getTileUrl:function(h){var b={r:Ve.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var A=this._globalTileRange.max.y-h.y;this.options.tms&&(b.y=A),b["-y"]=A}return V(this._url,i(b,this.options))},_tileOnLoad:function(h,b){Ve.ielt9?setTimeout(u(h,this,null,b),0):h(null,b)},_tileOnError:function(h,b,A){var F=this.options.errorTileUrl;F&&b.getAttribute("src")!==F&&(b.src=F),h(A,b)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,b=this.options.maxZoom,A=this.options.zoomReverse,F=this.options.zoomOffset;return A&&(h=b-h),h+F},_getSubdomain:function(h){var b=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var h,b;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(b=this._tiles[h].el,b.onload=C,b.onerror=C,!b.complete)){b.src=ue;var A=this._tiles[h].coords;Sr(b),delete this._tiles[h],this.fire("tileabort",{tile:b,coords:A})}},_removeTile:function(h){var b=this._tiles[h];if(b)return b.el.setAttribute("src",ue),Gl.prototype._removeTile.call(this,h)},_tileReady:function(h,b,A){if(!(!this._map||A&&A.getAttribute("src")===ue))return Gl.prototype._tileReady.call(this,h,b,A)}});function us(h,b){return new sa(h,b)}var al=sa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,b){this._url=h;var A=i({},this.defaultWmsParams);for(var F in b)F in this.options||(A[F]=b[F]);b=z(this,b);var X=b.detectRetina&&Ve.retina?2:1,de=this.getTileSize();A.width=de.x*X,A.height=de.y*X,this.wmsParams=A},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,sa.prototype.onAdd.call(this,h)},getTileUrl:function(h){var b=this._tileCoordsToNwSe(h),A=this._crs,F=He(A.project(b[0]),A.project(b[1])),X=F.min,de=F.max,je=(this._wmsVersion>=1.3&&this._crs===dr?[X.y,X.x,de.y,de.x]:[X.x,X.y,de.x,de.y]).join(","),ot=sa.prototype.getTileUrl.call(this,h);return ot+$(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+je},setParams:function(h,b){return i(this.wmsParams,h),b||this.redraw(),this}});function jp(h,b){return new al(h,b)}sa.WMS=al,us.wms=jp;var oa=Er.extend({options:{padding:.1},initialize:function(h){z(this,h),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,b){var A=this._map.getZoomScale(b,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),X=this._map.project(this._center,b),de=F.multiplyBy(-A).add(X).subtract(this._map._getNewPixelOrigin(h,b));Ve.any3d?Mo(this._container,de,A):Qr(this._container,de)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,b=this._map.getSize(),A=this._map.containerPointToLayerPoint(b.multiplyBy(-h)).round();this._bounds=new we(A,A.add(b.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),pi=oa.extend({options:{tolerance:0},getEvents:function(){var h=oa.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){oa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");nr(h,"mousemove",this._onMouseMove,this),nr(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nr(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){Fe(this._redrawRequest),delete this._ctx,Sr(this._container),jr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var b in this._layers)h=this._layers[b],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oa.prototype._update.call(this);var h=this._bounds,b=this._container,A=h.getSize(),F=Ve.retina?2:1;Qr(b,h.min),b.width=F*A.x,b.height=F*A.y,b.style.width=A.x+"px",b.style.height=A.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){oa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[m(h)]=h;var b=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var b=h._order,A=b.next,F=b.prev;A?A.prev=F:this._drawLast=F,F?F.next=A:this._drawFirst=A,delete h._order,delete this._layers[m(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var b=h.options.dashArray.split(/[, ]+/),A=[],F,X;for(X=0;X<b.length;X++){if(F=Number(b[X]),isNaN(F))return;A.push(F)}h.options._dashArray=A}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||Je(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var b=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new we,this._redrawBounds.extend(h._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(h._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var b=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,b=this._redrawBounds;if(this._ctx.save(),b){var A=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,A.x,A.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)h=F.layer,(!b||h._pxBounds&&h._pxBounds.intersects(b))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,b){if(this._drawing){var A,F,X,de,je=h._parts,ot=je.length,ht=this._ctx;if(ot){for(ht.beginPath(),A=0;A<ot;A++){for(F=0,X=je[A].length;F<X;F++)de=je[A][F],ht[F?"lineTo":"moveTo"](de.x,de.y);b&&ht.closePath()}this._fillStroke(ht,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var b=h._point,A=this._ctx,F=Math.max(Math.round(h._radius),1),X=(Math.max(Math.round(h._radiusY),1)||F)/F;X!==1&&(A.save(),A.scale(1,X)),A.beginPath(),A.arc(b.x,b.y/X,F,0,Math.PI*2,!1),X!==1&&A.restore(),this._fillStroke(A,h)}},_fillStroke:function(h,b){var A=b.options;A.fill&&(h.globalAlpha=A.fillOpacity,h.fillStyle=A.fillColor||A.color,h.fill(A.fillRule||"evenodd")),A.stroke&&A.weight!==0&&(h.setLineDash&&h.setLineDash(b.options&&b.options._dashArray||[]),h.globalAlpha=A.opacity,h.lineWidth=A.weight,h.strokeStyle=A.color,h.lineCap=A.lineCap,h.lineJoin=A.lineJoin,h.stroke())},_onClick:function(h){for(var b=this._map.mouseEventToLayerPoint(h),A,F,X=this._drawFirst;X;X=X.next)A=X.layer,A.options.interactive&&A._containsPoint(b)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(A))&&(F=A);this._fireEvent(F?[F]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,b)}},_handleMouseOut:function(h){var b=this._hoveredLayer;b&&(Dr(this._container,"leaflet-interactive"),this._fireEvent([b],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,b){if(!this._mouseHoverThrottled){for(var A,F,X=this._drawFirst;X;X=X.next)A=X.layer,A.options.interactive&&A._containsPoint(b)&&(F=A);F!==this._hoveredLayer&&(this._handleMouseOut(h),F&&(lr(this._container,"leaflet-interactive"),this._fireEvent([F],h,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,b,A){this._map._fireDOMEvent(b,A||b.type,h)},_bringToFront:function(h){var b=h._order;if(b){var A=b.next,F=b.prev;if(A)A.prev=F;else return;F?F.next=A:A&&(this._drawFirst=A),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(h)}},_bringToBack:function(h){var b=h._order;if(b){var A=b.next,F=b.prev;if(F)F.next=A;else return;A?A.prev=F:F&&(this._drawLast=F),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(h)}}});function yo(h){return Ve.canvas?new pi(h):null}var ds=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Tu={_initContainer:function(){this._container=mn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(oa.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var b=h._container=ds("shape");lr(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",h._path=ds("path"),b.appendChild(h._path),this._updateStyle(h),this._layers[m(h)]=h},_addPath:function(h){var b=h._container;this._container.appendChild(b),h.options.interactive&&h.addInteractiveTarget(b)},_removePath:function(h){var b=h._container;Sr(b),h.removeInteractiveTarget(b),delete this._layers[m(h)]},_updateStyle:function(h){var b=h._stroke,A=h._fill,F=h.options,X=h._container;X.stroked=!!F.stroke,X.filled=!!F.fill,F.stroke?(b||(b=h._stroke=ds("stroke")),X.appendChild(b),b.weight=F.weight+"px",b.color=F.color,b.opacity=F.opacity,F.dashArray?b.dashStyle=q(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=F.lineCap.replace("butt","flat"),b.joinstyle=F.lineJoin):b&&(X.removeChild(b),h._stroke=null),F.fill?(A||(A=h._fill=ds("fill")),X.appendChild(A),A.color=F.fillColor||F.color,A.opacity=F.fillOpacity):A&&(X.removeChild(A),h._fill=null)},_updateCircle:function(h){var b=h._point.round(),A=Math.round(h._radius),F=Math.round(h._radiusY||A);this._setPath(h,h._empty()?"M0 0":"AL "+b.x+","+b.y+" "+A+","+F+" 0,"+65535*360)},_setPath:function(h,b){h._path.v=b},_bringToFront:function(h){$r(h._container)},_bringToBack:function(h){mo(h._container)}},Oc=Ve.vml?ds:Fn,ll=oa.extend({_initContainer:function(){this._container=Oc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Oc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Sr(this._container),jr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){oa.prototype._update.call(this);var h=this._bounds,b=h.getSize(),A=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,A.setAttribute("width",b.x),A.setAttribute("height",b.y)),Qr(A,h.min),A.setAttribute("viewBox",[h.min.x,h.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(h){var b=h._path=Oc("path");h.options.className&&lr(b,h.options.className),h.options.interactive&&lr(b,"leaflet-interactive"),this._updateStyle(h),this._layers[m(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){Sr(h._path),h.removeInteractiveTarget(h._path),delete this._layers[m(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var b=h._path,A=h.options;b&&(A.stroke?(b.setAttribute("stroke",A.color),b.setAttribute("stroke-opacity",A.opacity),b.setAttribute("stroke-width",A.weight),b.setAttribute("stroke-linecap",A.lineCap),b.setAttribute("stroke-linejoin",A.lineJoin),A.dashArray?b.setAttribute("stroke-dasharray",A.dashArray):b.removeAttribute("stroke-dasharray"),A.dashOffset?b.setAttribute("stroke-dashoffset",A.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),A.fill?(b.setAttribute("fill",A.fillColor||A.color),b.setAttribute("fill-opacity",A.fillOpacity),b.setAttribute("fill-rule",A.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(h,b){this._setPath(h,Qe(h._parts,b))},_updateCircle:function(h){var b=h._point,A=Math.max(Math.round(h._radius),1),F=Math.max(Math.round(h._radiusY),1)||A,X="a"+A+","+F+" 0 1,0 ",de=h._empty()?"M0 0":"M"+(b.x-A)+","+b.y+X+A*2+",0 "+X+-A*2+",0 ";this._setPath(h,de)},_setPath:function(h,b){h._path.setAttribute("d",b)},_bringToFront:function(h){$r(h._path)},_bringToBack:function(h){mo(h._path)}});Ve.vml&&ll.include(Tu);function Wl(h){return Ve.svg||Ve.vml?new ll(h):null}vt.include({getRenderer:function(h){var b=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var b=this._paneRenderers[h];return b===void 0&&(b=this._createRenderer({pane:h}),this._paneRenderers[h]=b),b},_createRenderer:function(h){return this.options.preferCanvas&&yo(h)||Wl(h)}});var aa=No.extend({initialize:function(h,b){No.prototype.initialize.call(this,this._boundsToLatLngs(h),b)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=ct(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function hf(h,b){return new aa(h,b)}ll.create=Oc,ll.pointsToPath=Qe,ia.geometryToLayer=Pc,ia.coordsToLatLng=Ac,ia.coordsToLatLngs=kd,ia.latLngToCoords=Pd,ia.latLngsToCoords=La,ia.getFeature=$l,ia.asFeature=Vl,vt.mergeOptions({boxZoom:!0});var ku=Jr.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){nr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){jr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Sr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Aa(),Do(),this._startPoint=this._map.mouseEventToContainerPoint(h),nr(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=mn("div","leaflet-zoom-box",this._container),lr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var b=new we(this._point,this._startPoint),A=b.getSize();Qr(this._box,b.min),this._box.style.width=A.x+"px",this._box.style.height=A.y+"px"},_finish:function(){this._moved&&(Sr(this._box),Dr(this._container,"leaflet-crosshair")),Qo(),Ra(),jr(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var b=new Be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",ku),vt.mergeOptions({doubleClickZoom:!0});var Od=Jr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var b=this._map,A=b.getZoom(),F=b.options.zoomDelta,X=h.originalEvent.shiftKey?A-F:A+F;b.options.doubleClickZoom==="center"?b.setZoom(X):b.setZoomAround(h.containerPoint,X)}});vt.addInitHook("addHandler","doubleClickZoom",Od),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pu=Jr.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new eo(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}lr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dr(this._map._container,"leaflet-grab"),Dr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=ct(this._map.options.maxBounds);this._offsetLimit=He(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var b=this._lastTime=+new Date,A=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(A),this._times.push(b),this._prunePositions(b)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,b){return h-(h-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;h.x<b.min.x&&(h.x=this._viscousLimit(h.x,b.min.x)),h.y<b.min.y&&(h.y=this._viscousLimit(h.y,b.min.y)),h.x>b.max.x&&(h.x=this._viscousLimit(h.x,b.max.x)),h.y>b.max.y&&(h.y=this._viscousLimit(h.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,b=Math.round(h/2),A=this._initialWorldOffset,F=this._draggable._newPos.x,X=(F-b+A)%h+b-A,de=(F+b+A)%h-b-A,je=Math.abs(X+A)<Math.abs(de+A)?X:de;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=je},_onDragEnd:function(h){var b=this._map,A=b.options,F=!A.inertia||h.noInertia||this._times.length<2;if(b.fire("dragend",h),F)b.fire("moveend");else{this._prunePositions(+new Date);var X=this._lastPos.subtract(this._positions[0]),de=(this._lastTime-this._times[0])/1e3,je=A.easeLinearity,ot=X.multiplyBy(je/de),ht=ot.distanceTo([0,0]),Pt=Math.min(A.inertiaMaxSpeed,ht),cn=ot.multiplyBy(Pt/ht),er=Pt/(A.inertiaDeceleration*je),br=cn.multiplyBy(-er/2).round();!br.x&&!br.y?b.fire("moveend"):(br=b._limitOffset(br,b.options.maxBounds),Je(function(){b.panBy(br,{duration:er,easeLinearity:je,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",Pu),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Dd=Jr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),nr(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),jr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,b=document.documentElement,A=h.scrollTop||b.scrollTop,F=h.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(F,A)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var b=this._panKeys={},A=this.keyCodes,F,X;for(F=0,X=A.left.length;F<X;F++)b[A.left[F]]=[-1*h,0];for(F=0,X=A.right.length;F<X;F++)b[A.right[F]]=[h,0];for(F=0,X=A.down.length;F<X;F++)b[A.down[F]]=[0,h];for(F=0,X=A.up.length;F<X;F++)b[A.up[F]]=[0,-1*h]},_setZoomDelta:function(h){var b=this._zoomKeys={},A=this.keyCodes,F,X;for(F=0,X=A.zoomIn.length;F<X;F++)b[A.zoomIn[F]]=h;for(F=0,X=A.zoomOut.length;F<X;F++)b[A.zoomOut[F]]=-h},_addHooks:function(){nr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){jr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var b=h.keyCode,A=this._map,F;if(b in this._panKeys){if(!A._panAnim||!A._panAnim._inProgress)if(F=this._panKeys[b],h.shiftKey&&(F=Ke(F).multiplyBy(3)),A.options.maxBounds&&(F=A._limitOffset(Ke(F),A.options.maxBounds)),A.options.worldCopyJump){var X=A.wrapLatLng(A.unproject(A.project(A.getCenter()).add(F)));A.panTo(X)}else A.panBy(F)}else if(b in this._zoomKeys)A.setZoom(A.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&A._popup&&A._popup.options.closeOnEscapeKey)A.closePopup();else return;Xr(h)}}});vt.addInitHook("addHandler","keyboard",Dd),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Nd=Jr.extend({addHooks:function(){nr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){jr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var b=ge(h),A=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var F=Math.max(A-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),F),Xr(h)},_performZoom:function(){var h=this._map,b=h.getZoom(),A=this._map.options.zoomSnap||0;h._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),X=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,de=A?Math.ceil(X/A)*A:X,je=h._limitZoom(b+(this._delta>0?de:-de))-b;this._delta=0,this._startTime=null,je&&(h.options.scrollWheelZoom==="center"?h.setZoom(b+je):h.setZoomAround(this._lastMousePos,b+je))}});vt.addInitHook("addHandler","scrollWheelZoom",Nd);var Xl=600;vt.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var Au=Jr.extend({addHooks:function(){nr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){jr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var b=h.touches[0];this._startPos=this._newPos=new qe(b.clientX,b.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(nr(document,"touchend",Di),nr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),Xl),nr(document,"touchend touchcancel contextmenu",this._cancel,this),nr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){jr(document,"touchend",Di),jr(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),jr(document,"touchend touchcancel contextmenu",this._cancel,this),jr(document,"touchmove",this._onMove,this)},_onMove:function(h){var b=h.touches[0];this._newPos=new qe(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,b){var A=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});A._simulated=!0,b.target.dispatchEvent(A)}});vt.addInitHook("addHandler","tapHold",Au),vt.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var Dc=Jr.extend({addHooks:function(){lr(this._map._container,"leaflet-touch-zoom"),nr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dr(this._map._container,"leaflet-touch-zoom"),jr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var b=this._map;if(!(!h.touches||h.touches.length!==2||b._animatingZoom||this._zooming)){var A=b.mouseEventToContainerPoint(h.touches[0]),F=b.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(A.add(F)._divideBy(2))),this._startDist=A.distanceTo(F),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),nr(document,"touchmove",this._onTouchMove,this),nr(document,"touchend touchcancel",this._onTouchEnd,this),Di(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var b=this._map,A=b.mouseEventToContainerPoint(h.touches[0]),F=b.mouseEventToContainerPoint(h.touches[1]),X=A.distanceTo(F)/this._startDist;if(this._zoom=b.getScaleZoom(X,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&X<1||this._zoom>b.getMaxZoom()&&X>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,X===1)return}else{var de=A._add(F)._divideBy(2)._subtract(this._centerPoint);if(X===1&&de.x===0&&de.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(de),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),Fe(this._animRequest);var je=u(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Je(je,this,!0),Di(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Fe(this._animRequest),jr(document,"touchmove",this._onTouchMove,this),jr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",Dc),vt.BoxZoom=ku,vt.DoubleClickZoom=Od,vt.Drag=Pu,vt.Keyboard=Dd,vt.ScrollWheelZoom=Nd,vt.TapHold=Au,vt.TouchZoom=Dc,n.Bounds=we,n.Browser=Ve,n.CRS=It,n.Canvas=pi,n.Circle=Ul,n.CircleMarker=ra,n.Class=gt,n.Control=Rt,n.DivIcon=df,n.DivOverlay=Bs,n.DomEvent=st,n.DomUtil=rs,n.Draggable=eo,n.Evented=Nt,n.FeatureGroup=to,n.GeoJSON=ia,n.GridLayer=Gl,n.Handler=Jr,n.Icon=ol,n.ImageOverlay=Hl,n.LatLng=xt,n.LatLngBounds=Be,n.Layer=Er,n.LayerGroup=Lr,n.LineUtil=zl,n.Map=vt,n.Marker=Cc,n.Mixin=is,n.Path=na,n.Point=qe,n.PolyUtil=Og,n.Polygon=No,n.Polyline=ro,n.Popup=ql,n.PosAnimation=dt,n.Projection=_i,n.Rectangle=aa,n.Renderer=oa,n.SVG=ll,n.SVGOverlay=Rd,n.TileLayer=sa,n.Tooltip=Mc,n.Transformation=an,n.Util=Xe,n.VideoOverlay=Zl,n.bind=u,n.bounds=He,n.canvas=yo,n.circle=Tc,n.circleMarker=Eu,n.control=Jt,n.divIcon=Md,n.extend=i,n.featureGroup=Su,n.geoJSON=uf,n.geoJson=Id,n.gridLayer=Cu,n.icon=Bl,n.imageOverlay=Ic,n.latLng=bt,n.latLngBounds=ct,n.layerGroup=Fl,n.map=Ct,n.marker=cf,n.point=Ke,n.polygon=kc,n.polyline=Td,n.popup=Ld,n.rectangle=hf,n.setOptions=z,n.stamp=m,n.svg=Wl,n.svgOverlay=Lc,n.tileLayer=us,n.tooltip=jg,n.transformation=Vt,n.version=r,n.videoOverlay=Rc;var ff=window.L;n.noConflict=function(){return window.L=ff,this},window.L=n})})(nk,nk.exports);var sr=nk.exports;const xae=uu(sr);function bae(e){return e.split(" ").filter(Boolean)}function wae(e,t){bae(t).forEach(n=>{sr.DomUtil.addClass(e,n)})}function Qs(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Pp(e,t){return t==null?function(r,i){const l=M.useRef();return l.current||(l.current=e(r,i)),l}:function(r,i){const l=M.useRef();l.current||(l.current=e(r,i));const u=M.useRef(r),{instance:a}=l.current;return M.useEffect(function(){u.current!==r&&(t(a,r,u.current),u.current=r)},[a,r,i]),l}}function r5(e,t){M.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function JA(e){return function(n){const r=kp(),i=e(F_(n,r),r);return Q4(r.map,n.attribution),QA(i.current,n.eventHandlers),r5(i.current,r),i}}function Sae(e,t){const n=M.useRef();M.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function Eae(e){return function(n){const r=kp(),i=e(F_(n,r),r);return QA(i.current,n.eventHandlers),r5(i.current,r),Sae(i.current,n),i}}function eI(e){function t(i,l){return Qs(e(i),l)}const n=Pp(t),r=n5(n);return t5(r)}function _1(e,t){const n=Pp(e,t),r=JA(n);return YA(r)}function i5(e,t){const n=Pp(e),r=_ae(n,t);return vae(r)}function Ap(e,t){const n=Pp(e,t),r=Eae(n);return YA(r)}function tI(e,t){const n=Pp(e,t),r=JA(n);return t5(r)}function nI(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function rI(e,t,n){t.bounds instanceof sr.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}function B_(){return kp().map}function s5(e,t){const n=B_();return M.useEffect(function(){return n.on(e,t),function(){n.off(e,t)}},[n,e,t]),n}function o5(e){const t=B_();return M.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const Cae=eI(function(t){return new sr.Control.Attribution(t)}),Tae=Ap(function({center:t,children:n,...r},i){const l=new sr.Circle(t,r);return Qs(l,rl(i,{overlayContainer:l}))},J4),kae=Ap(function({center:t,children:n,...r},i){const l=new sr.CircleMarker(t,r);return Qs(l,rl(i,{overlayContainer:l}))},J4),Pae=Ap(function({children:t,...n},r){const i=new sr.FeatureGroup([],n);return Qs(i,rl(r,{layerContainer:i,overlayContainer:i}))}),Aae=Ap(function({data:t,...n},r){const i=new sr.GeoJSON(t,n);return Qs(i,rl(r,{overlayContainer:i}))},function(t,n,r){n.style!==r.style&&(n.style==null?t.resetStyle():t.setStyle(n.style))}),Iae=_1(function({bounds:t,url:n,...r},i){const l=new sr.ImageOverlay(n,t,r);return Qs(l,rl(i,{overlayContainer:l}))},function(t,n,r){if(rI(t,n,r),n.bounds!==r.bounds){const i=n.bounds instanceof sr.LatLngBounds?n.bounds:new sr.LatLngBounds(n.bounds);t.setBounds(i)}n.url!==r.url&&t.setUrl(n.url)}),Rae=_1(function({children:t,...n},r){const i=new sr.LayerGroup([],n);return Qs(i,rl(r,{layerContainer:i}))}),Lae=Pp(function({children:t,...n},r){const i=new sr.Control.Layers(void 0,void 0,n);return Qs(i,rl(r,{layersControl:i}))},function(t,n,r){n.collapsed!==r.collapsed&&(n.collapsed===!0?t.collapse():t.expand())}),Mae=n5(Lae),iI=YA(Mae);function a5(e){return function(n){const r=kp(),i=M.useRef(n),[l,u]=M.useState(null),{layersControl:a,map:m}=r,g=M.useCallback(P=>{a!=null&&(i.current.checked&&m.addLayer(P),e(a,P,i.current.name),u(P))},[a,m]),w=M.useCallback(P=>{a==null||a.removeLayer(P),u(null)},[a]),C=M.useMemo(()=>rl(r,{layerContainer:{addLayer:g,removeLayer:w}}),[r,g,w]);return M.useEffect(()=>{l!==null&&i.current!==n&&(n.checked===!0&&(i.current.checked==null||i.current.checked===!1)?m.addLayer(l):i.current.checked===!0&&(n.checked==null||n.checked===!1)&&m.removeLayer(l),i.current=n)}),n.children?dn.createElement(v1,{value:C},n.children):null}}iI.BaseLayer=a5(function(t,n,r){t.addBaseLayer(n,r)});iI.Overlay=a5(function(t,n,r){t.addOverlay(n,r)});function rk(){return rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}function Oae({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:l,placeholder:u,style:a,whenReady:m,zoom:g,...w},C){const[P]=M.useState({className:i,id:l,style:a}),[I,N]=M.useState(null);M.useImperativeHandle(C,()=>(I==null?void 0:I.map)??null,[I]);const z=M.useCallback(H=>{if(H!==null&&I===null){const V=new sr.Map(H,w);n!=null&&g!=null?V.setView(n,g):e!=null&&V.fitBounds(e,t),m!=null&&V.whenReady(m),N(yae(V))}},[]);M.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const $=I?dn.createElement(v1,{value:I},r):u??null;return dn.createElement("div",rk({},P,{ref:z}),$)}const l5=M.forwardRef(Oae),Dae=_1(function({position:t,...n},r){const i=new sr.Marker(t,n);return Qs(i,rl(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Nae=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function rD(e,t){const{[t]:n,...r}=e;return r}function jae(e,t,n){if(Nae.indexOf(e)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${e}`);if(n.map.getPane(e)!=null)throw new Error(`A pane with this name already exists: ${e}`);const r=t.pane??n.pane,i=r?n.map.getPane(r):void 0,l=n.map.createPane(e,i);return t.className!=null&&wae(l,t.className),t.style!=null&&Object.keys(t.style).forEach(u=>{l.style[u]=t.style[u]}),l}function zae(e,t){const[n]=M.useState(e.name),[r,i]=M.useState(null);M.useImperativeHandle(t,()=>r,[r]);const l=kp(),u=M.useMemo(()=>({...l,pane:n}),[l]);return M.useEffect(()=>(i(jae(n,e,l)),function(){var g;const m=l.map.getPane(n);(g=m==null?void 0:m.remove)==null||g.call(m),l.map._panes!=null&&(l.map._panes=rD(l.map._panes,n),l.map._paneRenderers=rD(l.map._paneRenderers,n))}),[]),e.children!=null&&r!=null?Ca.createPortal(dn.createElement(v1,{value:u},e.children),r):null}const Fae=M.forwardRef(zae),Bae=Ap(function({positions:t,...n},r){const i=new sr.Polygon(t,n);return Qs(i,rl(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),Uae=Ap(function({positions:t,...n},r){const i=new sr.Polyline(t,n);return Qs(i,rl(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),$ae=i5(function(t,n){const r=new sr.Popup(t,n.overlayContainer);return Qs(r,n)},function(t,n,{position:r},i){M.useEffect(function(){const{instance:u}=t;function a(g){g.popup===u&&(u.update(),i(!0))}function m(g){g.popup===u&&i(!1)}return n.map.on({popupopen:a,popupclose:m}),n.overlayContainer==null?(r!=null&&u.setLatLng(r),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){var w;n.map.off({popupopen:a,popupclose:m}),(w=n.overlayContainer)==null||w.unbindPopup(),n.map.removeLayer(u)}},[t,n,i,r])}),Vae=Ap(function({bounds:t,...n},r){const i=new sr.Rectangle(t,n);return Qs(i,rl(r,{overlayContainer:i}))},function(t,n,r){n.bounds!==r.bounds&&t.setBounds(n.bounds)}),Hae=eI(function(t){return new sr.Control.Scale(t)}),Zae=Pp(function(t,n){const{attributes:r,bounds:i,...l}=t,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xmlns","http://www.w3.org/2000/svg"),r!=null&&Object.keys(r).forEach(m=>{u.setAttribute(m,r[m])});const a=new sr.SVGOverlay(u,i,l);return Qs(a,n,u)},rI),qae=JA(Zae);function Gae({children:e,...t},n){const{instance:r,container:i}=qae(t).current;return M.useImperativeHandle(n,()=>r),i==null||e==null?null:Ca.createPortal(e,i)}const Wae=M.forwardRef(Gae),Xae=tI(function({url:t,...n},r){const i=new sr.TileLayer(t,F_(n,r));return Qs(i,r)},function(t,n,r){nI(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),Kae=i5(function(t,n){const r=new sr.Tooltip(t,n.overlayContainer);return Qs(r,n)},function(t,n,{position:r},i){M.useEffect(function(){const u=n.overlayContainer;if(u==null)return;const{instance:a}=t,m=w=>{w.tooltip===a&&(r!=null&&a.setLatLng(r),a.update(),i(!0))},g=w=>{w.tooltip===a&&i(!1)};return u.on({tooltipopen:m,tooltipclose:g}),u.bindTooltip(a),function(){u.off({tooltipopen:m,tooltipclose:g}),u._map!=null&&u.unbindTooltip()}},[t,n,i,r])}),Yae=_1(function({bounds:t,url:n,...r},i){var u;const l=new sr.VideoOverlay(n,t,r);return r.play===!0&&((u=l.getElement())==null||u.play()),Qs(l,rl(i,{overlayContainer:l}))},function(t,n,r){rI(t,n,r),typeof n.url=="string"&&n.url!==r.url&&t.setUrl(n.url);const i=t.getElement();i!=null&&(n.play===!0&&!r.play?i.play():!n.play&&r.play===!0&&i.pause())}),Qae=tI(function({eventHandlers:t,params:n={},url:r,...i},l){const u=new sr.TileLayer.WMS(r,{...n,...F_(i,l)});return Qs(u,l)},function(t,n,r){nI(t,n,r),n.params!=null&&n.params!==r.params&&t.setParams(n.params)}),c5=eI(function(t){return new sr.Control.Zoom(t)}),Jae=Object.freeze(Object.defineProperty({__proto__:null,AttributionControl:Cae,Circle:Tae,CircleMarker:kae,FeatureGroup:Pae,GeoJSON:Aae,ImageOverlay:Iae,LayerGroup:Rae,LayersControl:iI,MapContainer:l5,Marker:Dae,Pane:Fae,Polygon:Bae,Polyline:Uae,Popup:$ae,Rectangle:Vae,SVGOverlay:Wae,ScaleControl:Hae,TileLayer:Xae,Tooltip:Kae,VideoOverlay:Yae,WMSTileLayer:Qae,ZoomControl:c5,useMap:B_,useMapEvent:s5,useMapEvents:o5},Symbol.toStringTag,{value:"Module"})),ele=({children:e})=>{const{isFetching:t,error:n}=Te(l=>l.hotelSelection),r=Rl();if(VA(),sA().state!=="loading"&&!t&&n){if([dh.NoAvailability,dh.NoAvailabilityWithFilters].includes(n==null?void 0:n.type)){let l="";return(n==null?void 0:n.type)===dh.NoAvailability?(l=re(yr.NoAvailabilityDescription),re(yr.NoAvailabilityChangeSearch)):(n==null?void 0:n.type)===dh.NoAvailabilityWithFilters&&(l=re(yr.NoAvailabilityWithFiltersDescription),re(yr.NoAvailabilityRemoveAllFilters)),y.jsxs(Rv,{className:"cvg-card",children:[y.jsx(Ov,{variation:"default"}),y.jsx(Dv,{children:re(yr.NoAvailabilityTitle)}),y.jsx(Mv,{children:l}),y.jsx(Lv,{children:(n==null?void 0:n.type)===dh.NoAvailabilityWithFilters?y.jsx(bn,{variation:"secondary",asChild:!0,children:y.jsx(oA,{to:Jn.hotelSelection.path,children:re(yr.NoAvailabilityRemoveAllFilters)})}):null})]})}return y.jsxs(Rv,{className:"cvg-card",children:[y.jsx(Ov,{variation:"negative"}),y.jsx(Dv,{children:re(yn.PageLoadError)}),y.jsx(Mv,{children:re(yn.TechnicalIssueRetry)}),y.jsx(Lv,{children:y.jsx(bn,{variation:"secondary",type:"button",onClick:()=>r(""),children:re(yn.PageReload)})})]})}return e};function u5({sortOrder:e,sortOrders:t,arrivalDate:n,departureDate:r}){const i=Qw(),l=M.useId(),u=Ir(),a=M.useRef(null),[m,g]=M.useState(e);return t&&t.length>0?y.jsxs(Yw,{ref:a,method:"GET",children:[y.jsx("input",{type:"hidden",name:"arrivalDate",value:n}),y.jsx("input",{type:"hidden",name:"departureDate",value:r}),y.jsxs("div",{className:"cvg-sort-select",children:[y.jsx("label",{htmlFor:l,className:"cvg-typo-action cvg-sort-select__label",children:re(u?yr.Sort:yr.SortBy)}),y.jsxs(PX,{name:"sort",value:m,onChange:w=>{Ca.flushSync(()=>{g(w)}),i(a.current)},children:[y.jsxs(RX,{id:l,className:"cvg-typo-body-small cvg-sort-select__trigger",children:[y.jsxs("span",{className:Or({"gst-u-visually-hidden":u}),children:["",y.jsx(LX,{})]}),y.jsx(sn,{name:"chevron-down",className:"cvg-sort-select__trigger-icon"})]}),y.jsx(IX,{offset:8,placement:u?"bottom":"bottom-end",strategy:u?"fixed":"absolute",className:"cvg-sort-select__popover",minWidth:u?"calc(100vw - 32px)":"287px",padding:12,children:t.map(w=>y.jsx(AX,{label:w.name,value:w.id,className:"cvg-sort-select__option"},w.id))})]})]})]}):null}function d5({openFilter:e,setOpenFilter:t,className:n}){const r=Te(l=>l.hotelSelection.filters),i=Te(l=>l.session.hotelFilters).filter(l=>l.id!=="City"&&l.id!=="Country");return r&&r.length>0?y.jsxs(bn,{className:n,variation:"secondary",type:"button",onClick:()=>t(!e),children:[re(yr.Filter),i.length>0?` (${i.reduce((l,u)=>l+u.values.length,0)})`:null]}):null}const tle=({showMap:e,onShowMap:t,isHotelSelectionFetching:n,title:r,sortProps:i,openFilter:l,setOpenFilter:u})=>{const{error:a}=Te(m=>m.hotelSelection);return y.jsx("div",{className:"cvg-hotel-selection-header",children:n?y.jsx(Oh,{height:46,containerClassName:"cvg-hotel-selection-header__skeleton"}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"cvg-typo-heading-3 cvg-typo-heading-2--breakpoint-small",children:r}),y.jsxs("div",{className:"cvg-hotel-selection-header__actions",children:[a?null:y.jsxs(y.Fragment,{children:[y.jsx(wp,{variation:"secondary",className:"cvg-hotel-selection-header__action-map-mobile",type:"button",icon:"map",onClick:t,children:re(yr.Map)}),y.jsxs($9,{className:"cvg-hotel-selection-header__action-map-desktop",children:[y.jsx(oK,{pressed:e,onClick:t}),y.jsx(hd,{children:re(yr.ViewMap)})]})]}),y.jsx(d5,{openFilter:l,setOpenFilter:u}),y.jsx(u5,{sortOrder:i.sortOrder,sortOrders:i.sortOrders,arrivalDate:i.arrivalDate,departureDate:i.departureDate})]})]})})};function nle({hotel:e}){const{galleryPictures:t,name:n,rating:r,zipCode:i,city:l,district:u,country:a,summary:m,amenities:g,price:w,promoCode:C}=e;Te(N=>{var z;return(z=N.configuration.configurationCulture)==null?void 0:z.cultureIsRightToLeft});const P=Te(N=>N.configuration.displayConstraints.ratePriceDisplayMode),{onOpenDrawer:I}=M.useContext(rf);return y.jsxs("article",{className:"cvg-hotel-card",children:[t&&t.length>0?t.length===1?y.jsx("img",{src:t[0].picture2XUrl,className:"cvg-hotel-card__image",loading:"lazy",decoding:"async",alt:""}):y.jsx(Ag,{className:"cvg-hotel-card__image",picture2XWidth:484,picture2XHeight:272,pictures:t,galleryPicturesLength:t.length}):y.jsx("div",{className:"cvg-hotel-card__image cvg-hotel-card__image--placeholder","data-testid":"hotel-image-placeholder",children:y.jsx(sn,{name:"hotel",size:"large",className:"cvg-hotel-card__image-placeholder-icon"})}),C!=null&&C.discount?y.jsx(j_,{calculationMode:__[C.calculationMode],label:C.discount,className:"cvg-hotel-card__promotion"}):null,y.jsxs("div",{className:"cvg-hotel-card__informations",children:[y.jsxs("div",{className:"cvg-hotel-card__name-stars",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-typo-heading-2--breakpoint-small cvg-hotel-card__name",children:n}),r?y.jsxs("span",{className:"cvg-hotel-card__stars",children:[y.jsx("span",{className:"cvg-hotel-card__stars-icons",children:Array.from(Array(r)).map((N,z)=>y.jsx(sn,{name:"star",size:"small","data-testid":"star-icon"},`star-${z}`))}),y.jsxs("span",{children:[y.jsx("span",{children:r}),"",y.jsx("span",{className:"cvg-hotel-card__stars-label",children:re(r===1?yr.Star_one:yr.Star_other)})]})]}):null]}),i||l||u||a?y.jsxs("address",{className:"cvg-hotel-card__address",children:[y.jsx(sn,{name:"location-dot",size:"small"}),y.jsx("span",{children:[[i,l].filter(Boolean).join(" "),u,a].filter(N=>!!N).join(", ")})]}):null,m?y.jsx("div",{className:"cvg-typo-body-small cvg-hotel-card__summary",dangerouslySetInnerHTML:{__html:m}}):null,g&&g.length>0?y.jsxs(y.Fragment,{children:[y.jsxs("ul",{role:"list",className:"cvg-typo-body-small cvg-hotel-card__amenities","aria-label":re(yn.HotelServices),children:[g.slice(0,g.length<3?g.length:3).map((N,z,$)=>y.jsx("li",{className:Or({"cvg-hotel-card__amenity-ellipsis":$.length-1===z,"cvg-hotel-card__amenity":$.length-1!==z}),children:N},`amenity-${z}`)),g.length>3?y.jsxs("li",{className:"cvg-hotel-card__more-amenities",children:["+",g.length-3]}):null]}),g.length>0?y.jsx("div",{className:"cvg-typo-body-small cvg-hotel-card__amenities-count",children:g.length>1?re(yr.AssociatedServices,{nbAssociatedServices:g.length}):g[0]}):null]}):null,y.jsx(bn,{variation:"link",type:"button",onClick:()=>{I(e)},children:re(yr.HotelDetails)})]}),y.jsxs("footer",{className:"cvg-hotel-card__footer",children:[y.jsxs("div",{className:"cvg-hotel-card__starting-price",children:[y.jsx("span",{children:re(yr.StartingFrom)}),y.jsx("span",{className:"cvg-typo-price-1",children:w}),y.jsx("span",{className:"cvg-typo-body-tiny cvg-hotel-card__rate-per",children:re(P==="Average"?yr.RatePerNightLabel:yr.RatePerStayLabel)})]}),y.jsx(N4,{hotelId:e.id,className:"cvg-hotel-card__book-button"})]})]})}var rle={exports:{}},nC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var iD;function ile(){return iD||(iD=1,function(e,t){(function(n,r){e.exports=r()})(cc,function(){var n={},r={};function i(u,a,m){if(r[u]=m,u==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",w={};return r.shared(w),r.index(n,w),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),n}}i("shared",["exports"],function(u){function a(c,o,d,p){return new(d||(d=Promise))(function(x,T){function k(U){try{D(p.next(U))}catch(G){T(G)}}function R(U){try{D(p.throw(U))}catch(G){T(G)}}function D(U){var G;U.done?x(U.value):(G=U.value,G instanceof d?G:new d(function(K){K(G)})).then(k,R)}D((p=p.apply(c,o||[])).next())})}function m(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var g=w;function w(c,o){this.x=c,this.y=o}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,d=c.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),d=Math.sin(c),p=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=p,this},_rotateAround:function(c,o){var d=Math.cos(c),p=Math.sin(c),x=o.y+p*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-p*(this.y-o.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(c){return c instanceof w?c:Array.isArray(c)?new w(c[0],c[1]):c};var C=m(g),P=I;function I(c,o,d,p){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=p}I.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,p=0;p<8;p++){var x=this.sampleCurveX(d)-c;if(Math.abs(x)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=x/T}var k=0,R=1;for(d=c,p=0;p<20&&(x=this.sampleCurveX(d),!(Math.abs(x-c)<o));p++)c>x?k=d:R=d,d=.5*(R-k)+k;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var N=m(P);let z,$;function H(){return z==null&&(z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function V(){if($==null&&($=!1,H())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let p=0;p<5*5;p++){const x=4*p;o.fillStyle=`rgb(${x},${x+1},${x+2})`,o.fillRect(p%5,Math.floor(p/5),1,1)}const d=o.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&d[p]!==p){$=!0;break}}}return $||!1}function q(c,o,d,p){const x=new N(c,o,d,p);return T=>x.solve(T)}const te=q(.25,.1,.25,1);function ue(c,o,d){return Math.min(d,Math.max(o,c))}function fe(c,o,d){const p=d-o,x=((c-o)%p+p)%p+o;return x===o?d:x}function Z(c,...o){for(const d of o)for(const p in d)c[p]=d[p];return c}let le=1;function be(c,o,d){const p={};for(const x in c)p[x]=o.call(this,c[x],x,c);return p}function Re(c,o,d){const p={};for(const x in c)o.call(this,c[x],x,c)&&(p[x]=c[x]);return p}function Je(c){return Array.isArray(c)?c.map(Je):typeof c=="object"&&c?be(c,Je):c}const Fe={};function Xe(c){Fe[c]||(typeof console<"u"&&console.warn(c),Fe[c]=!0)}function gt(c,o,d){return(d.y-c.y)*(o.x-c.x)>(o.y-c.y)*(d.x-c.x)}function yt(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let lt=null;function Nt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _t(c,o,d,p,x){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const T=new VideoFrame(c,{timestamp:0});try{const k=T==null?void 0:T.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const R=k.startsWith("BGR"),D=new Uint8ClampedArray(p*x*4);if(yield T.copyTo(D,function(U,G,K,ee,oe){const ce=4*Math.max(-G,0),me=(Math.max(0,K)-K)*ee*4+ce,Ce=4*ee,Me=Math.max(0,G),rt=Math.max(0,K);return{rect:{x:Me,y:rt,width:Math.min(U.width,G+ee)-Me,height:Math.min(U.height,K+oe)-rt},layout:[{offset:me,stride:Ce}]}}(c,o,d,p,x)),R)for(let U=0;U<D.length;U+=4){const G=D[U];D[U]=D[U+2],D[U+2]=G}return D}finally{T.close()}})}let Ke,we;const He="AbortError";function Be(){return new Error(He)}const ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function xt(c){return ct.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const bt="global-dispatcher";class It extends Error{constructor(o,d,p,x){super(`AJAXError: ${d} (${o}): ${p}`),this.status=o,this.statusText=d,this.url=p,this.body=x}}const qt=()=>yt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,fn=function(c,o){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const p=xt(c.url);if(p)return p(c,o);if(yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:bt},o)}if(!(/^file:/.test(d=c.url)||/^file:/.test(qt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,x){return a(this,void 0,void 0,function*(){const T=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:qt(),signal:x.signal});p.type!=="json"||T.headers.has("Accept")||T.headers.set("Accept","application/json");const k=yield fetch(T);if(!k.ok){const U=yield k.blob();throw new It(k.status,k.statusText,p.url,U)}let R;R=p.type==="arrayBuffer"||p.type==="image"?k.arrayBuffer():p.type==="json"?k.json():k.text();const D=yield R;if(x.signal.aborted)throw Be();return{data:D,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}})}(c,o);if(yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:bt},o)}var d;return function(p,x){return new Promise((T,k)=>{var R;const D=new XMLHttpRequest;D.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(D.responseType="arraybuffer");for(const U in p.headers)D.setRequestHeader(U,p.headers[U]);p.type==="json"&&(D.responseType="text",!((R=p.headers)===null||R===void 0)&&R.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=p.credentials==="include",D.onerror=()=>{k(new Error(D.statusText))},D.onload=()=>{if(!x.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let U=D.response;if(p.type==="json")try{U=JSON.parse(D.response)}catch(G){return void k(G)}T({data:U,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const U=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});k(new It(D.status,D.statusText,p.url,U))}},x.signal.addEventListener("abort",()=>{D.abort(),k(Be())}),D.send(p.body)})}(c,o)};function wn(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const o=new URL(c),d=window.location;return o.protocol===d.protocol&&o.host===d.host}function an(c,o,d){d[c]&&d[c].indexOf(o)!==-1||(d[c]=d[c]||[],d[c].push(o))}function Vt(c,o,d){if(d&&d[c]){const p=d[c].indexOf(o);p!==-1&&d[c].splice(p,1)}}class Cn{constructor(o,d={}){Z(this,d),this.type=o}}class Tn extends Cn{constructor(o,d={}){super("error",Z({error:o},d))}}class Fn{on(o,d){return this._listeners=this._listeners||{},an(o,d,this._listeners),this}off(o,d){return Vt(o,d,this._listeners),Vt(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},an(o,d,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,d){typeof o=="string"&&(o=new Cn(o,d||{}));const p=o.type;if(this.listens(p)){o.target=this;const x=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const R of x)R.call(this,o);const T=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const R of T)Vt(p,R,this._oneTimeListeners),R.call(this,o);const k=this._eventedParent;k&&(Z(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(o))}else o instanceof Tn&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const zn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Le(c,o){const d={};for(const p in c)p!=="ref"&&(d[p]=c[p]);return zn.forEach(p=>{p in o&&(d[p]=o[p])}),d}function De(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let d=0;d<c.length;d++)if(!De(c[d],o[d]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const d in c)if(!De(c[d],o[d]))return!1;return!0}return c===o}function Ye(c,o){c.push(o)}function mt(c,o,d){Ye(d,{command:"addSource",args:[c,o[c]]})}function ft(c,o,d){Ye(o,{command:"removeSource",args:[c]}),d[c]=!0}function wt(c,o,d,p){ft(c,d,p),mt(c,o,d)}function Bt(c,o,d){let p;for(p in c[d])if(Object.prototype.hasOwnProperty.call(c[d],p)&&p!=="data"&&!De(c[d][p],o[d][p]))return!1;for(p in o[d])if(Object.prototype.hasOwnProperty.call(o[d],p)&&p!=="data"&&!De(c[d][p],o[d][p]))return!1;return!0}function pn(c,o,d,p,x,T){c=c||{},o=o||{};for(const k in c)Object.prototype.hasOwnProperty.call(c,k)&&(De(c[k],o[k])||d.push({command:T,args:[p,k,o[k],x]}));for(const k in o)Object.prototype.hasOwnProperty.call(o,k)&&!Object.prototype.hasOwnProperty.call(c,k)&&(De(c[k],o[k])||d.push({command:T,args:[p,k,o[k],x]}))}function nn(c){return c.id}function ln(c,o){return c[o.id]=o,c}class it{constructor(o,d,p,x){this.message=(o?`${o}: `:"")+p,x&&(this.identifier=x),d!=null&&d.__line__&&(this.line=d.__line__)}}function Mn(c,...o){for(const d of o)for(const p in d)c[p]=d[p];return c}class ar extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}class fr{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[p,x]of d)this.bindings[p]=x}concat(o){return new fr(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Xn={kind:"null"},ut={kind:"number"},vn={kind:"string"},Sn={kind:"boolean"},Gr={kind:"color"},gi={kind:"object"},Wn={kind:"value"},Ei={kind:"collator"},ls={kind:"formatted"},es={kind:"padding"},ts={kind:"resolvedImage"},Ae={kind:"variableAnchorOffsetCollection"};function se(c,o){return{kind:"array",itemType:c,N:o}}function ie(c){if(c.kind==="array"){const o=ie(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const pe=[Xn,ut,vn,Sn,Gr,ls,gi,se(Wn),es,ts,Ae];function Se(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Se(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const d of pe)if(!Se(d,o))return null}}return`Expected ${ie(c)} but found ${ie(o)} instead.`}function Ue(c,o){return o.some(d=>d.kind===c.kind)}function Ge(c,o){return o.some(d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c)}function nt(c,o){return c.kind==="array"&&o.kind==="array"?c.itemType.kind===o.itemType.kind&&typeof c.N=="number":c.kind===o.kind}const ne=.96422,ve=.82521,Ie=4/29,Ee=6/29,Ve=3*Ee*Ee,Et=Ee*Ee*Ee,At=Math.PI/180,jt=180/Math.PI;function kt(c){return(c%=360)<0&&(c+=360),c}function Ot([c,o,d,p]){let x,T;const k=In((.2225045*(c=zt(c))+.7168786*(o=zt(o))+.0606169*(d=zt(d)))/1);c===o&&o===d?x=T=k:(x=In((.4360747*c+.3850649*o+.1430804*d)/ne),T=In((.0139322*c+.0971045*o+.7141733*d)/ve));const R=116*k-16;return[R<0?0:R,500*(x-k),200*(k-T),p]}function zt(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function In(c){return c>Et?Math.pow(c,1/3):c/Ve+Ie}function Dn([c,o,d,p]){let x=(c+16)/116,T=isNaN(o)?x:x+o/500,k=isNaN(d)?x:x-d/200;return x=1*Un(x),T=ne*Un(T),k=ve*Un(k),[Nn(3.1338561*T-1.6168667*x-.4906146*k),Nn(-.9787684*T+1.9161415*x+.033454*k),Nn(.0719453*T-.2289914*x+1.4052427*k),p]}function Nn(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Un(c){return c>Ee?c*c*c:Ve*(c-Ie)}function $n(c){return parseInt(c.padEnd(2,c),16)/255}function ir(c,o){return Zr(o?c/100:c,0,1)}function Zr(c,o,d){return Math.min(Math.max(o,c),d)}function oi(c){return!c.some(Number.isNaN)}const Ci={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ur{constructor(o,d,p,x=1,T=!0){this.r=o,this.g=d,this.b=p,this.a=x,T||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[o,d,p,x]))}static parse(o){if(o instanceof ur)return o;if(typeof o!="string")return;const d=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=Ci[p];if(x){const[k,R,D]=x;return[k/255,R/255,D/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const k=p.length<6?1:2;let R=1;return[$n(p.slice(R,R+=k)),$n(p.slice(R,R+=k)),$n(p.slice(R,R+=k)),$n(p.slice(R,R+k)||"ff")]}if(p.startsWith("rgb")){const k=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[R,D,U,G,K,ee,oe,ce,me,Ce,Me,rt]=k,Ze=[G||" ",oe||" ",Ce].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const tt=[U,ee,me].join(""),pt=tt==="%%%"?100:tt===""?255:0;if(pt){const Dt=[Zr(+D/pt,0,1),Zr(+K/pt,0,1),Zr(+ce/pt,0,1),Me?ir(+Me,rt):1];if(oi(Dt))return Dt}}return}}const T=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[k,R,D,U,G,K,ee,oe,ce]=T,me=[D||" ",G||" ",ee].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Ce=[+R,Zr(+U,0,100),Zr(+K,0,100),oe?ir(+oe,ce):1];if(oi(Ce))return function([Me,rt,Ze,tt]){function pt(Dt){const on=(Dt+Me/30)%12,Vn=rt*Math.min(Ze,1-Ze);return Ze-Vn*Math.max(-1,Math.min(on-3,9-on,1))}return Me=kt(Me),rt/=100,Ze/=100,[pt(0),pt(8),pt(4),tt]}(Ce)}}}(o);return d?new ur(...d,!1):void 0}get rgb(){const{r:o,g:d,b:p,a:x}=this,T=x||1/0;return this.overwriteGetter("rgb",[o/T,d/T,p/T,x])}get hcl(){return this.overwriteGetter("hcl",function(o){const[d,p,x,T]=Ot(o),k=Math.sqrt(p*p+x*x);return[Math.round(1e4*k)?kt(Math.atan2(x,p)*jt):NaN,k,d,T]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ot(this.rgb))}overwriteGetter(o,d){return Object.defineProperty(this,o,{value:d}),d}toString(){const[o,d,p,x]=this.rgb;return`rgba(${[o,d,p].map(T=>Math.round(255*T)).join(",")},${x})`}}ur.black=new ur(0,0,0,1),ur.white=new ur(1,1,1,1),ur.transparent=new ur(0,0,0,0),ur.red=new ur(1,0,0,1);class Pa{constructor(o,d,p){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class po{constructor(o,d,p,x,T){this.text=o,this.image=d,this.scale=p,this.fontStack=x,this.textColor=T}}class Wr{constructor(o){this.sections=o}static fromString(o){return new Wr([new po(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Wr?o:Wr.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class yi{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof yi)return o;if(typeof o=="number")return new yi([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const d of o)if(typeof d!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new yi(o)}}toString(){return JSON.stringify(this.values)}}const Js=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Kn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Kn)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let d=0;d<o.length;d+=2){const p=o[d],x=o[d+1];if(typeof p!="string"||!Js.has(p)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new Kn(o)}}toString(){return JSON.stringify(this.values)}}class mr{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new mr({name:o,available:!1}):null}}function gs(c,o,d,p){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,o,d,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,o,d,p]:[c,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Mi(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof ur||c instanceof Pa||c instanceof Wr||c instanceof yi||c instanceof Kn||c instanceof mr)return!0;if(Array.isArray(c)){for(const o of c)if(!Mi(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!Mi(c[o]))return!1;return!0}return!1}function mn(c){if(c===null)return Xn;if(typeof c=="string")return vn;if(typeof c=="boolean")return Sn;if(typeof c=="number")return ut;if(c instanceof ur)return Gr;if(c instanceof Pa)return Ei;if(c instanceof Wr)return ls;if(c instanceof yi)return es;if(c instanceof Kn)return Ae;if(c instanceof mr)return ts;if(Array.isArray(c)){const o=c.length;let d;for(const p of c){const x=mn(p);if(d){if(d===x)continue;d=Wn;break}d=x}return se(d||Wn,o)}return gi}function Sr(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof ur||c instanceof Wr||c instanceof yi||c instanceof Kn||c instanceof mr?c.toString():JSON.stringify(c)}class Hi{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Mi(o[1]))return d.error("invalid value");const p=o[1];let x=mn(p);const T=d.expectedType;return x.kind!=="array"||x.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(x=T),new Hi(x,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class $r{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const mo={string:vn,number:ut,boolean:Sn,object:gi};class Ps{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let p,x=1;const T=o[0];if(T==="array"){let R,D;if(o.length>2){const U=o[1];if(typeof U!="string"||!(U in mo)||U==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);R=mo[U],x++}else R=Wn;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);D=o[2],x++}p=se(R,D)}else{if(!mo[T])throw new Error(`Types doesn't contain name = ${T}`);p=mo[T]}const k=[];for(;x<o.length;x++){const R=d.parse(o[x],x,Wn);if(!R)return null;k.push(R)}return new Ps(p,k)}evaluate(o){for(let d=0;d<this.args.length;d++){const p=this.args[d].evaluate(o);if(!Se(this.type,mn(p)))return p;if(d===this.args.length-1)throw new $r(`Expected value to be of type ${ie(this.type)}, but found ${ie(mn(p))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const lr={"to-boolean":Sn,"to-color":Gr,"to-number":ut,"to-string":vn};class Dr{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const p=o[0];if(!lr[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&o.length!==2)return d.error("Expected one argument.");const x=lr[p],T=[];for(let k=1;k<o.length;k++){const R=d.parse(o[k],k,Wn);if(!R)return null;T.push(R)}return new Dr(x,T)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let d,p;for(const x of this.args){if(d=x.evaluate(o),p=null,d instanceof ur)return d;if(typeof d=="string"){const T=o.parseColor(d);if(T)return T}else if(Array.isArray(d)&&(p=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:gs(d[0],d[1],d[2],d[3]),!p))return new ur(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new $r(p||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const p of this.args){d=p.evaluate(o);const x=yi.parse(d);if(x)return x}throw new $r(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const p of this.args){d=p.evaluate(o);const x=Kn.parse(d);if(x)return x}throw new $r(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const p of this.args){if(d=p.evaluate(o),d===null)return 0;const x=Number(d);if(!isNaN(x))return x}throw new $r(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Wr.fromString(Sr(this.args[0].evaluate(o)));case"resolvedImage":return mr.fromString(Sr(this.args[0].evaluate(o)));default:return Sr(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const yu=["Unknown","Point","LineString","Polygon"];class Yo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let d=this._parseColorCache[o];return d||(d=this._parseColorCache[o]=ur.parse(o)),d}}class Oi{constructor(o,d,p=[],x,T=new fr,k=[]){this.registry=o,this.path=p,this.key=p.map(R=>`[${R}]`).join(""),this.scope=T,this.errors=k,this.expectedType=x,this._isConstant=d}parse(o,d,p,x,T={}){return d?this.concat(d,p,x)._parse(o,T):this._parse(o,T)}_parse(o,d){function p(x,T,k){return k==="assert"?new Ps(T,[x]):k==="coerce"?new Dr(T,[x]):x}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=o[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[x];if(T){let k=T.parse(o,this);if(!k)return null;if(this.expectedType){const R=this.expectedType,D=k.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||D.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(R.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array")if(R.kind!=="variableAnchorOffsetCollection"||D.kind!=="value"&&D.kind!=="array"){if(this.checkSubtype(R,D))return null}else k=p(k,R,d.typeAnnotation||"coerce");else k=p(k,R,d.typeAnnotation||"coerce");else k=p(k,R,d.typeAnnotation||"coerce");else k=p(k,R,d.typeAnnotation||"assert")}if(!(k instanceof Hi)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const R=new Yo;try{k=new Hi(k.type,k.evaluate(R))}catch(D){return this.error(D.message),null}}return k}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,p){const x=typeof o=="number"?this.path.concat(o):this.path,T=p?this.scope.concat(p):this.scope;return new Oi(this.registry,this._isConstant,x,d||null,T,this.errors)}error(o,...d){const p=`${this.key}${d.map(x=>`[${x}]`).join("")}`;this.errors.push(new ar(p,o))}checkSubtype(o,d){const p=Se(o,d);return p&&this.error(p),p}}class Lo{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let T=1;T<o.length-1;T+=2){const k=o[T];if(typeof k!="string")return d.error(`Expected string, but found ${typeof k} instead.`,T);if(/[^a-zA-Z0-9_]/.test(k))return d.error("Variable names must contain only alphanumeric characters or '_'.",T);const R=d.parse(o[T+1],T+1);if(!R)return null;p.push([k,R])}const x=d.parse(o[o.length-1],o.length-1,d.expectedType,p);return x?new Lo(p,x):null}outputDefined(){return this.result.outputDefined()}}class vr{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const p=o[1];return d.scope.has(p)?new vr(p,d.scope.get(p)):d.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Mo{constructor(o,d,p){this.type=o,this.index=d,this.input=p}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,ut),x=d.parse(o[2],2,se(d.expectedType||Wn));return p&&x?new Mo(x.type.itemType,p,x):null}evaluate(o){const d=this.index.evaluate(o),p=this.input.evaluate(o);if(d<0)throw new $r(`Array index out of bounds: ${d} < 0.`);if(d>=p.length)throw new $r(`Array index out of bounds: ${d} > ${p.length-1}.`);if(d!==Math.floor(d))throw new $r(`Array index must be an integer, but found ${d} instead.`);return p[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Qr{constructor(o,d){this.type=Sn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Wn),x=d.parse(o[2],2,Wn);return p&&x?Ue(p.type,[Sn,vn,ut,Xn,Wn])?new Qr(p,x):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(p.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!Ge(d,["boolean","string","number","null"]))throw new $r(`Expected first argument to be of type boolean, string, number or null, but found ${ie(mn(d))} instead.`);if(!Ge(p,["string","array"]))throw new $r(`Expected second argument to be of type array or string, but found ${ie(mn(p))} instead.`);return p.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class As{constructor(o,d,p){this.type=ut,this.needle=o,this.haystack=d,this.fromIndex=p}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Wn),x=d.parse(o[2],2,Wn);if(!p||!x)return null;if(!Ue(p.type,[Sn,vn,ut,Xn,Wn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(p.type)} instead`);if(o.length===4){const T=d.parse(o[3],3,ut);return T?new As(p,x,T):null}return new As(p,x)}evaluate(o){const d=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!Ge(d,["boolean","string","number","null"]))throw new $r(`Expected first argument to be of type boolean, string, number or null, but found ${ie(mn(d))} instead.`);let x;if(this.fromIndex&&(x=this.fromIndex.evaluate(o)),Ge(p,["string"])){const T=p.indexOf(d,x);return T===-1?-1:[...p.slice(0,T)].length}if(Ge(p,["array"]))return p.indexOf(d,x);throw new $r(`Expected second argument to be of type array or string, but found ${ie(mn(p))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Aa{constructor(o,d,p,x,T,k){this.inputType=o,this.type=d,this.input=p,this.cases=x,this.outputs=T,this.otherwise=k}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let p,x;d.expectedType&&d.expectedType.kind!=="value"&&(x=d.expectedType);const T={},k=[];for(let U=2;U<o.length-1;U+=2){let G=o[U];const K=o[U+1];Array.isArray(G)||(G=[G]);const ee=d.concat(U);if(G.length===0)return ee.error("Expected at least one branch label.");for(const ce of G){if(typeof ce!="number"&&typeof ce!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return ee.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ce=="number"&&Math.floor(ce)!==ce)return ee.error("Numeric branch labels must be integer values.");if(p){if(ee.checkSubtype(p,mn(ce)))return null}else p=mn(ce);if(T[String(ce)]!==void 0)return ee.error("Branch labels must be unique.");T[String(ce)]=k.length}const oe=d.parse(K,U,x);if(!oe)return null;x=x||oe.type,k.push(oe)}const R=d.parse(o[1],1,Wn);if(!R)return null;const D=d.parse(o[o.length-1],o.length-1,x);return D?R.type.kind!=="value"&&d.concat(1).checkSubtype(p,R.type)?null:new Aa(p,x,R,T,k,D):null}evaluate(o){const d=this.input.evaluate(o);return(mn(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Qo{constructor(o,d,p){this.type=o,this.branches=d,this.otherwise=p}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let p;d.expectedType&&d.expectedType.kind!=="value"&&(p=d.expectedType);const x=[];for(let k=1;k<o.length-1;k+=2){const R=d.parse(o[k],k,Sn);if(!R)return null;const D=d.parse(o[k+1],k+1,p);if(!D)return null;x.push([R,D]),p=p||D.type}const T=d.parse(o[o.length-1],o.length-1,p);if(!T)return null;if(!p)throw new Error("Can't infer output type");return new Qo(p,x,T)}evaluate(o){for(const[d,p]of this.branches)if(d.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,p]of this.branches)o(d),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Ia{constructor(o,d,p,x){this.type=o,this.input=d,this.beginIndex=p,this.endIndex=x}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Wn),x=d.parse(o[2],2,ut);if(!p||!x)return null;if(!Ue(p.type,[se(Wn),vn,Wn]))return d.error(`Expected first argument to be of type array or string, but found ${ie(p.type)} instead`);if(o.length===4){const T=d.parse(o[3],3,ut);return T?new Ia(p.type,p,x,T):null}return new Ia(p.type,p,x)}evaluate(o){const d=this.input.evaluate(o),p=this.beginIndex.evaluate(o);let x;if(this.endIndex&&(x=this.endIndex.evaluate(o)),Ge(d,["string"]))return[...d].slice(p,x).join("");if(Ge(d,["array"]))return d.slice(p,x);throw new $r(`Expected first argument to be of type array or string, but found ${ie(mn(d))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Oo(c,o){const d=c.length-1;let p,x,T=0,k=d,R=0;for(;T<=k;)if(R=Math.floor((T+k)/2),p=c[R],x=c[R+1],p<=o){if(R===d||o<x)return R;T=R+1}else{if(!(p>o))throw new $r("Input is not a number.");k=R-1}return 0}class Do{constructor(o,d,p){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[x,T]of p)this.labels.push(x),this.outputs.push(T)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const p=d.parse(o[1],1,ut);if(!p)return null;const x=[];let T=null;d.expectedType&&d.expectedType.kind!=="value"&&(T=d.expectedType);for(let k=1;k<o.length;k+=2){const R=k===1?-1/0:o[k],D=o[k+1],U=k,G=k+1;if(typeof R!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(x.length&&x[x.length-1][0]>=R)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const K=d.parse(D,G,T);if(!K)return null;T=T||K.type,x.push([R,K])}return new Do(T,p,x)}evaluate(o){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(o);const x=this.input.evaluate(o);if(x<=d[0])return p[0].evaluate(o);const T=d.length;return x>=d[T-1]?p[T-1].evaluate(o):p[Oo(d,x)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Ra(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Sc=Ll;function Ll(c,o,d,p){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=p}Ll.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,p=0;p<8;p++){var x=this.sampleCurveX(d)-c;if(Math.abs(x)<o)return d;var T=this.sampleCurveDerivativeX(d);if(Math.abs(T)<1e-6)break;d-=x/T}var k=0,R=1;for(d=c,p=0;p<20&&(x=this.sampleCurveX(d),!(Math.abs(x-c)<o));p++)c>x?k=d:R=d,d=.5*(R-k)+k;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var Ec=Ra(Sc);function cs(c,o,d){return c+d*(o-c)}function sl(c,o,d){return c.map((p,x)=>cs(p,o[x],d))}const ns={number:cs,color:function(c,o,d,p="rgb"){switch(p){case"rgb":{const[x,T,k,R]=sl(c.rgb,o.rgb,d);return new ur(x,T,k,R,!1)}case"hcl":{const[x,T,k,R]=c.hcl,[D,U,G,K]=o.hcl;let ee,oe;if(isNaN(x)||isNaN(D))isNaN(x)?isNaN(D)?ee=NaN:(ee=D,k!==1&&k!==0||(oe=U)):(ee=x,G!==1&&G!==0||(oe=T));else{let rt=D-x;D>x&&rt>180?rt-=360:D<x&&x-D>180&&(rt+=360),ee=x+d*rt}const[ce,me,Ce,Me]=function([rt,Ze,tt,pt]){return rt=isNaN(rt)?0:rt*At,Dn([tt,Math.cos(rt)*Ze,Math.sin(rt)*Ze,pt])}([ee,oe??cs(T,U,d),cs(k,G,d),cs(R,K,d)]);return new ur(ce,me,Ce,Me,!1)}case"lab":{const[x,T,k,R]=Dn(sl(c.lab,o.lab,d));return new ur(x,T,k,R,!1)}}},array:sl,padding:function(c,o,d){return new yi(sl(c.values,o.values,d))},variableAnchorOffsetCollection:function(c,o,d){const p=c.values,x=o.values;if(p.length!==x.length)throw new $r(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${o.toString()}`);const T=[];for(let k=0;k<p.length;k+=2){if(p[k]!==x[k])throw new $r(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${p[k]}, to[${k}]: ${x[k]}`);T.push(p[k]);const[R,D]=p[k+1],[U,G]=x[k+1];T.push([cs(R,U,d),cs(D,G,d)])}return new Kn(T)}};class rs{constructor(o,d,p,x,T){this.type=o,this.operator=d,this.interpolation=p,this.input=x,this.labels=[],this.outputs=[];for(const[k,R]of T)this.labels.push(k),this.outputs.push(R)}static interpolationFactor(o,d,p,x){let T=0;if(o.name==="exponential")T=nr(d,o.base,p,x);else if(o.name==="linear")T=nr(d,1,p,x);else if(o.name==="cubic-bezier"){const k=o.controlPoints;T=new Ec(k[0],k[1],k[2],k[3]).solve(nr(d,1,p,x))}return T}static parse(o,d){let[p,x,T,...k]=o;if(!Array.isArray(x)||x.length===0)return d.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const U=x[1];if(typeof U!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:U}}else{if(x[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const U=x.slice(1);if(U.length!==4||U.some(G=>typeof G!="number"||G<0||G>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:U}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(T=d.parse(T,2,ut),!T)return null;const R=[];let D=null;p==="interpolate-hcl"||p==="interpolate-lab"?D=Gr:d.expectedType&&d.expectedType.kind!=="value"&&(D=d.expectedType);for(let U=0;U<k.length;U+=2){const G=k[U],K=k[U+1],ee=U+3,oe=U+4;if(typeof G!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(R.length&&R[R.length-1][0]>=G)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);const ce=d.parse(K,oe,D);if(!ce)return null;D=D||ce.type,R.push([G,ce])}return nt(D,ut)||nt(D,Gr)||nt(D,es)||nt(D,Ae)||nt(D,se(ut))?new rs(D,p,x,T,R):d.error(`Type ${ie(D)} is not interpolatable.`)}evaluate(o){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(o);const x=this.input.evaluate(o);if(x<=d[0])return p[0].evaluate(o);const T=d.length;if(x>=d[T-1])return p[T-1].evaluate(o);const k=Oo(d,x),R=rs.interpolationFactor(this.interpolation,x,d[k],d[k+1]),D=p[k].evaluate(o),U=p[k+1].evaluate(o);switch(this.operator){case"interpolate":return ns[this.type.kind](D,U,R);case"interpolate-hcl":return ns.color(D,U,R,"hcl");case"interpolate-lab":return ns.color(D,U,R,"lab")}}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function nr(c,o,d,p){const x=p-d,T=c-d;return x===0?0:o===1?T/x:(Math.pow(o,T)-1)/(Math.pow(o,x)-1)}class Is{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let p=null;const x=d.expectedType;x&&x.kind!=="value"&&(p=x);const T=[];for(const R of o.slice(1)){const D=d.parse(R,1+T.length,p,void 0,{typeAnnotation:"omit"});if(!D)return null;p=p||D.type,T.push(D)}if(!p)throw new Error("No output type");const k=x&&T.some(R=>Se(x,R.type));return new Is(k?Wn:p,T)}evaluate(o){let d,p=null,x=0;for(const T of this.args)if(x++,p=T.evaluate(o),p&&p instanceof mr&&!p.available&&(d||(d=p.name),p=null,x===this.args.length&&(p=d)),p!==null)break;return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function jr(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Ml(c,o,d,p){return p.compare(o,d)===0}function Jo(c,o,d){const p=c!=="=="&&c!=="!=";return class h5{constructor(T,k,R){this.type=Sn,this.lhs=T,this.rhs=k,this.collator=R,this.hasUntypedArgument=T.type.kind==="value"||k.type.kind==="value"}static parse(T,k){if(T.length!==3&&T.length!==4)return k.error("Expected two or three arguments.");const R=T[0];let D=k.parse(T[1],1,Wn);if(!D)return null;if(!jr(R,D.type))return k.concat(1).error(`"${R}" comparisons are not supported for type '${ie(D.type)}'.`);let U=k.parse(T[2],2,Wn);if(!U)return null;if(!jr(R,U.type))return k.concat(2).error(`"${R}" comparisons are not supported for type '${ie(U.type)}'.`);if(D.type.kind!==U.type.kind&&D.type.kind!=="value"&&U.type.kind!=="value")return k.error(`Cannot compare types '${ie(D.type)}' and '${ie(U.type)}'.`);p&&(D.type.kind==="value"&&U.type.kind!=="value"?D=new Ps(U.type,[D]):D.type.kind!=="value"&&U.type.kind==="value"&&(U=new Ps(D.type,[U])));let G=null;if(T.length===4){if(D.type.kind!=="string"&&U.type.kind!=="string"&&D.type.kind!=="value"&&U.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(G=k.parse(T[3],3,Ei),!G)return null}return new h5(D,U,G)}evaluate(T){const k=this.lhs.evaluate(T),R=this.rhs.evaluate(T);if(p&&this.hasUntypedArgument){const D=mn(k),U=mn(R);if(D.kind!==U.kind||D.kind!=="string"&&D.kind!=="number")throw new $r(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${U.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const D=mn(k),U=mn(R);if(D.kind!=="string"||U.kind!=="string")return o(T,k,R)}return this.collator?d(T,k,R,this.collator.evaluate(T)):o(T,k,R)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const vu=Jo("==",function(c,o,d){return o===d},Ml),go=Jo("!=",function(c,o,d){return o!==d},function(c,o,d,p){return!Ml(0,o,d,p)}),ea=Jo("<",function(c,o,d){return o<d},function(c,o,d,p){return p.compare(o,d)<0}),_u=Jo(">",function(c,o,d){return o>d},function(c,o,d,p){return p.compare(o,d)>0}),Ol=Jo("<=",function(c,o,d){return o<=d},function(c,o,d,p){return p.compare(o,d)<=0}),Di=Jo(">=",function(c,o,d){return o>=d},function(c,o,d,p){return p.compare(o,d)>=0});class Xr{constructor(o,d,p){this.type=Ei,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return d.error("Collator options argument must be an object.");const x=d.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,Sn);if(!x)return null;const T=d.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,Sn);if(!T)return null;let k=null;return p.locale&&(k=d.parse(p.locale,1,vn),!k)?null:new Xr(x,T,k)}evaluate(o){return new Pa(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Y{constructor(o,d,p,x,T){this.type=vn,this.number=o,this.locale=d,this.currency=p,this.minFractionDigits=x,this.maxFractionDigits=T}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const p=d.parse(o[1],1,ut);if(!p)return null;const x=o[2];if(typeof x!="object"||Array.isArray(x))return d.error("NumberFormat options argument must be an object.");let T=null;if(x.locale&&(T=d.parse(x.locale,1,vn),!T))return null;let k=null;if(x.currency&&(k=d.parse(x.currency,1,vn),!k))return null;let R=null;if(x["min-fraction-digits"]&&(R=d.parse(x["min-fraction-digits"],1,ut),!R))return null;let D=null;return x["max-fraction-digits"]&&(D=d.parse(x["max-fraction-digits"],1,ut),!D)?null:new Y(p,T,k,R,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class he{constructor(o){this.type=ls,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return d.error("First argument must be an image or text section.");const x=[];let T=!1;for(let k=1;k<=o.length-1;++k){const R=o[k];if(T&&typeof R=="object"&&!Array.isArray(R)){T=!1;let D=null;if(R["font-scale"]&&(D=d.parse(R["font-scale"],1,ut),!D))return null;let U=null;if(R["text-font"]&&(U=d.parse(R["text-font"],1,se(vn)),!U))return null;let G=null;if(R["text-color"]&&(G=d.parse(R["text-color"],1,Gr),!G))return null;const K=x[x.length-1];K.scale=D,K.font=U,K.textColor=G}else{const D=d.parse(o[k],1,Wn);if(!D)return null;const U=D.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,x.push({content:D,scale:null,font:null,textColor:null})}}return new he(x)}evaluate(o){return new Wr(this.sections.map(d=>{const p=d.content.evaluate(o);return mn(p)===ts?new po("",p,null,null,null):new po(Sr(p),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)}))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}}class _e{constructor(o){this.type=ts,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const p=d.parse(o[1],1,vn);return p?new _e(p):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),p=mr.fromString(d);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(d)>-1),p}eachChild(o){o(this.input)}outputDefined(){return!1}}class ge{constructor(o){this.type=ut,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=d.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ie(p.type)} instead.`):new ge(p):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new $r(`Expected value to be of type string or array, but found ${ie(mn(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const ze=8192;function st(c,o){const d=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,x=Math.pow(2,o.z);return[Math.round(d*x*ze),Math.round(p*x*ze)]}function dt(c,o){const d=Math.pow(2,o.z);return[(x=(c[0]/ze+o.x)/d,360*x-180),(p=(c[1]/ze+o.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,x}function vt(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ct(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function Rt(c,o,d){const p=c[0]-o[0],x=c[1]-o[1],T=c[0]-d[0],k=c[1]-d[1];return p*k-T*x==0&&p*T<=0&&x*k<=0}function Jt(c,o,d,p){return(x=[p[0]-d[0],p[1]-d[1]])[0]*(T=[o[0]-c[0],o[1]-c[1]])[1]-x[1]*T[0]!=0&&!(!Zn(c,o,d,p)||!Zn(d,p,c,o));var x,T}function Bn(c,o,d){for(const p of d)for(let x=0;x<p.length-1;++x)if(Jt(c,o,p[x],p[x+1]))return!0;return!1}function Wt(c,o,d=!1){let p=!1;for(const R of o)for(let D=0;D<R.length-1;D++){if(Rt(c,R[D],R[D+1]))return d;(T=R[D])[1]>(x=c)[1]!=(k=R[D+1])[1]>x[1]&&x[0]<(k[0]-T[0])*(x[1]-T[1])/(k[1]-T[1])+T[0]&&(p=!p)}var x,T,k;return p}function rr(c,o){for(const d of o)if(Wt(c,d))return!0;return!1}function Tr(c,o){for(const d of c)if(!Wt(d,o))return!1;for(let d=0;d<c.length-1;++d)if(Bn(c[d],c[d+1],o))return!1;return!0}function ai(c,o){for(const d of o)if(Tr(c,d))return!0;return!1}function Zn(c,o,d,p){const x=p[0]-d[0],T=p[1]-d[1],k=(c[0]-d[0])*T-x*(c[1]-d[1]),R=(o[0]-d[0])*T-x*(o[1]-d[1]);return k>0&&R<0||k<0&&R>0}function gr(c,o,d){const p=[];for(let x=0;x<c.length;x++){const T=[];for(let k=0;k<c[x].length;k++){const R=st(c[x][k],d);vt(o,R),T.push(R)}p.push(T)}return p}function vi(c,o,d){const p=[];for(let x=0;x<c.length;x++){const T=gr(c[x],o,d);p.push(T)}return p}function Ti(c,o,d,p){if(c[0]<d[0]||c[0]>d[2]){const x=.5*p;let T=c[0]-d[0]>x?-p:d[0]-c[0]>x?p:0;T===0&&(T=c[0]-d[2]>x?-p:d[2]-c[0]>x?p:0),c[0]+=T}vt(o,c)}function Jr(c,o,d,p){const x=Math.pow(2,p.z)*ze,T=[p.x*ze,p.y*ze],k=[];for(const R of c)for(const D of R){const U=[D.x+T[0],D.y+T[1]];Ti(U,o,d,x),k.push(U)}return k}function is(c,o,d,p){const x=Math.pow(2,p.z)*ze,T=[p.x*ze,p.y*ze],k=[];for(const D of c){const U=[];for(const G of D){const K=[G.x+T[0],G.y+T[1]];vt(o,K),U.push(K)}k.push(U)}if(o[2]-o[0]<=x/2){(R=o)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const D of k)for(const U of D)Ti(U,o,d,x)}var R;return k}class zs{constructor(o,d){this.type=Sn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Mi(o[1])){const p=o[1];if(p.type==="FeatureCollection"){const x=[];for(const T of p.features){const{type:k,coordinates:R}=T.geometry;k==="Polygon"&&x.push(R),k==="MultiPolygon"&&x.push(...R)}if(x.length)return new zs(p,{type:"MultiPolygon",coordinates:x})}else if(p.type==="Feature"){const x=p.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new zs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new zs(p,p)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,p){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(p.type==="Polygon"){const R=gr(p.coordinates,T,k),D=Jr(d.geometry(),x,T,k);if(!Ct(x,T))return!1;for(const U of D)if(!Wt(U,R))return!1}if(p.type==="MultiPolygon"){const R=vi(p.coordinates,T,k),D=Jr(d.geometry(),x,T,k);if(!Ct(x,T))return!1;for(const U of D)if(!rr(U,R))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,p){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=d.canonicalID();if(p.type==="Polygon"){const R=gr(p.coordinates,T,k),D=is(d.geometry(),x,T,k);if(!Ct(x,T))return!1;for(const U of D)if(!Tr(U,R))return!1}if(p.type==="MultiPolygon"){const R=vi(p.coordinates,T,k),D=is(d.geometry(),x,T,k);if(!Ct(x,T))return!1;for(const U of D)if(!ai(U,R))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let eo=class{constructor(c=[],o=(d,p)=>d<p?-1:d>p?1:0){if(this.data=c,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:o,compare:d}=this,p=o[c];for(;c>0;){const x=c-1>>1,T=o[x];if(d(p,T)>=0)break;o[c]=T,c=x}o[c]=p}_down(c){const{data:o,compare:d}=this,p=this.length>>1,x=o[c];for(;c<p;){let T=1+(c<<1);const k=T+1;if(k<this.length&&d(o[k],o[T])<0&&(T=k),d(o[T],x)>=0)break;o[c]=o[T],c=T}o[c]=x}};function bd(c,o,d,p,x){sf(c,o,d,p||c.length-1,x||Og)}function sf(c,o,d,p,x){for(;p>d;){if(p-d>600){var T=p-d+1,k=o-d+1,R=Math.log(T),D=.5*Math.exp(2*R/3),U=.5*Math.sqrt(R*D*(T-D)/T)*(k-T/2<0?-1:1);sf(c,o,Math.max(d,Math.floor(o-k*D/T+U)),Math.min(p,Math.floor(o+(T-k)*D/T+U)),x)}var G=c[o],K=d,ee=p;for(Dl(c,d,o),x(c[p],G)>0&&Dl(c,d,p);K<ee;){for(Dl(c,K,ee),K++,ee--;x(c[K],G)<0;)K++;for(;x(c[ee],G)>0;)ee--}x(c[d],G)===0?Dl(c,d,ee):Dl(c,++ee,p),ee<=o&&(d=ee+1),o<=ee&&(p=ee-1)}}function Dl(c,o,d){var p=c[o];c[o]=c[d],c[d]=p}function Og(c,o){return c<o?-1:c>o?1:0}function xu(c,o){if(c.length<=1)return[c];const d=[];let p,x;for(const T of c){const k=Dg(T);k!==0&&(T.area=Math.abs(k),x===void 0&&(x=k<0),x===k<0?(p&&d.push(p),p=[T]):p.push(T))}if(p&&d.push(p),o>1)for(let T=0;T<d.length;T++)d[T].length<=o||(bd(d[T],o,1,d[T].length-1,Op),d[T]=d[T].slice(0,o));return d}function Op(c,o){return o.area-c.area}function Dg(c){let o=0;for(let d,p,x=0,T=c.length,k=T-1;x<T;k=x++)d=c[x],p=c[k],o+=(p.x-d.x)*(d.y+p.y);return o}const Dp=1/298.257223563,wd=Dp*(2-Dp),Np=Math.PI/180;class Sd{constructor(o){const d=6378.137*Np*1e3,p=Math.cos(o*Np),x=1/(1-wd*(1-p*p)),T=Math.sqrt(x);this.kx=d*T*p,this.ky=d*T*x*(1-wd)}distance(o,d){const p=this.wrap(o[0]-d[0])*this.kx,x=(o[1]-d[1])*this.ky;return Math.sqrt(p*p+x*x)}pointOnLine(o,d){let p,x,T,k,R=1/0;for(let D=0;D<o.length-1;D++){let U=o[D][0],G=o[D][1],K=this.wrap(o[D+1][0]-U)*this.kx,ee=(o[D+1][1]-G)*this.ky,oe=0;K===0&&ee===0||(oe=(this.wrap(d[0]-U)*this.kx*K+(d[1]-G)*this.ky*ee)/(K*K+ee*ee),oe>1?(U=o[D+1][0],G=o[D+1][1]):oe>0&&(U+=K/this.kx*oe,G+=ee/this.ky*oe)),K=this.wrap(d[0]-U)*this.kx,ee=(d[1]-G)*this.ky;const ce=K*K+ee*ee;ce<R&&(R=ce,p=U,x=G,T=D,k=oe)}return{point:[p,x],index:T,t:Math.max(0,Math.min(1,k))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function of(c,o){return o[0]-c[0]}function Nl(c){return c[1]-c[0]+1}function Rs(c,o){return c[1]>=c[0]&&c[1]<o}function af(c,o){if(c[0]>c[1])return[null,null];const d=Nl(c);if(o){if(d===2)return[c,null];const x=Math.floor(d/2);return[[c[0],c[0]+x],[c[0]+x,c[1]]]}if(d===1)return[c,null];const p=Math.floor(d/2)-1;return[[c[0],c[0]+p],[c[0]+p+1,c[1]]]}function jl(c,o){if(!Rs(o,c.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let p=o[0];p<=o[1];++p)vt(d,c[p]);return d}function Fs(c){const o=[1/0,1/0,-1/0,-1/0];for(const d of c)for(const p of d)vt(o,p);return o}function bu(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Ed(c,o,d){if(!bu(c)||!bu(o))return NaN;let p=0,x=0;return c[2]<o[0]&&(p=o[0]-c[2]),c[0]>o[2]&&(p=c[0]-o[2]),c[1]>o[3]&&(x=c[1]-o[3]),c[3]<o[1]&&(x=o[1]-c[3]),d.distance([0,0],[p,x])}function zl(c,o,d){const p=d.pointOnLine(o,c);return d.distance(c,p.point)}function wu(c,o,d,p,x){const T=Math.min(zl(c,[d,p],x),zl(o,[d,p],x)),k=Math.min(zl(d,[c,o],x),zl(p,[c,o],x));return Math.min(T,k)}function lf(c,o,d,p,x){if(!Rs(o,c.length)||!Rs(p,d.length))return 1/0;let T=1/0;for(let k=o[0];k<o[1];++k){const R=c[k],D=c[k+1];for(let U=p[0];U<p[1];++U){const G=d[U],K=d[U+1];if(Jt(R,D,G,K))return 0;T=Math.min(T,wu(R,D,G,K,x))}}return T}function _i(c,o,d,p,x){if(!Rs(o,c.length)||!Rs(p,d.length))return NaN;let T=1/0;for(let k=o[0];k<=o[1];++k)for(let R=p[0];R<=p[1];++R)if(T=Math.min(T,x.distance(c[k],d[R])),T===0)return T;return T}function Ng(c,o,d){if(Wt(c,o,!0))return 0;let p=1/0;for(const x of o){const T=x[0],k=x[x.length-1];if(T!==k&&(p=Math.min(p,zl(c,[k,T],d)),p===0))return p;const R=d.pointOnLine(x,c);if(p=Math.min(p,d.distance(c,R.point)),p===0)return p}return p}function dr(c,o,d,p){if(!Rs(o,c.length))return NaN;for(let T=o[0];T<=o[1];++T)if(Wt(c[T],d,!0))return 0;let x=1/0;for(let T=o[0];T<o[1];++T){const k=c[T],R=c[T+1];for(const D of d)for(let U=0,G=D.length,K=G-1;U<G;K=U++){const ee=D[K],oe=D[U];if(Jt(k,R,ee,oe))return 0;x=Math.min(x,wu(k,R,ee,oe,p))}}return x}function Cd(c,o){for(const d of c)for(const p of d)if(Wt(p,o,!0))return!0;return!1}function Er(c,o,d,p=1/0){const x=Fs(c),T=Fs(o);if(p!==1/0&&Ed(x,T,d)>=p)return p;if(Ct(x,T)){if(Cd(c,o))return 0}else if(Cd(o,c))return 0;let k=1/0;for(const R of c)for(let D=0,U=R.length,G=U-1;D<U;G=D++){const K=R[G],ee=R[D];for(const oe of o)for(let ce=0,me=oe.length,Ce=me-1;ce<me;Ce=ce++){const Me=oe[Ce],rt=oe[ce];if(Jt(K,ee,Me,rt))return 0;k=Math.min(k,wu(K,ee,Me,rt,d))}}return k}function Lr(c,o,d,p,x,T){if(!T)return;const k=Ed(jl(p,T),x,d);k<o&&c.push([k,T,[0,0]])}function Fl(c,o,d,p,x,T,k){if(!T||!k)return;const R=Ed(jl(p,T),jl(x,k),d);R<o&&c.push([R,T,k])}function to(c,o,d,p,x=1/0){let T=Math.min(p.distance(c[0],d[0][0]),x);if(T===0)return T;const k=new eo([[0,[0,c.length-1],[0,0]]],of),R=Fs(d);for(;k.length>0;){const D=k.pop();if(D[0]>=T)continue;const U=D[1],G=o?50:100;if(Nl(U)<=G){if(!Rs(U,c.length))return NaN;if(o){const K=dr(c,U,d,p);if(isNaN(K)||K===0)return K;T=Math.min(T,K)}else for(let K=U[0];K<=U[1];++K){const ee=Ng(c[K],d,p);if(T=Math.min(T,ee),T===0)return 0}}else{const K=af(U,o);Lr(k,T,p,c,R,K[0]),Lr(k,T,p,c,R,K[1])}}return T}function Su(c,o,d,p,x,T=1/0){let k=Math.min(T,x.distance(c[0],d[0]));if(k===0)return k;const R=new eo([[0,[0,c.length-1],[0,d.length-1]]],of);for(;R.length>0;){const D=R.pop();if(D[0]>=k)continue;const U=D[1],G=D[2],K=o?50:100,ee=p?50:100;if(Nl(U)<=K&&Nl(G)<=ee){if(!Rs(U,c.length)&&Rs(G,d.length))return NaN;let oe;if(o&&p)oe=lf(c,U,d,G,x),k=Math.min(k,oe);else if(o&&!p){const ce=c.slice(U[0],U[1]+1);for(let me=G[0];me<=G[1];++me)if(oe=zl(d[me],ce,x),k=Math.min(k,oe),k===0)return k}else if(!o&&p){const ce=d.slice(G[0],G[1]+1);for(let me=U[0];me<=U[1];++me)if(oe=zl(c[me],ce,x),k=Math.min(k,oe),k===0)return k}else oe=_i(c,U,d,G,x),k=Math.min(k,oe)}else{const oe=af(U,o),ce=af(G,p);Fl(R,k,x,c,d,oe[0],ce[0]),Fl(R,k,x,c,d,oe[0],ce[1]),Fl(R,k,x,c,d,oe[1],ce[0]),Fl(R,k,x,c,d,oe[1],ce[1])}}return k}function ol(c){return c.type==="MultiPolygon"?c.coordinates.map(o=>({type:"Polygon",coordinates:o})):c.type==="MultiLineString"?c.coordinates.map(o=>({type:"LineString",coordinates:o})):c.type==="MultiPoint"?c.coordinates.map(o=>({type:"Point",coordinates:o})):[c]}class Bl{constructor(o,d){this.type=ut,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Mi(o[1])){const p=o[1];if(p.type==="FeatureCollection")return new Bl(p,p.features.map(x=>ol(x.geometry)).flat());if(p.type==="Feature")return new Bl(p,ol(p.geometry));if("type"in p&&"coordinates"in p)return new Bl(p,ol(p))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,p){const x=d.geometry(),T=x.flat().map(D=>dt([D.x,D.y],d.canonical));if(x.length===0)return NaN;const k=new Sd(T[0][1]);let R=1/0;for(const D of p){switch(D.type){case"Point":R=Math.min(R,Su(T,!1,[D.coordinates],!1,k,R));break;case"LineString":R=Math.min(R,Su(T,!1,D.coordinates,!0,k,R));break;case"Polygon":R=Math.min(R,to(T,!1,D.coordinates,k,R))}if(R===0)return R}return R}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,p){const x=d.geometry(),T=x.flat().map(D=>dt([D.x,D.y],d.canonical));if(x.length===0)return NaN;const k=new Sd(T[0][1]);let R=1/0;for(const D of p){switch(D.type){case"Point":R=Math.min(R,Su(T,!0,[D.coordinates],!1,k,R));break;case"LineString":R=Math.min(R,Su(T,!0,D.coordinates,!0,k,R));break;case"Polygon":R=Math.min(R,to(T,!0,D.coordinates,k,R))}if(R===0)return R}return R}(o,this.geometries);if(o.geometryType()==="Polygon")return function(d,p){const x=d.geometry();if(x.length===0||x[0].length===0)return NaN;const T=xu(x,0).map(D=>D.map(U=>U.map(G=>dt([G.x,G.y],d.canonical)))),k=new Sd(T[0][0][0][1]);let R=1/0;for(const D of p)for(const U of T){switch(D.type){case"Point":R=Math.min(R,to([D.coordinates],!1,U,k,R));break;case"LineString":R=Math.min(R,to(D.coordinates,!0,U,k,R));break;case"Polygon":R=Math.min(R,Er(U,D.coordinates,k,R))}if(R===0)return R}return R}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ta={"==":vu,"!=":go,">":_u,"<":ea,">=":Di,"<=":Ol,array:Ps,at:Mo,boolean:Ps,case:Qo,coalesce:Is,collator:Xr,format:he,image:_e,in:Qr,"index-of":As,interpolate:rs,"interpolate-hcl":rs,"interpolate-lab":rs,length:ge,let:Lo,literal:Hi,match:Aa,number:Ps,"number-format":Y,object:Ps,slice:Ia,step:Do,string:Ps,"to-boolean":Dr,"to-color":Dr,"to-number":Dr,"to-string":Dr,var:vr,within:zs,distance:Bl};class no{constructor(o,d,p,x){this.name=o,this.type=d,this._evaluate=p,this.args=x}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,d){const p=o[0],x=no.definitions[p];if(!x)return d.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(x)?x[0]:x.type,k=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,R=k.filter(([U])=>!Array.isArray(U)||U.length===o.length-1);let D=null;for(const[U,G]of R){D=new Oi(d.registry,Eu,d.path,null,d.scope);const K=[];let ee=!1;for(let oe=1;oe<o.length;oe++){const ce=o[oe],me=Array.isArray(U)?U[oe-1]:U.type,Ce=D.parse(ce,1+K.length,me);if(!Ce){ee=!0;break}K.push(Ce)}if(!ee)if(Array.isArray(U)&&U.length!==K.length)D.error(`Expected ${U.length} arguments, but found ${K.length} instead.`);else{for(let oe=0;oe<K.length;oe++){const ce=Array.isArray(U)?U[oe]:U.type,me=K[oe];D.concat(oe+1).checkSubtype(ce,me.type)}if(D.errors.length===0)return new no(p,T,G,K)}}if(R.length===1)d.errors.push(...D.errors);else{const U=(R.length?R:k).map(([K])=>{return ee=K,Array.isArray(ee)?`(${ee.map(ie).join(", ")})`:`(${ie(ee.type)}...)`;var ee}).join(" | "),G=[];for(let K=1;K<o.length;K++){const ee=d.parse(o[K],1+G.length);if(!ee)return null;G.push(ie(ee.type))}d.error(`Expected arguments of type ${U}, but found (${G.join(", ")}) instead.`)}return null}static register(o,d){no.definitions=d;for(const p in d)o[p]=no}}function Cc(c,[o,d,p,x]){o=o.evaluate(c),d=d.evaluate(c),p=p.evaluate(c);const T=x?x.evaluate(c):1,k=gs(o,d,p,T);if(k)throw new $r(k);return new ur(o/255,d/255,p/255,T,!1)}function cf(c,o){return c in o}function na(c,o){const d=o[c];return d===void 0?null:d}function ra(c){return{type:c}}function Eu(c){if(c instanceof vr)return Eu(c.boundExpression);if(c instanceof no&&c.name==="error"||c instanceof Xr||c instanceof zs||c instanceof Bl)return!1;const o=c instanceof Dr||c instanceof Ps;let d=!0;return c.eachChild(p=>{d=o?d&&Eu(p):d&&p instanceof Hi}),!!d&&Ul(c)&&ro(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ul(c){if(c instanceof no&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof zs||c instanceof Bl)return!1;let o=!0;return c.eachChild(d=>{o&&!Ul(d)&&(o=!1)}),o}function Tc(c){if(c instanceof no&&c.name==="feature-state")return!1;let o=!0;return c.eachChild(d=>{o&&!Tc(d)&&(o=!1)}),o}function ro(c,o){if(c instanceof no&&o.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild(p=>{d&&!ro(p,o)&&(d=!1)}),d}function Td(c){return{result:"success",value:c}}function No(c){return{result:"error",value:c}}function kc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function ia(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Pc(c){return!!c.expression&&c.expression.interpolated}function Rr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ac(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function kd(c){return c}function Pd(c,o){const d=o.type==="color",p=c.stops&&typeof c.stops[0][0]=="object",x=p||!(p||c.property!==void 0),T=c.type||(Pc(o)?"exponential":"interval");if(d||o.type==="padding"){const G=d?ur.parse:yi.parse;(c=Mn({},c)).stops&&(c.stops=c.stops.map(K=>[K[0],G(K[1])])),c.default=G(c.default?c.default:o.default)}if(c.colorSpace&&(k=c.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var k;let R,D,U;if(T==="exponential")R=Ad;else if(T==="interval")R=Vl;else if(T==="categorical"){R=$l,D=Object.create(null);for(const G of c.stops)D[G[0]]=G[1];U=typeof c.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);R=uf}if(p){const G={},K=[];for(let ce=0;ce<c.stops.length;ce++){const me=c.stops[ce],Ce=me[0].zoom;G[Ce]===void 0&&(G[Ce]={zoom:Ce,type:c.type,property:c.property,default:c.default,stops:[]},K.push(Ce)),G[Ce].stops.push([me[0].value,me[1]])}const ee=[];for(const ce of K)ee.push([G[ce].zoom,Pd(G[ce],o)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:rs.interpolationFactor.bind(void 0,oe),zoomStops:ee.map(ce=>ce[0]),evaluate:({zoom:ce},me)=>Ad({stops:ee,base:c.base},o,ce).evaluate(ce,me)}}if(x){const G=T==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:rs.interpolationFactor.bind(void 0,G),zoomStops:c.stops.map(K=>K[0]),evaluate:({zoom:K})=>R(c,o,K,D,U)}}return{kind:"source",evaluate(G,K){const ee=K&&K.properties?K.properties[c.property]:void 0;return ee===void 0?La(c.default,o.default):R(c,o,ee,D,U)}}}function La(c,o,d){return c!==void 0?c:o!==void 0?o:d!==void 0?d:void 0}function $l(c,o,d,p,x){return La(typeof d===x?p[d]:void 0,c.default,o.default)}function Vl(c,o,d){if(Rr(d)!=="number")return La(c.default,o.default);const p=c.stops.length;if(p===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[p-1][0])return c.stops[p-1][1];const x=Oo(c.stops.map(T=>T[0]),d);return c.stops[x][1]}function Ad(c,o,d){const p=c.base!==void 0?c.base:1;if(Rr(d)!=="number")return La(c.default,o.default);const x=c.stops.length;if(x===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[x-1][0])return c.stops[x-1][1];const T=Oo(c.stops.map(G=>G[0]),d),k=function(G,K,ee,oe){const ce=oe-ee,me=G-ee;return ce===0?0:K===1?me/ce:(Math.pow(K,me)-1)/(Math.pow(K,ce)-1)}(d,p,c.stops[T][0],c.stops[T+1][0]),R=c.stops[T][1],D=c.stops[T+1][1],U=ns[o.type]||kd;return typeof R.evaluate=="function"?{evaluate(...G){const K=R.evaluate.apply(void 0,G),ee=D.evaluate.apply(void 0,G);if(K!==void 0&&ee!==void 0)return U(K,ee,k,c.colorSpace)}}:U(R,D,k,c.colorSpace)}function uf(c,o,d){switch(o.type){case"color":d=ur.parse(d);break;case"formatted":d=Wr.fromString(d.toString());break;case"resolvedImage":d=mr.fromString(d.toString());break;case"padding":d=yi.parse(d);break;default:Rr(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0)}return La(d,c.default,o.default)}no.register(ta,{error:[{kind:"error"},[vn],(c,[o])=>{throw new $r(o.evaluate(c))}],typeof:[vn,[Wn],(c,[o])=>ie(mn(o.evaluate(c)))],"to-rgba":[se(ut,4),[Gr],(c,[o])=>{const[d,p,x,T]=o.evaluate(c).rgb;return[255*d,255*p,255*x,T]}],rgb:[Gr,[ut,ut,ut],Cc],rgba:[Gr,[ut,ut,ut,ut],Cc],has:{type:Sn,overloads:[[[vn],(c,[o])=>cf(o.evaluate(c),c.properties())],[[vn,gi],(c,[o,d])=>cf(o.evaluate(c),d.evaluate(c))]]},get:{type:Wn,overloads:[[[vn],(c,[o])=>na(o.evaluate(c),c.properties())],[[vn,gi],(c,[o,d])=>na(o.evaluate(c),d.evaluate(c))]]},"feature-state":[Wn,[vn],(c,[o])=>na(o.evaluate(c),c.featureState||{})],properties:[gi,[],c=>c.properties()],"geometry-type":[vn,[],c=>c.geometryType()],id:[Wn,[],c=>c.id()],zoom:[ut,[],c=>c.globals.zoom],"heatmap-density":[ut,[],c=>c.globals.heatmapDensity||0],"line-progress":[ut,[],c=>c.globals.lineProgress||0],accumulated:[Wn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ut,ra(ut),(c,o)=>{let d=0;for(const p of o)d+=p.evaluate(c);return d}],"*":[ut,ra(ut),(c,o)=>{let d=1;for(const p of o)d*=p.evaluate(c);return d}],"-":{type:ut,overloads:[[[ut,ut],(c,[o,d])=>o.evaluate(c)-d.evaluate(c)],[[ut],(c,[o])=>-o.evaluate(c)]]},"/":[ut,[ut,ut],(c,[o,d])=>o.evaluate(c)/d.evaluate(c)],"%":[ut,[ut,ut],(c,[o,d])=>o.evaluate(c)%d.evaluate(c)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(c,[o,d])=>Math.pow(o.evaluate(c),d.evaluate(c))],sqrt:[ut,[ut],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[ut,[ut],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[ut,[ut],(c,[o])=>Math.log(o.evaluate(c))],log2:[ut,[ut],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[ut,[ut],(c,[o])=>Math.sin(o.evaluate(c))],cos:[ut,[ut],(c,[o])=>Math.cos(o.evaluate(c))],tan:[ut,[ut],(c,[o])=>Math.tan(o.evaluate(c))],asin:[ut,[ut],(c,[o])=>Math.asin(o.evaluate(c))],acos:[ut,[ut],(c,[o])=>Math.acos(o.evaluate(c))],atan:[ut,[ut],(c,[o])=>Math.atan(o.evaluate(c))],min:[ut,ra(ut),(c,o)=>Math.min(...o.map(d=>d.evaluate(c)))],max:[ut,ra(ut),(c,o)=>Math.max(...o.map(d=>d.evaluate(c)))],abs:[ut,[ut],(c,[o])=>Math.abs(o.evaluate(c))],round:[ut,[ut],(c,[o])=>{const d=o.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[ut,[ut],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[ut,[ut],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Sn,[vn,Wn],(c,[o,d])=>c.properties()[o.value]===d.value],"filter-id-==":[Sn,[Wn],(c,[o])=>c.id()===o.value],"filter-type-==":[Sn,[vn],(c,[o])=>c.geometryType()===o.value],"filter-<":[Sn,[vn,Wn],(c,[o,d])=>{const p=c.properties()[o.value],x=d.value;return typeof p==typeof x&&p<x}],"filter-id-<":[Sn,[Wn],(c,[o])=>{const d=c.id(),p=o.value;return typeof d==typeof p&&d<p}],"filter->":[Sn,[vn,Wn],(c,[o,d])=>{const p=c.properties()[o.value],x=d.value;return typeof p==typeof x&&p>x}],"filter-id->":[Sn,[Wn],(c,[o])=>{const d=c.id(),p=o.value;return typeof d==typeof p&&d>p}],"filter-<=":[Sn,[vn,Wn],(c,[o,d])=>{const p=c.properties()[o.value],x=d.value;return typeof p==typeof x&&p<=x}],"filter-id-<=":[Sn,[Wn],(c,[o])=>{const d=c.id(),p=o.value;return typeof d==typeof p&&d<=p}],"filter->=":[Sn,[vn,Wn],(c,[o,d])=>{const p=c.properties()[o.value],x=d.value;return typeof p==typeof x&&p>=x}],"filter-id->=":[Sn,[Wn],(c,[o])=>{const d=c.id(),p=o.value;return typeof d==typeof p&&d>=p}],"filter-has":[Sn,[Wn],(c,[o])=>o.value in c.properties()],"filter-has-id":[Sn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Sn,[se(vn)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Sn,[se(Wn)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Sn,[vn,se(Wn)],(c,[o,d])=>d.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Sn,[vn,se(Wn)],(c,[o,d])=>function(p,x,T,k){for(;T<=k;){const R=T+k>>1;if(x[R]===p)return!0;x[R]>p?k=R-1:T=R+1}return!1}(c.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Sn,overloads:[[[Sn,Sn],(c,[o,d])=>o.evaluate(c)&&d.evaluate(c)],[ra(Sn),(c,o)=>{for(const d of o)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Sn,overloads:[[[Sn,Sn],(c,[o,d])=>o.evaluate(c)||d.evaluate(c)],[ra(Sn),(c,o)=>{for(const d of o)if(d.evaluate(c))return!0;return!1}]]},"!":[Sn,[Sn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Sn,[vn],(c,[o])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(o.evaluate(c))}],upcase:[vn,[vn],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[vn,[vn],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[vn,ra(Wn),(c,o)=>o.map(d=>Sr(d.evaluate(c))).join("")],"resolved-locale":[vn,[Ei],(c,[o])=>o.evaluate(c).resolvedLocale()]});class Id{constructor(o,d){var p;this.expression=o,this._warningHistory={},this._evaluator=new Yo,this._defaultValue=d?(p=d).type==="color"&&Ac(p.default)?new ur(0,0,0,0):p.type==="color"?ur.parse(p.default)||null:p.type==="padding"?yi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?Kn.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,p,x,T,k){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=p,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(o,d,p,x,T,k){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=p||null,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new $r(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function Hl(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in ta}function Ic(c,o){const d=new Oi(ta,Eu,[],o?function(x){const T={color:Gr,string:vn,number:ut,enum:vn,boolean:Sn,formatted:ls,padding:es,resolvedImage:ts,variableAnchorOffsetCollection:Ae};return x.type==="array"?se(T[x.value]||Wn,x.length):T[x.type]}(o):void 0),p=d.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Td(new Id(p,o)):No(d.errors)}class Zl{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!Tc(d.expression)}evaluateWithoutErrorHandling(o,d,p,x,T,k){return this._styleExpression.evaluateWithoutErrorHandling(o,d,p,x,T,k)}evaluate(o,d,p,x,T,k){return this._styleExpression.evaluate(o,d,p,x,T,k)}}class Rc{constructor(o,d,p,x){this.kind=o,this.zoomStops=p,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!Tc(d.expression),this.interpolationType=x}evaluateWithoutErrorHandling(o,d,p,x,T,k){return this._styleExpression.evaluateWithoutErrorHandling(o,d,p,x,T,k)}evaluate(o,d,p,x,T,k){return this._styleExpression.evaluate(o,d,p,x,T,k)}interpolationFactor(o,d,p){return this.interpolationType?rs.interpolationFactor(this.interpolationType,o,d,p):0}}function Rd(c,o){const d=Ic(c,o);if(d.result==="error")return d;const p=d.value.expression,x=Ul(p);if(!x&&!kc(o))return No([new ar("","data expressions not supported")]);const T=ro(p,["zoom"]);if(!T&&!ia(o))return No([new ar("","zoom expressions not supported")]);const k=Bs(p);return k||T?k instanceof ar?No([k]):k instanceof rs&&!Pc(o)?No([new ar("",'"interpolate" expressions cannot be used with this property')]):Td(k?new Rc(x?"camera":"composite",d.value,k.labels,k instanceof rs?k.interpolation:void 0):new Zl(x?"constant":"source",d.value)):No([new ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Lc{constructor(o,d){this._parameters=o,this._specification=d,Mn(this,Pd(this._parameters,this._specification))}static deserialize(o){return new Lc(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Bs(c){let o=null;if(c instanceof Lo)o=Bs(c.result);else if(c instanceof Is){for(const d of c.args)if(o=Bs(d),o)break}else(c instanceof Do||c instanceof rs)&&c.input instanceof no&&c.input.name==="zoom"&&(o=c);return o instanceof ar||c.eachChild(d=>{const p=Bs(d);p instanceof ar?o=p:!o&&p?o=new ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&p&&o!==p&&(o=new ar("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function ql(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!ql(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Ld={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mc(c){if(c==null)return{filter:()=>!0,needGeometry:!1};ql(c)||(c=Md(c));const o=Ic(c,Ld);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,p,x)=>o.value.evaluate(d,p,{},x),needGeometry:df(c)}}function jg(c,o){return c<o?-1:c>o?1:0}function df(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let o=1;o<c.length;o++)if(df(c[o]))return!0;return!1}function Md(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Gl(c[1],c[2],"=="):o==="!="?us(Gl(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Gl(c[1],c[2],o):o==="any"?(d=c.slice(1),["any"].concat(d.map(Md))):o==="all"?["all"].concat(c.slice(1).map(Md)):o==="none"?["all"].concat(c.slice(1).map(Md).map(us)):o==="in"?Cu(c[1],c.slice(2)):o==="!in"?us(Cu(c[1],c.slice(2))):o==="has"?sa(c[1]):o!=="!has"||us(sa(c[1]));var d}function Gl(c,o,d){switch(c){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,c,o]}}function Cu(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(d=>typeof d!=typeof o[0])?["filter-in-large",c,["literal",o.sort(jg)]]:["filter-in-small",c,["literal",o]]}}function sa(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function us(c){return["!",c]}function al(c){const o=typeof c;if(o==="number"||o==="boolean"||o==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let x="[";for(const T of c)x+=`${al(T)},`;return`${x}]`}const d=Object.keys(c).sort();let p="{";for(let x=0;x<d.length;x++)p+=`${JSON.stringify(d[x])}:${al(c[d[x]])},`;return`${p}}`}function jp(c){let o="";for(const d of zn)o+=`/${al(c[d])}`;return o}function oa(c){const o=c.value;return o?[new it(c.key,o,"constants have been deprecated as of v8")]:[]}function pi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function yo(c){if(Array.isArray(c))return c.map(yo);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const d in c)o[d]=yo(c[d]);return o}return pi(c)}function ds(c){const o=c.key,d=c.value,p=c.valueSpec||{},x=c.objectElementValidators||{},T=c.style,k=c.styleSpec,R=c.validateSpec;let D=[];const U=Rr(d);if(U!=="object")return[new it(o,d,`object expected, ${U} found`)];for(const G in d){const K=G.split(".")[0],ee=p[K]||p["*"];let oe;if(x[K])oe=x[K];else if(p[K])oe=R;else if(x["*"])oe=x["*"];else{if(!p["*"]){D.push(new it(o,d[G],`unknown property "${G}"`));continue}oe=R}D=D.concat(oe({key:(o&&`${o}.`)+G,value:d[G],valueSpec:ee,style:T,styleSpec:k,object:d,objectKey:G,validateSpec:R},d))}for(const G in p)x[G]||p[G].required&&p[G].default===void 0&&d[G]===void 0&&D.push(new it(o,d,`missing required property "${G}"`));return D}function Tu(c){const o=c.value,d=c.valueSpec,p=c.style,x=c.styleSpec,T=c.key,k=c.arrayElementValidator||c.validateSpec;if(Rr(o)!=="array")return[new it(T,o,`array expected, ${Rr(o)} found`)];if(d.length&&o.length!==d.length)return[new it(T,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new it(T,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let R={type:d.value,values:d.values};x.$version<7&&(R.function=d.function),Rr(d.value)==="object"&&(R=d.value);let D=[];for(let U=0;U<o.length;U++)D=D.concat(k({array:o,arrayIndex:U,value:o[U],valueSpec:R,validateSpec:c.validateSpec,style:p,styleSpec:x,key:`${T}[${U}]`}));return D}function Oc(c){const o=c.key,d=c.value,p=c.valueSpec;let x=Rr(d);return x==="number"&&d!=d&&(x="NaN"),x!=="number"?[new it(o,d,`number expected, ${x} found`)]:"minimum"in p&&d<p.minimum?[new it(o,d,`${d} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&d>p.maximum?[new it(o,d,`${d} is greater than the maximum value ${p.maximum}`)]:[]}function ll(c){const o=c.valueSpec,d=pi(c.value.type);let p,x,T,k={};const R=d!=="categorical"&&c.value.property===void 0,D=!R,U=Rr(c.value.stops)==="array"&&Rr(c.value.stops[0])==="array"&&Rr(c.value.stops[0][0])==="object",G=ds({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(oe){if(d==="identity")return[new it(oe.key,oe.value,'identity function may not have a "stops" property')];let ce=[];const me=oe.value;return ce=ce.concat(Tu({key:oe.key,value:me,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:K})),Rr(me)==="array"&&me.length===0&&ce.push(new it(oe.key,me,"array must have at least one stop")),ce},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:o,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return d==="identity"&&R&&G.push(new it(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||G.push(new it(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Pc(c.valueSpec)&&G.push(new it(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(D&&!kc(c.valueSpec)?G.push(new it(c.key,c.value,"property functions not supported")):R&&!ia(c.valueSpec)&&G.push(new it(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!U||c.value.property!==void 0||G.push(new it(c.key,c.value,'"property" property is required')),G;function K(oe){let ce=[];const me=oe.value,Ce=oe.key;if(Rr(me)!=="array")return[new it(Ce,me,`array expected, ${Rr(me)} found`)];if(me.length!==2)return[new it(Ce,me,`array length 2 expected, length ${me.length} found`)];if(U){if(Rr(me[0])!=="object")return[new it(Ce,me,`object expected, ${Rr(me[0])} found`)];if(me[0].zoom===void 0)return[new it(Ce,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new it(Ce,me,"object stop key must have value")];if(T&&T>pi(me[0].zoom))return[new it(Ce,me[0].zoom,"stop zoom values must appear in ascending order")];pi(me[0].zoom)!==T&&(T=pi(me[0].zoom),x=void 0,k={}),ce=ce.concat(ds({key:`${Ce}[0]`,value:me[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:Oc,value:ee}}))}else ce=ce.concat(ee({key:`${Ce}[0]`,value:me[0],validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},me));return Hl(yo(me[1]))?ce.concat([new it(`${Ce}[1]`,me[1],"expressions are not allowed in function stops.")]):ce.concat(oe.validateSpec({key:`${Ce}[1]`,value:me[1],valueSpec:o,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function ee(oe,ce){const me=Rr(oe.value),Ce=pi(oe.value),Me=oe.value!==null?oe.value:ce;if(p){if(me!==p)return[new it(oe.key,Me,`${me} stop domain type must match previous stop domain type ${p}`)]}else p=me;if(me!=="number"&&me!=="string"&&me!=="boolean")return[new it(oe.key,Me,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&d!=="categorical"){let rt=`number expected, ${me} found`;return kc(o)&&d===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(oe.key,Me,rt)]}return d!=="categorical"||me!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?d!=="categorical"&&me==="number"&&x!==void 0&&Ce<x?[new it(oe.key,Me,"stop domain values must appear in ascending order")]:(x=Ce,d==="categorical"&&Ce in k?[new it(oe.key,Me,"stop domain values must be unique")]:(k[Ce]=!0,[])):[new it(oe.key,Me,`integer expected, found ${Ce}`)]}}function Wl(c){const o=(c.expressionContext==="property"?Rd:Ic)(yo(c.value),c.valueSpec);if(o.result==="error")return o.value.map(p=>new it(`${c.key}${p.key}`,c.value,p.message));const d=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new it(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Tc(d))return[new it(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Tc(d))return[new it(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!ro(d,["zoom","feature-state"]))return[new it(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ul(d))return[new it(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function aa(c){const o=c.key,d=c.value,p=c.valueSpec,x=[];return Array.isArray(p.values)?p.values.indexOf(pi(d))===-1&&x.push(new it(o,d,`expected one of [${p.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(p.values).indexOf(pi(d))===-1&&x.push(new it(o,d,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(d)} found`)),x}function hf(c){return ql(yo(c.value))?Wl(Mn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ku(c)}function ku(c){const o=c.value,d=c.key;if(Rr(o)!=="array")return[new it(d,o,`array expected, ${Rr(o)} found`)];const p=c.styleSpec;let x,T=[];if(o.length<1)return[new it(d,o,"filter array must have at least 1 element")];switch(T=T.concat(aa({key:`${d}[0]`,value:o[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),pi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&pi(o[1])==="$type"&&T.push(new it(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&T.push(new it(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(x=Rr(o[1]),x!=="string"&&T.push(new it(`${d}[1]`,o[1],`string expected, ${x} found`)));for(let k=2;k<o.length;k++)x=Rr(o[k]),pi(o[1])==="$type"?T=T.concat(aa({key:`${d}[${k}]`,value:o[k],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&T.push(new it(`${d}[${k}]`,o[k],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let k=1;k<o.length;k++)T=T.concat(ku({key:`${d}[${k}]`,value:o[k],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":x=Rr(o[1]),o.length!==2?T.push(new it(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):x!=="string"&&T.push(new it(`${d}[1]`,o[1],`string expected, ${x} found`))}return T}function Od(c,o){const d=c.key,p=c.validateSpec,x=c.style,T=c.styleSpec,k=c.value,R=c.objectKey,D=T[`${o}_${c.layerType}`];if(!D)return[];const U=R.match(/^(.*)-transition$/);if(o==="paint"&&U&&D[U[1]]&&D[U[1]].transition)return p({key:d,value:k,valueSpec:T.transition,style:x,styleSpec:T});const G=c.valueSpec||D[R];if(!G)return[new it(d,k,`unknown property "${R}"`)];let K;if(Rr(k)==="string"&&kc(G)&&!G.tokens&&(K=/^{([^}]+)}$/.exec(k)))return[new it(d,k,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const ee=[];return c.layerType==="symbol"&&(R==="text-field"&&x&&!x.glyphs&&ee.push(new it(d,k,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&Ac(yo(k))&&pi(k.type)==="identity"&&ee.push(new it(d,k,'"text-font" does not support identity functions'))),ee.concat(p({key:c.key,value:k,valueSpec:G,style:x,styleSpec:T,expressionContext:"property",propertyType:o,propertyKey:R}))}function Pu(c){return Od(c,"paint")}function Dd(c){return Od(c,"layout")}function Nd(c){let o=[];const d=c.value,p=c.key,x=c.style,T=c.styleSpec;d.type||d.ref||o.push(new it(p,d,'either "type" or "ref" is required'));let k=pi(d.type);const R=pi(d.ref);if(d.id){const D=pi(d.id);for(let U=0;U<c.arrayIndex;U++){const G=x.layers[U];pi(G.id)===D&&o.push(new it(p,d.id,`duplicate layer id "${d.id}", previously used at line ${G.id.__line__}`))}}if("ref"in d){let D;["type","source","source-layer","filter","layout"].forEach(U=>{U in d&&o.push(new it(p,d[U],`"${U}" is prohibited for ref layers`))}),x.layers.forEach(U=>{pi(U.id)===R&&(D=U)}),D?D.ref?o.push(new it(p,d.ref,"ref cannot reference another ref layer")):k=pi(D.type):o.push(new it(p,d.ref,`ref layer "${R}" not found`))}else if(k!=="background")if(d.source){const D=x.sources&&x.sources[d.source],U=D&&pi(D.type);D?U==="vector"&&k==="raster"?o.push(new it(p,d.source,`layer "${d.id}" requires a raster source`)):U!=="raster-dem"&&k==="hillshade"?o.push(new it(p,d.source,`layer "${d.id}" requires a raster-dem source`)):U==="raster"&&k!=="raster"?o.push(new it(p,d.source,`layer "${d.id}" requires a vector source`)):U!=="vector"||d["source-layer"]?U==="raster-dem"&&k!=="hillshade"?o.push(new it(p,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!d.paint||!d.paint["line-gradient"]||U==="geojson"&&D.lineMetrics||o.push(new it(p,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new it(p,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new it(p,d.source,`source "${d.source}" not found`))}else o.push(new it(p,d,'missing required property "source"'));return o=o.concat(ds({key:p,value:d,valueSpec:T.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:d.type,valueSpec:T.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:d,objectKey:"type"}),filter:hf,layout:D=>ds({layer:d,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":U=>Dd(Mn({layerType:k},U))}}),paint:D=>ds({layer:d,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":U=>Pu(Mn({layerType:k},U))}})}})),o}function Xl(c){const o=c.value,d=c.key,p=Rr(o);return p!=="string"?[new it(d,o,`string expected, ${p} found`)]:[]}const Au={promoteId:function({key:c,value:o}){if(Rr(o)==="string")return Xl({key:c,value:o});{const d=[];for(const p in o)d.push(...Xl({key:`${c}.${p}`,value:o[p]}));return d}}};function Dc(c){const o=c.value,d=c.key,p=c.styleSpec,x=c.style,T=c.validateSpec;if(!o.type)return[new it(d,o,'"type" is required')];const k=pi(o.type);let R;switch(k){case"vector":case"raster":return R=ds({key:d,value:o,valueSpec:p[`source_${k.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:Au,validateSpec:T}),R;case"raster-dem":return R=function(D){var U;const G=(U=D.sourceName)!==null&&U!==void 0?U:"",K=D.value,ee=D.styleSpec,oe=ee.source_raster_dem,ce=D.style;let me=[];const Ce=Rr(K);if(K===void 0)return me;if(Ce!=="object")return me.push(new it("source_raster_dem",K,`object expected, ${Ce} found`)),me;const Me=pi(K.encoding)==="custom",rt=["redFactor","greenFactor","blueFactor","baseShift"],Ze=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const tt in K)!Me&&rt.includes(tt)?me.push(new it(tt,K[tt],`In "${G}": "${tt}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):oe[tt]?me=me.concat(D.validateSpec({key:tt,value:K[tt],valueSpec:oe[tt],validateSpec:D.validateSpec,style:ce,styleSpec:ee})):me.push(new it(tt,K[tt],`unknown property "${tt}"`));return me}({sourceName:d,value:o,style:c.style,styleSpec:p,validateSpec:T}),R;case"geojson":if(R=ds({key:d,value:o,valueSpec:p.source_geojson,style:x,styleSpec:p,validateSpec:T,objectElementValidators:Au}),o.cluster)for(const D in o.clusterProperties){const[U,G]=o.clusterProperties[D],K=typeof U=="string"?[U,["accumulated"],["get",D]]:U;R.push(...Wl({key:`${d}.${D}.map`,value:G,expressionContext:"cluster-map"})),R.push(...Wl({key:`${d}.${D}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return R;case"video":return ds({key:d,value:o,valueSpec:p.source_video,style:x,validateSpec:T,styleSpec:p});case"image":return ds({key:d,value:o,valueSpec:p.source_image,style:x,validateSpec:T,styleSpec:p});case"canvas":return[new it(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return aa({key:`${d}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ff(c){const o=c.value,d=c.styleSpec,p=d.light,x=c.style;let T=[];const k=Rr(o);if(o===void 0)return T;if(k!=="object")return T=T.concat([new it("light",o,`object expected, ${k} found`)]),T;for(const R in o){const D=R.match(/^(.*)-transition$/);T=T.concat(D&&p[D[1]]&&p[D[1]].transition?c.validateSpec({key:R,value:o[R],valueSpec:d.transition,validateSpec:c.validateSpec,style:x,styleSpec:d}):p[R]?c.validateSpec({key:R,value:o[R],valueSpec:p[R],validateSpec:c.validateSpec,style:x,styleSpec:d}):[new it(R,o[R],`unknown property "${R}"`)])}return T}function h(c){const o=c.value,d=c.styleSpec,p=d.sky,x=c.style,T=Rr(o);if(o===void 0)return[];if(T!=="object")return[new it("sky",o,`object expected, ${T} found`)];let k=[];for(const R in o)k=k.concat(p[R]?c.validateSpec({key:R,value:o[R],valueSpec:p[R],style:x,styleSpec:d}):[new it(R,o[R],`unknown property "${R}"`)]);return k}function b(c){const o=c.value,d=c.styleSpec,p=d.terrain,x=c.style;let T=[];const k=Rr(o);if(o===void 0)return T;if(k!=="object")return T=T.concat([new it("terrain",o,`object expected, ${k} found`)]),T;for(const R in o)T=T.concat(p[R]?c.validateSpec({key:R,value:o[R],valueSpec:p[R],validateSpec:c.validateSpec,style:x,styleSpec:d}):[new it(R,o[R],`unknown property "${R}"`)]);return T}function A(c){let o=[];const d=c.value,p=c.key;if(Array.isArray(d)){const x=[],T=[];for(const k in d)d[k].id&&x.includes(d[k].id)&&o.push(new it(p,d,`all the sprites' ids must be unique, but ${d[k].id} is duplicated`)),x.push(d[k].id),d[k].url&&T.includes(d[k].url)&&o.push(new it(p,d,`all the sprites' URLs must be unique, but ${d[k].url} is duplicated`)),T.push(d[k].url),o=o.concat(ds({key:`${p}[${k}]`,value:d[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return o}return Xl({key:p,value:d})}const F={"*":()=>[],array:Tu,boolean:function(c){const o=c.value,d=c.key,p=Rr(o);return p!=="boolean"?[new it(d,o,`boolean expected, ${p} found`)]:[]},number:Oc,color:function(c){const o=c.key,d=c.value,p=Rr(d);return p!=="string"?[new it(o,d,`color expected, ${p} found`)]:ur.parse(String(d))?[]:[new it(o,d,`color expected, "${d}" found`)]},constants:oa,enum:aa,filter:hf,function:ll,layer:Nd,object:ds,source:Dc,light:ff,sky:h,terrain:b,projection:function(c){const o=c.value,d=c.styleSpec,p=d.projection,x=c.style,T=Rr(o);if(o===void 0)return[];if(T!=="object")return[new it("projection",o,`object expected, ${T} found`)];let k=[];for(const R in o)k=k.concat(p[R]?c.validateSpec({key:R,value:o[R],valueSpec:p[R],style:x,styleSpec:d}):[new it(R,o[R],`unknown property "${R}"`)]);return k},string:Xl,formatted:function(c){return Xl(c).length===0?[]:Wl(c)},resolvedImage:function(c){return Xl(c).length===0?[]:Wl(c)},padding:function(c){const o=c.key,d=c.value;if(Rr(d)==="array"){if(d.length<1||d.length>4)return[new it(o,d,`padding requires 1 to 4 values; ${d.length} values found`)];const p={type:"number"};let x=[];for(let T=0;T<d.length;T++)x=x.concat(c.validateSpec({key:`${o}[${T}]`,value:d[T],validateSpec:c.validateSpec,valueSpec:p}));return x}return Oc({key:o,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const o=c.key,d=c.value,p=Rr(d),x=c.styleSpec;if(p!=="array"||d.length<1||d.length%2!=0)return[new it(o,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let T=[];for(let k=0;k<d.length;k+=2)T=T.concat(aa({key:`${o}[${k}]`,value:d[k],valueSpec:x.layout_symbol["text-anchor"]})),T=T.concat(Tu({key:`${o}[${k+1}]`,value:d[k+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:x}));return T},sprite:A};function X(c){const o=c.value,d=c.valueSpec,p=c.styleSpec;return c.validateSpec=X,d.expression&&Ac(pi(o))?ll(c):d.expression&&Hl(yo(o))?Wl(c):d.type&&F[d.type]?F[d.type](c):ds(Mn({},c,{valueSpec:d.type?p[d.type]:d}))}function de(c){const o=c.value,d=c.key,p=Xl(c);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new it(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new it(d,o,'"glyphs" url must include a "{range}" token'))),p}function je(c,o=Qe){let d=[];return d=d.concat(X({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,validateSpec:X,objectElementValidators:{glyphs:de,"*":()=>[]}})),c.constants&&(d=d.concat(oa({key:"constants",value:c.constants}))),ht(d)}function ot(c){return function(o){return c({...o,validateSpec:X})}}function ht(c){return[].concat(c).sort((o,d)=>o.line-d.line)}function Pt(c){return function(...o){return ht(c.apply(this,o))}}je.source=Pt(ot(Dc)),je.sprite=Pt(ot(A)),je.glyphs=Pt(ot(de)),je.light=Pt(ot(ff)),je.sky=Pt(ot(h)),je.terrain=Pt(ot(b)),je.layer=Pt(ot(Nd)),je.filter=Pt(ot(hf)),je.paintProperty=Pt(ot(Pu)),je.layoutProperty=Pt(ot(Dd));const cn=je,er=cn.light,br=cn.sky,ys=cn.paintProperty,Zi=cn.layoutProperty;function Us(c,o){let d=!1;if(o&&o.length)for(const p of o)c.fire(new Tn(new Error(p.message))),d=!0;return d}class qi{constructor(o,d,p){const x=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const k=new Int32Array(this.arrayBuffer);o=k[0],this.d=(d=k[1])+2*(p=k[2]);for(let D=0;D<this.d*this.d;D++){const U=k[3+D],G=k[3+D+1];x.push(U===G?null:k.subarray(U,G))}const R=k[3+x.length+1];this.keys=k.subarray(k[3+x.length],R),this.bboxes=k.subarray(R),this.insert=this._insertReadonly}else{this.d=d+2*p;for(let k=0;k<this.d*this.d;k++)x.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=o,this.padding=p,this.scale=d/o,this.uid=0;const T=p/d*o;this.min=-T,this.max=o+T}insert(o,d,p,x,T){this._forEachCell(d,p,x,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(x),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,d,p,x,T,k){this.cells[T].push(k)}query(o,d,p,x,T){const k=this.min,R=this.max;if(o<=k&&d<=k&&R<=p&&R<=x&&!T)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(o,d,p,x,this._queryCell,D,{},T),D}}_queryCell(o,d,p,x,T,k,R,D){const U=this.cells[T];if(U!==null){const G=this.keys,K=this.bboxes;for(let ee=0;ee<U.length;ee++){const oe=U[ee];if(R[oe]===void 0){const ce=4*oe;(D?D(K[ce+0],K[ce+1],K[ce+2],K[ce+3]):o<=K[ce+2]&&d<=K[ce+3]&&p>=K[ce+0]&&x>=K[ce+1])?(R[oe]=!0,k.push(G[oe])):R[oe]=!1}}}}_forEachCell(o,d,p,x,T,k,R,D){const U=this._convertToCellCoord(o),G=this._convertToCellCoord(d),K=this._convertToCellCoord(p),ee=this._convertToCellCoord(x);for(let oe=U;oe<=K;oe++)for(let ce=G;ce<=ee;ce++){const me=this.d*ce+oe;if((!D||D(this._convertFromCellCoord(oe),this._convertFromCellCoord(ce),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(ce+1)))&&T.call(this,o,d,p,x,me,k,R,D))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,d=3+this.cells.length+1+1;let p=0;for(let k=0;k<this.cells.length;k++)p+=this.cells[k].length;const x=new Int32Array(d+p+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let T=d;for(let k=0;k<o.length;k++){const R=o[k];x[3+k]=T,x.set(R,T),T+=R.length}return x[3+o.length]=T,x.set(this.keys,T),T+=this.keys.length,x[3+o.length+1]=T,x.set(this.bboxes,T),T+=this.bboxes.length,x.buffer}static serialize(o,d){const p=o.toArrayBuffer();return d&&d.push(p),{buffer:p}}static deserialize(o){return new qi(o.buffer)}}const hs={};function hn(c,o,d={}){if(hs[c])throw new Error(`${c} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:c,writeable:!1}),hs[c]={klass:o,omit:d.omit||[],shallow:d.shallow||[]}}hn("Object",Object),hn("TransferableGridIndex",qi),hn("Color",ur),hn("Error",Error),hn("AJAXError",It),hn("ResolvedImage",mr),hn("StylePropertyFunction",Lc),hn("StyleExpression",Id,{omit:["_evaluator"]}),hn("ZoomDependentExpression",Rc),hn("ZoomConstantExpression",Zl),hn("CompoundExpression",no,{omit:["_evaluate"]});for(const c in ta)ta[c]._classRegistryKey||hn(`Expression_${c}`,ta[c]);function jd(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function pf(c){return c.$name||c.constructor._classRegistryKey}function mf(c){return!function(o){if(o===null||typeof o!="object")return!1;const d=pf(o);return!(!d||d==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||jd(c)||Nt(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Nc(c,o){if(mf(c))return(jd(c)||Nt(c))&&o&&o.push(c),ArrayBuffer.isView(c)&&o&&o.push(c.buffer),c instanceof ImageData&&o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const T=[];for(const k of c)T.push(Nc(k,o));return T}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const d=pf(c);if(!d)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!hs[d])throw new Error(`${d} is not registered.`);const{klass:p}=hs[d],x=p.serialize?p.serialize(c,o):{};if(p.serialize){if(o&&x===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in c){if(!c.hasOwnProperty(T)||hs[d].omit.indexOf(T)>=0)continue;const k=c[T];x[T]=hs[d].shallow.indexOf(T)>=0?k:Nc(k,o)}c instanceof Error&&(x.message=c.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(x.$name=d),x}function Kl(c){if(mf(c))return c;if(Array.isArray(c))return c.map(Kl);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const o=pf(c)||"Object";if(!hs[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:d}=hs[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(c);const p=Object.create(d.prototype);for(const x of Object.keys(c)){if(x==="$name")continue;const T=c[x];p[x]=hs[o].shallow.indexOf(x)>=0?T:Kl(T)}return p}class xi{constructor(){this.first=!0}update(o,d){const p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=d),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=p,!0))}}const pr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function gf(c){for(const o of c)if(Fg(o.charCodeAt(0)))return!0;return!1}function zg(c){for(const o of c)if(!Yl(o.charCodeAt(0)))return!1;return!0}function yf(c){const o=c.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(o.join("|"),"u")}const vf=yf(["Arab","Dupl","Mong","Ougr","Syrc"]);function Yl(c){return!vf.test(String.fromCodePoint(c))}const zp=yf(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Fg(c){return!(c!==746&&c!==747&&(c<4352||!(pr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||pr["CJK Compatibility"](c)||pr["CJK Strokes"](c)||!(!pr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||pr["Enclosed CJK Letters and Months"](c)||pr["Ideographic Description Characters"](c)||pr.Kanbun(c)||pr.Katakana(c)&&c!==12540||!(!pr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!pr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||pr["Vertical Forms"](c)||pr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||zp.test(String.fromCodePoint(c)))))}function K_(c){return!(Fg(c)||function(o){return!!(pr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||pr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||pr["Letterlike Symbols"](o)||pr["Number Forms"](o)||pr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||pr["Control Pictures"](o)&&o!==9251||pr["Optical Character Recognition"](o)||pr["Enclosed Alphanumerics"](o)||pr["Geometric Shapes"](o)||pr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||pr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||pr["CJK Symbols and Punctuation"](o)||pr.Katakana(o)||pr["Private Use Area"](o)||pr["CJK Compatibility Forms"](o)||pr["Small Form Variants"](o)||pr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(c))}const z1=yf(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Bg(c){return z1.test(String.fromCodePoint(c))}function F1(c,o){return!(!o&&Bg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||pr.Khmer(c))}function B1(c){for(const o of c)if(Bg(o.charCodeAt(0)))return!0;return!1}const jo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class li{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xi,this.transition={})}isSupportedScript(o){return function(d,p){for(const x of d)if(!F1(x.charCodeAt(0),p))return!1;return!0}(o,jo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,d=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*d}}}class zd{constructor(o,d){this.property=o,this.value=d,this.expression=function(p,x){if(Ac(p))return new Lc(p,x);if(Hl(p)){const T=Rd(p,x);if(T.result==="error")throw new Error(T.value.map(k=>`${k.key}: ${k.message}`).join(", "));return T.value}{let T=p;return x.type==="color"&&typeof p=="string"?T=ur.parse(p):x.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(T=Kn.parse(p)):T=yi.parse(p),{kind:"constant",evaluate:()=>T}}}(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,p){return this.property.possiblyEvaluate(this,o,d,p)}}class Fp{constructor(o){this.property=o,this.value=new zd(o,void 0)}transitioned(o,d){return new Y_(this.property,this.value,d,Z({},o.transition,this.transition),o.now)}untransitioned(){return new Y_(this.property,this.value,null,{},0)}}class Bp{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Je(this._values[o].value.value)}setValue(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Fp(this._values[o].property)),this._values[o].value=new zd(this._values[o].property,d===null?void 0:Je(d))}getTransition(o){return Je(this._values[o].transition)}setTransition(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Fp(this._values[o].property)),this._values[o].transition=Je(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(o[d]=p);const x=this.getTransition(d);x!==void 0&&(o[`${d}-transition`]=x)}return o}transitioned(o,d){const p=new _f(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].transitioned(o,d._values[x]);return p}untransitioned(){const o=new _f(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class Y_{constructor(o,d,p,x,T){this.property=o,this.value=d,this.begin=T+x.delay||0,this.end=this.begin+x.duration||0,o.specification.transition&&(x.delay||x.duration)&&(this.prior=p)}possiblyEvaluate(o,d,p){const x=o.now||0,T=this.value.possiblyEvaluate(o,d,p),k=this.prior;if(k){if(x>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(x<this.begin)return k.possiblyEvaluate(o,d,p);{const R=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(o,d,p),T,function(D){if(D<=0)return 0;if(D>=1)return 1;const U=D*D,G=U*D;return 4*(D<.5?G:3*(D-U)+G-.75)}(R))}}return T}}class _f{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,p){const x=new bf(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(o,d,p);return x}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class xf{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Je(this._values[o].value)}setValue(o,d){this._values[o]=new zd(this._values[o].property,d===null?void 0:Je(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(o[d]=p)}return o}possiblyEvaluate(o,d,p){const x=new bf(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(o,d,p);return x}}class cl{constructor(o,d,p){this.property=o,this.value=d,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,p,x){return this.property.evaluate(this.value,this.parameters,o,d,p,x)}}class bf{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class kn{constructor(o){this.specification=o}possiblyEvaluate(o,d){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(d)}interpolate(o,d,p){const x=ns[this.specification.type];return x?x(o,d,p):o}}class qn{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,p,x){return new cl(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},p,x)}:o.expression,d)}interpolate(o,d,p){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new cl(this,{kind:"constant",value:void 0},o.parameters);const x=ns[this.specification.type];if(x){const T=x(o.value.value,d.value.value,p);return new cl(this,{kind:"constant",value:T},o.parameters)}return o}evaluate(o,d,p,x,T,k){return o.kind==="constant"?o.value:o.evaluate(d,p,x,T,k)}}class Up extends qn{possiblyEvaluate(o,d,p,x){if(o.value===void 0)return new cl(this,{kind:"constant",value:void 0},d);if(o.expression.kind==="constant"){const T=o.expression.evaluate(d,null,{},p,x),k=o.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,R=this._calculate(k,k,k,d);return new cl(this,{kind:"constant",value:R},d)}if(o.expression.kind==="camera"){const T=this._calculate(o.expression.evaluate({zoom:d.zoom-1}),o.expression.evaluate({zoom:d.zoom}),o.expression.evaluate({zoom:d.zoom+1}),d);return new cl(this,{kind:"constant",value:T},d)}return new cl(this,o.expression,d)}evaluate(o,d,p,x,T,k){if(o.kind==="source"){const R=o.evaluate(d,p,x,T,k);return this._calculate(R,R,R,d)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(d.zoom)-1},p,x),o.evaluate({zoom:Math.floor(d.zoom)},p,x),o.evaluate({zoom:Math.floor(d.zoom)+1},p,x),d):o.value}_calculate(o,d,p,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:p,to:d}}interpolate(o){return o}}class $p{constructor(o){this.specification=o}possiblyEvaluate(o,d,p,x){if(o.value!==void 0){if(o.expression.kind==="constant"){const T=o.expression.evaluate(d,null,{},p,x);return this._calculate(T,T,T,d)}return this._calculate(o.expression.evaluate(new li(Math.floor(d.zoom-1),d)),o.expression.evaluate(new li(Math.floor(d.zoom),d)),o.expression.evaluate(new li(Math.floor(d.zoom+1),d)),d)}}_calculate(o,d,p,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:p,to:d}}interpolate(o){return o}}class Ug{constructor(o){this.specification=o}possiblyEvaluate(o,d,p,x){return!!o.expression.evaluate(d,null,{},p,x)}interpolate(){return!1}}class E{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in o){const p=o[d];p.specification.overridable&&this.overridableProperties.push(d);const x=this.defaultPropertyValues[d]=new zd(p,void 0),T=this.defaultTransitionablePropertyValues[d]=new Fp(p);this.defaultTransitioningPropertyValues[d]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=x.possiblyEvaluate({})}}}hn("DataDrivenProperty",qn),hn("DataConstantProperty",kn),hn("CrossFadedDataDrivenProperty",Up),hn("CrossFadedProperty",$p),hn("ColorRampProperty",Ug);const s="-transition";class f extends Fn{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new xf(d.layout)),d.paint)){this._transitionablePaint=new Bp(d.paint);for(const p in o.paint)this.setPaintProperty(p,o.paint[p],{validate:!1});for(const p in o.layout)this.setLayoutProperty(p,o.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bf(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,p={}){d!=null&&this._validate(Zi,`layers.${this.id}.layout.${o}`,o,d,p)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return o.endsWith(s)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,p={}){if(d!=null&&this._validate(ys,`layers.${this.id}.paint.${o}`,o,d,p))return!1;if(o.endsWith(s))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const x=this._transitionablePaint._values[o],T=x.property.specification["property-type"]==="cross-faded-data-driven",k=x.value.isDataDriven(),R=x.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const D=this._transitionablePaint._values[o].value;return D.isDataDriven()||k||T||this._handleOverridablePaintPropertyUpdate(o,R,D)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,d,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Re(o,(d,p)=>!(d===void 0||p==="layout"&&!Object.keys(d).length||p==="paint"&&!Object.keys(d).length))}_validate(o,d,p,x,T={}){return(!T||T.validate!==!1)&&Us(this,o.call(cn,{key:d,layerType:this.type,objectKey:p,value:x,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof cl&&kc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class S{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function O(c,o=1){let d=0,p=0;return{members:c.map(x=>{const T=v[x.type].BYTES_PER_ELEMENT,k=d=j(d,Math.max(o,T)),R=x.components||1;return p=Math.max(p,T),d+=T*R,{name:x.name,type:x.type,components:R,offset:k}}),size:j(d,Math.max(p,o)),alignment:o}}function j(c,o){return Math.ceil(c/o)*o}class B extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const x=2*o;return this.int16[x+0]=d,this.int16[x+1]=p,o}}B.prototype.bytesPerElement=4,hn("StructArrayLayout2i4",B);class W extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p){const x=this.length;return this.resize(x+1),this.emplace(x,o,d,p)}emplace(o,d,p,x){const T=3*o;return this.int16[T+0]=d,this.int16[T+1]=p,this.int16[T+2]=x,o}}W.prototype.bytesPerElement=6,hn("StructArrayLayout3i6",W);class Q extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,p,x)}emplace(o,d,p,x,T){const k=4*o;return this.int16[k+0]=d,this.int16[k+1]=p,this.int16[k+2]=x,this.int16[k+3]=T,o}}Q.prototype.bytesPerElement=8,hn("StructArrayLayout4i8",Q);class J extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,p,x,T,k)}emplace(o,d,p,x,T,k,R){const D=6*o;return this.int16[D+0]=d,this.int16[D+1]=p,this.int16[D+2]=x,this.int16[D+3]=T,this.int16[D+4]=k,this.int16[D+5]=R,o}}J.prototype.bytesPerElement=12,hn("StructArrayLayout2i4i12",J);class ae extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,p,x,T,k)}emplace(o,d,p,x,T,k,R){const D=4*o,U=8*o;return this.int16[D+0]=d,this.int16[D+1]=p,this.uint8[U+4]=x,this.uint8[U+5]=T,this.uint8[U+6]=k,this.uint8[U+7]=R,o}}ae.prototype.bytesPerElement=8,hn("StructArrayLayout2i4ub8",ae);class ye extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const x=2*o;return this.float32[x+0]=d,this.float32[x+1]=p,o}}ye.prototype.bytesPerElement=8,hn("StructArrayLayout2f8",ye);class xe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k,R,D,U,G){const K=this.length;return this.resize(K+1),this.emplace(K,o,d,p,x,T,k,R,D,U,G)}emplace(o,d,p,x,T,k,R,D,U,G,K){const ee=10*o;return this.uint16[ee+0]=d,this.uint16[ee+1]=p,this.uint16[ee+2]=x,this.uint16[ee+3]=T,this.uint16[ee+4]=k,this.uint16[ee+5]=R,this.uint16[ee+6]=D,this.uint16[ee+7]=U,this.uint16[ee+8]=G,this.uint16[ee+9]=K,o}}xe.prototype.bytesPerElement=20,hn("StructArrayLayout10ui20",xe);class Pe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k,R,D,U,G,K,ee){const oe=this.length;return this.resize(oe+1),this.emplace(oe,o,d,p,x,T,k,R,D,U,G,K,ee)}emplace(o,d,p,x,T,k,R,D,U,G,K,ee,oe){const ce=12*o;return this.int16[ce+0]=d,this.int16[ce+1]=p,this.int16[ce+2]=x,this.int16[ce+3]=T,this.uint16[ce+4]=k,this.uint16[ce+5]=R,this.uint16[ce+6]=D,this.uint16[ce+7]=U,this.int16[ce+8]=G,this.int16[ce+9]=K,this.int16[ce+10]=ee,this.int16[ce+11]=oe,o}}Pe.prototype.bytesPerElement=24,hn("StructArrayLayout4i4ui4i24",Pe);class Oe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p){const x=this.length;return this.resize(x+1),this.emplace(x,o,d,p)}emplace(o,d,p,x){const T=3*o;return this.float32[T+0]=d,this.float32[T+1]=p,this.float32[T+2]=x,o}}Oe.prototype.bytesPerElement=12,hn("StructArrayLayout3f12",Oe);class Ne extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Ne.prototype.bytesPerElement=4,hn("StructArrayLayout1ul4",Ne);class $e extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k,R,D,U){const G=this.length;return this.resize(G+1),this.emplace(G,o,d,p,x,T,k,R,D,U)}emplace(o,d,p,x,T,k,R,D,U,G){const K=10*o,ee=5*o;return this.int16[K+0]=d,this.int16[K+1]=p,this.int16[K+2]=x,this.int16[K+3]=T,this.int16[K+4]=k,this.int16[K+5]=R,this.uint32[ee+3]=D,this.uint16[K+8]=U,this.uint16[K+9]=G,o}}$e.prototype.bytesPerElement=20,hn("StructArrayLayout6i1ul2ui20",$e);class ke extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,p,x,T,k)}emplace(o,d,p,x,T,k,R){const D=6*o;return this.int16[D+0]=d,this.int16[D+1]=p,this.int16[D+2]=x,this.int16[D+3]=T,this.int16[D+4]=k,this.int16[D+5]=R,o}}ke.prototype.bytesPerElement=12,hn("StructArrayLayout2i2i2i12",ke);class We extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,p,x,T)}emplace(o,d,p,x,T,k){const R=4*o,D=8*o;return this.float32[R+0]=d,this.float32[R+1]=p,this.float32[R+2]=x,this.int16[D+6]=T,this.int16[D+7]=k,o}}We.prototype.bytesPerElement=16,hn("StructArrayLayout2f1f2i16",We);class et extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k){const R=this.length;return this.resize(R+1),this.emplace(R,o,d,p,x,T,k)}emplace(o,d,p,x,T,k,R){const D=16*o,U=4*o,G=8*o;return this.uint8[D+0]=d,this.uint8[D+1]=p,this.float32[U+1]=x,this.float32[U+2]=T,this.int16[G+6]=k,this.int16[G+7]=R,o}}et.prototype.bytesPerElement=16,hn("StructArrayLayout2ub2f2i16",et);class at extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p){const x=this.length;return this.resize(x+1),this.emplace(x,o,d,p)}emplace(o,d,p,x){const T=3*o;return this.uint16[T+0]=d,this.uint16[T+1]=p,this.uint16[T+2]=x,o}}at.prototype.bytesPerElement=6,hn("StructArrayLayout3ui6",at);class Tt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me){const rt=this.length;return this.resize(rt+1),this.emplace(rt,o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me)}emplace(o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me,rt){const Ze=24*o,tt=12*o,pt=48*o;return this.int16[Ze+0]=d,this.int16[Ze+1]=p,this.uint16[Ze+2]=x,this.uint16[Ze+3]=T,this.uint32[tt+2]=k,this.uint32[tt+3]=R,this.uint32[tt+4]=D,this.uint16[Ze+10]=U,this.uint16[Ze+11]=G,this.uint16[Ze+12]=K,this.float32[tt+7]=ee,this.float32[tt+8]=oe,this.uint8[pt+36]=ce,this.uint8[pt+37]=me,this.uint8[pt+38]=Ce,this.uint32[tt+10]=Me,this.int16[Ze+22]=rt,o}}Tt.prototype.bytesPerElement=48,hn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Tt);class Ft extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me,rt,Ze,tt,pt,Dt,on,Vn,en,Kt,Rn,_n){const gn=this.length;return this.resize(gn+1),this.emplace(gn,o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me,rt,Ze,tt,pt,Dt,on,Vn,en,Kt,Rn,_n)}emplace(o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce,me,Ce,Me,rt,Ze,tt,pt,Dt,on,Vn,en,Kt,Rn,_n,gn){const St=32*o,On=16*o;return this.int16[St+0]=d,this.int16[St+1]=p,this.int16[St+2]=x,this.int16[St+3]=T,this.int16[St+4]=k,this.int16[St+5]=R,this.int16[St+6]=D,this.int16[St+7]=U,this.uint16[St+8]=G,this.uint16[St+9]=K,this.uint16[St+10]=ee,this.uint16[St+11]=oe,this.uint16[St+12]=ce,this.uint16[St+13]=me,this.uint16[St+14]=Ce,this.uint16[St+15]=Me,this.uint16[St+16]=rt,this.uint16[St+17]=Ze,this.uint16[St+18]=tt,this.uint16[St+19]=pt,this.uint16[St+20]=Dt,this.uint16[St+21]=on,this.uint16[St+22]=Vn,this.uint32[On+12]=en,this.float32[On+13]=Kt,this.float32[On+14]=Rn,this.uint16[St+30]=_n,this.uint16[St+31]=gn,o}}Ft.prototype.bytesPerElement=64,hn("StructArrayLayout8i15ui1ul2f2ui64",Ft);class Yt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}Yt.prototype.bytesPerElement=4,hn("StructArrayLayout1f4",Yt);class un extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p){const x=this.length;return this.resize(x+1),this.emplace(x,o,d,p)}emplace(o,d,p,x){const T=3*o;return this.uint16[6*o+0]=d,this.float32[T+1]=p,this.float32[T+2]=x,o}}un.prototype.bytesPerElement=12,hn("StructArrayLayout1ui2f12",un);class Gt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p){const x=this.length;return this.resize(x+1),this.emplace(x,o,d,p)}emplace(o,d,p,x){const T=4*o;return this.uint32[2*o+0]=d,this.uint16[T+2]=p,this.uint16[T+3]=x,o}}Gt.prototype.bytesPerElement=8,hn("StructArrayLayout1ul2ui8",Gt);class Zt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const x=2*o;return this.uint16[x+0]=d,this.uint16[x+1]=p,o}}Zt.prototype.bytesPerElement=4,hn("StructArrayLayout2ui4",Zt);class Pn extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}Pn.prototype.bytesPerElement=2,hn("StructArrayLayout1ui2",Pn);class tr extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,d,p,x)}emplace(o,d,p,x,T){const k=4*o;return this.float32[k+0]=d,this.float32[k+1]=p,this.float32[k+2]=x,this.float32[k+3]=T,o}}tr.prototype.bytesPerElement=16,hn("StructArrayLayout4f16",tr);class Xt extends _{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}Xt.prototype.size=20;class rn extends $e{get(o){return new Xt(this,o)}}hn("CollisionBoxArray",rn);class Yn extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Yn.prototype.size=48;class ci extends Tt{get(o){return new Yn(this,o)}}hn("PlacedSymbolArray",ci);class hr extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}hr.prototype.size=64;class Cr extends Ft{get(o){return new hr(this,o)}}hn("SymbolInstanceArray",Cr);class ui extends Yt{getoffsetX(o){return this.float32[1*o+0]}}hn("GlyphOffsetArray",ui);class $s extends W{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}hn("SymbolLineVertexArray",$s);class Ma extends _{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ma.prototype.size=12;class di extends un{get(o){return new Ma(this,o)}}hn("TextAnchorOffsetArray",di);class vo extends _{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}vo.prototype.size=8;class io extends Gt{get(o){return new vo(this,o)}}hn("FeatureIndexArray",io);class Vs extends B{}class so extends B{}class ul extends B{}class Fd extends J{}class Vp extends ae{}class Bd extends ye{}class la extends xe{}class Hp extends Pe{}class $g extends Oe{}class ca extends Ne{}class ua extends ke{}class jc extends et{}class Oa extends at{}class Ls extends Zt{}const Hs=O([{name:"a_pos",components:2,type:"Int16"}],4),{members:zo}=Hs;class kr{constructor(o=[]){this.segments=o}prepareSegment(o,d,p,x){let T=this.segments[this.segments.length-1];return o>kr.MAX_VERTEX_ARRAY_LENGTH&&Xe(`Max vertices per segment is ${kr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!T||T.vertexLength+o>kr.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==x)&&(T={vertexOffset:d.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},x!==void 0&&(T.sortKey=x),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,p,x){return new kr([{vertexOffset:o,primitiveOffset:d,vertexLength:p,primitiveLength:x,vaos:{},sortKey:0}])}}function Iu(c,o){return 256*(c=ue(Math.floor(c),0,255))+ue(Math.floor(o),0,255)}kr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hn("SegmentVector",kr);const Ud=O([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var $d={exports:{}},Q_={exports:{}};Q_.exports=function(c,o){var d,p,x,T,k,R,D,U;for(p=c.length-(d=3&c.length),x=o,k=3432918353,R=461845907,U=0;U<p;)D=255&c.charCodeAt(U)|(255&c.charCodeAt(++U))<<8|(255&c.charCodeAt(++U))<<16|(255&c.charCodeAt(++U))<<24,++U,x=27492+(65535&(T=5*(65535&(x=(x^=D=(65535&(D=(D=(65535&D)*k+(((D>>>16)*k&65535)<<16)&4294967295)<<15|D>>>17))*R+(((D>>>16)*R&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(D=0,d){case 3:D^=(255&c.charCodeAt(U+2))<<16;case 2:D^=(255&c.charCodeAt(U+1))<<8;case 1:x^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(U)))*k+(((D>>>16)*k&65535)<<16)&4294967295)<<15|D>>>17))*R+(((D>>>16)*R&65535)<<16)&4294967295}return x^=c.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0};var U1=Q_.exports,J_={exports:{}};J_.exports=function(c,o){for(var d,p=c.length,x=o^p,T=0;p>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),p-=4,++T;switch(p){case 3:x^=(255&c.charCodeAt(T+2))<<16;case 2:x^=(255&c.charCodeAt(T+1))<<8;case 1:x=1540483477*(65535&(x^=255&c.charCodeAt(T)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};var zc=U1,ex=J_.exports;$d.exports=zc,$d.exports.murmur3=zc,$d.exports.murmur2=ex;var Zp=m($d.exports);class wf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,p,x){this.ids.push(qp(o)),this.positions.push(d,p,x)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=qp(o);let p=0,x=this.ids.length-1;for(;p<x;){const k=p+x>>1;this.ids[k]>=d?x=k:p=k+1}const T=[];for(;this.ids[p]===d;)T.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return T}static serialize(o,d){const p=new Float64Array(o.ids),x=new Uint32Array(o.positions);return Gp(p,x,0,p.length-1),d&&d.push(p.buffer,x.buffer),{ids:p,positions:x}}static deserialize(o){const d=new wf;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function qp(c){const o=+c;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Zp(String(c))}function Gp(c,o,d,p){for(;d<p;){const x=c[d+p>>1];let T=d-1,k=p+1;for(;;){do T++;while(c[T]<x);do k--;while(c[k]>x);if(T>=k)break;Vd(c,T,k),Vd(o,3*T,3*k),Vd(o,3*T+1,3*k+1),Vd(o,3*T+2,3*k+2)}k-d<p-k?(Gp(c,o,d,k),d=k+1):(Gp(c,o,k+1,p),p=k)}}function Vd(c,o,d){const p=c[o];c[o]=c[d],c[d]=p}hn("FeaturePositionMap",wf);class Sf{constructor(o,d){this.gl=o.gl,this.location=d}}class tx extends Sf{constructor(o,d){super(o,d),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class TI extends Sf{constructor(o,d){super(o,d),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class kI extends Sf{constructor(o,d){super(o,d),this.current=ur.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const d$=new Float32Array(16);function $1(c){return[Iu(255*c.r,255*c.g),Iu(255*c.b,255*c.a)]}class Vg{constructor(o,d,p){this.value=o,this.uniformNames=d.map(x=>`u_${x}`),this.type=p}setUniform(o,d,p){o.set(p.constantOr(this.value))}getBinding(o,d,p){return this.type==="color"?new kI(o,d):new tx(o,d)}}class Wp{constructor(o,d){this.uniformNames=d.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=o.tlbr}setUniform(o,d,p,x){const T=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&o.set(T)}getBinding(o,d,p){return p.substr(0,9)==="u_pattern"?new TI(o,d):new tx(o,d)}}class Ru{constructor(o,d,p,x){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=d.map(T=>({name:`a_${T}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,d,p,x,T){const k=this.paintVertexArray.length,R=this.expression.evaluate(new li(0),d,{},x,[],T);this.paintVertexArray.resize(o),this._setPaintValue(k,o,R)}updatePaintArray(o,d,p,x){const T=this.expression.evaluate({zoom:0},p,x);this._setPaintValue(o,d,T)}_setPaintValue(o,d,p){if(this.type==="color"){const x=$1(p);for(let T=o;T<d;T++)this.paintVertexArray.emplace(T,x[0],x[1])}else{for(let x=o;x<d;x++)this.paintVertexArray.emplace(x,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ql{constructor(o,d,p,x,T,k){this.expression=o,this.uniformNames=d.map(R=>`u_${R}_t`),this.type=p,this.useIntegerZoom=x,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=d.map(R=>({name:`a_${R}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new k}populatePaintArray(o,d,p,x,T){const k=this.expression.evaluate(new li(this.zoom),d,{},x,[],T),R=this.expression.evaluate(new li(this.zoom+1),d,{},x,[],T),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,k,R)}updatePaintArray(o,d,p,x){const T=this.expression.evaluate({zoom:this.zoom},p,x),k=this.expression.evaluate({zoom:this.zoom+1},p,x);this._setPaintValue(o,d,T,k)}_setPaintValue(o,d,p,x){if(this.type==="color"){const T=$1(p),k=$1(x);for(let R=o;R<d;R++)this.paintVertexArray.emplace(R,T[0],T[1],k[0],k[1])}else{for(let T=o;T<d;T++)this.paintVertexArray.emplace(T,p,x);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(x))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d){const p=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,x=ue(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(x)}getBinding(o,d,p){return new tx(o,d)}}class Hd{constructor(o,d,p,x,T,k){this.expression=o,this.type=d,this.useIntegerZoom=p,this.zoom=x,this.layerId=k,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(o,d,p){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(x,o,d.patterns&&d.patterns[this.layerId],p)}updatePaintArray(o,d,p,x,T){this._setPaintValues(o,d,p.patterns&&p.patterns[this.layerId],T)}_setPaintValues(o,d,p,x){if(!x||!p)return;const{min:T,mid:k,max:R}=p,D=x[T],U=x[k],G=x[R];if(D&&U&&G)for(let K=o;K<d;K++)this.zoomInPaintVertexArray.emplace(K,U.tl[0],U.tl[1],U.br[0],U.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],U.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,U.tl[0],U.tl[1],U.br[0],U.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],U.pixelRatio,G.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Ud.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Ud.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class PI{constructor(o,d,p){this.binders={},this._buffers=[];const x=[];for(const T in o.paint._values){if(!p(T))continue;const k=o.paint.get(T);if(!(k instanceof cl&&kc(k.property.specification)))continue;const R=h$(T,o.type),D=k.value,U=k.property.specification.type,G=k.property.useIntegerZoom,K=k.property.specification["property-type"],ee=K==="cross-faded"||K==="cross-faded-data-driven";if(D.kind==="constant")this.binders[T]=ee?new Wp(D.value,R):new Vg(D.value,R,U),x.push(`/u_${T}`);else if(D.kind==="source"||ee){const oe=AI(T,U,"source");this.binders[T]=ee?new Hd(D,U,G,d,oe,o.id):new Ru(D,R,U,oe),x.push(`/a_${T}`)}else{const oe=AI(T,U,"composite");this.binders[T]=new Ql(D,R,U,G,d,oe),x.push(`/z_${T}`)}}this.cacheKey=x.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof Ru||d instanceof Ql?d.maxValue:0}populatePaintArrays(o,d,p,x,T){for(const k in this.binders){const R=this.binders[k];(R instanceof Ru||R instanceof Ql||R instanceof Hd)&&R.populatePaintArray(o,d,p,x,T)}}setConstantPatternPositions(o,d){for(const p in this.binders){const x=this.binders[p];x instanceof Wp&&x.setConstantPatternPositions(o,d)}}updatePaintArrays(o,d,p,x,T){let k=!1;for(const R in o){const D=d.getPositions(R);for(const U of D){const G=p.feature(U.index);for(const K in this.binders){const ee=this.binders[K];if((ee instanceof Ru||ee instanceof Ql||ee instanceof Hd)&&ee.expression.isStateDependent===!0){const oe=x.paint.get(K);ee.expression=oe.value,ee.updatePaintArray(U.start,U.end,G,o[R],T),k=!0}}}}return k}defines(){const o=[];for(const d in this.binders){const p=this.binders[d];(p instanceof Vg||p instanceof Wp)&&o.push(...p.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof Ru||p instanceof Ql)for(let x=0;x<p.paintVertexAttributes.length;x++)o.push(p.paintVertexAttributes[x].name);else if(p instanceof Hd)for(let x=0;x<Ud.members.length;x++)o.push(Ud.members[x].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof Vg||p instanceof Wp||p instanceof Ql)for(const x of p.uniformNames)o.push(x)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,d){const p=[];for(const x in this.binders){const T=this.binders[x];if(T instanceof Vg||T instanceof Wp||T instanceof Ql){for(const k of T.uniformNames)if(d[k]){const R=T.getBinding(o,d[k],k);p.push({name:k,property:x,binding:R})}}}return p}setUniforms(o,d,p,x){for(const{name:T,property:k,binding:R}of d)this.binders[k].setUniform(R,x,p.get(k),T)}updatePaintBuffers(o){this._buffers=[];for(const d in this.binders){const p=this.binders[d];if(o&&p instanceof Hd){const x=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(p instanceof Ru||p instanceof Ql)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(o){for(const d in this.binders){const p=this.binders[d];(p instanceof Ru||p instanceof Ql||p instanceof Hd)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof Ru||d instanceof Ql||d instanceof Hd)&&d.destroy()}}}class Ef{constructor(o,d,p=()=>!0){this.programConfigurations={};for(const x of o)this.programConfigurations[x.id]=new PI(x,d,p);this.needsUpload=!1,this._featureMap=new wf,this._bufferOffset=0}populatePaintArrays(o,d,p,x,T,k){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(o,d,x,T,k);d.id!==void 0&&this._featureMap.add(d.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,p,x){for(const T of p)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(o,this._featureMap,d,T,x)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function h$(c,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}function AI(c,o,d){const p={color:{source:ye,composite:tr},number:{source:Yt,composite:ye}},x=function(T){return{"line-pattern":{source:la,composite:la},"fill-pattern":{source:la,composite:la},"fill-extrusion-pattern":{source:la,composite:la}}[T]}(c);return x&&x[d]||p[o][d]}hn("ConstantBinder",Vg),hn("CrossFadedConstantBinder",Wp),hn("SourceExpressionBinder",Ru),hn("CrossFadedCompositeBinder",Hd),hn("CompositeExpressionBinder",Ql),hn("ProgramConfiguration",PI,{omit:["_buffers"]}),hn("ProgramConfigurationSet",Ef);const ss=8192,V1=Math.pow(2,14)-1,II=-V1-1;function Cf(c){const o=ss/c.extent,d=c.loadGeometry();for(let p=0;p<d.length;p++){const x=d[p];for(let T=0;T<x.length;T++){const k=x[T],R=Math.round(k.x*o),D=Math.round(k.y*o);k.x=ue(R,II,V1),k.y=ue(D,II,V1),(R<k.x||R>k.x+1||D<k.y||D>k.y+1)&&Xe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Tf(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Cf(c):[]}}function nx(c,o,d,p,x){c.emplaceBack(2*o+(p+1)/2,2*d+(x+1)/2)}class H1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new so,this.indexArray=new Oa,this.segments=new kr,this.programConfigurations=new Ef(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){const x=this.layers[0],T=[];let k=null,R=!1;x.type==="circle"&&(k=x.layout.get("circle-sort-key"),R=!k.isConstant());for(const{feature:D,id:U,index:G,sourceLayerIndex:K}of o){const ee=this.layers[0]._featureFilter.needGeometry,oe=Tf(D,ee);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),oe,p))continue;const ce=R?k.evaluate(oe,{},p):void 0,me={id:U,properties:D.properties,type:D.type,sourceLayerIndex:K,index:G,geometry:ee?oe.geometry:Cf(D),patterns:{},sortKey:ce};T.push(me)}R&&T.sort((D,U)=>D.sortKey-U.sortKey);for(const D of T){const{geometry:U,index:G,sourceLayerIndex:K}=D,ee=o[G].feature;this.addFeature(D,U,G,p),d.featureIndex.insert(ee,U,G,K,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,zo),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,p,x){for(const T of d)for(const k of T){const R=k.x,D=k.y;if(R<0||R>=ss||D<0||D>=ss)continue;const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),G=U.vertexLength;nx(this.layoutVertexArray,R,D,-1,-1),nx(this.layoutVertexArray,R,D,1,-1),nx(this.layoutVertexArray,R,D,1,1),nx(this.layoutVertexArray,R,D,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},x)}}function RI(c,o){for(let d=0;d<c.length;d++)if(Xp(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(Xp(c,o[d]))return!0;return!!Z1(c,o)}function f$(c,o,d){return!!Xp(c,o)||!!q1(o,c,d)}function LI(c,o){if(c.length===1)return OI(o,c[0]);for(let d=0;d<o.length;d++){const p=o[d];for(let x=0;x<p.length;x++)if(Xp(c,p[x]))return!0}for(let d=0;d<c.length;d++)if(OI(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(Z1(c,o[d]))return!0;return!1}function p$(c,o,d){if(c.length>1){if(Z1(c,o))return!0;for(let p=0;p<o.length;p++)if(q1(o[p],c,d))return!0}for(let p=0;p<c.length;p++)if(q1(c[p],o,d))return!0;return!1}function Z1(c,o){if(c.length===0||o.length===0)return!1;for(let d=0;d<c.length-1;d++){const p=c[d],x=c[d+1];for(let T=0;T<o.length-1;T++)if(m$(p,x,o[T],o[T+1]))return!0}return!1}function m$(c,o,d,p){return gt(c,d,p)!==gt(o,d,p)&&gt(c,o,d)!==gt(c,o,p)}function q1(c,o,d){const p=d*d;if(o.length===1)return c.distSqr(o[0])<p;for(let x=1;x<o.length;x++)if(MI(c,o[x-1],o[x])<p)return!0;return!1}function MI(c,o,d){const p=o.distSqr(d);if(p===0)return c.distSqr(o);const x=((c.x-o.x)*(d.x-o.x)+(c.y-o.y)*(d.y-o.y))/p;return c.distSqr(x<0?o:x>1?d:d.sub(o)._mult(x)._add(o))}function OI(c,o){let d,p,x,T=!1;for(let k=0;k<c.length;k++){d=c[k];for(let R=0,D=d.length-1;R<d.length;D=R++)p=d[R],x=d[D],p.y>o.y!=x.y>o.y&&o.x<(x.x-p.x)*(o.y-p.y)/(x.y-p.y)+p.x&&(T=!T)}return T}function Xp(c,o){let d=!1;for(let p=0,x=c.length-1;p<c.length;x=p++){const T=c[p],k=c[x];T.y>o.y!=k.y>o.y&&o.x<(k.x-T.x)*(o.y-T.y)/(k.y-T.y)+T.x&&(d=!d)}return d}function g$(c,o,d){const p=d[0],x=d[2];if(c.x<p.x&&o.x<p.x||c.x>x.x&&o.x>x.x||c.y<p.y&&o.y<p.y||c.y>x.y&&o.y>x.y)return!1;const T=gt(c,o,d[0]);return T!==gt(c,o,d[1])||T!==gt(c,o,d[2])||T!==gt(c,o,d[3])}function Hg(c,o,d){const p=o.paint.get(c).value;return p.kind==="constant"?p.value:d.programConfigurations.get(o.id).getMaxValue(c)}function rx(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function ix(c,o,d,p,x){if(!o[0]&&!o[1])return c;const T=C.convert(o)._mult(x);d==="viewport"&&T._rotate(-p);const k=[];for(let R=0;R<c.length;R++)k.push(c[R].sub(T));return k}let DI,NI;hn("CircleBucket",H1,{omit:["layers"]});var y$={get paint(){return NI=NI||new E({"circle-radius":new qn(Qe.paint_circle["circle-radius"]),"circle-color":new qn(Qe.paint_circle["circle-color"]),"circle-blur":new qn(Qe.paint_circle["circle-blur"]),"circle-opacity":new qn(Qe.paint_circle["circle-opacity"]),"circle-translate":new kn(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new kn(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kn(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kn(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qn(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qn(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qn(Qe.paint_circle["circle-stroke-opacity"])})},get layout(){return DI=DI||new E({"circle-sort-key":new qn(Qe.layout_circle["circle-sort-key"])})}},_o=1e-6,Kp=typeof Float32Array<"u"?Float32Array:Array;function G1(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function jI(c,o,d){var p=o[0],x=o[1],T=o[2],k=o[3],R=o[4],D=o[5],U=o[6],G=o[7],K=o[8],ee=o[9],oe=o[10],ce=o[11],me=o[12],Ce=o[13],Me=o[14],rt=o[15],Ze=d[0],tt=d[1],pt=d[2],Dt=d[3];return c[0]=Ze*p+tt*R+pt*K+Dt*me,c[1]=Ze*x+tt*D+pt*ee+Dt*Ce,c[2]=Ze*T+tt*U+pt*oe+Dt*Me,c[3]=Ze*k+tt*G+pt*ce+Dt*rt,c[4]=(Ze=d[4])*p+(tt=d[5])*R+(pt=d[6])*K+(Dt=d[7])*me,c[5]=Ze*x+tt*D+pt*ee+Dt*Ce,c[6]=Ze*T+tt*U+pt*oe+Dt*Me,c[7]=Ze*k+tt*G+pt*ce+Dt*rt,c[8]=(Ze=d[8])*p+(tt=d[9])*R+(pt=d[10])*K+(Dt=d[11])*me,c[9]=Ze*x+tt*D+pt*ee+Dt*Ce,c[10]=Ze*T+tt*U+pt*oe+Dt*Me,c[11]=Ze*k+tt*G+pt*ce+Dt*rt,c[12]=(Ze=d[12])*p+(tt=d[13])*R+(pt=d[14])*K+(Dt=d[15])*me,c[13]=Ze*x+tt*D+pt*ee+Dt*Ce,c[14]=Ze*T+tt*U+pt*oe+Dt*Me,c[15]=Ze*k+tt*G+pt*ce+Dt*rt,c}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var Zg,v$=jI;function sx(c,o,d){var p=o[0],x=o[1],T=o[2],k=o[3];return c[0]=d[0]*p+d[4]*x+d[8]*T+d[12]*k,c[1]=d[1]*p+d[5]*x+d[9]*T+d[13]*k,c[2]=d[2]*p+d[6]*x+d[10]*T+d[14]*k,c[3]=d[3]*p+d[7]*x+d[11]*T+d[15]*k,c}Zg=new Kp(4),Kp!=Float32Array&&(Zg[0]=0,Zg[1]=0,Zg[2]=0,Zg[3]=0);class _$ extends f{constructor(o){super(o,y$)}createBucket(o){return new H1(o)}queryRadius(o){const d=o;return Hg("circle-radius",this,d)+Hg("circle-stroke-width",this,d)+rx(this.paint.get("circle-translate"))}queryIntersectsFeature(o,d,p,x,T,k,R,D){const U=ix(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,R),G=this.paint.get("circle-radius").evaluate(d,p)+this.paint.get("circle-stroke-width").evaluate(d,p),K=this.paint.get("circle-pitch-alignment")==="map",ee=K?U:function(ce,me){return ce.map(Ce=>zI(Ce,me))}(U,D),oe=K?G*R:G;for(const ce of x)for(const me of ce){const Ce=K?me:zI(me,D);let Me=oe;const rt=sx([],[me.x,me.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Me*=rt[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Me*=k.cameraToCenterDistance/rt[3]),f$(ee,Ce,Me))return!0}return!1}}function zI(c,o){const d=sx([],[c.x,c.y,0,1],o);return new C(d[0]/d[3],d[1]/d[3])}class FI extends H1{}let BI;hn("HeatmapBucket",FI,{omit:["layers"]});var x$={get paint(){return BI=BI||new E({"heatmap-radius":new qn(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qn(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kn(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ug(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kn(Qe.paint_heatmap["heatmap-opacity"])})}};function W1(c,{width:o,height:d},p,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==o*d*p)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${o*d*p}`)}else x=new Uint8Array(o*d*p);return c.width=o,c.height=d,c.data=x,c}function UI(c,{width:o,height:d},p){if(o===c.width&&d===c.height)return;const x=W1({},{width:o,height:d},p);X1(c,x,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,o),height:Math.min(c.height,d)},p),c.width=o,c.height=d,c.data=x.data}function X1(c,o,d,p,x,T){if(x.width===0||x.height===0)return o;if(x.width>c.width||x.height>c.height||d.x>c.width-x.width||d.y>c.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>o.width||x.height>o.height||p.x>o.width-x.width||p.y>o.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const k=c.data,R=o.data;if(k===R)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<x.height;D++){const U=((d.y+D)*c.width+d.x)*T,G=((p.y+D)*o.width+p.x)*T;for(let K=0;K<x.width*T;K++)R[G+K]=k[U+K]}return o}class qg{constructor(o,d){W1(this,o,1,d)}resize(o){UI(this,o,1)}clone(){return new qg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,p,x,T){X1(o,d,p,x,T,1)}}class Da{constructor(o,d){W1(this,o,4,d)}resize(o){UI(this,o,4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,p,x,T){X1(o,d,p,x,T,4)}}function $I(c){const o={},d=c.resolution||256,p=c.clips?c.clips.length:1,x=c.image||new Da({width:d,height:p});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const T=(k,R,D)=>{o[c.evaluationKey]=D;const U=c.expression.evaluate(o);x.data[k+R+0]=Math.floor(255*U.r/U.a),x.data[k+R+1]=Math.floor(255*U.g/U.a),x.data[k+R+2]=Math.floor(255*U.b/U.a),x.data[k+R+3]=Math.floor(255*U.a)};if(c.clips)for(let k=0,R=0;k<p;++k,R+=4*d)for(let D=0,U=0;D<d;D++,U+=4){const G=D/(d-1),{start:K,end:ee}=c.clips[k];T(R,U,K*(1-G)+ee*G)}else for(let k=0,R=0;k<d;k++,R+=4)T(0,R,k/(d-1));return x}hn("AlphaImage",qg),hn("RGBAImage",Da);const K1="big-fb";class b$ extends f{createBucket(o){return new FI(o)}constructor(o){super(o,x$),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$I({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(K1)&&this.heatmapFbos.delete(K1)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let VI;var w$={get paint(){return VI=VI||new E({"hillshade-illumination-direction":new kn(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kn(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kn(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kn(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kn(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kn(Qe.paint_hillshade["hillshade-accent-color"])})}};class S$ extends f{constructor(o){super(o,w$)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const E$=O([{name:"a_pos",components:2,type:"Int16"}],4),{members:C$}=E$;function HI(c,o,d=2){const p=o&&o.length,x=p?o[0]*d:c.length;let T=ZI(c,0,x,d,!0);const k=[];if(!T||T.next===T.prev)return k;let R,D,U;if(p&&(T=function(G,K,ee,oe){const ce=[];for(let me=0,Ce=K.length;me<Ce;me++){const Me=ZI(G,K[me]*oe,me<Ce-1?K[me+1]*oe:G.length,oe,!1);Me===Me.next&&(Me.steiner=!0),ce.push(M$(Me))}ce.sort(I$);for(let me=0;me<ce.length;me++)ee=R$(ce[me],ee);return ee}(c,o,T,d)),c.length>80*d){R=1/0,D=1/0;let G=-1/0,K=-1/0;for(let ee=d;ee<x;ee+=d){const oe=c[ee],ce=c[ee+1];oe<R&&(R=oe),ce<D&&(D=ce),oe>G&&(G=oe),ce>K&&(K=ce)}U=Math.max(G-R,K-D),U=U!==0?32767/U:0}return Gg(T,k,d,R,D,U,0),k}function ZI(c,o,d,p,x){let T;if(x===function(k,R,D,U){let G=0;for(let K=R,ee=D-U;K<D;K+=U)G+=(k[ee]-k[K])*(k[K+1]+k[ee+1]),ee=K;return G}(c,o,d,p)>0)for(let k=o;k<d;k+=p)T=WI(k/p|0,c[k],c[k+1],T);else for(let k=d-p;k>=o;k-=p)T=WI(k/p|0,c[k],c[k+1],T);return T&&ox(T,T.next)&&(Xg(T),T=T.next),T}function kf(c,o){if(!c)return c;o||(o=c);let d,p=c;do if(d=!1,p.steiner||!ox(p,p.next)&&Gi(p.prev,p,p.next)!==0)p=p.next;else{if(Xg(p),p=o=p.prev,p===p.next)break;d=!0}while(d||p!==o);return o}function Gg(c,o,d,p,x,T,k){if(!c)return;!k&&T&&function(D,U,G,K){let ee=D;do ee.z===0&&(ee.z=Y1(ee.x,ee.y,U,G,K)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==D);ee.prevZ.nextZ=null,ee.prevZ=null,function(oe){let ce,me=1;do{let Ce,Me=oe;oe=null;let rt=null;for(ce=0;Me;){ce++;let Ze=Me,tt=0;for(let Dt=0;Dt<me&&(tt++,Ze=Ze.nextZ,Ze);Dt++);let pt=me;for(;tt>0||pt>0&&Ze;)tt!==0&&(pt===0||!Ze||Me.z<=Ze.z)?(Ce=Me,Me=Me.nextZ,tt--):(Ce=Ze,Ze=Ze.nextZ,pt--),rt?rt.nextZ=Ce:oe=Ce,Ce.prevZ=rt,rt=Ce;Me=Ze}rt.nextZ=null,me*=2}while(ce>1)}(ee)}(c,p,x,T);let R=c;for(;c.prev!==c.next;){const D=c.prev,U=c.next;if(T?k$(c,p,x,T):T$(c))o.push(D.i,c.i,U.i),Xg(c),c=U.next,R=U.next;else if((c=U)===R){k?k===1?Gg(c=P$(kf(c),o),o,d,p,x,T,2):k===2&&A$(c,o,d,p,x,T):Gg(kf(c),o,d,p,x,T,1);break}}}function T$(c){const o=c.prev,d=c,p=c.next;if(Gi(o,d,p)>=0)return!1;const x=o.x,T=d.x,k=p.x,R=o.y,D=d.y,U=p.y,G=x<T?x<k?x:k:T<k?T:k,K=R<D?R<U?R:U:D<U?D:U,ee=x>T?x>k?x:k:T>k?T:k,oe=R>D?R>U?R:U:D>U?D:U;let ce=p.next;for(;ce!==o;){if(ce.x>=G&&ce.x<=ee&&ce.y>=K&&ce.y<=oe&&Yp(x,R,T,D,k,U,ce.x,ce.y)&&Gi(ce.prev,ce,ce.next)>=0)return!1;ce=ce.next}return!0}function k$(c,o,d,p){const x=c.prev,T=c,k=c.next;if(Gi(x,T,k)>=0)return!1;const R=x.x,D=T.x,U=k.x,G=x.y,K=T.y,ee=k.y,oe=R<D?R<U?R:U:D<U?D:U,ce=G<K?G<ee?G:ee:K<ee?K:ee,me=R>D?R>U?R:U:D>U?D:U,Ce=G>K?G>ee?G:ee:K>ee?K:ee,Me=Y1(oe,ce,o,d,p),rt=Y1(me,Ce,o,d,p);let Ze=c.prevZ,tt=c.nextZ;for(;Ze&&Ze.z>=Me&&tt&&tt.z<=rt;){if(Ze.x>=oe&&Ze.x<=me&&Ze.y>=ce&&Ze.y<=Ce&&Ze!==x&&Ze!==k&&Yp(R,G,D,K,U,ee,Ze.x,Ze.y)&&Gi(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,tt.x>=oe&&tt.x<=me&&tt.y>=ce&&tt.y<=Ce&&tt!==x&&tt!==k&&Yp(R,G,D,K,U,ee,tt.x,tt.y)&&Gi(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;Ze&&Ze.z>=Me;){if(Ze.x>=oe&&Ze.x<=me&&Ze.y>=ce&&Ze.y<=Ce&&Ze!==x&&Ze!==k&&Yp(R,G,D,K,U,ee,Ze.x,Ze.y)&&Gi(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;tt&&tt.z<=rt;){if(tt.x>=oe&&tt.x<=me&&tt.y>=ce&&tt.y<=Ce&&tt!==x&&tt!==k&&Yp(R,G,D,K,U,ee,tt.x,tt.y)&&Gi(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function P$(c,o){let d=c;do{const p=d.prev,x=d.next.next;!ox(p,x)&&qI(p,d,d.next,x)&&Wg(p,x)&&Wg(x,p)&&(o.push(p.i,d.i,x.i),Xg(d),Xg(d.next),d=c=x),d=d.next}while(d!==c);return kf(d)}function A$(c,o,d,p,x,T){let k=c;do{let R=k.next.next;for(;R!==k.prev;){if(k.i!==R.i&&O$(k,R)){let D=GI(k,R);return k=kf(k,k.next),D=kf(D,D.next),Gg(k,o,d,p,x,T,0),void Gg(D,o,d,p,x,T,0)}R=R.next}k=k.next}while(k!==c)}function I$(c,o){return c.x-o.x}function R$(c,o){const d=function(x,T){let k=T;const R=x.x,D=x.y;let U,G=-1/0;do{if(D<=k.y&&D>=k.next.y&&k.next.y!==k.y){const me=k.x+(D-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(me<=R&&me>G&&(G=me,U=k.x<k.next.x?k:k.next,me===R))return U}k=k.next}while(k!==T);if(!U)return null;const K=U,ee=U.x,oe=U.y;let ce=1/0;k=U;do{if(R>=k.x&&k.x>=ee&&R!==k.x&&Yp(D<oe?R:G,D,ee,oe,D<oe?G:R,D,k.x,k.y)){const me=Math.abs(D-k.y)/(R-k.x);Wg(k,x)&&(me<ce||me===ce&&(k.x>U.x||k.x===U.x&&L$(U,k)))&&(U=k,ce=me)}k=k.next}while(k!==K);return U}(c,o);if(!d)return o;const p=GI(d,c);return kf(p,p.next),kf(d,d.next)}function L$(c,o){return Gi(c.prev,c,o.prev)<0&&Gi(o.next,c,c.next)<0}function Y1(c,o,d,p,x){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*x|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*x|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function M$(c){let o=c,d=c;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==c);return d}function Yp(c,o,d,p,x,T,k,R){return(x-k)*(o-R)>=(c-k)*(T-R)&&(c-k)*(p-R)>=(d-k)*(o-R)&&(d-k)*(T-R)>=(x-k)*(p-R)}function O$(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!function(d,p){let x=d;do{if(x.i!==d.i&&x.next.i!==d.i&&x.i!==p.i&&x.next.i!==p.i&&qI(x,x.next,d,p))return!0;x=x.next}while(x!==d);return!1}(c,o)&&(Wg(c,o)&&Wg(o,c)&&function(d,p){let x=d,T=!1;const k=(d.x+p.x)/2,R=(d.y+p.y)/2;do x.y>R!=x.next.y>R&&x.next.y!==x.y&&k<(x.next.x-x.x)*(R-x.y)/(x.next.y-x.y)+x.x&&(T=!T),x=x.next;while(x!==d);return T}(c,o)&&(Gi(c.prev,c,o.prev)||Gi(c,o.prev,o))||ox(c,o)&&Gi(c.prev,c,c.next)>0&&Gi(o.prev,o,o.next)>0)}function Gi(c,o,d){return(o.y-c.y)*(d.x-o.x)-(o.x-c.x)*(d.y-o.y)}function ox(c,o){return c.x===o.x&&c.y===o.y}function qI(c,o,d,p){const x=lx(Gi(c,o,d)),T=lx(Gi(c,o,p)),k=lx(Gi(d,p,c)),R=lx(Gi(d,p,o));return x!==T&&k!==R||!(x!==0||!ax(c,d,o))||!(T!==0||!ax(c,p,o))||!(k!==0||!ax(d,c,p))||!(R!==0||!ax(d,o,p))}function ax(c,o,d){return o.x<=Math.max(c.x,d.x)&&o.x>=Math.min(c.x,d.x)&&o.y<=Math.max(c.y,d.y)&&o.y>=Math.min(c.y,d.y)}function lx(c){return c>0?1:c<0?-1:0}function Wg(c,o){return Gi(c.prev,c,c.next)<0?Gi(c,o,c.next)>=0&&Gi(c,c.prev,o)>=0:Gi(c,o,c.prev)<0||Gi(c,c.next,o)<0}function GI(c,o){const d=Q1(c.i,c.x,c.y),p=Q1(o.i,o.x,o.y),x=c.next,T=o.prev;return c.next=o,o.prev=c,d.next=x,x.prev=d,p.next=d,d.prev=p,T.next=p,p.prev=T,p}function WI(c,o,d,p){const x=Q1(c,o,d);return p?(x.next=p.next,x.prev=p,p.next.prev=x,p.next=x):(x.prev=x,x.next=x),x}function Xg(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Q1(c,o,d){return{i:c,x:o,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function J1(c,o,d){const p=d.patternDependencies;let x=!1;for(const T of o){const k=T.paint.get(`${c}-pattern`);k.isConstant()||(x=!0);const R=k.constantOr(null);R&&(x=!0,p[R.to]=!0,p[R.from]=!0)}return x}function eS(c,o,d,p,x){const T=x.patternDependencies;for(const k of o){const R=k.paint.get(`${c}-pattern`).value;if(R.kind!=="constant"){let D=R.evaluate({zoom:p-1},d,{},x.availableImages),U=R.evaluate({zoom:p},d,{},x.availableImages),G=R.evaluate({zoom:p+1},d,{},x.availableImages);D=D&&D.name?D.name:D,U=U&&U.name?U.name:U,G=G&&G.name?G.name:G,T[D]=!0,T[U]=!0,T[G]=!0,d.patterns[k.id]={min:D,mid:U,max:G}}}return d}class tS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ul,this.indexArray=new Oa,this.indexArray2=new Ls,this.programConfigurations=new Ef(o.layers,o.zoom),this.segments=new kr,this.segments2=new kr,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.hasPattern=J1("fill",this.layers,d);const x=this.layers[0].layout.get("fill-sort-key"),T=!x.isConstant(),k=[];for(const{feature:R,id:D,index:U,sourceLayerIndex:G}of o){const K=this.layers[0]._featureFilter.needGeometry,ee=Tf(R,K);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),ee,p))continue;const oe=T?x.evaluate(ee,{},p,d.availableImages):void 0,ce={id:D,properties:R.properties,type:R.type,sourceLayerIndex:G,index:U,geometry:K?ee.geometry:Cf(R),patterns:{},sortKey:oe};k.push(ce)}T&&k.sort((R,D)=>R.sortKey-D.sortKey);for(const R of k){const{geometry:D,index:U,sourceLayerIndex:G}=R;if(this.hasPattern){const K=eS("fill",this.layers,R,this.zoom,d);this.patternFeatures.push(K)}else this.addFeature(R,D,U,p,{});d.featureIndex.insert(o[U].feature,D,U,G,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}addFeatures(o,d,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,C$),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,p,x,T){for(const k of xu(d,500)){let R=0;for(const oe of k)R+=oe.length;const D=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),U=D.vertexLength,G=[],K=[];for(const oe of k){if(oe.length===0)continue;oe!==k[0]&&K.push(G.length/2);const ce=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),me=ce.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(me+oe.length-1,me),G.push(oe[0].x),G.push(oe[0].y);for(let Ce=1;Ce<oe.length;Ce++)this.layoutVertexArray.emplaceBack(oe[Ce].x,oe[Ce].y),this.indexArray2.emplaceBack(me+Ce-1,me+Ce),G.push(oe[Ce].x),G.push(oe[Ce].y);ce.vertexLength+=oe.length,ce.primitiveLength+=oe.length}const ee=HI(G,K);for(let oe=0;oe<ee.length;oe+=3)this.indexArray.emplaceBack(U+ee[oe],U+ee[oe+1],U+ee[oe+2]);D.vertexLength+=R,D.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,T,x)}}let XI,KI;hn("FillBucket",tS,{omit:["layers","patternFeatures"]});var D$={get paint(){return KI=KI||new E({"fill-antialias":new kn(Qe.paint_fill["fill-antialias"]),"fill-opacity":new qn(Qe.paint_fill["fill-opacity"]),"fill-color":new qn(Qe.paint_fill["fill-color"]),"fill-outline-color":new qn(Qe.paint_fill["fill-outline-color"]),"fill-translate":new kn(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new kn(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Up(Qe.paint_fill["fill-pattern"])})},get layout(){return XI=XI||new E({"fill-sort-key":new qn(Qe.layout_fill["fill-sort-key"])})}};class N$ extends f{constructor(o){super(o,D$)}recalculate(o,d){super.recalculate(o,d);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new tS(o)}queryRadius(){return rx(this.paint.get("fill-translate"))}queryIntersectsFeature(o,d,p,x,T,k,R){return LI(ix(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,R),x)}isTileClipped(){return!0}}const j$=O([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),z$=O([{name:"a_centroid",components:2,type:"Int16"}],4),{members:F$}=j$;var Zd={},B$=g,YI=Qp;function Qp(c,o,d,p,x){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=p,this._values=x,c.readFields(U$,this,o)}function U$(c,o,d){c==1?o.id=d.readVarint():c==2?function(p,x){for(var T=p.readVarint()+p.pos;p.pos<T;){var k=x._keys[p.readVarint()],R=x._values[p.readVarint()];x.properties[k]=R}}(d,o):c==3?o.type=d.readVarint():c==4&&(o._geometry=d.pos)}function $$(c){for(var o,d,p=0,x=0,T=c.length,k=T-1;x<T;k=x++)p+=((d=c[k]).x-(o=c[x]).x)*(o.y+d.y);return p}Qp.types=["Unknown","Point","LineString","Polygon"],Qp.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,d=c.readVarint()+c.pos,p=1,x=0,T=0,k=0,R=[];c.pos<d;){if(x<=0){var D=c.readVarint();p=7&D,x=D>>3}if(x--,p===1||p===2)T+=c.readSVarint(),k+=c.readSVarint(),p===1&&(o&&R.push(o),o=[]),o.push(new B$(T,k));else{if(p!==7)throw new Error("unknown command "+p);o&&o.push(o[0].clone())}}return o&&R.push(o),R},Qp.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,d=1,p=0,x=0,T=0,k=1/0,R=-1/0,D=1/0,U=-1/0;c.pos<o;){if(p<=0){var G=c.readVarint();d=7&G,p=G>>3}if(p--,d===1||d===2)(x+=c.readSVarint())<k&&(k=x),x>R&&(R=x),(T+=c.readSVarint())<D&&(D=T),T>U&&(U=T);else if(d!==7)throw new Error("unknown command "+d)}return[k,D,R,U]},Qp.prototype.toGeoJSON=function(c,o,d){var p,x,T=this.extent*Math.pow(2,d),k=this.extent*c,R=this.extent*o,D=this.loadGeometry(),U=Qp.types[this.type];function G(oe){for(var ce=0;ce<oe.length;ce++){var me=oe[ce];oe[ce]=[360*(me.x+k)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(me.y+R)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(p=0;p<D.length;p++)K[p]=D[p][0];G(D=K);break;case 2:for(p=0;p<D.length;p++)G(D[p]);break;case 3:for(D=function(oe){var ce=oe.length;if(ce<=1)return[oe];for(var me,Ce,Me=[],rt=0;rt<ce;rt++){var Ze=$$(oe[rt]);Ze!==0&&(Ce===void 0&&(Ce=Ze<0),Ce===Ze<0?(me&&Me.push(me),me=[oe[rt]]):me.push(oe[rt]))}return me&&Me.push(me),Me}(D),p=0;p<D.length;p++)for(x=0;x<D[p].length;x++)G(D[p][x])}D.length===1?D=D[0]:U="Multi"+U;var ee={type:"Feature",geometry:{type:U,coordinates:D},properties:this.properties};return"id"in this&&(ee.id=this.id),ee};var V$=YI,QI=JI;function JI(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(H$,this,o),this.length=this._features.length}function H$(c,o,d){c===15?o.version=d.readVarint():c===1?o.name=d.readString():c===5?o.extent=d.readVarint():c===2?o._features.push(d.pos):c===3?o._keys.push(d.readString()):c===4&&o._values.push(function(p){for(var x=null,T=p.readVarint()+p.pos;p.pos<T;){var k=p.readVarint()>>3;x=k===1?p.readString():k===2?p.readFloat():k===3?p.readDouble():k===4?p.readVarint64():k===5?p.readVarint():k===6?p.readSVarint():k===7?p.readBoolean():null}return x}(d))}JI.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new V$(this._pbf,o,this.extent,this._keys,this._values)};var Z$=QI;function q$(c,o,d){if(c===3){var p=new Z$(d,d.readVarint()+d.pos);p.length&&(o[p.name]=p)}}Zd.VectorTile=function(c,o){this.layers=c.readFields(q$,{},o)},Zd.VectorTileFeature=YI,Zd.VectorTileLayer=QI;const G$=Zd.VectorTileFeature.types,nS=Math.pow(2,13);function Kg(c,o,d,p,x,T,k,R){c.emplaceBack(o,d,2*Math.floor(p*nS)+k,x*nS*2,T*nS*2,Math.round(R))}class rS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Fd,this.centroidVertexArray=new Vs,this.indexArray=new Oa,this.programConfigurations=new Ef(o.layers,o.zoom),this.segments=new kr,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.features=[],this.hasPattern=J1("fill-extrusion",this.layers,d);for(const{feature:x,id:T,index:k,sourceLayerIndex:R}of o){const D=this.layers[0]._featureFilter.needGeometry,U=Tf(x,D);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),U,p))continue;const G={id:T,sourceLayerIndex:R,index:k,geometry:D?U.geometry:Cf(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(eS("fill-extrusion",this.layers,G,this.zoom,d)):this.addFeature(G,G.geometry,k,p,{}),d.featureIndex.insert(x,G.geometry,k,R,this.index,!0)}}addFeatures(o,d,p){for(const x of this.features){const{geometry:T}=x;this.addFeature(x,T,x.index,d,p)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,F$),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,z$.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,d,p,x,T){for(const k of xu(d,500)){const R={x:0,y:0,vertexCount:0};let D=0;for(const ce of k)D+=ce.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ce of k){if(ce.length===0||X$(ce))continue;let me=0;for(let Ce=0;Ce<ce.length;Ce++){const Me=ce[Ce];if(Ce>=1){const rt=ce[Ce-1];if(!W$(Me,rt)){U.vertexLength+4>kr.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Me.sub(rt)._perp()._unit(),tt=rt.dist(Me);me+tt>32768&&(me=0),Kg(this.layoutVertexArray,Me.x,Me.y,Ze.x,Ze.y,0,0,me),Kg(this.layoutVertexArray,Me.x,Me.y,Ze.x,Ze.y,0,1,me),R.x+=2*Me.x,R.y+=2*Me.y,R.vertexCount+=2,me+=tt,Kg(this.layoutVertexArray,rt.x,rt.y,Ze.x,Ze.y,0,0,me),Kg(this.layoutVertexArray,rt.x,rt.y,Ze.x,Ze.y,0,1,me),R.x+=2*rt.x,R.y+=2*rt.y,R.vertexCount+=2;const pt=U.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+D>kr.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),G$[o.type]!=="Polygon")continue;const G=[],K=[],ee=U.vertexLength;for(const ce of k)if(ce.length!==0){ce!==k[0]&&K.push(G.length/2);for(let me=0;me<ce.length;me++){const Ce=ce[me];Kg(this.layoutVertexArray,Ce.x,Ce.y,0,0,1,1,0),R.x+=Ce.x,R.y+=Ce.y,R.vertexCount+=1,G.push(Ce.x),G.push(Ce.y)}}const oe=HI(G,K);for(let ce=0;ce<oe.length;ce+=3)this.indexArray.emplaceBack(ee+oe[ce],ee+oe[ce+2],ee+oe[ce+1]);U.primitiveLength+=oe.length/3,U.vertexLength+=D;for(let ce=0;ce<R.vertexCount;ce++){const me=Math.floor(R.x/R.vertexCount),Ce=Math.floor(R.y/R.vertexCount);this.centroidVertexArray.emplaceBack(me,Ce)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,T,x)}}function W$(c,o){return c.x===o.x&&(c.x<0||c.x>ss)||c.y===o.y&&(c.y<0||c.y>ss)}function X$(c){return c.every(o=>o.x<0)||c.every(o=>o.x>ss)||c.every(o=>o.y<0)||c.every(o=>o.y>ss)}let eR;hn("FillExtrusionBucket",rS,{omit:["layers","features"]});var K$={get paint(){return eR=eR||new E({"fill-extrusion-opacity":new kn(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qn(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kn(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kn(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Up(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qn(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qn(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kn(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Y$ extends f{constructor(o){super(o,K$)}createBucket(o){return new rS(o)}queryRadius(){return rx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,d,p,x,T,k,R,D){const U=ix(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,R),G=this.paint.get("fill-extrusion-height").evaluate(d,p),K=this.paint.get("fill-extrusion-base").evaluate(d,p),ee=function(ce,me,Ce,Me){const rt=[];for(const Ze of ce){const tt=[Ze.x,Ze.y,0,1];sx(tt,tt,me),rt.push(new C(tt[0]/tt[3],tt[1]/tt[3]))}return rt}(U,D),oe=function(ce,me,Ce,Me){const rt=[],Ze=[],tt=Me[8]*me,pt=Me[9]*me,Dt=Me[10]*me,on=Me[11]*me,Vn=Me[8]*Ce,en=Me[9]*Ce,Kt=Me[10]*Ce,Rn=Me[11]*Ce;for(const _n of ce){const gn=[],St=[];for(const On of _n){const An=On.x,Qn=On.y,ei=Me[0]*An+Me[4]*Qn+Me[12],Yr=Me[1]*An+Me[5]*Qn+Me[13],vs=Me[2]*An+Me[6]*Qn+Me[14],dl=Me[3]*An+Me[7]*Qn+Me[15],qs=vs+Dt,_s=dl+on,xo=ei+Vn,bo=Yr+en,wo=vs+Kt,Ni=dl+Rn,xs=new C((ei+tt)/_s,(Yr+pt)/_s);xs.z=qs/_s,gn.push(xs);const oo=new C(xo/Ni,bo/Ni);oo.z=wo/Ni,St.push(oo)}rt.push(gn),Ze.push(St)}return[rt,Ze]}(x,K,G,D);return function(ce,me,Ce){let Me=1/0;LI(Ce,me)&&(Me=tR(Ce,me[0]));for(let rt=0;rt<me.length;rt++){const Ze=me[rt],tt=ce[rt];for(let pt=0;pt<Ze.length-1;pt++){const Dt=Ze[pt],on=[Dt,Ze[pt+1],tt[pt+1],tt[pt],Dt];RI(Ce,on)&&(Me=Math.min(Me,tR(Ce,on)))}}return Me!==1/0&&Me}(oe[0],oe[1],ee)}}function Yg(c,o){return c.x*o.x+c.y*o.y}function tR(c,o){if(c.length===1){let d=0;const p=o[d++];let x;for(;!x||p.equals(x);)if(x=o[d++],!x)return 1/0;for(;d<o.length;d++){const T=o[d],k=c[0],R=x.sub(p),D=T.sub(p),U=k.sub(p),G=Yg(R,R),K=Yg(R,D),ee=Yg(D,D),oe=Yg(U,R),ce=Yg(U,D),me=G*ee-K*K,Ce=(ee*oe-K*ce)/me,Me=(G*ce-K*oe)/me,rt=p.z*(1-Ce-Me)+x.z*Ce+T.z*Me;if(isFinite(rt))return rt}return 1/0}{let d=1/0;for(const p of o)d=Math.min(d,p.z);return d}}const Q$=O([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:J$}=Q$,eV=O([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tV}=eV,nV=Zd.VectorTileFeature.types,rV=Math.cos(Math.PI/180*37.5),nR=Math.pow(2,14)/.5;class iS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new Vp,this.layoutVertexArray2=new Bd,this.indexArray=new Oa,this.programConfigurations=new Ef(o.layers,o.zoom),this.segments=new kr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.hasPattern=J1("line",this.layers,d);const x=this.layers[0].layout.get("line-sort-key"),T=!x.isConstant(),k=[];for(const{feature:R,id:D,index:U,sourceLayerIndex:G}of o){const K=this.layers[0]._featureFilter.needGeometry,ee=Tf(R,K);if(!this.layers[0]._featureFilter.filter(new li(this.zoom),ee,p))continue;const oe=T?x.evaluate(ee,{},p):void 0,ce={id:D,properties:R.properties,type:R.type,sourceLayerIndex:G,index:U,geometry:K?ee.geometry:Cf(R),patterns:{},sortKey:oe};k.push(ce)}T&&k.sort((R,D)=>R.sortKey-D.sortKey);for(const R of k){const{geometry:D,index:U,sourceLayerIndex:G}=R;if(this.hasPattern){const K=eS("line",this.layers,R,this.zoom,d);this.patternFeatures.push(K)}else this.addFeature(R,D,U,p,{});d.featureIndex.insert(o[U].feature,D,U,G,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}addFeatures(o,d,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,tV)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,J$),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,p,x,T){const k=this.layers[0].layout,R=k.get("line-join").evaluate(o,{}),D=k.get("line-cap"),U=k.get("line-miter-limit"),G=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const K of d)this.addLine(K,o,R,D,U,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,T,x)}addLine(o,d,p,x,T,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Me=0;Me<o.length-1;Me++)this.totalDistance+=o[Me].dist(o[Me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=nV[d.type]==="Polygon";let D=o.length;for(;D>=2&&o[D-1].equals(o[D-2]);)D--;let U=0;for(;U<D-1&&o[U].equals(o[U+1]);)U++;if(D<(R?3:2))return;p==="bevel"&&(T=1.05);const G=this.overscaling<=16?15*ss/(512*this.overscaling):0,K=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let ee,oe,ce,me,Ce;this.e1=this.e2=-1,R&&(ee=o[D-2],Ce=o[U].sub(ee)._unit()._perp());for(let Me=U;Me<D;Me++){if(ce=Me===D-1?R?o[U+1]:void 0:o[Me+1],ce&&o[Me].equals(ce))continue;Ce&&(me=Ce),ee&&(oe=ee),ee=o[Me],Ce=ce?ce.sub(ee)._unit()._perp():me,me=me||Ce;let rt=me.add(Ce);rt.x===0&&rt.y===0||rt._unit();const Ze=me.x*Ce.x+me.y*Ce.y,tt=rt.x*Ce.x+rt.y*Ce.y,pt=tt!==0?1/tt:1/0,Dt=2*Math.sqrt(2-2*tt),on=tt<rV&&oe&&ce,Vn=me.x*Ce.y-me.y*Ce.x>0;if(on&&Me>U){const Rn=ee.dist(oe);if(Rn>2*G){const _n=ee.sub(ee.sub(oe)._mult(G/Rn)._round());this.updateDistance(oe,_n),this.addCurrentVertex(_n,me,0,0,K),oe=_n}}const en=oe&&ce;let Kt=en?p:R?"butt":x;if(en&&Kt==="round"&&(pt<k?Kt="miter":pt<=2&&(Kt="fakeround")),Kt==="miter"&&pt>T&&(Kt="bevel"),Kt==="bevel"&&(pt>2&&(Kt="flipbevel"),pt<T&&(Kt="miter")),oe&&this.updateDistance(oe,ee),Kt==="miter")rt._mult(pt),this.addCurrentVertex(ee,rt,0,0,K);else if(Kt==="flipbevel"){if(pt>100)rt=Ce.mult(-1);else{const Rn=pt*me.add(Ce).mag()/me.sub(Ce).mag();rt._perp()._mult(Rn*(Vn?-1:1))}this.addCurrentVertex(ee,rt,0,0,K),this.addCurrentVertex(ee,rt.mult(-1),0,0,K)}else if(Kt==="bevel"||Kt==="fakeround"){const Rn=-Math.sqrt(pt*pt-1),_n=Vn?Rn:0,gn=Vn?0:Rn;if(oe&&this.addCurrentVertex(ee,me,_n,gn,K),Kt==="fakeround"){const St=Math.round(180*Dt/Math.PI/20);for(let On=1;On<St;On++){let An=On/St;if(An!==.5){const ei=An-.5;An+=An*ei*(An-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*ei*ei+(.848013+Ze*(.215638*Ze-1.06021)))}const Qn=Ce.sub(me)._mult(An)._add(me)._unit()._mult(Vn?-1:1);this.addHalfVertex(ee,Qn.x,Qn.y,!1,Vn,0,K)}}ce&&this.addCurrentVertex(ee,Ce,-_n,-gn,K)}else if(Kt==="butt")this.addCurrentVertex(ee,rt,0,0,K);else if(Kt==="square"){const Rn=oe?1:-1;this.addCurrentVertex(ee,rt,Rn,Rn,K)}else Kt==="round"&&(oe&&(this.addCurrentVertex(ee,me,0,0,K),this.addCurrentVertex(ee,me,1,1,K,!0)),ce&&(this.addCurrentVertex(ee,Ce,-1,-1,K,!0),this.addCurrentVertex(ee,Ce,0,0,K)));if(on&&Me<D-1){const Rn=ee.dist(ce);if(Rn>2*G){const _n=ee.add(ce.sub(ee)._mult(G/Rn)._round());this.updateDistance(ee,_n),this.addCurrentVertex(_n,Ce,0,0,K),ee=_n}}}}addCurrentVertex(o,d,p,x,T,k=!1){const R=d.y*x-d.x,D=-d.y-d.x*x;this.addHalfVertex(o,d.x+d.y*p,d.y-d.x*p,k,!1,p,T),this.addHalfVertex(o,R,D,k,!0,-x,T),this.distance>nR/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,d,p,x,T,k))}addHalfVertex({x:o,y:d},p,x,T,k,R,D){const U=.5*(this.lineClips?this.scaledDistance*(nR-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(T?1:0),(d<<1)+(k?1:0),Math.round(63*p)+128,Math.round(63*x)+128,1+(R===0?0:R<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),D.primitiveLength++),k?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}let rR,iR;hn("LineBucket",iS,{omit:["layers","patternFeatures"]});var sR={get paint(){return iR=iR||new E({"line-opacity":new qn(Qe.paint_line["line-opacity"]),"line-color":new qn(Qe.paint_line["line-color"]),"line-translate":new kn(Qe.paint_line["line-translate"]),"line-translate-anchor":new kn(Qe.paint_line["line-translate-anchor"]),"line-width":new qn(Qe.paint_line["line-width"]),"line-gap-width":new qn(Qe.paint_line["line-gap-width"]),"line-offset":new qn(Qe.paint_line["line-offset"]),"line-blur":new qn(Qe.paint_line["line-blur"]),"line-dasharray":new $p(Qe.paint_line["line-dasharray"]),"line-pattern":new Up(Qe.paint_line["line-pattern"]),"line-gradient":new Ug(Qe.paint_line["line-gradient"])})},get layout(){return rR=rR||new E({"line-cap":new kn(Qe.layout_line["line-cap"]),"line-join":new qn(Qe.layout_line["line-join"]),"line-miter-limit":new kn(Qe.layout_line["line-miter-limit"]),"line-round-limit":new kn(Qe.layout_line["line-round-limit"]),"line-sort-key":new qn(Qe.layout_line["line-sort-key"])})}};class iV extends qn{possiblyEvaluate(o,d){return d=new li(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(o,d)}evaluate(o,d,p,x){return d=Z({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(o,d,p,x)}}let cx;class sV extends f{constructor(o){super(o,sR),this.gradientVersion=0,cx||(cx=new iV(sR.paint.properties["line-width"].specification),cx.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Do,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,d){super.recalculate(o,d),this.paint._values["line-floorwidth"]=cx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new iS(o)}queryRadius(o){const d=o,p=oR(Hg("line-width",this,d),Hg("line-gap-width",this,d)),x=Hg("line-offset",this,d);return p/2+Math.abs(x)+rx(this.paint.get("line-translate"))}queryIntersectsFeature(o,d,p,x,T,k,R){const D=ix(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,R),U=R/2*oR(this.paint.get("line-width").evaluate(d,p),this.paint.get("line-gap-width").evaluate(d,p)),G=this.paint.get("line-offset").evaluate(d,p);return G&&(x=function(K,ee){const oe=[];for(let ce=0;ce<K.length;ce++){const me=K[ce],Ce=[];for(let Me=0;Me<me.length;Me++){const rt=me[Me-1],Ze=me[Me],tt=me[Me+1],pt=Me===0?new C(0,0):Ze.sub(rt)._unit()._perp(),Dt=Me===me.length-1?new C(0,0):tt.sub(Ze)._unit()._perp(),on=pt._add(Dt)._unit(),Vn=on.x*Dt.x+on.y*Dt.y;Vn!==0&&on._mult(1/Vn),Ce.push(on._mult(ee)._add(Ze))}oe.push(Ce)}return oe}(x,G*R)),function(K,ee,oe){for(let ce=0;ce<ee.length;ce++){const me=ee[ce];if(K.length>=3){for(let Ce=0;Ce<me.length;Ce++)if(Xp(K,me[Ce]))return!0}if(p$(K,me,oe))return!0}return!1}(D,x,U)}isTileClipped(){return!0}}function oR(c,o){return o>0?o+2*c:c}const oV=O([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),aV=O([{name:"a_projected_pos",components:3,type:"Float32"}],4);O([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lV=O([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);O([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const aR=O([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cV=O([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function uV(c,o,d){return c.sections.forEach(p=>{p.text=function(x,T,k){const R=T.layout.get("text-transform").evaluate(k,{});return R==="uppercase"?x=x.toLocaleUpperCase():R==="lowercase"&&(x=x.toLocaleLowerCase()),jo.applyArabicShaping&&(x=jo.applyArabicShaping(x)),x}(p.text,o,d)}),c}O([{name:"triangle",components:3,type:"Uint16"}]),O([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),O([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),O([{type:"Float32",name:"offsetX"}]),O([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),O([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Qg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var fs=24,lR=Kr,cR=function(c,o,d,p,x){var T,k,R=8*x-p-1,D=(1<<R)-1,U=D>>1,G=-7,K=x-1,ee=-1,oe=c[o+K];for(K+=ee,T=oe&(1<<-G)-1,oe>>=-G,G+=R;G>0;T=256*T+c[o+K],K+=ee,G-=8);for(k=T&(1<<-G)-1,T>>=-G,G+=p;G>0;k=256*k+c[o+K],K+=ee,G-=8);if(T===0)T=1-U;else{if(T===D)return k?NaN:1/0*(oe?-1:1);k+=Math.pow(2,p),T-=U}return(oe?-1:1)*k*Math.pow(2,T-p)},uR=function(c,o,d,p,x,T){var k,R,D,U=8*T-x-1,G=(1<<U)-1,K=G>>1,ee=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=0,ce=1,me=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(R=isNaN(o)?1:0,k=G):(k=Math.floor(Math.log(o)/Math.LN2),o*(D=Math.pow(2,-k))<1&&(k--,D*=2),(o+=k+K>=1?ee/D:ee*Math.pow(2,1-K))*D>=2&&(k++,D/=2),k+K>=G?(R=0,k=G):k+K>=1?(R=(o*D-1)*Math.pow(2,x),k+=K):(R=o*Math.pow(2,K-1)*Math.pow(2,x),k=0));x>=8;c[d+oe]=255&R,oe+=ce,R/=256,x-=8);for(k=k<<x|R,U+=x;U>0;c[d+oe]=255&k,oe+=ce,k/=256,U-=8);c[d+oe-ce]|=128*me};function Kr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var sS=4294967296,dR=1/sS,hR=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Lu(c){return c.type===Kr.Bytes?c.readVarint()+c.pos:c.pos+1}function Jp(c,o,d){return d?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function fR(c,o,d){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(p);for(var x=d.pos-1;x>=c;x--)d.buf[x+p]=d.buf[x]}function dV(c,o){for(var d=0;d<c.length;d++)o.writeVarint(c[d])}function hV(c,o){for(var d=0;d<c.length;d++)o.writeSVarint(c[d])}function fV(c,o){for(var d=0;d<c.length;d++)o.writeFloat(c[d])}function pV(c,o){for(var d=0;d<c.length;d++)o.writeDouble(c[d])}function mV(c,o){for(var d=0;d<c.length;d++)o.writeBoolean(c[d])}function gV(c,o){for(var d=0;d<c.length;d++)o.writeFixed32(c[d])}function yV(c,o){for(var d=0;d<c.length;d++)o.writeSFixed32(c[d])}function vV(c,o){for(var d=0;d<c.length;d++)o.writeFixed64(c[d])}function _V(c,o){for(var d=0;d<c.length;d++)o.writeSFixed64(c[d])}function ux(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function em(c,o,d){c[d]=o,c[d+1]=o>>>8,c[d+2]=o>>>16,c[d+3]=o>>>24}function pR(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}Kr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,d){for(d=d||this.length;this.pos<d;){var p=this.readVarint(),x=p>>3,T=this.pos;this.type=7&p,c(x,o,this),this.pos===T&&this.skip(p)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=ux(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=pR(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=ux(this.buf,this.pos)+ux(this.buf,this.pos+4)*sS;return this.pos+=8,c},readSFixed64:function(){var c=ux(this.buf,this.pos)+pR(this.buf,this.pos+4)*sS;return this.pos+=8,c},readFloat:function(){var c=cR(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=cR(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,d,p=this.buf;return o=127&(d=p[this.pos++]),d<128?o:(o|=(127&(d=p[this.pos++]))<<7,d<128?o:(o|=(127&(d=p[this.pos++]))<<14,d<128?o:(o|=(127&(d=p[this.pos++]))<<21,d<128?o:function(x,T,k){var R,D,U=k.buf;if(R=(112&(D=U[k.pos++]))>>4,D<128||(R|=(127&(D=U[k.pos++]))<<3,D<128)||(R|=(127&(D=U[k.pos++]))<<10,D<128)||(R|=(127&(D=U[k.pos++]))<<17,D<128)||(R|=(127&(D=U[k.pos++]))<<24,D<128)||(R|=(1&(D=U[k.pos++]))<<31,D<128))return Jp(x,R,T);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(d=p[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&hR?function(d,p,x){return hR.decode(d.subarray(p,x))}(this.buf,o,c):function(d,p,x){for(var T="",k=p;k<x;){var R,D,U,G=d[k],K=null,ee=G>239?4:G>223?3:G>191?2:1;if(k+ee>x)break;ee===1?G<128&&(K=G):ee===2?(192&(R=d[k+1]))==128&&(K=(31&G)<<6|63&R)<=127&&(K=null):ee===3?(D=d[k+2],(192&(R=d[k+1]))==128&&(192&D)==128&&((K=(15&G)<<12|(63&R)<<6|63&D)<=2047||K>=55296&&K<=57343)&&(K=null)):ee===4&&(D=d[k+2],U=d[k+3],(192&(R=d[k+1]))==128&&(192&D)==128&&(192&U)==128&&((K=(15&G)<<18|(63&R)<<12|(63&D)<<6|63&U)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,ee=1):K>65535&&(K-=65536,T+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),T+=String.fromCharCode(K),k+=ee}return T}(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==Kr.Bytes)return c.push(this.readVarint(o));var d=Lu(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==Kr.Bytes)return c.push(this.readSVarint());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Kr.Bytes)return c.push(this.readBoolean());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Kr.Bytes)return c.push(this.readFloat());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Kr.Bytes)return c.push(this.readDouble());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Kr.Bytes)return c.push(this.readFixed32());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Kr.Bytes)return c.push(this.readSFixed32());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Kr.Bytes)return c.push(this.readFixed64());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Kr.Bytes)return c.push(this.readSFixed64());var o=Lu(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(o===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Kr.Fixed32)this.pos+=4;else{if(o!==Kr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),em(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),em(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),em(this.buf,-1&c,this.pos),em(this.buf,Math.floor(c*dR),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),em(this.buf,-1&c,this.pos),em(this.buf,Math.floor(c*dR),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(o,d){var p,x;if(o>=0?(p=o%4294967296|0,x=o/4294967296|0):(x=~(-o/4294967296),4294967295^(p=~(-o%4294967296))?p=p+1|0:(p=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(T,k,R){R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,R.buf[R.pos]=127&(T>>>=7)}(p,0,d),function(T,k){var R=(7&T)<<4;k.buf[k.pos++]|=R|((T>>>=3)?128:0),T&&(k.buf[k.pos++]=127&T|((T>>>=7)?128:0),T&&(k.buf[k.pos++]=127&T|((T>>>=7)?128:0),T&&(k.buf[k.pos++]=127&T|((T>>>=7)?128:0),T&&(k.buf[k.pos++]=127&T|((T>>>=7)?128:0),T&&(k.buf[k.pos++]=127&T)))))}(x,d)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=function(p,x,T){for(var k,R,D=0;D<x.length;D++){if((k=x.charCodeAt(D))>55295&&k<57344){if(!R){k>56319||D+1===x.length?(p[T++]=239,p[T++]=191,p[T++]=189):R=k;continue}if(k<56320){p[T++]=239,p[T++]=191,p[T++]=189,R=k;continue}k=R-55296<<10|k-56320|65536,R=null}else R&&(p[T++]=239,p[T++]=191,p[T++]=189,R=null);k<128?p[T++]=k:(k<2048?p[T++]=k>>6|192:(k<65536?p[T++]=k>>12|224:(p[T++]=k>>18|240,p[T++]=k>>12&63|128),p[T++]=k>>6&63|128),p[T++]=63&k|128)}return T}(this.buf,c,this.pos);var d=this.pos-o;d>=128&&fR(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),uR(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),uR(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,o){this.pos++;var d=this.pos;c(o,this);var p=this.pos-d;p>=128&&fR(d,p,this),this.pos=d-1,this.writeVarint(p),this.pos+=p},writeMessage:function(c,o,d){this.writeTag(c,Kr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,dV,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,hV,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,mV,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,fV,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,pV,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,gV,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,yV,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,vV,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,_V,o)},writeBytesField:function(c,o){this.writeTag(c,Kr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,Kr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,Kr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,Kr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,Kr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,Kr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,Kr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,Kr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,Kr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,Kr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var oS=m(lR);const aS=3;function xV(c,o,d){c===1&&d.readMessage(bV,o)}function bV(c,o,d){if(c===3){const{id:p,bitmap:x,width:T,height:k,left:R,top:D,advance:U}=d.readMessage(wV,{});o.push({id:p,bitmap:new qg({width:T+2*aS,height:k+2*aS},x),metrics:{width:T,height:k,left:R,top:D,advance:U}})}}function wV(c,o,d){c===1?o.id=d.readVarint():c===2?o.bitmap=d.readBytes():c===3?o.width=d.readVarint():c===4?o.height=d.readVarint():c===5?o.left=d.readSVarint():c===6?o.top=d.readSVarint():c===7&&(o.advance=d.readVarint())}const SV=aS;function mR(c){let o=0,d=0;for(const k of c)o+=k.w*k.h,d=Math.max(d,k.w);c.sort((k,R)=>R.h-k.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let x=0,T=0;for(const k of c)for(let R=p.length-1;R>=0;R--){const D=p[R];if(!(k.w>D.w||k.h>D.h)){if(k.x=D.x,k.y=D.y,T=Math.max(T,k.y+k.h),x=Math.max(x,k.x+k.w),k.w===D.w&&k.h===D.h){const U=p.pop();R<p.length&&(p[R]=U)}else k.h===D.h?(D.x+=k.w,D.w-=k.w):k.w===D.w?(D.y+=k.h,D.h-=k.h):(p.push({x:D.x+k.w,y:D.y,w:D.w-k.w,h:k.h}),D.y+=k.h,D.h-=k.h);break}}return{w:x,h:T,fill:o/(x*T)||0}}const Fo=1;class lS{constructor(o,{pixelRatio:d,version:p,stretchX:x,stretchY:T,content:k,textFitWidth:R,textFitHeight:D}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=x,this.stretchY=T,this.content=k,this.version=p,this.textFitWidth=R,this.textFitHeight=D}get tl(){return[this.paddedRect.x+Fo,this.paddedRect.y+Fo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Fo,this.paddedRect.y+this.paddedRect.h-Fo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Fo)/this.pixelRatio,(this.paddedRect.h-2*Fo)/this.pixelRatio]}}class gR{constructor(o,d){const p={},x={};this.haveRenderCallbacks=[];const T=[];this.addImages(o,p,T),this.addImages(d,x,T);const{w:k,h:R}=mR(T),D=new Da({width:k||1,height:R||1});for(const U in o){const G=o[U],K=p[U].paddedRect;Da.copy(G.data,D,{x:0,y:0},{x:K.x+Fo,y:K.y+Fo},G.data)}for(const U in d){const G=d[U],K=x[U].paddedRect,ee=K.x+Fo,oe=K.y+Fo,ce=G.data.width,me=G.data.height;Da.copy(G.data,D,{x:0,y:0},{x:ee,y:oe},G.data),Da.copy(G.data,D,{x:0,y:me-1},{x:ee,y:oe-1},{width:ce,height:1}),Da.copy(G.data,D,{x:0,y:0},{x:ee,y:oe+me},{width:ce,height:1}),Da.copy(G.data,D,{x:ce-1,y:0},{x:ee-1,y:oe},{width:1,height:me}),Da.copy(G.data,D,{x:0,y:0},{x:ee+ce,y:oe},{width:1,height:me})}this.image=D,this.iconPositions=p,this.patternPositions=x}addImages(o,d,p){for(const x in o){const T=o[x],k={x:0,y:0,w:T.data.width+2*Fo,h:T.data.height+2*Fo};p.push(k),d[x]=new lS(k,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(o,d){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),d),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),d)}patchUpdatedImage(o,d,p){if(!o||!d||o.version===d.version)return;o.version=d.version;const[x,T]=o.tl;p.update(d.data,void 0,{x,y:T})}}var qd;hn("ImagePosition",lS),hn("ImageAtlas",gR),u.ah=void 0,(qd=u.ah||(u.ah={}))[qd.none=0]="none",qd[qd.horizontal=1]="horizontal",qd[qd.vertical=2]="vertical",qd[qd.horizontalOnly=3]="horizontalOnly";const Jg=-17;class ey{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const p=new ey;return p.scale=o||1,p.fontStack=d,p}static forImage(o){const d=new ey;return d.imageName=o,d}}class tm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const p=new tm;for(let x=0;x<o.sections.length;x++){const T=o.sections[x];T.image?p.addImageSection(T):p.addTextSection(T,d)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let d="";for(let p=0;p<o.length;p++){const x=o.charCodeAt(p+1)||null,T=o.charCodeAt(p-1)||null;d+=x&&K_(x)&&!Qg[o[p+1]]||T&&K_(T)&&!Qg[o[p-1]]||!Qg[o[p]]?o[p]:Qg[o[p]]}return d}(this.text)}trim(){let o=0;for(let p=0;p<this.text.length&&hx[this.text.charCodeAt(p)];p++)o++;let d=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&hx[this.text.charCodeAt(p)];p--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const p=new tm;return p.text=this.text.substring(o,d),p.sectionIndex=this.sectionIndex.slice(o,d),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,d)=>Math.max(o,this.sections[d].scale),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(ey.forText(o.scale,o.fontStack||d));const p=this.sections.length-1;for(let x=0;x<o.text.length;++x)this.sectionIndex.push(p)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void Xe("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(ey.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function dx(c,o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce){const me=tm.fromFeature(c,x);let Ce;K===u.ah.vertical&&me.verticalizePunctuation();const{processBidirectionalText:Me,processStyledBidirectionalText:rt}=jo;if(Me&&me.sections.length===1){Ce=[];const pt=Me(me.toString(),cS(me,U,T,o,p,oe));for(const Dt of pt){const on=new tm;on.text=Dt,on.sections=me.sections;for(let Vn=0;Vn<Dt.length;Vn++)on.sectionIndex.push(0);Ce.push(on)}}else if(rt){Ce=[];const pt=rt(me.text,me.sectionIndex,cS(me,U,T,o,p,oe));for(const Dt of pt){const on=new tm;on.text=Dt[0],on.sectionIndex=Dt[1],on.sections=me.sections,Ce.push(on)}}else Ce=function(pt,Dt){const on=[],Vn=pt.text;let en=0;for(const Kt of Dt)on.push(pt.substring(en,Kt)),en=Kt;return en<Vn.length&&on.push(pt.substring(en,Vn.length)),on}(me,cS(me,U,T,o,p,oe));const Ze=[],tt={positionedLines:Ze,text:me.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(pt,Dt,on,Vn,en,Kt,Rn,_n,gn,St,On,An){let Qn=0,ei=Jg,Yr=0,vs=0;const dl=_n==="right"?1:_n==="left"?0:.5;let qs=0;for(const Ni of en){Ni.trim();const xs=Ni.getMaxScale(),oo=(xs-1)*fs,Gs={positionedGlyphs:[],lineOffset:0};pt.positionedLines[qs]=Gs;const So=Gs.positionedGlyphs;let Ws=0;if(!Ni.length()){ei+=Kt,++qs;continue}for(let Bo=0;Bo<Ni.length();Bo++){const zr=Ni.getSection(Bo),ni=Ni.getSectionIndex(Bo),hi=Ni.getCharCode(Bo);let da=0,ki=null,im=null,Bc=null,Uc=fs;const hl=!(gn===u.ah.horizontal||!On&&!Fg(hi)||On&&(hx[hi]||(_s=hi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_s)))));if(zr.imageName){const za=Vn[zr.imageName];if(!za)continue;Bc=zr.imageName,pt.iconsInText=pt.iconsInText||!0,im=za.paddedRect;const Ms=za.displaySize;zr.scale=zr.scale*fs/An,ki={width:Ms[0],height:Ms[1],left:Fo,top:-3,advance:hl?Ms[1]:Ms[0]},da=oo+(fs-Ms[1]*zr.scale),Uc=ki.advance;const Mu=hl?Ms[0]*zr.scale-fs*xs:Ms[1]*zr.scale-fs*xs;Mu>0&&Mu>Ws&&(Ws=Mu)}else{const za=on[zr.fontStack],Ms=za&&za[hi];if(Ms&&Ms.rect)im=Ms.rect,ki=Ms.metrics;else{const Mu=Dt[zr.fontStack],ay=Mu&&Mu[hi];if(!ay)continue;ki=ay.metrics}da=(xs-zr.scale)*fs}hl?(pt.verticalizable=!0,So.push({glyph:hi,imageName:Bc,x:Qn,y:ei+da,vertical:hl,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:ni,metrics:ki,rect:im}),Qn+=Uc*zr.scale+St):(So.push({glyph:hi,imageName:Bc,x:Qn,y:ei+da,vertical:hl,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:ni,metrics:ki,rect:im}),Qn+=ki.advance*zr.scale+St)}So.length!==0&&(Yr=Math.max(Qn-St,Yr),kV(So,0,So.length-1,dl,Ws)),Qn=0;const ja=Kt*xs+Ws;Gs.lineOffset=Math.max(Ws,oo),ei+=ja,vs=Math.max(ja,vs),++qs}var _s;const xo=ei-Jg,{horizontalAlign:bo,verticalAlign:wo}=uS(Rn);(function(Ni,xs,oo,Gs,So,Ws,ja,Bo,zr){const ni=(xs-oo)*So;let hi=0;hi=Ws!==ja?-Bo*Gs-Jg:(-Gs*zr+.5)*ja;for(const da of Ni)for(const ki of da.positionedGlyphs)ki.x+=ni,ki.y+=hi})(pt.positionedLines,dl,bo,wo,Yr,vs,Kt,xo,en.length),pt.top+=-wo*xo,pt.bottom=pt.top+xo,pt.left+=-bo*Yr,pt.right=pt.left+Yr}(tt,o,d,p,Ce,k,R,D,K,U,ee,ce),!function(pt){for(const Dt of pt)if(Dt.positionedGlyphs.length!==0)return!1;return!0}(Ze)&&tt}const hx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},EV={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},CV={40:!0};function yR(c,o,d,p,x,T){if(o.imageName){const k=p[o.imageName];return k?k.displaySize[0]*o.scale*fs/T+x:0}{const k=d[o.fontStack],R=k&&k[c];return R?R.metrics.advance*o.scale+x:0}}function vR(c,o,d,p){const x=Math.pow(c-o,2);return p?c<o?x/2:2*x:x+Math.abs(d)*d}function TV(c,o,d){let p=0;return c===10&&(p-=1e4),d&&(p+=150),c!==40&&c!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function _R(c,o,d,p,x,T){let k=null,R=vR(o,d,x,T);for(const D of p){const U=vR(o-D.x,d,x,T)+D.badness;U<=R&&(k=D,R=U)}return{index:c,x:o,priorBreak:k,badness:R}}function xR(c){return c?xR(c.priorBreak).concat(c.index):[]}function cS(c,o,d,p,x,T){if(!c)return[];const k=[],R=function(K,ee,oe,ce,me,Ce){let Me=0;for(let rt=0;rt<K.length();rt++){const Ze=K.getSection(rt);Me+=yR(K.getCharCode(rt),Ze,ce,me,ee,Ce)}return Me/Math.max(1,Math.ceil(Me/oe))}(c,o,d,p,x,T),D=c.text.indexOf("")>=0;let U=0;for(let K=0;K<c.length();K++){const ee=c.getSection(K),oe=c.getCharCode(K);if(hx[oe]||(U+=yR(oe,ee,p,x,o,T)),K<c.length()-1){const ce=!((G=oe)<11904)&&(!!pr["CJK Compatibility Forms"](G)||!!pr["CJK Compatibility"](G)||!!pr["CJK Strokes"](G)||!!pr["CJK Symbols and Punctuation"](G)||!!pr["Enclosed CJK Letters and Months"](G)||!!pr["Halfwidth and Fullwidth Forms"](G)||!!pr["Ideographic Description Characters"](G)||!!pr["Vertical Forms"](G)||zp.test(String.fromCodePoint(G)));(EV[oe]||ce||ee.imageName||K!==c.length()-2&&CV[c.getCharCode(K+1)])&&k.push(_R(K+1,U,R,k,TV(oe,c.getCharCode(K+1),ce&&D),!1))}}var G;return xR(_R(c.length(),U,R,k,0,!0))}function uS(c){let o=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function kV(c,o,d,p,x){if(!p&&!x)return;const T=c[d],k=(c[d].x+T.metrics.advance*T.scale)*p;for(let R=o;R<=d;R++)c[R].x-=k,c[R].y+=x}function PV(c,o,d){const{horizontalAlign:p,verticalAlign:x}=uS(d),T=o[0]-c.displaySize[0]*p,k=o[1]-c.displaySize[1]*x;return{image:c,top:k,bottom:k+c.displaySize[1],left:T,right:T+c.displaySize[0]}}function bR(c){var o,d;let p=c.left,x=c.top,T=c.right-p,k=c.bottom-x;const R=(o=c.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",D=(d=c.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",U=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(D==="proportional"){if(R==="stretchOnly"&&T/k<U||R==="proportional"){const G=Math.ceil(k*U);p*=G/T,T=G}}else if(R==="proportional"&&D==="stretchOnly"&&U!==0&&T/k>U){const G=Math.ceil(T/U);x*=G/k,k=G}return{x1:p,y1:x,x2:p+T,y2:x+k}}function wR(c,o,d,p,x,T){const k=c.image;let R;if(k.content){const Ce=k.content,Me=k.pixelRatio||1;R=[Ce[0]/Me,Ce[1]/Me,k.displaySize[0]-Ce[2]/Me,k.displaySize[1]-Ce[3]/Me]}const D=o.left*T,U=o.right*T;let G,K,ee,oe;d==="width"||d==="both"?(oe=x[0]+D-p[3],K=x[0]+U+p[1]):(oe=x[0]+(D+U-k.displaySize[0])/2,K=oe+k.displaySize[0]);const ce=o.top*T,me=o.bottom*T;return d==="height"||d==="both"?(G=x[1]+ce-p[0],ee=x[1]+me+p[2]):(G=x[1]+(ce+me-k.displaySize[1])/2,ee=G+k.displaySize[1]),{image:k,top:G,right:K,bottom:ee,left:oe,collisionPadding:R}}const ty=255,Fc=128,Gd=ty*Fc;function SR(c,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new li(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:x}=d;let T=0;for(;T<p.length&&p[T]<=c;)T++;T=Math.max(0,T-1);let k=T;for(;k<p.length&&p[k]<c+1;)k++;k=Math.min(p.length-1,k);const R=p[T],D=p[k];return d.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:D,interpolationType:x}:{kind:"camera",minZoom:R,maxZoom:D,minSize:d.evaluate(new li(R)),maxSize:d.evaluate(new li(D)),interpolationType:x}}}function dS(c,o,d){let p="never";const x=c.get(o);return x?p=x:c.get(d)&&(p="always"),p}const AV=Zd.VectorTileFeature.types,IV=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fx(c,o,d,p,x,T,k,R,D,U,G,K,ee){const oe=R?Math.min(Gd,Math.round(R[0])):0,ce=R?Math.min(Gd,Math.round(R[1])):0;c.emplaceBack(o,d,Math.round(32*p),Math.round(32*x),T,k,(oe<<1)+(D?1:0),ce,16*U,16*G,256*K,256*ee)}function hS(c,o,d){c.emplaceBack(o.x,o.y,d),c.emplaceBack(o.x,o.y,d),c.emplaceBack(o.x,o.y,d),c.emplaceBack(o.x,o.y,d)}function RV(c){for(const o of c.sections)if(B1(o.text))return!0;return!1}class fS{constructor(o){this.layoutVertexArray=new Hp,this.indexArray=new Oa,this.programConfigurations=o,this.segments=new kr,this.dynamicLayoutVertexArray=new $g,this.opacityVertexArray=new ca,this.hasVisibleVertices=!1,this.placedSymbolArray=new ci}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,p,x){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,oV.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,aV.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,IV,!0),this.opacityVertexBuffer.itemSize=1),(p||x)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hn("SymbolBuffers",fS);class pS{constructor(o,d,p){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new p,this.segments=new kr,this.collisionVertexArray=new jc}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,lV.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hn("CollisionBuffers",pS);class nm{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(k=>k.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=G1([]),this.placementViewportMatrix=G1([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=SR(this.zoom,d["text-size"]),this.iconSizeData=SR(this.zoom,d["icon-size"]);const p=this.layers[0].layout,x=p.get("symbol-sort-key"),T=p.get("symbol-z-order");this.canOverlap=dS(p,"text-overlap","text-allow-overlap")!=="never"||dS(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(k=>u.ah[k])),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.sourceID=o.sourceID}createArrays(){this.text=new fS(new Ef(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new fS(new Ef(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new ui,this.lineVertexArray=new $s,this.symbolInstances=new Cr,this.textAnchorOffsets=new di}calculateGlyphDependencies(o,d,p,x,T){for(let k=0;k<o.length;k++)if(d[o.charCodeAt(k)]=!0,(p||x)&&T){const R=Qg[o.charAt(k)];R&&(d[R.charCodeAt(0)]=!0)}}populate(o,d,p){const x=this.layers[0],T=x.layout,k=T.get("text-font"),R=T.get("text-field"),D=T.get("icon-image"),U=(R.value.kind!=="constant"||R.value.value instanceof Wr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),G=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,K=T.get("symbol-sort-key");if(this.features=[],!U&&!G)return;const ee=d.iconDependencies,oe=d.glyphDependencies,ce=d.availableImages,me=new li(this.zoom);for(const{feature:Ce,id:Me,index:rt,sourceLayerIndex:Ze}of o){const tt=x._featureFilter.needGeometry,pt=Tf(Ce,tt);if(!x._featureFilter.filter(me,pt,p))continue;let Dt,on;if(tt||(pt.geometry=Cf(Ce)),U){const en=x.getValueAndResolveTokens("text-field",pt,p,ce),Kt=Wr.factory(en),Rn=this.hasRTLText=this.hasRTLText||RV(Kt);(!Rn||jo.getRTLTextPluginStatus()==="unavailable"||Rn&&jo.isParsed())&&(Dt=uV(Kt,x,pt))}if(G){const en=x.getValueAndResolveTokens("icon-image",pt,p,ce);on=en instanceof mr?en:mr.fromString(en)}if(!Dt&&!on)continue;const Vn=this.sortFeaturesByKey?K.evaluate(pt,{},p):void 0;if(this.features.push({id:Me,text:Dt,icon:on,index:rt,sourceLayerIndex:Ze,geometry:pt.geometry,properties:Ce.properties,type:AV[Ce.type],sortKey:Vn}),on&&(ee[on.name]=!0),Dt){const en=k.evaluate(pt,{},p).join(","),Kt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(const Rn of Dt.sections)if(Rn.image)ee[Rn.image.name]=!0;else{const _n=gf(Dt.toString()),gn=Rn.fontStack||en,St=oe[gn]=oe[gn]||{};this.calculateGlyphDependencies(Rn.text,St,Kt,this.allowVerticalPlacement,_n)}}}T.get("symbol-placement")==="line"&&(this.features=function(Ce){const Me={},rt={},Ze=[];let tt=0;function pt(en){Ze.push(Ce[en]),tt++}function Dt(en,Kt,Rn){const _n=rt[en];return delete rt[en],rt[Kt]=_n,Ze[_n].geometry[0].pop(),Ze[_n].geometry[0]=Ze[_n].geometry[0].concat(Rn[0]),_n}function on(en,Kt,Rn){const _n=Me[Kt];return delete Me[Kt],Me[en]=_n,Ze[_n].geometry[0].shift(),Ze[_n].geometry[0]=Rn[0].concat(Ze[_n].geometry[0]),_n}function Vn(en,Kt,Rn){const _n=Rn?Kt[0][Kt[0].length-1]:Kt[0][0];return`${en}:${_n.x}:${_n.y}`}for(let en=0;en<Ce.length;en++){const Kt=Ce[en],Rn=Kt.geometry,_n=Kt.text?Kt.text.toString():null;if(!_n){pt(en);continue}const gn=Vn(_n,Rn),St=Vn(_n,Rn,!0);if(gn in rt&&St in Me&&rt[gn]!==Me[St]){const On=on(gn,St,Rn),An=Dt(gn,St,Ze[On].geometry);delete Me[gn],delete rt[St],rt[Vn(_n,Ze[An].geometry,!0)]=An,Ze[On].geometry=null}else gn in rt?Dt(gn,St,Rn):St in Me?on(gn,St,Rn):(pt(en),Me[gn]=tt-1,rt[St]=tt-1)}return Ze.filter(en=>en.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Me)=>Ce.sortKey-Me.sortKey)}update(o,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const p=this.lineVertexArray.length;if(o.segment!==void 0){let x=o.dist(d[o.segment+1]),T=o.dist(d[o.segment]);const k={};for(let R=o.segment+1;R<d.length;R++)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:x},R<d.length-1&&(x+=d[R+1].dist(d[R]));for(let R=o.segment||0;R>=0;R--)k[R]={x:d[R].x,y:d[R].y,tileUnitDistanceFromAnchor:T},R>0&&(T+=d[R-1].dist(d[R]));for(let R=0;R<d.length;R++){const D=k[R];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,d,p,x,T,k,R,D,U,G,K,ee){const oe=o.indexArray,ce=o.layoutVertexArray,me=o.segments.prepareSegment(4*d.length,ce,oe,this.canOverlap?k.sortKey:void 0),Ce=this.glyphOffsetArray.length,Me=me.vertexLength,rt=this.allowVerticalPlacement&&R===u.ah.vertical?Math.PI/2:0,Ze=k.text&&k.text.sections;for(let tt=0;tt<d.length;tt++){const{tl:pt,tr:Dt,bl:on,br:Vn,tex:en,pixelOffsetTL:Kt,pixelOffsetBR:Rn,minFontScaleX:_n,minFontScaleY:gn,glyphOffset:St,isSDF:On,sectionIndex:An}=d[tt],Qn=me.vertexLength,ei=St[1];fx(ce,D.x,D.y,pt.x,ei+pt.y,en.x,en.y,p,On,Kt.x,Kt.y,_n,gn),fx(ce,D.x,D.y,Dt.x,ei+Dt.y,en.x+en.w,en.y,p,On,Rn.x,Kt.y,_n,gn),fx(ce,D.x,D.y,on.x,ei+on.y,en.x,en.y+en.h,p,On,Kt.x,Rn.y,_n,gn),fx(ce,D.x,D.y,Vn.x,ei+Vn.y,en.x+en.w,en.y+en.h,p,On,Rn.x,Rn.y,_n,gn),hS(o.dynamicLayoutVertexArray,D,rt),oe.emplaceBack(Qn,Qn+1,Qn+2),oe.emplaceBack(Qn+1,Qn+2,Qn+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(St[0]),tt!==d.length-1&&An===d[tt+1].sectionIndex||o.programConfigurations.populatePaintArrays(ce.length,k,k.index,{},ee,Ze&&Ze[An])}o.placedSymbolArray.emplaceBack(D.x,D.y,Ce,this.glyphOffsetArray.length-Ce,Me,U,G,D.segment,p?p[0]:0,p?p[1]:0,x[0],x[1],R,0,!1,0,K)}_addCollisionDebugVertex(o,d,p,x,T,k){return d.emplaceBack(0,0),o.emplaceBack(p.x,p.y,x,T,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(o,d,p,x,T,k,R){const D=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),U=D.vertexLength,G=T.layoutVertexArray,K=T.collisionVertexArray,ee=R.anchorX,oe=R.anchorY;this._addCollisionDebugVertex(G,K,k,ee,oe,new C(o,d)),this._addCollisionDebugVertex(G,K,k,ee,oe,new C(p,d)),this._addCollisionDebugVertex(G,K,k,ee,oe,new C(p,x)),this._addCollisionDebugVertex(G,K,k,ee,oe,new C(o,x)),D.vertexLength+=4;const ce=T.indexArray;ce.emplaceBack(U,U+1),ce.emplaceBack(U+1,U+2),ce.emplaceBack(U+2,U+3),ce.emplaceBack(U+3,U),D.primitiveLength+=4}addDebugCollisionBoxes(o,d,p,x){for(let T=o;T<d;T++){const k=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,x?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pS(ua,aR.members,Ls),this.iconCollisionBox=new pS(ua,aR.members,Ls);for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(o,d,p,x,T,k,R,D,U){const G={};for(let K=d;K<p;K++){const ee=o.get(K);G.textBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},G.textFeatureIndex=ee.featureIndex;break}for(let K=x;K<T;K++){const ee=o.get(K);G.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},G.verticalTextFeatureIndex=ee.featureIndex;break}for(let K=k;K<R;K++){const ee=o.get(K);G.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},G.iconFeatureIndex=ee.featureIndex;break}for(let K=D;K<U;K++){const ee=o.get(K);G.verticalIconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},G.verticalIconFeatureIndex=ee.featureIndex;break}return G}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const p=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const p=o.placedSymbolArray.get(d),x=p.vertexStartIndex+4*p.numGlyphs;for(let T=p.vertexStartIndex;T<x;T+=4)o.indexArray.emplaceBack(T,T+1,T+2),o.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),p=Math.cos(o),x=[],T=[],k=[];for(let R=0;R<this.symbolInstances.length;++R){k.push(R);const D=this.symbolInstances.get(R);x.push(0|Math.round(d*D.anchorX+p*D.anchorY)),T.push(D.featureIndex)}return k.sort((R,D)=>x[R]-x[D]||T[D]-T[R]),k}addToSortKeyRanges(o,d){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===d?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const p=this.symbolInstances.get(d);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((x,T,k)=>{x>=0&&k.indexOf(x)===T&&this.addIndicesForPlacedSymbol(this.text,x)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ER,CR;hn("SymbolBucket",nm,{omit:["layers","collisionBoxArray","features","compareText"]}),nm.MAX_GLYPHS=65535,nm.addDynamicAttributes=hS;var mS={get paint(){return CR=CR||new E({"icon-opacity":new qn(Qe.paint_symbol["icon-opacity"]),"icon-color":new qn(Qe.paint_symbol["icon-color"]),"icon-halo-color":new qn(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new qn(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qn(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new kn(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new kn(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new qn(Qe.paint_symbol["text-opacity"]),"text-color":new qn(Qe.paint_symbol["text-color"],{runtimeType:Gr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new qn(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new qn(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new qn(Qe.paint_symbol["text-halo-blur"]),"text-translate":new kn(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new kn(Qe.paint_symbol["text-translate-anchor"])})},get layout(){return ER=ER||new E({"symbol-placement":new kn(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new kn(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kn(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qn(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kn(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kn(Qe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new kn(Qe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new kn(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new kn(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kn(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new qn(Qe.layout_symbol["icon-size"]),"icon-text-fit":new kn(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kn(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new qn(Qe.layout_symbol["icon-image"]),"icon-rotate":new qn(Qe.layout_symbol["icon-rotate"]),"icon-padding":new qn(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new kn(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new qn(Qe.layout_symbol["icon-offset"]),"icon-anchor":new qn(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kn(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kn(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kn(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new qn(Qe.layout_symbol["text-field"]),"text-font":new qn(Qe.layout_symbol["text-font"]),"text-size":new qn(Qe.layout_symbol["text-size"]),"text-max-width":new qn(Qe.layout_symbol["text-max-width"]),"text-line-height":new kn(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new qn(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new qn(Qe.layout_symbol["text-justify"]),"text-radial-offset":new qn(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kn(Qe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qn(Qe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qn(Qe.layout_symbol["text-anchor"]),"text-max-angle":new kn(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new kn(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new qn(Qe.layout_symbol["text-rotate"]),"text-padding":new kn(Qe.layout_symbol["text-padding"]),"text-keep-upright":new kn(Qe.layout_symbol["text-keep-upright"]),"text-transform":new qn(Qe.layout_symbol["text-transform"]),"text-offset":new qn(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new kn(Qe.layout_symbol["text-allow-overlap"]),"text-overlap":new kn(Qe.layout_symbol["text-overlap"]),"text-ignore-placement":new kn(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new kn(Qe.layout_symbol["text-optional"])})}};class TR{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Xn,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hn("FormatSectionOverride",TR,{omit:["defaultValue"]});class px extends f{constructor(o){super(o,mS)}recalculate(o,d){if(super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const x=[];for(const T of p)x.indexOf(T)<0&&x.push(T);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,d,p,x){const T=this.layout.get(o).evaluate(d,{},p,x),k=this._unevaluatedLayout._values[o];return k.isDataDriven()||Hl(k.value)||!T?T:function(R,D){return D.replace(/{([^{}]+)}/g,(U,G)=>R&&G in R?String(R[G]):"")}(d.properties,T)}createBucket(o){return new nm(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of mS.paint.overridableProperties){if(!px.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),p=new TR(d),x=new Id(p,d.property.specification);let T=null;T=d.value.kind==="constant"||d.value.kind==="source"?new Zl("source",x):new Rc("composite",x,d.value.zoomStops),this.paint._values[o]=new cl(d.property,T,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,p){return!(!this.layout||d.isDataDriven()||p.isDataDriven())&&px.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const p=o.get("text-field"),x=mS.paint.properties[d];let T=!1;const k=R=>{for(const D of R)if(x.overrides&&x.overrides.hasOverride(D))return void(T=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Wr)k(p.value.value.sections);else if(p.value.kind==="source"){const R=U=>{T||(U instanceof Hi&&mn(U.value)===ls?k(U.value.sections):U instanceof he?k(U.sections):U.eachChild(R))},D=p.value;D._styleExpression&&R(D._styleExpression.expression)}return T}}let kR;var LV={get paint(){return kR=kR||new E({"background-color":new kn(Qe.paint_background["background-color"]),"background-pattern":new $p(Qe.paint_background["background-pattern"]),"background-opacity":new kn(Qe.paint_background["background-opacity"])})}};class MV extends f{constructor(o){super(o,LV)}}let PR;var OV={get paint(){return PR=PR||new E({"raster-opacity":new kn(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new kn(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kn(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kn(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new kn(Qe.paint_raster["raster-saturation"]),"raster-contrast":new kn(Qe.paint_raster["raster-contrast"]),"raster-resampling":new kn(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new kn(Qe.paint_raster["raster-fade-duration"])})}};class DV extends f{constructor(o){super(o,OV)}}class NV extends f{constructor(o){super(o,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class jV{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const gS=63710088e-1;class Wd{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wd(fe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,p=this.lat*d,x=o.lat*d,T=Math.sin(p)*Math.sin(x)+Math.cos(p)*Math.cos(x)*Math.cos((o.lng-this.lng)*d);return gS*Math.acos(Math.min(T,1))}static convert(o){if(o instanceof Wd)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Wd(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Wd(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const AR=2*Math.PI*gS;function IR(c){return AR*Math.cos(c*Math.PI/180)}function RR(c){return(180+c)/360}function LR(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function MR(c,o){return c/IR(o)}function yS(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class ny{constructor(o,d,p=0){this.x=+o,this.y=+d,this.z=+p}static fromLngLat(o,d=0){const p=Wd.convert(o);return new ny(RR(p.lng),LR(p.lat),MR(d,p.lat))}toLngLat(){return new Wd(360*this.x-180,yS(this.y))}toAltitude(){return this.z*IR(yS(this.y))}meterInMercatorCoordinateUnits(){return 1/AR*(o=yS(this.y),1/Math.cos(o*Math.PI/180));var o}}function OR(c,o,d){var p=2*Math.PI*6378137/256/Math.pow(2,d);return[c*p-2*Math.PI*6378137/2,o*p-2*Math.PI*6378137/2]}class vS{constructor(o,d,p){if(!function(x,T,k){return!(x<0||x>25||k<0||k>=Math.pow(2,x)||T<0||T>=Math.pow(2,x))}(o,d,p))throw new Error(`x=${d}, y=${p}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=d,this.y=p,this.key=ry(0,o,o,d,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d,p){const x=(k=this.y,R=this.z,D=OR(256*(T=this.x),256*(k=Math.pow(2,R)-k-1),R),U=OR(256*(T+1),256*(k+1),R),D[0]+","+D[1]+","+U[0]+","+U[1]);var T,k,R,D,U;const G=function(K,ee,oe){let ce,me="";for(let Ce=K;Ce>0;Ce--)ce=1<<Ce-1,me+=(ee&ce?1:0)+(oe&ce?2:0);return me}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,x)}isChildOf(o){const d=this.z-o.z;return d>0&&o.x===this.x>>d&&o.y===this.y>>d}getTilePoint(o){const d=Math.pow(2,this.z);return new C((o.x*d-this.x)*ss,(o.y*d-this.y)*ss)}toString(){return`${this.z}/${this.x}/${this.y}`}}class DR{constructor(o,d){this.wrap=o,this.canonical=d,this.key=ry(o,d.z,d.z,d.x,d.y)}}class Na{constructor(o,d,p,x,T){if(o<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${p}`);this.overscaledZ=o,this.wrap=d,this.canonical=new vS(p,+x,+T),this.key=ry(d,o,p,x,T)}clone(){return new Na(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?new Na(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Na(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-o;return o>this.canonical.z?ry(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y):ry(this.wrap*+d,o,o,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Na(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,p=2*this.canonical.x,x=2*this.canonical.y;return[new Na(d,this.wrap,d,p,x),new Na(d,this.wrap,d,p+1,x),new Na(d,this.wrap,d,p,x+1),new Na(d,this.wrap,d,p+1,x+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Na(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Na(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new DR(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new ny(o.x-this.wrap,o.y))}}function ry(c,o,d,p,x){(c*=2)<0&&(c=-1*c-1);const T=1<<d;return(T*T*c+T*x+p).toString(36)+d.toString(36)+o.toString(36)}hn("CanonicalTileID",vS),hn("OverscaledTileID",Na,{omit:["posMatrix"]});class NR{constructor(o,d,p,x=1,T=1,k=1,R=0){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void Xe(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const D=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=T,this.blueFactor=k,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<D;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(D,U)]=this.data[this._idx(D-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,D)]=this.data[this._idx(U,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<D;U++)for(let G=0;G<D;G++){const K=this.get(U,G);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(o,d){const p=new Uint8Array(this.data.buffer),x=4*this._idx(o,d);return this.unpack(p[x],p[x+1],p[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}unpack(o,d,p){return o*this.redFactor+d*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Da({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,d,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let x=d*this.dim,T=d*this.dim+this.dim,k=p*this.dim,R=p*this.dim+this.dim;switch(d){case-1:x=T-1;break;case 1:T=x+1}switch(p){case-1:k=R-1;break;case 1:R=k+1}const D=-d*this.dim,U=-p*this.dim;for(let G=k;G<R;G++)for(let K=x;K<T;K++)this.data[this._idx(K,G)]=o.data[this._idx(K+D,G+U)]}}hn("DEMData",NR);class jR{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const p=o[d];this._stringToNumber[p]=d,this._numberToString[d]=p}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class zR{constructor(o,d,p,x,T){this.type="Feature",this._vectorTileFeature=o,o._z=d,o._x=p,o._y=x,this.properties=o.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(o[d]=this[d]);return o}}class FR{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new qi(ss,16,0),this.grid3D=new qi(ss,16,0),this.featureIndexArray=new io,this.promoteId=d}insert(o,d,p,x,T,k){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,x,T);const D=k?this.grid3D:this.grid;for(let U=0;U<d.length;U++){const G=d[U],K=[1/0,1/0,-1/0,-1/0];for(let ee=0;ee<G.length;ee++){const oe=G[ee];K[0]=Math.min(K[0],oe.x),K[1]=Math.min(K[1],oe.y),K[2]=Math.max(K[2],oe.x),K[3]=Math.max(K[3],oe.y)}K[0]<ss&&K[1]<ss&&K[2]>=0&&K[3]>=0&&D.insert(R,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zd.VectorTile(new oS(this.rawTileData)).layers,this.sourceLayerCoder=new jR(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,d,p,x){this.loadVTLayers();const T=o.params||{},k=ss/o.tileSize/o.scale,R=Mc(T.filter),D=o.queryGeometry,U=o.queryPadding*k,G=UR(D),K=this.grid.query(G.minX-U,G.minY-U,G.maxX+U,G.maxY+U),ee=UR(o.cameraQueryGeometry),oe=this.grid3D.query(ee.minX-U,ee.minY-U,ee.maxX+U,ee.maxY+U,(Ce,Me,rt,Ze)=>function(tt,pt,Dt,on,Vn){for(const Kt of tt)if(pt<=Kt.x&&Dt<=Kt.y&&on>=Kt.x&&Vn>=Kt.y)return!0;const en=[new C(pt,Dt),new C(pt,Vn),new C(on,Vn),new C(on,Dt)];if(tt.length>2){for(const Kt of en)if(Xp(tt,Kt))return!0}for(let Kt=0;Kt<tt.length-1;Kt++)if(g$(tt[Kt],tt[Kt+1],en))return!0;return!1}(o.cameraQueryGeometry,Ce-U,Me-U,rt+U,Ze+U));for(const Ce of oe)K.push(Ce);K.sort(zV);const ce={};let me;for(let Ce=0;Ce<K.length;Ce++){const Me=K[Ce];if(Me===me)continue;me=Me;const rt=this.featureIndexArray.get(Me);let Ze=null;this.loadMatchingFeature(ce,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,R,T.layers,T.availableImages,d,p,x,(tt,pt,Dt)=>(Ze||(Ze=Cf(tt)),pt.queryIntersectsFeature(D,tt,Dt,Ze,this.z,o.transform,k,o.pixelPosMatrix)))}return ce}loadMatchingFeature(o,d,p,x,T,k,R,D,U,G,K){const ee=this.bucketLayerIDs[d];if(k&&!function(Ce,Me){for(let rt=0;rt<Ce.length;rt++)if(Me.indexOf(Ce[rt])>=0)return!0;return!1}(k,ee))return;const oe=this.sourceLayerCoder.decode(p),ce=this.vtLayers[oe].feature(x);if(T.needGeometry){const Ce=Tf(ce,!0);if(!T.filter(new li(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!T.filter(new li(this.tileID.overscaledZ),ce))return;const me=this.getId(ce,oe);for(let Ce=0;Ce<ee.length;Ce++){const Me=ee[Ce];if(k&&k.indexOf(Me)<0)continue;const rt=D[Me];if(!rt)continue;let Ze={};me&&G&&(Ze=G.getState(rt.sourceLayer||"_geojsonTileLayer",me));const tt=Z({},U[Me]);tt.paint=BR(tt.paint,rt.paint,ce,Ze,R),tt.layout=BR(tt.layout,rt.layout,ce,Ze,R);const pt=!K||K(ce,rt,Ze);if(!pt)continue;const Dt=new zR(ce,this.z,this.x,this.y,me);Dt.layer=tt;let on=o[Me];on===void 0&&(on=o[Me]=[]),on.push({featureIndex:x,feature:Dt,intersectionZ:pt})}}lookupSymbolFeatures(o,d,p,x,T,k,R,D){const U={};this.loadVTLayers();const G=Mc(T);for(const K of o)this.loadMatchingFeature(U,p,x,K,G,k,R,D,d);return U}hasLayer(o){for(const d of this.bucketLayerIDs)for(const p of d)if(o===p)return!0;return!1}getId(o,d){let p=o.id;return this.promoteId&&(p=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof p=="boolean"&&(p=Number(p))),p}}function BR(c,o,d,p,x){return be(c,(T,k)=>{const R=o instanceof bf?o.get(k):null;return R&&R.evaluate?R.evaluate(d,p,x):R})}function UR(c){let o=1/0,d=1/0,p=-1/0,x=-1/0;for(const T of c)o=Math.min(o,T.x),d=Math.min(d,T.y),p=Math.max(p,T.x),x=Math.max(x,T.y);return{minX:o,minY:d,maxX:p,maxY:x}}function zV(c,o){return o-c}function $R(c,o,d,p,x){const T=[];for(let k=0;k<c.length;k++){const R=c[k];let D;for(let U=0;U<R.length-1;U++){let G=R[U],K=R[U+1];G.x<o&&K.x<o||(G.x<o?G=new C(o,G.y+(o-G.x)/(K.x-G.x)*(K.y-G.y))._round():K.x<o&&(K=new C(o,G.y+(o-G.x)/(K.x-G.x)*(K.y-G.y))._round()),G.y<d&&K.y<d||(G.y<d?G=new C(G.x+(d-G.y)/(K.y-G.y)*(K.x-G.x),d)._round():K.y<d&&(K=new C(G.x+(d-G.y)/(K.y-G.y)*(K.x-G.x),d)._round()),G.x>=p&&K.x>=p||(G.x>=p?G=new C(p,G.y+(p-G.x)/(K.x-G.x)*(K.y-G.y))._round():K.x>=p&&(K=new C(p,G.y+(p-G.x)/(K.x-G.x)*(K.y-G.y))._round()),G.y>=x&&K.y>=x||(G.y>=x?G=new C(G.x+(x-G.y)/(K.y-G.y)*(K.x-G.x),x)._round():K.y>=x&&(K=new C(G.x+(x-G.y)/(K.y-G.y)*(K.x-G.x),x)._round()),D&&G.equals(D[D.length-1])||(D=[G],T.push(D)),D.push(K)))))}}return T}hn("FeatureIndex",FR,{omit:["rawTileData","sourceLayerCoder"]});class Xd extends C{constructor(o,d,p,x){super(o,d),this.angle=p,x!==void 0&&(this.segment=x)}clone(){return new Xd(this.x,this.y,this.angle,this.segment)}}function VR(c,o,d,p,x){if(o.segment===void 0||d===0)return!0;let T=o,k=o.segment+1,R=0;for(;R>-d/2;){if(k--,k<0)return!1;R-=c[k].dist(T),T=c[k]}R+=c[k].dist(c[k+1]),k++;const D=[];let U=0;for(;R<d/2;){const G=c[k],K=c[k+1];if(!K)return!1;let ee=c[k-1].angleTo(G)-G.angleTo(K);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:R,angleDelta:ee}),U+=ee;R-D[0].distance>p;)U-=D.shift().angleDelta;if(U>x)return!1;k++,R+=G.dist(K)}return!0}function HR(c){let o=0;for(let d=0;d<c.length-1;d++)o+=c[d].dist(c[d+1]);return o}function ZR(c,o,d){return c?.6*o*d:0}function qR(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function FV(c,o,d,p,x,T){const k=ZR(d,x,T),R=qR(d,p)*T;let D=0;const U=HR(c)/2;for(let G=0;G<c.length-1;G++){const K=c[G],ee=c[G+1],oe=K.dist(ee);if(D+oe>U){const ce=(U-D)/oe,me=ns.number(K.x,ee.x,ce),Ce=ns.number(K.y,ee.y,ce),Me=new Xd(me,Ce,ee.angleTo(K),G);return Me._round(),!k||VR(c,Me,R,k,o)?Me:void 0}D+=oe}}function BV(c,o,d,p,x,T,k,R,D){const U=ZR(p,T,k),G=qR(p,x),K=G*k,ee=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return o-K<o/4&&(o=K+o/4),GR(c,ee?o/2*R%o:(G/2+2*T)*k*R%o,o,U,d,K,ee,!1,D)}function GR(c,o,d,p,x,T,k,R,D){const U=T/2,G=HR(c);let K=0,ee=o-d,oe=[];for(let ce=0;ce<c.length-1;ce++){const me=c[ce],Ce=c[ce+1],Me=me.dist(Ce),rt=Ce.angleTo(me);for(;ee+d<K+Me;){ee+=d;const Ze=(ee-K)/Me,tt=ns.number(me.x,Ce.x,Ze),pt=ns.number(me.y,Ce.y,Ze);if(tt>=0&&tt<D&&pt>=0&&pt<D&&ee-U>=0&&ee+U<=G){const Dt=new Xd(tt,pt,rt,ce);Dt._round(),p&&!VR(c,Dt,T,p,x)||oe.push(Dt)}}K+=Me}return R||oe.length||k||(oe=GR(c,K/2,d,p,x,T,k,!0,D)),oe}hn("Anchor",Xd);const iy=Fo;function WR(c,o,d,p){const x=[],T=c.image,k=T.pixelRatio,R=T.paddedRect.w-2*iy,D=T.paddedRect.h-2*iy;let U={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const G=T.stretchX||[[0,R]],K=T.stretchY||[[0,D]],ee=(St,On)=>St+On[1]-On[0],oe=G.reduce(ee,0),ce=K.reduce(ee,0),me=R-oe,Ce=D-ce;let Me=0,rt=oe,Ze=0,tt=ce,pt=0,Dt=me,on=0,Vn=Ce;if(T.content&&p){const St=T.content,On=St[2]-St[0],An=St[3]-St[1];(T.textFitWidth||T.textFitHeight)&&(U=bR(c)),Me=mx(G,0,St[0]),Ze=mx(K,0,St[1]),rt=mx(G,St[0],St[2]),tt=mx(K,St[1],St[3]),pt=St[0]-Me,on=St[1]-Ze,Dt=On-rt,Vn=An-tt}const en=U.x1,Kt=U.y1,Rn=U.x2-en,_n=U.y2-Kt,gn=(St,On,An,Qn)=>{const ei=gx(St.stretch-Me,rt,Rn,en),Yr=yx(St.fixed-pt,Dt,St.stretch,oe),vs=gx(On.stretch-Ze,tt,_n,Kt),dl=yx(On.fixed-on,Vn,On.stretch,ce),qs=gx(An.stretch-Me,rt,Rn,en),_s=yx(An.fixed-pt,Dt,An.stretch,oe),xo=gx(Qn.stretch-Ze,tt,_n,Kt),bo=yx(Qn.fixed-on,Vn,Qn.stretch,ce),wo=new C(ei,vs),Ni=new C(qs,vs),xs=new C(qs,xo),oo=new C(ei,xo),Gs=new C(Yr/k,dl/k),So=new C(_s/k,bo/k),Ws=o*Math.PI/180;if(Ws){const zr=Math.sin(Ws),ni=Math.cos(Ws),hi=[ni,-zr,zr,ni];wo._matMult(hi),Ni._matMult(hi),oo._matMult(hi),xs._matMult(hi)}const ja=St.stretch+St.fixed,Bo=On.stretch+On.fixed;return{tl:wo,tr:Ni,bl:oo,br:xs,tex:{x:T.paddedRect.x+iy+ja,y:T.paddedRect.y+iy+Bo,w:An.stretch+An.fixed-ja,h:Qn.stretch+Qn.fixed-Bo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gs,pixelOffsetBR:So,minFontScaleX:Dt/k/Rn,minFontScaleY:Vn/k/_n,isSDF:d}};if(p&&(T.stretchX||T.stretchY)){const St=XR(G,me,oe),On=XR(K,Ce,ce);for(let An=0;An<St.length-1;An++){const Qn=St[An],ei=St[An+1];for(let Yr=0;Yr<On.length-1;Yr++)x.push(gn(Qn,On[Yr],ei,On[Yr+1]))}}else x.push(gn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:D+1}));return x}function mx(c,o,d){let p=0;for(const x of c)p+=Math.max(o,Math.min(d,x[1]))-Math.max(o,Math.min(d,x[0]));return p}function XR(c,o,d){const p=[{fixed:-1,stretch:0}];for(const[x,T]of c){const k=p[p.length-1];p.push({fixed:x-k.stretch,stretch:k.stretch}),p.push({fixed:x-k.stretch,stretch:k.stretch+(T-x)})}return p.push({fixed:o+iy,stretch:d}),p}function gx(c,o,d,p){return c/o*d+p}function yx(c,o,d,p){return c-o*d/p}class vx{constructor(o,d,p,x,T,k,R,D,U,G){var K;if(this.boxStartIndex=o.length,U){let ee=k.top,oe=k.bottom;const ce=k.collisionPadding;ce&&(ee-=ce[1],oe+=ce[3]);let me=oe-ee;me>0&&(me=Math.max(10,me),this.circleDiameter=me)}else{const ee=!((K=k.image)===null||K===void 0)&&K.content&&(k.image.textFitWidth||k.image.textFitHeight)?bR(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};ee.y1=ee.y1*R-D[0],ee.y2=ee.y2*R+D[2],ee.x1=ee.x1*R-D[3],ee.x2=ee.x2*R+D[1];const oe=k.collisionPadding;if(oe&&(ee.x1-=oe[0]*R,ee.y1-=oe[1]*R,ee.x2+=oe[2]*R,ee.y2+=oe[3]*R),G){const ce=new C(ee.x1,ee.y1),me=new C(ee.x2,ee.y1),Ce=new C(ee.x1,ee.y2),Me=new C(ee.x2,ee.y2),rt=G*Math.PI/180;ce._rotate(rt),me._rotate(rt),Ce._rotate(rt),Me._rotate(rt),ee.x1=Math.min(ce.x,me.x,Ce.x,Me.x),ee.x2=Math.max(ce.x,me.x,Ce.x,Me.x),ee.y1=Math.min(ce.y,me.y,Ce.y,Me.y),ee.y2=Math.max(ce.y,me.y,Ce.y,Me.y)}o.emplaceBack(d.x,d.y,ee.x1,ee.y1,ee.x2,ee.y2,p,x,T)}this.boxEndIndex=o.length}}class UV{constructor(o=[],d=(p,x)=>p<x?-1:p>x?1:0){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:p}=this,x=d[o];for(;o>0;){const T=o-1>>1,k=d[T];if(p(x,k)>=0)break;d[o]=k,o=T}d[o]=x}_down(o){const{data:d,compare:p}=this,x=this.length>>1,T=d[o];for(;o<x;){let k=1+(o<<1);const R=k+1;if(R<this.length&&p(d[R],d[k])<0&&(k=R),p(d[k],T)>=0)break;d[o]=d[k],o=k}d[o]=T}}function $V(c,o=1,d=!1){let p=1/0,x=1/0,T=-1/0,k=-1/0;const R=c[0];for(let oe=0;oe<R.length;oe++){const ce=R[oe];(!oe||ce.x<p)&&(p=ce.x),(!oe||ce.y<x)&&(x=ce.y),(!oe||ce.x>T)&&(T=ce.x),(!oe||ce.y>k)&&(k=ce.y)}const D=Math.min(T-p,k-x);let U=D/2;const G=new UV([],VV);if(D===0)return new C(p,x);for(let oe=p;oe<T;oe+=D)for(let ce=x;ce<k;ce+=D)G.push(new rm(oe+U,ce+U,U,c));let K=function(oe){let ce=0,me=0,Ce=0;const Me=oe[0];for(let rt=0,Ze=Me.length,tt=Ze-1;rt<Ze;tt=rt++){const pt=Me[rt],Dt=Me[tt],on=pt.x*Dt.y-Dt.x*pt.y;me+=(pt.x+Dt.x)*on,Ce+=(pt.y+Dt.y)*on,ce+=3*on}return new rm(me/ce,Ce/ce,0,oe)}(c),ee=G.length;for(;G.length;){const oe=G.pop();(oe.d>K.d||!K.d)&&(K=oe,d&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,ee)),oe.max-K.d<=o||(U=oe.h/2,G.push(new rm(oe.p.x-U,oe.p.y-U,U,c)),G.push(new rm(oe.p.x+U,oe.p.y-U,U,c)),G.push(new rm(oe.p.x-U,oe.p.y+U,U,c)),G.push(new rm(oe.p.x+U,oe.p.y+U,U,c)),ee+=4)}return d&&(console.log(`num probes: ${ee}`),console.log(`best distance: ${K.d}`)),K.p}function VV(c,o){return o.max-c.max}function rm(c,o,d,p){this.p=new C(c,o),this.h=d,this.d=function(x,T){let k=!1,R=1/0;for(let D=0;D<T.length;D++){const U=T[D];for(let G=0,K=U.length,ee=K-1;G<K;ee=G++){const oe=U[G],ce=U[ee];oe.y>x.y!=ce.y>x.y&&x.x<(ce.x-oe.x)*(x.y-oe.y)/(ce.y-oe.y)+oe.x&&(k=!k),R=Math.min(R,MI(x,oe,ce))}}return(k?1:-1)*Math.sqrt(R)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Zs;u.aq=void 0,(Zs=u.aq||(u.aq={}))[Zs.center=1]="center",Zs[Zs.left=2]="left",Zs[Zs.right=3]="right",Zs[Zs.top=4]="top",Zs[Zs.bottom=5]="bottom",Zs[Zs["top-left"]=6]="top-left",Zs[Zs["top-right"]=7]="top-right",Zs[Zs["bottom-left"]=8]="bottom-left",Zs[Zs["bottom-right"]=9]="bottom-right";const Kd=7,_S=Number.POSITIVE_INFINITY;function KR(c,o){return o[1]!==_S?function(d,p,x){let T=0,k=0;switch(p=Math.abs(p),x=Math.abs(x),d){case"top-right":case"top-left":case"top":k=x-Kd;break;case"bottom-right":case"bottom-left":case"bottom":k=-x+Kd}switch(d){case"top-right":case"bottom-right":case"right":T=-p;break;case"top-left":case"bottom-left":case"left":T=p}return[T,k]}(c,o[0],o[1]):function(d,p){let x=0,T=0;p<0&&(p=0);const k=p/Math.SQRT2;switch(d){case"top-right":case"top-left":T=k-Kd;break;case"bottom-right":case"bottom-left":T=-k+Kd;break;case"bottom":T=-p+Kd;break;case"top":T=p-Kd}switch(d){case"top-right":case"bottom-right":x=-k;break;case"top-left":case"bottom-left":x=k;break;case"left":x=p;break;case"right":x=-p}return[x,T]}(c,o[0])}function YR(c,o,d){var p;const x=c.layout,T=(p=x.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(o,{},d);if(T){const R=T.values,D=[];for(let U=0;U<R.length;U+=2){const G=D[U]=R[U],K=R[U+1].map(ee=>ee*fs);G.startsWith("top")?K[1]-=Kd:G.startsWith("bottom")&&(K[1]+=Kd),D[U+1]=K}return new Kn(D)}const k=x.get("text-variable-anchor");if(k){let R;R=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(o,{},d)*fs,_S]:x.get("text-offset").evaluate(o,{},d).map(U=>U*fs);const D=[];for(const U of k)D.push(U,KR(U,R));return new Kn(D)}return null}function xS(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function HV(c,o,d,p,x,T,k,R,D,U,G){let K=T.textMaxSize.evaluate(o,{});K===void 0&&(K=k);const ee=c.layers[0].layout,oe=ee.get("icon-offset").evaluate(o,{},G),ce=JR(d.horizontal),me=k/24,Ce=c.tilePixelRatio*me,Me=c.tilePixelRatio*K/24,rt=c.tilePixelRatio*R,Ze=c.tilePixelRatio*ee.get("symbol-spacing"),tt=ee.get("text-padding")*c.tilePixelRatio,pt=function(St,On,An,Qn=1){const ei=St.get("icon-padding").evaluate(On,{},An),Yr=ei&&ei.values;return[Yr[0]*Qn,Yr[1]*Qn,Yr[2]*Qn,Yr[3]*Qn]}(ee,o,G,c.tilePixelRatio),Dt=ee.get("text-max-angle")/180*Math.PI,on=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",Vn=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",en=ee.get("symbol-placement"),Kt=Ze/2,Rn=ee.get("icon-text-fit");let _n;p&&Rn!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(_n=wR(p,d.vertical,Rn,ee.get("icon-text-fit-padding"),oe,me)),ce&&(p=wR(p,ce,Rn,ee.get("icon-text-fit-padding"),oe,me)));const gn=(St,On)=>{On.x<0||On.x>=ss||On.y<0||On.y>=ss||function(An,Qn,ei,Yr,vs,dl,qs,_s,xo,bo,wo,Ni,xs,oo,Gs,So,Ws,ja,Bo,zr,ni,hi,da,ki,im){const Bc=An.addToLineVertexArray(Qn,ei);let Uc,hl,za,Ms,Mu=0,ay=0,r2=0,i2=0,PS=-1,AS=-1;const Ou={};let s2=Zp("");if(An.allowVerticalPlacement&&Yr.vertical){const ao=_s.layout.get("text-rotate").evaluate(ni,{},ki)+90;za=new vx(xo,Qn,bo,wo,Ni,Yr.vertical,xs,oo,Gs,ao),qs&&(Ms=new vx(xo,Qn,bo,wo,Ni,qs,Ws,ja,Gs,ao))}if(vs){const ao=_s.layout.get("icon-rotate").evaluate(ni,{}),Fa=_s.layout.get("icon-text-fit")!=="none",Pf=WR(vs,ao,da,Fa),ec=qs?WR(qs,ao,da,Fa):void 0;hl=new vx(xo,Qn,bo,wo,Ni,vs,Ws,ja,!1,ao),Mu=4*Pf.length;const Af=An.iconSizeData;let $c=null;Af.kind==="source"?($c=[Fc*_s.layout.get("icon-size").evaluate(ni,{})],$c[0]>Gd&&Xe(`${An.layerIds[0]}: Value for "icon-size" is >= ${ty}. Reduce your "icon-size".`)):Af.kind==="composite"&&($c=[Fc*hi.compositeIconSizes[0].evaluate(ni,{},ki),Fc*hi.compositeIconSizes[1].evaluate(ni,{},ki)],($c[0]>Gd||$c[1]>Gd)&&Xe(`${An.layerIds[0]}: Value for "icon-size" is >= ${ty}. Reduce your "icon-size".`)),An.addSymbols(An.icon,Pf,$c,zr,Bo,ni,u.ah.none,Qn,Bc.lineStartIndex,Bc.lineLength,-1,ki),PS=An.icon.placedSymbolArray.length-1,ec&&(ay=4*ec.length,An.addSymbols(An.icon,ec,$c,zr,Bo,ni,u.ah.vertical,Qn,Bc.lineStartIndex,Bc.lineLength,-1,ki),AS=An.icon.placedSymbolArray.length-1)}const o2=Object.keys(Yr.horizontal);for(const ao of o2){const Fa=Yr.horizontal[ao];if(!Uc){s2=Zp(Fa.text);const ec=_s.layout.get("text-rotate").evaluate(ni,{},ki);Uc=new vx(xo,Qn,bo,wo,Ni,Fa,xs,oo,Gs,ec)}const Pf=Fa.positionedLines.length===1;if(r2+=QR(An,Qn,Fa,dl,_s,Gs,ni,So,Bc,Yr.vertical?u.ah.horizontal:u.ah.horizontalOnly,Pf?o2:[ao],Ou,PS,hi,ki),Pf)break}Yr.vertical&&(i2+=QR(An,Qn,Yr.vertical,dl,_s,Gs,ni,So,Bc,u.ah.vertical,["vertical"],Ou,AS,hi,ki));const GV=Uc?Uc.boxStartIndex:An.collisionBoxArray.length,WV=Uc?Uc.boxEndIndex:An.collisionBoxArray.length,XV=za?za.boxStartIndex:An.collisionBoxArray.length,KV=za?za.boxEndIndex:An.collisionBoxArray.length,YV=hl?hl.boxStartIndex:An.collisionBoxArray.length,QV=hl?hl.boxEndIndex:An.collisionBoxArray.length,JV=Ms?Ms.boxStartIndex:An.collisionBoxArray.length,e6=Ms?Ms.boxEndIndex:An.collisionBoxArray.length;let Jl=-1;const xx=(ao,Fa)=>ao&&ao.circleDiameter?Math.max(ao.circleDiameter,Fa):Fa;Jl=xx(Uc,Jl),Jl=xx(za,Jl),Jl=xx(hl,Jl),Jl=xx(Ms,Jl);const a2=Jl>-1?1:0;a2&&(Jl*=im/fs),An.glyphOffsetArray.length>=nm.MAX_GLYPHS&&Xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ni.sortKey!==void 0&&An.addToSortKeyRanges(An.symbolInstances.length,ni.sortKey);const t6=YR(_s,ni,ki),[n6,r6]=function(ao,Fa){const Pf=ao.length,ec=Fa==null?void 0:Fa.values;if((ec==null?void 0:ec.length)>0)for(let Af=0;Af<ec.length;Af+=2){const $c=ec[Af+1];ao.emplaceBack(u.aq[ec[Af]],$c[0],$c[1])}return[Pf,ao.length]}(An.textAnchorOffsets,t6);An.symbolInstances.emplaceBack(Qn.x,Qn.y,Ou.right>=0?Ou.right:-1,Ou.center>=0?Ou.center:-1,Ou.left>=0?Ou.left:-1,Ou.vertical||-1,PS,AS,s2,GV,WV,XV,KV,YV,QV,JV,e6,bo,r2,i2,Mu,ay,a2,0,xs,Jl,n6,r6)}(c,On,St,d,p,x,_n,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Ce,[tt,tt,tt,tt],on,D,rt,pt,Vn,oe,o,T,U,G,k)};if(en==="line")for(const St of $R(o.geometry,0,0,ss,ss)){const On=BV(St,Ze,Dt,d.vertical||ce,p,24,Me,c.overscaling,ss);for(const An of On)ce&&ZV(c,ce.text,Kt,An)||gn(St,An)}else if(en==="line-center"){for(const St of o.geometry)if(St.length>1){const On=FV(St,Dt,d.vertical||ce,p,24,Me);On&&gn(St,On)}}else if(o.type==="Polygon")for(const St of xu(o.geometry,0)){const On=$V(St,16);gn(St[0],new Xd(On.x,On.y,0))}else if(o.type==="LineString")for(const St of o.geometry)gn(St,new Xd(St[0].x,St[0].y,0));else if(o.type==="Point")for(const St of o.geometry)for(const On of St)gn([On],new Xd(On.x,On.y,0))}function QR(c,o,d,p,x,T,k,R,D,U,G,K,ee,oe,ce){const me=function(rt,Ze,tt,pt,Dt,on,Vn,en){const Kt=pt.layout.get("text-rotate").evaluate(on,{})*Math.PI/180,Rn=[];for(const _n of Ze.positionedLines)for(const gn of _n.positionedGlyphs){if(!gn.rect)continue;const St=gn.rect||{};let On=SV+1,An=!0,Qn=1,ei=0;const Yr=(Dt||en)&&gn.vertical,vs=gn.metrics.advance*gn.scale/2;if(en&&Ze.verticalizable&&(ei=_n.lineOffset/2-(gn.imageName?-(fs-gn.metrics.width*gn.scale)/2:(gn.scale-1)*fs)),gn.imageName){const zr=Vn[gn.imageName];An=zr.sdf,Qn=zr.pixelRatio,On=Fo/Qn}const dl=Dt?[gn.x+vs,gn.y]:[0,0];let qs=Dt?[0,0]:[gn.x+vs+tt[0],gn.y+tt[1]-ei],_s=[0,0];Yr&&(_s=qs,qs=[0,0]);const xo=gn.metrics.isDoubleResolution?2:1,bo=(gn.metrics.left-On)*gn.scale-vs+qs[0],wo=(-gn.metrics.top-On)*gn.scale+qs[1],Ni=bo+St.w/xo*gn.scale/Qn,xs=wo+St.h/xo*gn.scale/Qn,oo=new C(bo,wo),Gs=new C(Ni,wo),So=new C(bo,xs),Ws=new C(Ni,xs);if(Yr){const zr=new C(-vs,vs-Jg),ni=-Math.PI/2,hi=fs/2-vs,da=new C(5-Jg-hi,-(gn.imageName?hi:0)),ki=new C(..._s);oo._rotateAround(ni,zr)._add(da)._add(ki),Gs._rotateAround(ni,zr)._add(da)._add(ki),So._rotateAround(ni,zr)._add(da)._add(ki),Ws._rotateAround(ni,zr)._add(da)._add(ki)}if(Kt){const zr=Math.sin(Kt),ni=Math.cos(Kt),hi=[ni,-zr,zr,ni];oo._matMult(hi),Gs._matMult(hi),So._matMult(hi),Ws._matMult(hi)}const ja=new C(0,0),Bo=new C(0,0);Rn.push({tl:oo,tr:Gs,bl:So,br:Ws,tex:St,writingMode:Ze.writingMode,glyphOffset:dl,sectionIndex:gn.sectionIndex,isSDF:An,pixelOffsetTL:ja,pixelOffsetBR:Bo,minFontScaleX:0,minFontScaleY:0})}return Rn}(0,d,R,x,T,k,p,c.allowVerticalPlacement),Ce=c.textSizeData;let Me=null;Ce.kind==="source"?(Me=[Fc*x.layout.get("text-size").evaluate(k,{})],Me[0]>Gd&&Xe(`${c.layerIds[0]}: Value for "text-size" is >= ${ty}. Reduce your "text-size".`)):Ce.kind==="composite"&&(Me=[Fc*oe.compositeTextSizes[0].evaluate(k,{},ce),Fc*oe.compositeTextSizes[1].evaluate(k,{},ce)],(Me[0]>Gd||Me[1]>Gd)&&Xe(`${c.layerIds[0]}: Value for "text-size" is >= ${ty}. Reduce your "text-size".`)),c.addSymbols(c.text,me,Me,R,T,k,U,o,D.lineStartIndex,D.lineLength,ee,ce);for(const rt of G)K[rt]=c.text.placedSymbolArray.length-1;return 4*me.length}function JR(c){for(const o in c)return c[o];return null}function ZV(c,o,d,p){const x=c.compareText;if(o in x){const T=x[o];for(let k=T.length-1;k>=0;k--)if(p.dist(T[k])<d)return!0}else x[o]=[];return x[o].push(p),!1}const e2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class bS{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,p]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=p>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const T=e2[15&p];if(!T)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(o,2,1),[R]=new Uint32Array(o,4,1);return new bS(R,k,T,o)}constructor(o,d=64,p=Float64Array,x){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const T=e2.indexOf(this.ArrayType),k=2*o*this.ArrayType.BYTES_PER_ELEMENT,R=o*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-R%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${p}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+D,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+k+R+D),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+R+D,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=d,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return wS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,p,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:k,nodeSize:R}=this,D=[0,T.length-1,0],U=[];for(;D.length;){const G=D.pop()||0,K=D.pop()||0,ee=D.pop()||0;if(K-ee<=R){for(let Ce=ee;Ce<=K;Ce++){const Me=k[2*Ce],rt=k[2*Ce+1];Me>=o&&Me<=p&&rt>=d&&rt<=x&&U.push(T[Ce])}continue}const oe=ee+K>>1,ce=k[2*oe],me=k[2*oe+1];ce>=o&&ce<=p&&me>=d&&me<=x&&U.push(T[oe]),(G===0?o<=ce:d<=me)&&(D.push(ee),D.push(oe-1),D.push(1-G)),(G===0?p>=ce:x>=me)&&(D.push(oe+1),D.push(K),D.push(1-G))}return U}within(o,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:k}=this,R=[0,x.length-1,0],D=[],U=p*p;for(;R.length;){const G=R.pop()||0,K=R.pop()||0,ee=R.pop()||0;if(K-ee<=k){for(let Ce=ee;Ce<=K;Ce++)n2(T[2*Ce],T[2*Ce+1],o,d)<=U&&D.push(x[Ce]);continue}const oe=ee+K>>1,ce=T[2*oe],me=T[2*oe+1];n2(ce,me,o,d)<=U&&D.push(x[oe]),(G===0?o-p<=ce:d-p<=me)&&(R.push(ee),R.push(oe-1),R.push(1-G)),(G===0?o+p>=ce:d+p>=me)&&(R.push(oe+1),R.push(K),R.push(1-G))}return D}}function wS(c,o,d,p,x,T){if(x-p<=d)return;const k=p+x>>1;t2(c,o,k,p,x,T),wS(c,o,d,p,k-1,1-T),wS(c,o,d,k+1,x,1-T)}function t2(c,o,d,p,x,T){for(;x>p;){if(x-p>600){const U=x-p+1,G=d-p+1,K=Math.log(U),ee=.5*Math.exp(2*K/3),oe=.5*Math.sqrt(K*ee*(U-ee)/U)*(G-U/2<0?-1:1);t2(c,o,d,Math.max(p,Math.floor(d-G*ee/U+oe)),Math.min(x,Math.floor(d+(U-G)*ee/U+oe)),T)}const k=o[2*d+T];let R=p,D=x;for(sy(c,o,p,d),o[2*x+T]>k&&sy(c,o,p,x);R<D;){for(sy(c,o,R,D),R++,D--;o[2*R+T]<k;)R++;for(;o[2*D+T]>k;)D--}o[2*p+T]===k?sy(c,o,p,D):(D++,sy(c,o,D,x)),D<=d&&(p=D+1),d<=D&&(x=D-1)}}function sy(c,o,d,p){SS(c,d,p),SS(o,2*d,2*p),SS(o,2*d+1,2*p+1)}function SS(c,o,d){const p=c[o];c[o]=c[d],c[d]=p}function n2(c,o,d,p){const x=c-d,T=o-p;return x*x+T*T}var ES;u.bg=void 0,(ES=u.bg||(u.bg={})).create="create",ES.load="load",ES.fullLoad="fullLoad";let _x=null,oy=[];const CS=1e3/60,TS="loadTime",kS="fullLoadTime",qV={mark(c){performance.mark(c)},frame(c){const o=c;_x!=null&&oy.push(o-_x),_x=o},clearMetrics(){_x=null,oy=[],performance.clearMeasures(TS),performance.clearMeasures(kS);for(const c in u.bg)performance.clearMarks(u.bg[c])},getPerformanceMetrics(){performance.measure(TS,u.bg.create,u.bg.load),performance.measure(kS,u.bg.create,u.bg.fullLoad);const c=performance.getEntriesByName(TS)[0].duration,o=performance.getEntriesByName(kS)[0].duration,d=oy.length,p=1/(oy.reduce((T,k)=>T+k,0)/d/1e3),x=oy.filter(T=>T>CS).reduce((T,k)=>T+(k-CS)/CS,0);return{loadTime:c,fullLoadTime:o,fps:p,percentDroppedFrames:x/(d+x)*100,totalFrames:d}}};u.$=class extends Q{},u.A=Kp,u.B=br,u.C=function(c){if(lt==null){const o=c.navigator?c.navigator.userAgent:null;lt=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return lt},u.D=kn,u.E=Fn,u.F=class{constructor(c,o){this.target=c,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new jV(()=>this.process()),this.subscription=function(d,p,x,T){return d.addEventListener(p,x,!1),{unsubscribe:()=>{d.removeEventListener(p,x,!1)}}}(this.target,"message",d=>this.receive(d)),this.globalScope=yt(self)?c:window}registerMessageHandler(c,o){this.messageHandlers[c]=o}sendAsync(c,o){return new Promise((d,p)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[x]={resolve:d,reject:p},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[x];const R={id:x,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(R)},{once:!0});const T=[],k=Object.assign(Object.assign({},c),{id:x,sourceMapId:this.mapId,origin:location.origin,data:Nc(c.data,T)});this.target.postMessage(k,{transfer:T})})}receive(c){const o=c.data,d=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[d];const p=this.abortControllers[d];return delete this.abortControllers[d],void(p&&p.abort())}if(yt(self)||o.mustQueue)return this.tasks[d]=o,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,o)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),o=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(c,o)}processTask(c,o){return a(this,void 0,void 0,function*(){if(o.type==="<response>"){const x=this.resolveRejects[c];return delete this.resolveRejects[c],x?void(o.error?x.reject(Kl(o.error)):x.resolve(Kl(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Kl(o.data),p=new AbortController;this.abortControllers[c]=p;try{const x=yield this.messageHandlers[o.type](o.sourceMapId,d,p);this.completeTask(c,null,x)}catch(x){this.completeTask(c,x)}})}completeTask(c,o,d){const p=[];delete this.abortControllers[c];const x={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Nc(o):null,data:Nc(d,p)};this.target.postMessage(x,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.G=bt,u.H=function(){var c=new Kp(16);return Kp!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},u.I=lS,u.J=function(c,o,d){var p,x,T,k,R,D,U,G,K,ee,oe,ce,me=d[0],Ce=d[1],Me=d[2];return o===c?(c[12]=o[0]*me+o[4]*Ce+o[8]*Me+o[12],c[13]=o[1]*me+o[5]*Ce+o[9]*Me+o[13],c[14]=o[2]*me+o[6]*Ce+o[10]*Me+o[14],c[15]=o[3]*me+o[7]*Ce+o[11]*Me+o[15]):(x=o[1],T=o[2],k=o[3],R=o[4],D=o[5],U=o[6],G=o[7],K=o[8],ee=o[9],oe=o[10],ce=o[11],c[0]=p=o[0],c[1]=x,c[2]=T,c[3]=k,c[4]=R,c[5]=D,c[6]=U,c[7]=G,c[8]=K,c[9]=ee,c[10]=oe,c[11]=ce,c[12]=p*me+R*Ce+K*Me+o[12],c[13]=x*me+D*Ce+ee*Me+o[13],c[14]=T*me+U*Ce+oe*Me+o[14],c[15]=k*me+G*Ce+ce*Me+o[15]),c},u.K=function(c,o,d){var p=d[0],x=d[1],T=d[2];return c[0]=o[0]*p,c[1]=o[1]*p,c[2]=o[2]*p,c[3]=o[3]*p,c[4]=o[4]*x,c[5]=o[5]*x,c[6]=o[6]*x,c[7]=o[7]*x,c[8]=o[8]*T,c[9]=o[9]*T,c[10]=o[10]*T,c[11]=o[11]*T,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},u.L=jI,u.M=function(c,o){const d={};for(let p=0;p<o.length;p++){const x=o[p];x in c&&(d[x]=c[x])}return d},u.N=Wd,u.O=RR,u.P=C,u.Q=LR,u.R=Da,u.S=Na,u.T=Bp,u.U=H,u.V=V,u.W=_t,u.X=ss,u.Y=O,u.Z=ny,u._=a,u.a=ct,u.a$=function(c,o){var d=c[0],p=c[1],x=c[2],T=c[3],k=c[4],R=c[5],D=c[6],U=c[7],G=c[8],K=c[9],ee=c[10],oe=c[11],ce=c[12],me=c[13],Ce=c[14],Me=c[15],rt=o[0],Ze=o[1],tt=o[2],pt=o[3],Dt=o[4],on=o[5],Vn=o[6],en=o[7],Kt=o[8],Rn=o[9],_n=o[10],gn=o[11],St=o[12],On=o[13],An=o[14],Qn=o[15];return Math.abs(d-rt)<=_o*Math.max(1,Math.abs(d),Math.abs(rt))&&Math.abs(p-Ze)<=_o*Math.max(1,Math.abs(p),Math.abs(Ze))&&Math.abs(x-tt)<=_o*Math.max(1,Math.abs(x),Math.abs(tt))&&Math.abs(T-pt)<=_o*Math.max(1,Math.abs(T),Math.abs(pt))&&Math.abs(k-Dt)<=_o*Math.max(1,Math.abs(k),Math.abs(Dt))&&Math.abs(R-on)<=_o*Math.max(1,Math.abs(R),Math.abs(on))&&Math.abs(D-Vn)<=_o*Math.max(1,Math.abs(D),Math.abs(Vn))&&Math.abs(U-en)<=_o*Math.max(1,Math.abs(U),Math.abs(en))&&Math.abs(G-Kt)<=_o*Math.max(1,Math.abs(G),Math.abs(Kt))&&Math.abs(K-Rn)<=_o*Math.max(1,Math.abs(K),Math.abs(Rn))&&Math.abs(ee-_n)<=_o*Math.max(1,Math.abs(ee),Math.abs(_n))&&Math.abs(oe-gn)<=_o*Math.max(1,Math.abs(oe),Math.abs(gn))&&Math.abs(ce-St)<=_o*Math.max(1,Math.abs(ce),Math.abs(St))&&Math.abs(me-On)<=_o*Math.max(1,Math.abs(me),Math.abs(On))&&Math.abs(Ce-An)<=_o*Math.max(1,Math.abs(Ce),Math.abs(An))&&Math.abs(Me-Qn)<=_o*Math.max(1,Math.abs(Me),Math.abs(Qn))},u.a0=kr,u.a1=vS,u.a2=it,u.a3=c=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(d=>{o.onloadstart=()=>{d(o)};for(const p of c){const x=window.document.createElement("source");wn(p)||(o.crossOrigin="Anonymous"),x.src=p,o.appendChild(x)}})},u.a4=function(){return le++},u.a5=rn,u.a6=nm,u.a7=Mc,u.a8=Tf,u.a9=zR,u.aA=function(c){if(c.type==="custom")return new NV(c);switch(c.type){case"background":return new MV(c);case"circle":return new _$(c);case"fill":return new N$(c);case"fill-extrusion":return new Y$(c);case"heatmap":return new b$(c);case"hillshade":return new S$(c);case"line":return new sV(c);case"raster":return new DV(c);case"symbol":return new px(c)}},u.aB=Je,u.aC=function(c,o){if(!c)return[{command:"setStyle",args:[o]}];let d=[];try{if(!De(c.version,o.version))return[{command:"setStyle",args:[o]}];De(c.center,o.center)||d.push({command:"setCenter",args:[o.center]}),De(c.zoom,o.zoom)||d.push({command:"setZoom",args:[o.zoom]}),De(c.bearing,o.bearing)||d.push({command:"setBearing",args:[o.bearing]}),De(c.pitch,o.pitch)||d.push({command:"setPitch",args:[o.pitch]}),De(c.sprite,o.sprite)||d.push({command:"setSprite",args:[o.sprite]}),De(c.glyphs,o.glyphs)||d.push({command:"setGlyphs",args:[o.glyphs]}),De(c.transition,o.transition)||d.push({command:"setTransition",args:[o.transition]}),De(c.light,o.light)||d.push({command:"setLight",args:[o.light]}),De(c.terrain,o.terrain)||d.push({command:"setTerrain",args:[o.terrain]}),De(c.sky,o.sky)||d.push({command:"setSky",args:[o.sky]}),De(c.projection,o.projection)||d.push({command:"setProjection",args:[o.projection]});const p={},x=[];(function(k,R,D,U){let G;for(G in R=R||{},k=k||{})Object.prototype.hasOwnProperty.call(k,G)&&(Object.prototype.hasOwnProperty.call(R,G)||ft(G,D,U));for(G in R)Object.prototype.hasOwnProperty.call(R,G)&&(Object.prototype.hasOwnProperty.call(k,G)?De(k[G],R[G])||(k[G].type==="geojson"&&R[G].type==="geojson"&&Bt(k,R,G)?Ye(D,{command:"setGeoJSONSourceData",args:[G,R[G].data]}):wt(G,R,D,U)):mt(G,R,D))})(c.sources,o.sources,x,p);const T=[];c.layers&&c.layers.forEach(k=>{"source"in k&&p[k.source]?d.push({command:"removeLayer",args:[k.id]}):T.push(k)}),d=d.concat(x),function(k,R,D){R=R||[];const U=(k=k||[]).map(nn),G=R.map(nn),K=k.reduce(ln,{}),ee=R.reduce(ln,{}),oe=U.slice(),ce=Object.create(null);let me,Ce,Me,rt,Ze;for(let tt=0,pt=0;tt<U.length;tt++)me=U[tt],Object.prototype.hasOwnProperty.call(ee,me)?pt++:(Ye(D,{command:"removeLayer",args:[me]}),oe.splice(oe.indexOf(me,pt),1));for(let tt=0,pt=0;tt<G.length;tt++)me=G[G.length-1-tt],oe[oe.length-1-tt]!==me&&(Object.prototype.hasOwnProperty.call(K,me)?(Ye(D,{command:"removeLayer",args:[me]}),oe.splice(oe.lastIndexOf(me,oe.length-pt),1)):pt++,rt=oe[oe.length-tt],Ye(D,{command:"addLayer",args:[ee[me],rt]}),oe.splice(oe.length-tt,0,me),ce[me]=!0);for(let tt=0;tt<G.length;tt++)if(me=G[tt],Ce=K[me],Me=ee[me],!ce[me]&&!De(Ce,Me))if(De(Ce.source,Me.source)&&De(Ce["source-layer"],Me["source-layer"])&&De(Ce.type,Me.type)){for(Ze in pn(Ce.layout,Me.layout,D,me,null,"setLayoutProperty"),pn(Ce.paint,Me.paint,D,me,null,"setPaintProperty"),De(Ce.filter,Me.filter)||Ye(D,{command:"setFilter",args:[me,Me.filter]}),De(Ce.minzoom,Me.minzoom)&&De(Ce.maxzoom,Me.maxzoom)||Ye(D,{command:"setLayerZoomRange",args:[me,Me.minzoom,Me.maxzoom]}),Ce)Object.prototype.hasOwnProperty.call(Ce,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?pn(Ce[Ze],Me[Ze],D,me,Ze.slice(6),"setPaintProperty"):De(Ce[Ze],Me[Ze])||Ye(D,{command:"setLayerProperty",args:[me,Ze,Me[Ze]]}));for(Ze in Me)Object.prototype.hasOwnProperty.call(Me,Ze)&&!Object.prototype.hasOwnProperty.call(Ce,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?pn(Ce[Ze],Me[Ze],D,me,Ze.slice(6),"setPaintProperty"):De(Ce[Ze],Me[Ze])||Ye(D,{command:"setLayerProperty",args:[me,Ze,Me[Ze]]}))}else Ye(D,{command:"removeLayer",args:[me]}),rt=oe[oe.lastIndexOf(me)+1],Ye(D,{command:"addLayer",args:[Me,rt]})}(T,o.layers,d)}catch(p){console.warn("Unable to compute style diff:",p),d=[{command:"setStyle",args:[o]}]}return d},u.aD=function(c){const o=[],d=c.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},u.aE=function c(o,d){if(Array.isArray(o)){if(!Array.isArray(d)||o.length!==d.length)return!1;for(let p=0;p<o.length;p++)if(!c(o[p],d[p]))return!1;return!0}if(typeof o=="object"&&o!==null&&d!==null){if(typeof d!="object"||Object.keys(o).length!==Object.keys(d).length)return!1;for(const p in o)if(!c(o[p],d[p]))return!1;return!0}return o===d},u.aF=be,u.aG=Re,u.aH=class extends Sf{constructor(c,o){super(c,o),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},u.aI=tx,u.aJ=class extends Sf{constructor(c,o){super(c,o),this.current=d$}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let o=1;o<16;o++)if(c[o]!==this.current[o]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},u.aK=TI,u.aL=kI,u.aM=ur,u.aN=class extends Sf{constructor(c,o){super(c,o),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},u.aO=class extends Sf{constructor(c,o){super(c,o),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},u.aP=function(c,o,d,p,x,T,k){var R=1/(o-d),D=1/(p-x),U=1/(T-k);return c[0]=-2*R,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*U,c[11]=0,c[12]=(o+d)*R,c[13]=(x+p)*D,c[14]=(k+T)*U,c[15]=1,c},u.aQ=v$,u.aR=class extends We{},u.aS=cV,u.aT=class extends at{},u.aU=K1,u.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},u.aW=$I,u.aX=Vs,u.aY=Oa,u.aZ=class extends Pn{},u.a_=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]&&c[4]===o[4]&&c[5]===o[5]&&c[6]===o[6]&&c[7]===o[7]&&c[8]===o[8]&&c[9]===o[9]&&c[10]===o[10]&&c[11]===o[11]&&c[12]===o[12]&&c[13]===o[13]&&c[14]===o[14]&&c[15]===o[15]},u.aa=function(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,p,x,T)=>{const k=x||T;return o[p]=!k||k.toLowerCase(),""}),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o},u.ab=function(c,o){const d=[];for(const p in c)p in o||d.push(p);return d},u.ac=ue,u.ad=function(c,o,d){var p=Math.sin(d),x=Math.cos(d),T=o[0],k=o[1],R=o[2],D=o[3],U=o[4],G=o[5],K=o[6],ee=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=T*x+U*p,c[1]=k*x+G*p,c[2]=R*x+K*p,c[3]=D*x+ee*p,c[4]=U*x-T*p,c[5]=G*x-k*p,c[6]=K*x-R*p,c[7]=ee*x-D*p,c},u.ae=function(c){var o=new Kp(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},u.af=sx,u.ag=function(c,o){let d=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:x,minZoom:T,maxZoom:k}=c,R=x?ue(rs.interpolationFactor(x,o,T,k),0,1):0;c.kind==="camera"?p=ns.number(c.minSize,c.maxSize,R):d=R}return{uSizeT:d,uSize:p}},u.ai=function(c,{uSize:o,uSizeT:d},{lowerSize:p,upperSize:x}){return c.kind==="source"?p/Fc:c.kind==="composite"?ns.number(p/Fc,x/Fc,d):o},u.aj=hS,u.ak=function(c,o,d,p){const x=o.y-c.y,T=o.x-c.x,k=p.y-d.y,R=p.x-d.x,D=k*T-R*x;if(D===0)return null;const U=(R*(c.y-d.y)-k*(c.x-d.x))/D;return new C(c.x+U*T,c.y+U*x)},u.al=$R,u.am=RI,u.an=G1,u.ao=function(c){let o=1/0,d=1/0,p=-1/0,x=-1/0;for(const T of c)o=Math.min(o,T.x),d=Math.min(d,T.y),p=Math.max(p,T.x),x=Math.max(x,T.y);return[o,d,p,x]},u.ap=fs,u.ar=dS,u.as=function(c,o){var d=o[0],p=o[1],x=o[2],T=o[3],k=o[4],R=o[5],D=o[6],U=o[7],G=o[8],K=o[9],ee=o[10],oe=o[11],ce=o[12],me=o[13],Ce=o[14],Me=o[15],rt=d*R-p*k,Ze=d*D-x*k,tt=d*U-T*k,pt=p*D-x*R,Dt=p*U-T*R,on=x*U-T*D,Vn=G*me-K*ce,en=G*Ce-ee*ce,Kt=G*Me-oe*ce,Rn=K*Ce-ee*me,_n=K*Me-oe*me,gn=ee*Me-oe*Ce,St=rt*gn-Ze*_n+tt*Rn+pt*Kt-Dt*en+on*Vn;return St?(c[0]=(R*gn-D*_n+U*Rn)*(St=1/St),c[1]=(x*_n-p*gn-T*Rn)*St,c[2]=(me*on-Ce*Dt+Me*pt)*St,c[3]=(ee*Dt-K*on-oe*pt)*St,c[4]=(D*Kt-k*gn-U*en)*St,c[5]=(d*gn-x*Kt+T*en)*St,c[6]=(Ce*tt-ce*on-Me*Ze)*St,c[7]=(G*on-ee*tt+oe*Ze)*St,c[8]=(k*_n-R*Kt+U*Vn)*St,c[9]=(p*Kt-d*_n-T*Vn)*St,c[10]=(ce*Dt-me*tt+Me*rt)*St,c[11]=(K*tt-G*Dt-oe*rt)*St,c[12]=(R*en-k*Rn-D*Vn)*St,c[13]=(d*Rn-p*en+x*Vn)*St,c[14]=(me*Ze-ce*pt-Ce*rt)*St,c[15]=(G*pt-K*Ze+ee*rt)*St,c):null},u.at=xS,u.au=uS,u.av=bS,u.aw=function(){const c={},o=Qe.$version;for(const d in Qe.$root){const p=Qe.$root[d];if(p.required){let x=null;x=d==="version"?o:p.type==="array"?[]:{},x!=null&&(c[d]=x)}}return c},u.ax=xi,u.ay=qt,u.az=function(c){c=c.slice();const o=Object.create(null);for(let d=0;d<c.length;d++)o[c[d].id]=c[d];for(let d=0;d<c.length;d++)"ref"in c[d]&&(c[d]=Le(c[d],o[c[d].ref]));return c},u.b=Nt,u.b0=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},u.b1=function(c,o,d){return c[0]=o[0]*d[0],c[1]=o[1]*d[1],c[2]=o[2]*d[2],c[3]=o[3]*d[3],c},u.b2=function(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]*o[3]},u.b3=fe,u.b4=DR,u.b5=MR,u.b6=function(c,o,d,p,x){var T,k=1/Math.tan(o/2);return c[0]=k/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,x!=null&&x!==1/0?(c[10]=(x+p)*(T=1/(p-x)),c[14]=2*x*p*T):(c[10]=-1,c[14]=-2*p),c},u.b7=function(c,o,d){var p=Math.sin(d),x=Math.cos(d),T=o[4],k=o[5],R=o[6],D=o[7],U=o[8],G=o[9],K=o[10],ee=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=T*x+U*p,c[5]=k*x+G*p,c[6]=R*x+K*p,c[7]=D*x+ee*p,c[8]=U*x-T*p,c[9]=G*x-k*p,c[10]=K*x-R*p,c[11]=ee*x-D*p,c},u.b8=q,u.b9=te,u.bA=lR,u.bB=function(c){return c.message===He},u.bC=Ic,u.bD=jo,u.ba=function(c){return c*Math.PI/180},u.bb=function(c,o){const{x:d,y:p}=ny.fromLngLat(o);return!(c<0||c>25||p<0||p>=1||d<0||d>=1)},u.bc=function(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},u.bd=class extends W{},u.be=gS,u.bf=qV,u.bh=It,u.bi=function(c,o){ct.REGISTERED_PROTOCOLS[c]=o},u.bj=function(c){delete ct.REGISTERED_PROTOCOLS[c]},u.bk=function(c,o){const d={};for(let x=0;x<c.length;x++){const T=o&&o[c[x].id]||jp(c[x]);o&&(o[c[x].id]=T);let k=d[T];k||(k=d[T]=[]),k.push(c[x])}const p=[];for(const x in d)p.push(d[x]);return p},u.bl=hn,u.bm=jR,u.bn=FR,u.bo=gR,u.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ss/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const o=c.bucket.layers[0],d=o.layout,p=o._unevaluatedLayout._values,x={layoutIconSize:p["icon-size"].possiblyEvaluate(new li(c.bucket.zoom+1),c.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new li(c.bucket.zoom+1),c.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new li(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:G}=c.bucket.textSizeData;x.compositeTextSizes=[p["text-size"].possiblyEvaluate(new li(U),c.canonical),p["text-size"].possiblyEvaluate(new li(G),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:G}=c.bucket.iconSizeData;x.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new li(U),c.canonical),p["icon-size"].possiblyEvaluate(new li(G),c.canonical)]}const T=d.get("text-line-height")*fs,k=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",R=d.get("text-keep-upright"),D=d.get("text-size");for(const U of c.bucket.features){const G=d.get("text-font").evaluate(U,{},c.canonical).join(","),K=D.evaluate(U,{},c.canonical),ee=x.layoutTextSize.evaluate(U,{},c.canonical),oe=x.layoutIconSize.evaluate(U,{},c.canonical),ce={horizontal:{},vertical:void 0},me=U.text;let Ce,Me=[0,0];if(me){const tt=me.toString(),pt=d.get("text-letter-spacing").evaluate(U,{},c.canonical)*fs,Dt=zg(tt)?pt:0,on=d.get("text-anchor").evaluate(U,{},c.canonical),Vn=YR(o,U,c.canonical);if(!Vn){const _n=d.get("text-radial-offset").evaluate(U,{},c.canonical);Me=_n?KR(on,[_n*fs,_S]):d.get("text-offset").evaluate(U,{},c.canonical).map(gn=>gn*fs)}let en=k?"center":d.get("text-justify").evaluate(U,{},c.canonical);const Kt=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(U,{},c.canonical)*fs:1/0,Rn=()=>{c.bucket.allowVerticalPlacement&&gf(tt)&&(ce.vertical=dx(me,c.glyphMap,c.glyphPositions,c.imagePositions,G,Kt,T,on,"left",Dt,Me,u.ah.vertical,!0,ee,K))};if(!k&&Vn){const _n=new Set;if(en==="auto")for(let St=0;St<Vn.values.length;St+=2)_n.add(xS(Vn.values[St]));else _n.add(en);let gn=!1;for(const St of _n)if(!ce.horizontal[St])if(gn)ce.horizontal[St]=ce.horizontal[0];else{const On=dx(me,c.glyphMap,c.glyphPositions,c.imagePositions,G,Kt,T,"center",St,Dt,Me,u.ah.horizontal,!1,ee,K);On&&(ce.horizontal[St]=On,gn=On.positionedLines.length===1)}Rn()}else{en==="auto"&&(en=xS(on));const _n=dx(me,c.glyphMap,c.glyphPositions,c.imagePositions,G,Kt,T,on,en,Dt,Me,u.ah.horizontal,!1,ee,K);_n&&(ce.horizontal[en]=_n),Rn(),gf(tt)&&k&&R&&(ce.vertical=dx(me,c.glyphMap,c.glyphPositions,c.imagePositions,G,Kt,T,on,en,Dt,Me,u.ah.vertical,!1,ee,K))}}let rt=!1;if(U.icon&&U.icon.name){const tt=c.imageMap[U.icon.name];tt&&(Ce=PV(c.imagePositions[U.icon.name],d.get("icon-offset").evaluate(U,{},c.canonical),d.get("icon-anchor").evaluate(U,{},c.canonical)),rt=!!tt.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=rt:c.bucket.sdfIcons!==rt&&Xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tt.pixelRatio!==c.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ze=JR(ce.horizontal)||ce.vertical;c.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Ce)&&HV(c.bucket,U,ce,Ce,c.imageMap,x,ee,oe,Me,rt,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},u.bq=iS,u.br=tS,u.bs=rS,u.bt=Zd,u.bu=oS,u.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},u.bw=function(c,o,d,p,x){return a(this,void 0,void 0,function*(){if(V())try{return yield _t(c,o,d,p,x)}catch{}return function(T,k,R,D,U){const G=T.width,K=T.height;Ke&&we||(Ke=new OffscreenCanvas(G,K),we=Ke.getContext("2d",{willReadFrequently:!0})),Ke.width=G,Ke.height=K,we.drawImage(T,0,0,G,K);const ee=we.getImageData(k,R,D,U);return we.clearRect(0,0,G,K),ee.data}(c,o,d,p,x)})},u.bx=NR,u.by=m,u.bz=g,u.c=Be,u.d=c=>a(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(o)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=Z,u.f=c=>new Promise((o,d)=>{const p=new Image;p.onload=()=>{o(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=qe})},p.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(c)],{type:"image/png"});p.src=c.byteLength?URL.createObjectURL(x):qe}),u.g=xt,u.h=(c,o)=>fn(Z(c,{type:"json"}),o),u.i=yt,u.j=Tn,u.k=Cn,u.l=(c,o)=>fn(Z(c,{type:"arrayBuffer"}),o),u.m=fn,u.n=function(c){return new oS(c).readFields(xV,[])},u.o=qg,u.p=mR,u.q=E,u.r=er,u.s=wn,u.t=Us,u.u=cn,u.v=Qe,u.w=Xe,u.x=function([c,o,d]){return o+=90,o*=Math.PI/180,d*=Math.PI/180,{x:c*Math.cos(o)*Math.sin(d),y:c*Math.sin(o)*Math.sin(d),z:c*Math.cos(d)}},u.y=ns,u.z=li}),i("worker",["./shared"],function(u){class a{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ie){for(const Se of se){this._layerConfigs[Se.id]=Se;const Ue=this._layers[Se.id]=u.aA(Se);Ue._featureFilter=u.a7(Ue.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of ie)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const pe=u.bk(Object.values(this._layerConfigs),this.keyCache);for(const Se of pe){const Ue=Se.map(Ee=>this._layers[Ee.id]),Ge=Ue[0];if(Ge.visibility==="none")continue;const nt=Ge.source||"";let ne=this.familiesBySource[nt];ne||(ne=this.familiesBySource[nt]={});const ve=Ge.sourceLayer||"_geojsonTileLayer";let Ie=ne[ve];Ie||(Ie=ne[ve]=[]),Ie.push(Ue)}}}class m{constructor(se){const ie={},pe=[];for(const nt in se){const ne=se[nt],ve=ie[nt]={};for(const Ie in ne){const Ee=ne[+Ie];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;const Ve={x:0,y:0,w:Ee.bitmap.width+2,h:Ee.bitmap.height+2};pe.push(Ve),ve[Ie]={rect:Ve,metrics:Ee.metrics}}}const{w:Se,h:Ue}=u.p(pe),Ge=new u.o({width:Se||1,height:Ue||1});for(const nt in se){const ne=se[nt];for(const ve in ne){const Ie=ne[+ve];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const Ee=ie[nt][ve].rect;u.o.copy(Ie.bitmap,Ge,{x:0,y:0},{x:Ee.x+1,y:Ee.y+1},Ie.bitmap)}}this.image=Ge,this.positions=ie}}u.bl("GlyphAtlas",m);class g{constructor(se){this.tileID=new u.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ie,pe,Se){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new u.a5;const Ue=new u.bm(Object.keys(se.layers).sort()),Ge=new u.bn(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];const nt={},ne={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},ve=ie.familiesBySource[this.source];for(const Nn in ve){const Un=se.layers[Nn];if(!Un)continue;Un.version===1&&u.w(`Vector tile source "${this.source}" layer "${Nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $n=Ue.encode(Nn),ir=[];for(let Zr=0;Zr<Un.length;Zr++){const oi=Un.feature(Zr),Ci=Ge.getId(oi,Nn);ir.push({feature:oi,id:Ci,index:Zr,sourceLayerIndex:$n})}for(const Zr of ve[Nn]){const oi=Zr[0];oi.source!==this.source&&u.w(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(w(Zr,this.zoom,pe),(nt[oi.id]=oi.createBucket({index:Ge.bucketLayerIDs.length,layers:Zr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$n,sourceID:this.source})).populate(ir,ne,this.tileID.canonical),Ge.bucketLayerIDs.push(Zr.map(Ci=>Ci.id)))}}const Ie=u.aF(ne.glyphDependencies,Nn=>Object.keys(Nn).map(Number));this.inFlightDependencies.forEach(Nn=>Nn==null?void 0:Nn.abort()),this.inFlightDependencies=[];let Ee=Promise.resolve({});if(Object.keys(Ie).length){const Nn=new AbortController;this.inFlightDependencies.push(Nn),Ee=Se.sendAsync({type:"GG",data:{stacks:Ie,source:this.source,tileID:this.tileID,type:"glyphs"}},Nn)}const Ve=Object.keys(ne.iconDependencies);let Et=Promise.resolve({});if(Ve.length){const Nn=new AbortController;this.inFlightDependencies.push(Nn),Et=Se.sendAsync({type:"GI",data:{icons:Ve,source:this.source,tileID:this.tileID,type:"icons"}},Nn)}const At=Object.keys(ne.patternDependencies);let jt=Promise.resolve({});if(At.length){const Nn=new AbortController;this.inFlightDependencies.push(Nn),jt=Se.sendAsync({type:"GI",data:{icons:At,source:this.source,tileID:this.tileID,type:"patterns"}},Nn)}const[kt,Ot,zt]=yield Promise.all([Ee,Et,jt]),In=new m(kt),Dn=new u.bo(Ot,zt);for(const Nn in nt){const Un=nt[Nn];Un instanceof u.a6?(w(Un.layers,this.zoom,pe),u.bp({bucket:Un,glyphMap:kt,glyphPositions:In.positions,imageMap:Ot,imagePositions:Dn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Un.hasPattern&&(Un instanceof u.bq||Un instanceof u.br||Un instanceof u.bs)&&(w(Un.layers,this.zoom,pe),Un.addFeatures(ne,this.tileID.canonical,Dn.patternPositions))}return this.status="done",{buckets:Object.values(nt).filter(Nn=>!Nn.isEmpty()),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:In.image,imageAtlas:Dn,glyphMap:this.returnDependencies?kt:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?In.positions:null}})}}function w(Ae,se,ie){const pe=new u.z(se);for(const Se of Ae)Se.recalculate(pe,ie)}class C{constructor(se,ie,pe){this.actor=se,this.layerIndex=ie,this.availableImages=pe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ie){return u._(this,void 0,void 0,function*(){const pe=yield u.l(se.request,ie);try{return{vectorTile:new u.bt.VectorTile(new u.bu(pe.data)),rawData:pe.data,cacheControl:pe.cacheControl,expires:pe.expires}}catch(Se){const Ue=new Uint8Array(pe.data);let Ge=`Unable to parse the tile at ${se.request.url}, `;throw Ge+=Ue[0]===31&&Ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(Ge)}})}loadTile(se){return u._(this,void 0,void 0,function*(){const ie=se.uid,pe=!!(se&&se.request&&se.request.collectResourceTiming)&&new u.bv(se.request),Se=new g(se);this.loading[ie]=Se;const Ue=new AbortController;Se.abort=Ue;try{const Ge=yield this.loadVectorTile(se,Ue);if(delete this.loading[ie],!Ge)return null;const nt=Ge.rawData,ne={};Ge.expires&&(ne.expires=Ge.expires),Ge.cacheControl&&(ne.cacheControl=Ge.cacheControl);const ve={};if(pe){const Ee=pe.finish();Ee&&(ve.resourceTiming=JSON.parse(JSON.stringify(Ee)))}Se.vectorTile=Ge.vectorTile;const Ie=Se.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ie]=Se,this.fetching[ie]={rawTileData:nt,cacheControl:ne,resourceTiming:ve};try{const Ee=yield Ie;return u.e({rawTileData:nt.slice(0)},Ee,ne,ve)}finally{delete this.fetching[ie]}}catch(Ge){throw delete this.loading[ie],Se.status="done",this.loaded[ie]=Se,Ge}})}reloadTile(se){return u._(this,void 0,void 0,function*(){const ie=se.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const pe=this.loaded[ie];if(pe.showCollisionBoxes=se.showCollisionBoxes,pe.status==="parsing"){const Se=yield pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ue;if(this.fetching[ie]){const{rawTileData:Ge,cacheControl:nt,resourceTiming:ne}=this.fetching[ie];delete this.fetching[ie],Ue=u.e({rawTileData:Ge.slice(0)},Se,nt,ne)}else Ue=Se;return Ue}if(pe.status==="done"&&pe.vectorTile)return pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(se){return u._(this,void 0,void 0,function*(){const ie=this.loading,pe=se.uid;ie&&ie[pe]&&ie[pe].abort&&(ie[pe].abort.abort(),delete ie[pe])})}removeTile(se){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class P{constructor(){this.loaded={}}loadTile(se){return u._(this,void 0,void 0,function*(){const{uid:ie,encoding:pe,rawImageData:Se,redFactor:Ue,greenFactor:Ge,blueFactor:nt,baseShift:ne}=se,ve=Se.width+2,Ie=Se.height+2,Ee=u.b(Se)?new u.R({width:ve,height:Ie},yield u.bw(Se,-1,-1,ve,Ie)):Se,Ve=new u.bx(ie,Ee,pe,Ue,Ge,nt,ne);return this.loaded=this.loaded||{},this.loaded[ie]=Ve,Ve})}removeTile(se){const ie=this.loaded,pe=se.uid;ie&&ie[pe]&&delete ie[pe]}}function I(Ae,se){if(Ae.length!==0){N(Ae[0],se);for(var ie=1;ie<Ae.length;ie++)N(Ae[ie],!se)}}function N(Ae,se){for(var ie=0,pe=0,Se=0,Ue=Ae.length,Ge=Ue-1;Se<Ue;Ge=Se++){var nt=(Ae[Se][0]-Ae[Ge][0])*(Ae[Ge][1]+Ae[Se][1]),ne=ie+nt;pe+=Math.abs(ie)>=Math.abs(nt)?ie-ne+nt:nt-ne+ie,ie=ne}ie+pe>=0!=!!se&&Ae.reverse()}var z=u.by(function Ae(se,ie){var pe,Se=se&&se.type;if(Se==="FeatureCollection")for(pe=0;pe<se.features.length;pe++)Ae(se.features[pe],ie);else if(Se==="GeometryCollection")for(pe=0;pe<se.geometries.length;pe++)Ae(se.geometries[pe],ie);else if(Se==="Feature")Ae(se.geometry,ie);else if(Se==="Polygon")I(se.coordinates,ie);else if(Se==="MultiPolygon")for(pe=0;pe<se.coordinates.length;pe++)I(se.coordinates[pe],ie);return se});const $=u.bt.VectorTileFeature.prototype.toGeoJSON;var H={exports:{}},V=u.bz,q=u.bt.VectorTileFeature,te=ue;function ue(Ae,se){this.options=se||{},this.features=Ae,this.length=Ae.length}function fe(Ae,se){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=se||4096}ue.prototype.feature=function(Ae){return new fe(this.features[Ae],this.options.extent)},fe.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var se=0;se<Ae.length;se++){for(var ie=Ae[se],pe=[],Se=0;Se<ie.length;Se++)pe.push(new V(ie[Se][0],ie[Se][1]));this.geometry.push(pe)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,se=1/0,ie=-1/0,pe=1/0,Se=-1/0,Ue=0;Ue<Ae.length;Ue++)for(var Ge=Ae[Ue],nt=0;nt<Ge.length;nt++){var ne=Ge[nt];se=Math.min(se,ne.x),ie=Math.max(ie,ne.x),pe=Math.min(pe,ne.y),Se=Math.max(Se,ne.y)}return[se,pe,ie,Se]},fe.prototype.toGeoJSON=q.prototype.toGeoJSON;var Z=u.bA,le=te;function be(Ae){var se=new Z;return function(ie,pe){for(var Se in ie.layers)pe.writeMessage(3,Re,ie.layers[Se])}(Ae,se),se.finish()}function Re(Ae,se){var ie;se.writeVarintField(15,Ae.version||1),se.writeStringField(1,Ae.name||""),se.writeVarintField(5,Ae.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Ae.length;ie++)pe.feature=Ae.feature(ie),se.writeMessage(2,Je,pe);var Se=pe.keys;for(ie=0;ie<Se.length;ie++)se.writeStringField(3,Se[ie]);var Ue=pe.values;for(ie=0;ie<Ue.length;ie++)se.writeMessage(4,lt,Ue[ie])}function Je(Ae,se){var ie=Ae.feature;ie.id!==void 0&&se.writeVarintField(1,ie.id),se.writeMessage(2,Fe,Ae),se.writeVarintField(3,ie.type),se.writeMessage(4,yt,ie)}function Fe(Ae,se){var ie=Ae.feature,pe=Ae.keys,Se=Ae.values,Ue=Ae.keycache,Ge=Ae.valuecache;for(var nt in ie.properties){var ne=ie.properties[nt],ve=Ue[nt];if(ne!==null){ve===void 0&&(pe.push(nt),Ue[nt]=ve=pe.length-1),se.writeVarint(ve);var Ie=typeof ne;Ie!=="string"&&Ie!=="boolean"&&Ie!=="number"&&(ne=JSON.stringify(ne));var Ee=Ie+":"+ne,Ve=Ge[Ee];Ve===void 0&&(Se.push(ne),Ge[Ee]=Ve=Se.length-1),se.writeVarint(Ve)}}}function Xe(Ae,se){return(se<<3)+(7&Ae)}function gt(Ae){return Ae<<1^Ae>>31}function yt(Ae,se){for(var ie=Ae.loadGeometry(),pe=Ae.type,Se=0,Ue=0,Ge=ie.length,nt=0;nt<Ge;nt++){var ne=ie[nt],ve=1;pe===1&&(ve=ne.length),se.writeVarint(Xe(1,ve));for(var Ie=pe===3?ne.length-1:ne.length,Ee=0;Ee<Ie;Ee++){Ee===1&&pe!==1&&se.writeVarint(Xe(2,Ie-1));var Ve=ne[Ee].x-Se,Et=ne[Ee].y-Ue;se.writeVarint(gt(Ve)),se.writeVarint(gt(Et)),Se+=Ve,Ue+=Et}pe===3&&se.writeVarint(Xe(7,1))}}function lt(Ae,se){var ie=typeof Ae;ie==="string"?se.writeStringField(1,Ae):ie==="boolean"?se.writeBooleanField(7,Ae):ie==="number"&&(Ae%1!=0?se.writeDoubleField(3,Ae):Ae<0?se.writeSVarintField(6,Ae):se.writeVarintField(5,Ae))}H.exports=be,H.exports.fromVectorTileJs=be,H.exports.fromGeojsonVt=function(Ae,se){se=se||{};var ie={};for(var pe in Ae)ie[pe]=new le(Ae[pe].features,se),ie[pe].name=pe,ie[pe].version=se.version,ie[pe].extent=se.extent;return be({layers:ie})},H.exports.GeoJSONWrapper=le;var Nt=u.by(H.exports);const qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},_t=Math.fround||(Ke=new Float32Array(1),Ae=>(Ke[0]=+Ae,Ke[0]));var Ke;const we=3,He=5,Be=6;class ct{constructor(se){this.options=Object.assign(Object.create(qe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ie,minZoom:pe,maxZoom:Se}=this.options;ie&&console.time("total time");const Ue=`prepare ${se.length} points`;ie&&console.time(Ue),this.points=se;const Ge=[];for(let ne=0;ne<se.length;ne++){const ve=se[ne];if(!ve.geometry)continue;const[Ie,Ee]=ve.geometry.coordinates,Ve=_t(It(Ie)),Et=_t(qt(Ee));Ge.push(Ve,Et,1/0,ne,-1,1),this.options.reduce&&Ge.push(0)}let nt=this.trees[Se+1]=this._createTree(Ge);ie&&console.timeEnd(Ue);for(let ne=Se;ne>=pe;ne--){const ve=+Date.now();nt=this.trees[ne]=this._createTree(this._cluster(nt,ne)),ie&&console.log("z%d: %d clusters in %dms",ne,nt.numItems,+Date.now()-ve)}return ie&&console.timeEnd("total time"),this}getClusters(se,ie){let pe=((se[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,se[1]));let Ue=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)pe=-180,Ue=180;else if(pe>Ue){const Ee=this.getClusters([pe,Se,180,Ge],ie),Ve=this.getClusters([-180,Se,Ue,Ge],ie);return Ee.concat(Ve)}const nt=this.trees[this._limitZoom(ie)],ne=nt.range(It(pe),qt(Ge),It(Ue),qt(Se)),ve=nt.data,Ie=[];for(const Ee of ne){const Ve=this.stride*Ee;Ie.push(ve[Ve+He]>1?xt(ve,Ve,this.clusterProps):this.points[ve[Ve+we]])}return Ie}getChildren(se){const ie=this._getOriginId(se),pe=this._getOriginZoom(se),Se="No cluster with the specified id.",Ue=this.trees[pe];if(!Ue)throw new Error(Se);const Ge=Ue.data;if(ie*this.stride>=Ge.length)throw new Error(Se);const nt=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),ne=Ue.within(Ge[ie*this.stride],Ge[ie*this.stride+1],nt),ve=[];for(const Ie of ne){const Ee=Ie*this.stride;Ge[Ee+4]===se&&ve.push(Ge[Ee+He]>1?xt(Ge,Ee,this.clusterProps):this.points[Ge[Ee+we]])}if(ve.length===0)throw new Error(Se);return ve}getLeaves(se,ie,pe){const Se=[];return this._appendLeaves(Se,se,ie=ie||10,pe=pe||0,0),Se}getTile(se,ie,pe){const Se=this.trees[this._limitZoom(se)],Ue=Math.pow(2,se),{extent:Ge,radius:nt}=this.options,ne=nt/Ge,ve=(pe-ne)/Ue,Ie=(pe+1+ne)/Ue,Ee={features:[]};return this._addTileFeatures(Se.range((ie-ne)/Ue,ve,(ie+1+ne)/Ue,Ie),Se.data,ie,pe,Ue,Ee),ie===0&&this._addTileFeatures(Se.range(1-ne/Ue,ve,1,Ie),Se.data,Ue,pe,Ue,Ee),ie===Ue-1&&this._addTileFeatures(Se.range(0,ve,ne/Ue,Ie),Se.data,-1,pe,Ue,Ee),Ee.features.length?Ee:null}getClusterExpansionZoom(se){let ie=this._getOriginZoom(se)-1;for(;ie<=this.options.maxZoom;){const pe=this.getChildren(se);if(ie++,pe.length!==1)break;se=pe[0].properties.cluster_id}return ie}_appendLeaves(se,ie,pe,Se,Ue){const Ge=this.getChildren(ie);for(const nt of Ge){const ne=nt.properties;if(ne&&ne.cluster?Ue+ne.point_count<=Se?Ue+=ne.point_count:Ue=this._appendLeaves(se,ne.cluster_id,pe,Se,Ue):Ue<Se?Ue++:se.push(nt),se.length===pe)break}return Ue}_createTree(se){const ie=new u.av(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<se.length;pe+=this.stride)ie.add(se[pe],se[pe+1]);return ie.finish(),ie.data=se,ie}_addTileFeatures(se,ie,pe,Se,Ue,Ge){for(const nt of se){const ne=nt*this.stride,ve=ie[ne+He]>1;let Ie,Ee,Ve;if(ve)Ie=bt(ie,ne,this.clusterProps),Ee=ie[ne],Ve=ie[ne+1];else{const jt=this.points[ie[ne+we]];Ie=jt.properties;const[kt,Ot]=jt.geometry.coordinates;Ee=It(kt),Ve=qt(Ot)}const Et={type:1,geometry:[[Math.round(this.options.extent*(Ee*Ue-pe)),Math.round(this.options.extent*(Ve*Ue-Se))]],tags:Ie};let At;At=ve||this.options.generateId?ie[ne+we]:this.points[ie[ne+we]].id,At!==void 0&&(Et.id=At),Ge.features.push(Et)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ie){const{radius:pe,extent:Se,reduce:Ue,minPoints:Ge}=this.options,nt=pe/(Se*Math.pow(2,ie)),ne=se.data,ve=[],Ie=this.stride;for(let Ee=0;Ee<ne.length;Ee+=Ie){if(ne[Ee+2]<=ie)continue;ne[Ee+2]=ie;const Ve=ne[Ee],Et=ne[Ee+1],At=se.within(ne[Ee],ne[Ee+1],nt),jt=ne[Ee+He];let kt=jt;for(const Ot of At){const zt=Ot*Ie;ne[zt+2]>ie&&(kt+=ne[zt+He])}if(kt>jt&&kt>=Ge){let Ot,zt=Ve*jt,In=Et*jt,Dn=-1;const Nn=((Ee/Ie|0)<<5)+(ie+1)+this.points.length;for(const Un of At){const $n=Un*Ie;if(ne[$n+2]<=ie)continue;ne[$n+2]=ie;const ir=ne[$n+He];zt+=ne[$n]*ir,In+=ne[$n+1]*ir,ne[$n+4]=Nn,Ue&&(Ot||(Ot=this._map(ne,Ee,!0),Dn=this.clusterProps.length,this.clusterProps.push(Ot)),Ue(Ot,this._map(ne,$n)))}ne[Ee+4]=Nn,ve.push(zt/kt,In/kt,1/0,Nn,-1,kt),Ue&&ve.push(Dn)}else{for(let Ot=0;Ot<Ie;Ot++)ve.push(ne[Ee+Ot]);if(kt>1)for(const Ot of At){const zt=Ot*Ie;if(!(ne[zt+2]<=ie)){ne[zt+2]=ie;for(let In=0;In<Ie;In++)ve.push(ne[zt+In])}}}}return ve}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ie,pe){if(se[ie+He]>1){const Ge=this.clusterProps[se[ie+Be]];return pe?Object.assign({},Ge):Ge}const Se=this.points[se[ie+we]].properties,Ue=this.options.map(Se);return pe&&Ue===Se?Object.assign({},Ue):Ue}}function xt(Ae,se,ie){return{type:"Feature",id:Ae[se+we],properties:bt(Ae,se,ie),geometry:{type:"Point",coordinates:[(pe=Ae[se],360*(pe-.5)),fn(Ae[se+1])]}};var pe}function bt(Ae,se,ie){const pe=Ae[se+He],Se=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Ue=Ae[se+Be],Ge=Ue===-1?{}:Object.assign({},ie[Ue]);return Object.assign(Ge,{cluster:!0,cluster_id:Ae[se+we],point_count:pe,point_count_abbreviated:Se})}function It(Ae){return Ae/360+.5}function qt(Ae){const se=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function fn(Ae){const se=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function wn(Ae,se,ie,pe){let Se=pe;const Ue=se+(ie-se>>1);let Ge,nt=ie-se;const ne=Ae[se],ve=Ae[se+1],Ie=Ae[ie],Ee=Ae[ie+1];for(let Ve=se+3;Ve<ie;Ve+=3){const Et=an(Ae[Ve],Ae[Ve+1],ne,ve,Ie,Ee);if(Et>Se)Ge=Ve,Se=Et;else if(Et===Se){const At=Math.abs(Ve-Ue);At<nt&&(Ge=Ve,nt=At)}}Se>pe&&(Ge-se>3&&wn(Ae,se,Ge,pe),Ae[Ge+2]=Se,ie-Ge>3&&wn(Ae,Ge,ie,pe))}function an(Ae,se,ie,pe,Se,Ue){let Ge=Se-ie,nt=Ue-pe;if(Ge!==0||nt!==0){const ne=((Ae-ie)*Ge+(se-pe)*nt)/(Ge*Ge+nt*nt);ne>1?(ie=Se,pe=Ue):ne>0&&(ie+=Ge*ne,pe+=nt*ne)}return Ge=Ae-ie,nt=se-pe,Ge*Ge+nt*nt}function Vt(Ae,se,ie,pe){const Se={id:Ae??null,type:se,geometry:ie,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Cn(Se,ie);else if(se==="Polygon")Cn(Se,ie[0]);else if(se==="MultiLineString")for(const Ue of ie)Cn(Se,Ue);else if(se==="MultiPolygon")for(const Ue of ie)Cn(Se,Ue[0]);return Se}function Cn(Ae,se){for(let ie=0;ie<se.length;ie+=3)Ae.minX=Math.min(Ae.minX,se[ie]),Ae.minY=Math.min(Ae.minY,se[ie+1]),Ae.maxX=Math.max(Ae.maxX,se[ie]),Ae.maxY=Math.max(Ae.maxY,se[ie+1])}function Tn(Ae,se,ie,pe){if(!se.geometry)return;const Se=se.geometry.coordinates;if(Se&&Se.length===0)return;const Ue=se.geometry.type,Ge=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let nt=[],ne=se.id;if(ie.promoteId?ne=se.properties[ie.promoteId]:ie.generateId&&(ne=pe||0),Ue==="Point")Fn(Se,nt);else if(Ue==="MultiPoint")for(const ve of Se)Fn(ve,nt);else if(Ue==="LineString")Qe(Se,nt,Ge,!1);else if(Ue==="MultiLineString"){if(ie.lineMetrics){for(const ve of Se)nt=[],Qe(ve,nt,Ge,!1),Ae.push(Vt(ne,"LineString",nt,se.properties));return}zn(Se,nt,Ge,!1)}else if(Ue==="Polygon")zn(Se,nt,Ge,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(const ve of se.geometry.geometries)Tn(Ae,{id:ne,geometry:ve,properties:se.properties},ie,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ve of Se){const Ie=[];zn(ve,Ie,Ge,!0),nt.push(Ie)}}Ae.push(Vt(ne,Ue,nt,se.properties))}function Fn(Ae,se){se.push(Le(Ae[0]),De(Ae[1]),0)}function Qe(Ae,se,ie,pe){let Se,Ue,Ge=0;for(let ne=0;ne<Ae.length;ne++){const ve=Le(Ae[ne][0]),Ie=De(Ae[ne][1]);se.push(ve,Ie,0),ne>0&&(Ge+=pe?(Se*Ie-ve*Ue)/2:Math.sqrt(Math.pow(ve-Se,2)+Math.pow(Ie-Ue,2))),Se=ve,Ue=Ie}const nt=se.length-3;se[2]=1,wn(se,0,nt,ie),se[nt+2]=1,se.size=Math.abs(Ge),se.start=0,se.end=se.size}function zn(Ae,se,ie,pe){for(let Se=0;Se<Ae.length;Se++){const Ue=[];Qe(Ae[Se],Ue,ie,pe),se.push(Ue)}}function Le(Ae){return Ae/360+.5}function De(Ae){const se=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function Ye(Ae,se,ie,pe,Se,Ue,Ge,nt){if(pe/=se,Ue>=(ie/=se)&&Ge<pe)return Ae;if(Ge<ie||Ue>=pe)return null;const ne=[];for(const ve of Ae){const Ie=ve.geometry;let Ee=ve.type;const Ve=Se===0?ve.minX:ve.minY,Et=Se===0?ve.maxX:ve.maxY;if(Ve>=ie&&Et<pe){ne.push(ve);continue}if(Et<ie||Ve>=pe)continue;let At=[];if(Ee==="Point"||Ee==="MultiPoint")mt(Ie,At,ie,pe,Se);else if(Ee==="LineString")ft(Ie,At,ie,pe,Se,!1,nt.lineMetrics);else if(Ee==="MultiLineString")Bt(Ie,At,ie,pe,Se,!1);else if(Ee==="Polygon")Bt(Ie,At,ie,pe,Se,!0);else if(Ee==="MultiPolygon")for(const jt of Ie){const kt=[];Bt(jt,kt,ie,pe,Se,!0),kt.length&&At.push(kt)}if(At.length){if(nt.lineMetrics&&Ee==="LineString"){for(const jt of At)ne.push(Vt(ve.id,Ee,jt,ve.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(At.length===1?(Ee="LineString",At=At[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=At.length===3?"Point":"MultiPoint"),ne.push(Vt(ve.id,Ee,At,ve.tags))}}return ne.length?ne:null}function mt(Ae,se,ie,pe,Se){for(let Ue=0;Ue<Ae.length;Ue+=3){const Ge=Ae[Ue+Se];Ge>=ie&&Ge<=pe&&pn(se,Ae[Ue],Ae[Ue+1],Ae[Ue+2])}}function ft(Ae,se,ie,pe,Se,Ue,Ge){let nt=wt(Ae);const ne=Se===0?nn:ln;let ve,Ie,Ee=Ae.start;for(let kt=0;kt<Ae.length-3;kt+=3){const Ot=Ae[kt],zt=Ae[kt+1],In=Ae[kt+2],Dn=Ae[kt+3],Nn=Ae[kt+4],Un=Se===0?Ot:zt,$n=Se===0?Dn:Nn;let ir=!1;Ge&&(ve=Math.sqrt(Math.pow(Ot-Dn,2)+Math.pow(zt-Nn,2))),Un<ie?$n>ie&&(Ie=ne(nt,Ot,zt,Dn,Nn,ie),Ge&&(nt.start=Ee+ve*Ie)):Un>pe?$n<pe&&(Ie=ne(nt,Ot,zt,Dn,Nn,pe),Ge&&(nt.start=Ee+ve*Ie)):pn(nt,Ot,zt,In),$n<ie&&Un>=ie&&(Ie=ne(nt,Ot,zt,Dn,Nn,ie),ir=!0),$n>pe&&Un<=pe&&(Ie=ne(nt,Ot,zt,Dn,Nn,pe),ir=!0),!Ue&&ir&&(Ge&&(nt.end=Ee+ve*Ie),se.push(nt),nt=wt(Ae)),Ge&&(Ee+=ve)}let Ve=Ae.length-3;const Et=Ae[Ve],At=Ae[Ve+1],jt=Se===0?Et:At;jt>=ie&&jt<=pe&&pn(nt,Et,At,Ae[Ve+2]),Ve=nt.length-3,Ue&&Ve>=3&&(nt[Ve]!==nt[0]||nt[Ve+1]!==nt[1])&&pn(nt,nt[0],nt[1],nt[2]),nt.length&&se.push(nt)}function wt(Ae){const se=[];return se.size=Ae.size,se.start=Ae.start,se.end=Ae.end,se}function Bt(Ae,se,ie,pe,Se,Ue){for(const Ge of Ae)ft(Ge,se,ie,pe,Se,Ue,!1)}function pn(Ae,se,ie,pe){Ae.push(se,ie,pe)}function nn(Ae,se,ie,pe,Se,Ue){const Ge=(Ue-se)/(pe-se);return pn(Ae,Ue,ie+(Se-ie)*Ge,1),Ge}function ln(Ae,se,ie,pe,Se,Ue){const Ge=(Ue-ie)/(Se-ie);return pn(Ae,se+(pe-se)*Ge,Ue,1),Ge}function it(Ae,se){const ie=[];for(let pe=0;pe<Ae.length;pe++){const Se=Ae[pe],Ue=Se.type;let Ge;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Ge=Mn(Se.geometry,se);else if(Ue==="MultiLineString"||Ue==="Polygon"){Ge=[];for(const nt of Se.geometry)Ge.push(Mn(nt,se))}else if(Ue==="MultiPolygon"){Ge=[];for(const nt of Se.geometry){const ne=[];for(const ve of nt)ne.push(Mn(ve,se));Ge.push(ne)}}ie.push(Vt(Se.id,Ue,Ge,Se.tags))}return ie}function Mn(Ae,se){const ie=[];ie.size=Ae.size,Ae.start!==void 0&&(ie.start=Ae.start,ie.end=Ae.end);for(let pe=0;pe<Ae.length;pe+=3)ie.push(Ae[pe]+se,Ae[pe+1],Ae[pe+2]);return ie}function ar(Ae,se){if(Ae.transformed)return Ae;const ie=1<<Ae.z,pe=Ae.x,Se=Ae.y;for(const Ue of Ae.features){const Ge=Ue.geometry,nt=Ue.type;if(Ue.geometry=[],nt===1)for(let ne=0;ne<Ge.length;ne+=2)Ue.geometry.push(fr(Ge[ne],Ge[ne+1],se,ie,pe,Se));else for(let ne=0;ne<Ge.length;ne++){const ve=[];for(let Ie=0;Ie<Ge[ne].length;Ie+=2)ve.push(fr(Ge[ne][Ie],Ge[ne][Ie+1],se,ie,pe,Se));Ue.geometry.push(ve)}}return Ae.transformed=!0,Ae}function fr(Ae,se,ie,pe,Se,Ue){return[Math.round(ie*(Ae*pe-Se)),Math.round(ie*(se*pe-Ue))]}function Xn(Ae,se,ie,pe,Se){const Ue=se===Se.maxZoom?0:Se.tolerance/((1<<se)*Se.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:Ae.length,source:null,x:ie,y:pe,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const nt of Ae)ut(Ge,nt,Ue,Se);return Ge}function ut(Ae,se,ie,pe){const Se=se.geometry,Ue=se.type,Ge=[];if(Ae.minX=Math.min(Ae.minX,se.minX),Ae.minY=Math.min(Ae.minY,se.minY),Ae.maxX=Math.max(Ae.maxX,se.maxX),Ae.maxY=Math.max(Ae.maxY,se.maxY),Ue==="Point"||Ue==="MultiPoint")for(let nt=0;nt<Se.length;nt+=3)Ge.push(Se[nt],Se[nt+1]),Ae.numPoints++,Ae.numSimplified++;else if(Ue==="LineString")vn(Ge,Se,Ae,ie,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(let nt=0;nt<Se.length;nt++)vn(Ge,Se[nt],Ae,ie,Ue==="Polygon",nt===0);else if(Ue==="MultiPolygon")for(let nt=0;nt<Se.length;nt++){const ne=Se[nt];for(let ve=0;ve<ne.length;ve++)vn(Ge,ne[ve],Ae,ie,!0,ve===0)}if(Ge.length){let nt=se.tags||null;if(Ue==="LineString"&&pe.lineMetrics){nt={};for(const ve in se.tags)nt[ve]=se.tags[ve];nt.mapbox_clip_start=Se.start/Se.size,nt.mapbox_clip_end=Se.end/Se.size}const ne={geometry:Ge,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:nt};se.id!==null&&(ne.id=se.id),Ae.features.push(ne)}}function vn(Ae,se,ie,pe,Se,Ue){const Ge=pe*pe;if(pe>0&&se.size<(Se?Ge:pe))return void(ie.numPoints+=se.length/3);const nt=[];for(let ne=0;ne<se.length;ne+=3)(pe===0||se[ne+2]>Ge)&&(ie.numSimplified++,nt.push(se[ne],se[ne+1])),ie.numPoints++;Se&&function(ne,ve){let Ie=0;for(let Ee=0,Ve=ne.length,Et=Ve-2;Ee<Ve;Et=Ee,Ee+=2)Ie+=(ne[Ee]-ne[Et])*(ne[Ee+1]+ne[Et+1]);if(Ie>0===ve)for(let Ee=0,Ve=ne.length;Ee<Ve/2;Ee+=2){const Et=ne[Ee],At=ne[Ee+1];ne[Ee]=ne[Ve-2-Ee],ne[Ee+1]=ne[Ve-1-Ee],ne[Ve-2-Ee]=Et,ne[Ve-1-Ee]=At}}(nt,Ue),Ae.push(nt)}const Sn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Gr{constructor(se,ie){const pe=(ie=this.options=function(Ue,Ge){for(const nt in Ge)Ue[nt]=Ge[nt];return Ue}(Object.create(Sn),ie)).debug;if(pe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(Ue,Ge){const nt=[];if(Ue.type==="FeatureCollection")for(let ne=0;ne<Ue.features.length;ne++)Tn(nt,Ue.features[ne],Ge,ne);else Tn(nt,Ue.type==="Feature"?Ue:{geometry:Ue},Ge);return nt}(se,ie);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(Ue,Ge){const nt=Ge.buffer/Ge.extent;let ne=Ue;const ve=Ye(Ue,1,-1-nt,nt,0,-1,2,Ge),Ie=Ye(Ue,1,1-nt,2+nt,0,-1,2,Ge);return(ve||Ie)&&(ne=Ye(Ue,1,-nt,1+nt,0,-1,2,Ge)||[],ve&&(ne=it(ve,1).concat(ne)),Ie&&(ne=ne.concat(it(Ie,-1)))),ne}(Se,ie),Se.length&&this.splitTile(Se,0,0,0),pe&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ie,pe,Se,Ue,Ge,nt){const ne=[se,ie,pe,Se],ve=this.options,Ie=ve.debug;for(;ne.length;){Se=ne.pop(),pe=ne.pop(),ie=ne.pop(),se=ne.pop();const Ee=1<<ie,Ve=gi(ie,pe,Se);let Et=this.tiles[Ve];if(!Et&&(Ie>1&&console.time("creation"),Et=this.tiles[Ve]=Xn(se,ie,pe,Se,ve),this.tileCoords.push({z:ie,x:pe,y:Se}),Ie)){Ie>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,pe,Se,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));const ir=`z${ie}`;this.stats[ir]=(this.stats[ir]||0)+1,this.total++}if(Et.source=se,Ue==null){if(ie===ve.indexMaxZoom||Et.numPoints<=ve.indexMaxPoints)continue}else{if(ie===ve.maxZoom||ie===Ue)continue;if(Ue!=null){const ir=Ue-ie;if(pe!==Ge>>ir||Se!==nt>>ir)continue}}if(Et.source=null,se.length===0)continue;Ie>1&&console.time("clipping");const At=.5*ve.buffer/ve.extent,jt=.5-At,kt=.5+At,Ot=1+At;let zt=null,In=null,Dn=null,Nn=null,Un=Ye(se,Ee,pe-At,pe+kt,0,Et.minX,Et.maxX,ve),$n=Ye(se,Ee,pe+jt,pe+Ot,0,Et.minX,Et.maxX,ve);se=null,Un&&(zt=Ye(Un,Ee,Se-At,Se+kt,1,Et.minY,Et.maxY,ve),In=Ye(Un,Ee,Se+jt,Se+Ot,1,Et.minY,Et.maxY,ve),Un=null),$n&&(Dn=Ye($n,Ee,Se-At,Se+kt,1,Et.minY,Et.maxY,ve),Nn=Ye($n,Ee,Se+jt,Se+Ot,1,Et.minY,Et.maxY,ve),$n=null),Ie>1&&console.timeEnd("clipping"),ne.push(zt||[],ie+1,2*pe,2*Se),ne.push(In||[],ie+1,2*pe,2*Se+1),ne.push(Dn||[],ie+1,2*pe+1,2*Se),ne.push(Nn||[],ie+1,2*pe+1,2*Se+1)}}getTile(se,ie,pe){se=+se,ie=+ie,pe=+pe;const Se=this.options,{extent:Ue,debug:Ge}=Se;if(se<0||se>24)return null;const nt=1<<se,ne=gi(se,ie=ie+nt&nt-1,pe);if(this.tiles[ne])return ar(this.tiles[ne],Ue);Ge>1&&console.log("drilling down to z%d-%d-%d",se,ie,pe);let ve,Ie=se,Ee=ie,Ve=pe;for(;!ve&&Ie>0;)Ie--,Ee>>=1,Ve>>=1,ve=this.tiles[gi(Ie,Ee,Ve)];return ve&&ve.source?(Ge>1&&(console.log("found parent tile z%d-%d-%d",Ie,Ee,Ve),console.time("drilling down")),this.splitTile(ve.source,Ie,Ee,Ve,se,ie,pe),Ge>1&&console.timeEnd("drilling down"),this.tiles[ne]?ar(this.tiles[ne],Ue):null):null}}function gi(Ae,se,ie){return 32*((1<<Ae)*ie+se)+Ae}function Wn(Ae,se){return se?Ae.properties[se]:Ae.id}function Ei(Ae,se){if(Ae==null)return!0;if(Ae.type==="Feature")return Wn(Ae,se)!=null;if(Ae.type==="FeatureCollection"){const ie=new Set;for(const pe of Ae.features){const Se=Wn(pe,se);if(Se==null||ie.has(Se))return!1;ie.add(Se)}return!0}return!1}function ls(Ae,se){const ie=new Map;if(Ae!=null)if(Ae.type==="Feature")ie.set(Wn(Ae,se),Ae);else for(const pe of Ae.features)ie.set(Wn(pe,se),pe);return ie}class es extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ie){return u._(this,void 0,void 0,function*(){const pe=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!Se)return null;const Ue=new class{constructor(nt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.X,this.length=nt.length,this._features=nt}feature(nt){return new class{constructor(ne){this._feature=ne,this.extent=u.X,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))}loadGeometry(){if(this._feature.type===1){const ne=[];for(const ve of this._feature.geometry)ne.push([new u.P(ve[0],ve[1])]);return ne}{const ne=[];for(const ve of this._feature.geometry){const Ie=[];for(const Ee of ve)Ie.push(new u.P(Ee[0],Ee[1]));ne.push(Ie)}return ne}}toGeoJSON(ne,ve,Ie){return $.call(this,ne,ve,Ie)}}(this._features[nt])}}(Se.features);let Ge=Nt(Ue);return Ge.byteOffset===0&&Ge.byteLength===Ge.buffer.byteLength||(Ge=new Uint8Array(Ge)),{vectorTile:Ue,rawData:Ge.buffer}})}loadData(se){return u._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const pe=!!(se&&se.request&&se.request.collectResourceTiming)&&new u.bv(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new ct(function({superclusterOptions:Ge,clusterProperties:nt}){if(!nt||!Ge)return Ge;const ne={},ve={},Ie={accumulated:null,zoom:0},Ee={properties:null},Ve=Object.keys(nt);for(const Et of Ve){const[At,jt]=nt[Et],kt=u.bC(jt),Ot=u.bC(typeof At=="string"?[At,["accumulated"],["get",Et]]:At);ne[Et]=kt.value,ve[Et]=Ot.value}return Ge.map=Et=>{Ee.properties=Et;const At={};for(const jt of Ve)At[jt]=ne[jt].evaluate(Ie,Ee);return At},Ge.reduce=(Et,At)=>{Ee.properties=At;for(const jt of Ve)Ie.accumulated=Et[jt],Et[jt]=ve[jt].evaluate(Ie,Ee)},Ge}(se)).load((yield this._pendingData).features):(Se=yield this._pendingData,new Gr(Se,se.geojsonVtOptions)),this.loaded={};const Ue={};if(pe){const Ge=pe.finish();Ge&&(Ue.resourceTiming={},Ue.resourceTiming[se.source]=JSON.parse(JSON.stringify(Ge)))}return Ue}catch(Ue){if(delete this._pendingRequest,u.bB(Ue))return{abandoned:!0};throw Ue}var Se})}getData(){return u._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ie=this.loaded;return ie&&ie[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ie){return u._(this,void 0,void 0,function*(){let pe=yield this.loadGeoJSON(se,ie);if(delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(z(pe,!0),se.filter){const Se=u.bC(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map(Ge=>`${Ge.key}: ${Ge.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(Ge=>Se.value.evaluate({zoom:0},Ge))}}return pe})}loadGeoJSON(se,ie){return u._(this,void 0,void 0,function*(){const{promoteId:pe}=se;if(se.request){const Se=yield u.h(se.request,ie);return this._dataUpdateable=Ei(Se.data,pe)?ls(Se.data,pe):void 0,Se.data}if(typeof se.data=="string")try{const Se=JSON.parse(se.data);return this._dataUpdateable=Ei(Se,pe)?ls(Se,pe):void 0,Se}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Se,Ue,Ge){var nt,ne,ve,Ie;if(Ue.removeAll&&Se.clear(),Ue.remove)for(const Ee of Ue.remove)Se.delete(Ee);if(Ue.add)for(const Ee of Ue.add){const Ve=Wn(Ee,Ge);Ve!=null&&Se.set(Ve,Ee)}if(Ue.update)for(const Ee of Ue.update){let Ve=Se.get(Ee.id);if(Ve==null)continue;const Et=!Ee.removeAllProperties&&(((nt=Ee.removeProperties)===null||nt===void 0?void 0:nt.length)>0||((ne=Ee.addOrUpdateProperties)===null||ne===void 0?void 0:ne.length)>0);if((Ee.newGeometry||Ee.removeAllProperties||Et)&&(Ve=Object.assign({},Ve),Se.set(Ee.id,Ve),Et&&(Ve.properties=Object.assign({},Ve.properties))),Ee.newGeometry&&(Ve.geometry=Ee.newGeometry),Ee.removeAllProperties)Ve.properties={};else if(((ve=Ee.removeProperties)===null||ve===void 0?void 0:ve.length)>0)for(const At of Ee.removeProperties)Object.prototype.hasOwnProperty.call(Ve.properties,At)&&delete Ve.properties[At];if(((Ie=Ee.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const{key:At,value:jt}of Ee.addOrUpdateProperties)Ve.properties[At]=jt}}(this._dataUpdateable,se.dataDiff,pe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class ts{constructor(se){this.self=se,this.actor=new u.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,pe)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=pe},this.self.addProtocol=u.bi,this.self.removeProtocol=u.bj,this.self.registerRTLTextPlugin=ie=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,pe)=>this._getDEMWorkerSource(ie,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RDT",(ie,pe)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,pe.source).removeTile(pe)})),this.actor.registerMessageHandler("GCEZ",(ie,pe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,pe.type,pe.source).getClusterExpansionZoom(pe)})),this.actor.registerMessageHandler("GCC",(ie,pe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,pe.type,pe.source).getClusterChildren(pe)})),this.actor.registerMessageHandler("GCL",(ie,pe)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,pe.type,pe.source).getClusterLeaves(pe)})),this.actor.registerMessageHandler("LD",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).loadData(pe)),this.actor.registerMessageHandler("GD",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).getData()),this.actor.registerMessageHandler("LT",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).loadTile(pe)),this.actor.registerMessageHandler("RT",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).reloadTile(pe)),this.actor.registerMessageHandler("AT",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).abortTile(pe)),this.actor.registerMessageHandler("RMT",(ie,pe)=>this._getWorkerSource(ie,pe.type,pe.source).removeTile(pe)),this.actor.registerMessageHandler("RS",(ie,pe)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][pe.type]||!this.workerSources[ie][pe.type][pe.source])return;const Se=this.workerSources[ie][pe.type][pe.source];delete this.workerSources[ie][pe.type][pe.source],Se.removeSource!==void 0&&Se.removeSource(pe)})),this.actor.registerMessageHandler("RM",ie=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,pe)=>u._(this,void 0,void 0,function*(){this.referrer=pe})),this.actor.registerMessageHandler("SRPS",(ie,pe)=>this._syncRTLPluginState(ie,pe)),this.actor.registerMessageHandler("IS",(ie,pe)=>u._(this,void 0,void 0,function*(){this.self.importScripts(pe)})),this.actor.registerMessageHandler("SI",(ie,pe)=>this._setImages(ie,pe)),this.actor.registerMessageHandler("UL",(ie,pe)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(pe.layers,pe.removedIds)})),this.actor.registerMessageHandler("SL",(ie,pe)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(pe)}))}_setImages(se,ie){return u._(this,void 0,void 0,function*(){this.availableImages[se]=ie;for(const pe in this.workerSources[se]){const Se=this.workerSources[se][pe];for(const Ue in Se)Se[Ue].availableImages=ie}})}_syncRTLPluginState(se,ie){return u._(this,void 0,void 0,function*(){if(u.bD.isParsed())return u.bD.getState();if(ie.pluginStatus!=="loading")return u.bD.setState(ie),ie;const pe=ie.pluginURL;if(this.self.importScripts(pe),u.bD.isParsed()){const Se={pluginStatus:"loaded",pluginURL:pe};return u.bD.setState(Se),Se}throw u.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${pe}`)})}_getAvailableImages(se){let ie=this.availableImages[se];return ie||(ie=[]),ie}_getLayerIndex(se){let ie=this.layerIndexes[se];return ie||(ie=this.layerIndexes[se]=new a),ie}_getWorkerSource(se,ie,pe){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ie]||(this.workerSources[se][ie]={}),!this.workerSources[se][ie][pe]){const Se={sendAsync:(Ue,Ge)=>(Ue.targetMapId=se,this.actor.sendAsync(Ue,Ge))};switch(ie){case"vector":this.workerSources[se][ie][pe]=new C(Se,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ie][pe]=new es(Se,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ie][pe]=new this.externalWorkerSourceTypes[ie](Se,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ie][pe]}_getDEMWorkerSource(se,ie){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ie]||(this.demWorkerSources[se][ie]=new P),this.demWorkerSources[se][ie]}}return u.i(self)&&(self.worker=new ts(self)),ts}),i("index",["exports","./shared"],function(u,a){var m="4.7.1";let g,w;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:E=>new Promise((s,f)=>{const v=requestAnimationFrame(s);E.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),f(a.c())})}),getImageData(E,s=0){return this.getImageCanvasContext(E).getImageData(-s,-s,E.width+2*s,E.height+2*s)},getImageCanvasContext(E){const s=window.document.createElement("canvas"),f=s.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return s.width=E.width,s.height=E.height,f.drawImage(E,0,0,E.width,E.height),f},resolveURL:E=>(g||(g=document.createElement("a")),g.href=E,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(w==null&&(w=matchMedia("(prefers-reduced-motion: reduce)")),w.matches)}};class P{static testProp(s){if(!P.docStyle)return s[0];for(let f=0;f<s.length;f++)if(s[f]in P.docStyle)return s[f];return s[0]}static create(s,f,v){const _=window.document.createElement(s);return f!==void 0&&(_.className=f),v&&v.appendChild(_),_}static createNS(s,f){return window.document.createElementNS(s,f)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(s,f){s.style[P.transformProp]=f}static addEventListener(s,f,v,_={}){s.addEventListener(f,v,"passive"in _?_:_.capture)}static removeEventListener(s,f,v,_={}){s.removeEventListener(f,v,"passive"in _?_:_.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(s){const f=s.getBoundingClientRect();return{x:f.width/s.offsetWidth||1,y:f.height/s.offsetHeight||1,boundingClientRect:f}}static getPoint(s,f,v){const _=f.boundingClientRect;return new a.P((v.clientX-_.left)/f.x-s.clientLeft,(v.clientY-_.top)/f.y-s.clientTop)}static mousePos(s,f){const v=P.getScale(s);return P.getPoint(s,v,f)}static touchPos(s,f){const v=[],_=P.getScale(s);for(let S=0;S<f.length;S++)v.push(P.getPoint(s,_,f[S]));return v}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(E){!$&&z&&(H?V(E):N=E)}};let N,z,$=!1,H=!1;function V(E){const s=E.createTexture();E.bindTexture(E.TEXTURE_2D,s);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,z),E.isContextLost())return;I.supported=!0}catch{}E.deleteTexture(s),$=!0}var q;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{N&&V(N),N=null,H=!0},z.onerror=()=>{$=!0,N=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let s,f,v,_;E.resetRequestQueue=()=>{s=[],f=0,v=0,_={}},E.addThrottleControl=B=>{const W=v++;return _[W]=B,W},E.removeThrottleControl=B=>{delete _[B],O()},E.getImage=(B,W,Q=!0)=>new Promise((J,ae)=>{I.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),a.e(B,{type:"image"}),s.push({abortController:W,requestParameters:B,supportImageRefresh:Q,state:"queued",onError:ye=>{ae(ye)},onSuccess:ye=>{J(ye)}}),O()});const S=B=>a._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:W,supportImageRefresh:Q,onError:J,onSuccess:ae,abortController:ye}=B,xe=Q===!1&&!a.i(self)&&!a.g(W.url)&&(!W.headers||Object.keys(W.headers).reduce((Ne,$e)=>Ne&&$e==="accept",!0));f++;const Pe=xe?j(W,ye):a.m(W,ye);try{const Ne=yield Pe;delete B.abortController,B.state="completed",Ne.data instanceof HTMLImageElement||a.b(Ne.data)?ae(Ne):Ne.data&&ae({data:yield(Oe=Ne.data,typeof createImageBitmap=="function"?a.d(Oe):a.f(Oe)),cacheControl:Ne.cacheControl,expires:Ne.expires})}catch(Ne){delete B.abortController,J(Ne)}finally{f--,O()}var Oe}),O=()=>{const B=(()=>{for(const W of Object.keys(_))if(_[W]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let W=f;W<B&&s.length>0;W++){const Q=s.shift();Q.abortController.signal.aborted?W--:S(Q)}},j=(B,W)=>new Promise((Q,J)=>{const ae=new Image,ye=B.url,xe=B.credentials;xe&&xe==="include"?ae.crossOrigin="use-credentials":(xe&&xe==="same-origin"||!a.s(ye))&&(ae.crossOrigin="anonymous"),W.signal.addEventListener("abort",()=>{ae.src="",J(a.c())}),ae.fetchPriority="high",ae.onload=()=>{ae.onerror=ae.onload=null,Q({data:ae})},ae.onerror=()=>{ae.onerror=ae.onload=null,W.signal.aborted||J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ae.src=ye})}(q||(q={})),q.resetRequestQueue();class te{constructor(s){this._transformRequestFn=s}transformRequest(s,f){return this._transformRequestFn&&this._transformRequestFn(s,f)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function ue(E){var s=new a.A(3);return s[0]=E[0],s[1]=E[1],s[2]=E[2],s}var fe,Z=function(E,s,f){return E[0]=s[0]-f[0],E[1]=s[1]-f[1],E[2]=s[2]-f[2],E};fe=new a.A(3),a.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var le=function(E){var s=E[0],f=E[1];return s*s+f*f};function be(E){const s=[];if(typeof E=="string")s.push({id:"default",url:E});else if(E&&E.length>0){const f=[];for(const{id:v,url:_}of E){const S=`${v}${_}`;f.indexOf(S)===-1&&(f.push(S),s.push({id:v,url:_}))}}return s}function Re(E,s,f){const v=E.split("?");return v[0]+=`${s}${f}`,v.join("?")}(function(){var E=new a.A(2);a.A!=Float32Array&&(E[0]=0,E[1]=0)})();class Je{constructor(s,f,v,_){this.context=s,this.format=v,this.texture=s.gl.createTexture(),this.update(f,_)}update(s,f,v){const{width:_,height:S}=s,O=!(this.size&&this.size[0]===_&&this.size[1]===S||v),{context:j}=this,{gl:B}=j;if(this.useMipmap=!!(f&&f.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!f||f.premultiply!==!1)),O)this.size=[_,S],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||a.b(s)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,s):B.texImage2D(B.TEXTURE_2D,0,this.format,_,S,0,this.format,B.UNSIGNED_BYTE,s.data);else{const{x:W,y:Q}=v||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||a.b(s)?B.texSubImage2D(B.TEXTURE_2D,0,W,Q,B.RGBA,B.UNSIGNED_BYTE,s):B.texSubImage2D(B.TEXTURE_2D,0,W,Q,_,S,B.RGBA,B.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(s,f,v){const{context:_}=this,{gl:S}=_;S.bindTexture(S.TEXTURE_2D,this.texture),v!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=S.LINEAR),s!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,s),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,v||s),this.filter=s),f!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,f),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Fe(E){const{userImage:s}=E;return!!(s&&s.render&&s.render())&&(E.data.replace(new Uint8Array(s.data.buffer)),!0)}class Xe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:f,promiseResolve:v}of this.requestors)v(this._getImagesForIds(f));this.requestors=[]}}getImage(s){const f=this.images[s];if(f&&!f.data&&f.spriteData){const v=f.spriteData;f.data=new a.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),f.spriteData=null}return f}addImage(s,f){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,f)&&(this.images[s]=f)}_validate(s,f){let v=!0;const _=f.data||f.spriteData;return this._validateStretch(f.stretchX,_&&_.width)||(this.fire(new a.j(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,_&&_.height)||(this.fire(new a.j(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new a.j(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,f){if(!s)return!0;let v=0;for(const _ of s){if(_[0]<v||_[1]<_[0]||f<_[1])return!1;v=_[1]}return!0}_validateContent(s,f){if(!s)return!0;if(s.length!==4)return!1;const v=f.spriteData,_=v&&v.width||f.data.width,S=v&&v.height||f.data.height;return!(s[0]<0||_<s[0]||s[1]<0||S<s[1]||s[2]<0||_<s[2]||s[3]<0||S<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,f,v=!0){const _=this.getImage(s);if(v&&(_.data.width!==f.data.width||_.data.height!==f.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=_.version+1,this.images[s]=f,this.updatedImages[s]=!0}removeImage(s){const f=this.images[s];delete this.images[s],delete this.patterns[s],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((f,v)=>{let _=!0;if(!this.isLoaded())for(const S of s)this.images[S]||(_=!1);this.isLoaded()||_?f(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:f})})}_getImagesForIds(s){const f={};for(const v of s){let _=this.getImage(v);_||(this.fire(new a.k("styleimagemissing",{id:v})),_=this.getImage(v)),_?f[v]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:a.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:s,height:f}=this.atlasImage;return{width:s,height:f}}getPattern(s){const f=this.patterns[s],v=this.getImage(s);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const _={w:v.data.width+2,h:v.data.height+2,x:0,y:0},S=new a.I(_,v);this.patterns[s]={bin:_,position:S}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const f=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Je(s,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const S in this.patterns)s.push(this.patterns[S].bin);const{w:f,h:v}=a.p(s),_=this.atlasImage;_.resize({width:f||1,height:v||1});for(const S in this.patterns){const{bin:O}=this.patterns[S],j=O.x+1,B=O.y+1,W=this.getImage(S).data,Q=W.width,J=W.height;a.R.copy(W,_,{x:0,y:0},{x:j,y:B},{width:Q,height:J}),a.R.copy(W,_,{x:0,y:J-1},{x:j,y:B-1},{width:Q,height:1}),a.R.copy(W,_,{x:0,y:0},{x:j,y:B+J},{width:Q,height:1}),a.R.copy(W,_,{x:Q-1,y:0},{x:j-1,y:B},{width:1,height:J}),a.R.copy(W,_,{x:0,y:0},{x:j+Q,y:B},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const f of s){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.getImage(f);v||a.w(`Image with ID: "${f}" was not found`),Fe(v)&&this.updateImage(f,v)}}}const gt=1e20;function yt(E,s,f,v,_,S,O,j,B){for(let W=s;W<s+v;W++)lt(E,f*S+W,S,_,O,j,B);for(let W=f;W<f+_;W++)lt(E,W*S+s,1,v,O,j,B)}function lt(E,s,f,v,_,S,O){S[0]=0,O[0]=-1e20,O[1]=gt,_[0]=E[s];for(let j=1,B=0,W=0;j<v;j++){_[j]=E[s+j*f];const Q=j*j;do{const J=S[B];W=(_[j]-_[J]+Q-J*J)/(j-J)/2}while(W<=O[B]&&--B>-1);B++,S[B]=j,O[B]=W,O[B+1]=gt}for(let j=0,B=0;j<v;j++){for(;O[B+1]<j;)B++;const W=S[B],Q=j-W;E[s+j*f]=_[W]+Q*Q}}class Nt{constructor(s,f){this.requestManager=s,this.localIdeographFontFamily=f,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,function*(){const f=[];for(const S in s)for(const O of s[S])f.push(this._getAndCacheGlyphsPromise(S,O));const v=yield Promise.all(f),_={};for(const{stack:S,id:O,glyph:j}of v)_[S]||(_[S]={}),_[S][O]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return _})}_getAndCacheGlyphsPromise(s,f){return a._(this,void 0,void 0,function*(){let v=this.entries[s];v||(v=this.entries[s]={glyphs:{},requests:{},ranges:{}});let _=v.glyphs[f];if(_!==void 0)return{stack:s,id:f,glyph:_};if(_=this._tinySDF(v,s,f),_)return v.glyphs[f]=_,{stack:s,id:f,glyph:_};const S=Math.floor(f/256);if(256*S>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[S])return{stack:s,id:f,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[S]){const j=Nt.loadGlyphRange(s,S,this.url,this.requestManager);v.requests[S]=j}const O=yield v.requests[S];for(const j in O)this._doesCharSupportLocalGlyph(+j)||(v.glyphs[+j]=O[+j]);return v.ranges[S]=!0,{stack:s,id:f,glyph:O[f]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,f,v){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(v))return;let S=s.tinySDF;if(!S){let j="400";/bold/i.test(f)?j="900":/medium/i.test(f)?j="500":/light/i.test(f)&&(j="200"),S=s.tinySDF=new Nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:_,fontWeight:j})}const O=S.draw(String.fromCharCode(v));return{id:v,bitmap:new a.o({width:O.width||60,height:O.height||60},O.data),metrics:{width:O.glyphWidth/2||24,height:O.glyphHeight/2||24,left:O.glyphLeft/2+.5||0,top:O.glyphTop/2-27.5||-8,advance:O.glyphAdvance/2||24,isDoubleResolution:!0}}}}Nt.loadGlyphRange=function(E,s,f,v){return a._(this,void 0,void 0,function*(){const _=256*s,S=_+255,O=v.transformRequest(f.replace("{fontstack}",E).replace("{range}",`${_}-${S}`),"Glyphs"),j=yield a.l(O,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${s}, ${_}-${S}`);const B={};for(const W of a.n(j.data))B[W.id]=W;return B})},Nt.TinySDF=class{constructor({fontSize:E=24,buffer:s=3,radius:f=8,cutoff:v=.25,fontFamily:_="sans-serif",fontWeight:S="normal",fontStyle:O="normal"}={}){this.buffer=s,this.cutoff=v,this.radius=f;const j=this.size=E+4*s,B=this._createCanvas(j),W=this.ctx=B.getContext("2d",{willReadFrequently:!0});W.font=`${O} ${S} ${E}px ${_}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(E){const s=document.createElement("canvas");return s.width=s.height=E,s}draw(E){const{width:s,actualBoundingBoxAscent:f,actualBoundingBoxDescent:v,actualBoundingBoxLeft:_,actualBoundingBoxRight:S}=this.ctx.measureText(E),O=Math.ceil(f),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-_))),B=Math.min(this.size-this.buffer,O+Math.ceil(v)),W=j+2*this.buffer,Q=B+2*this.buffer,J=Math.max(W*Q,0),ae=new Uint8ClampedArray(J),ye={data:ae,width:W,height:Q,glyphWidth:j,glyphHeight:B,glyphTop:O,glyphLeft:0,glyphAdvance:s};if(j===0||B===0)return ye;const{ctx:xe,buffer:Pe,gridInner:Oe,gridOuter:Ne}=this;xe.clearRect(Pe,Pe,j,B),xe.fillText(E,Pe,Pe+O);const $e=xe.getImageData(Pe,Pe,j,B);Ne.fill(gt,0,J),Oe.fill(0,0,J);for(let ke=0;ke<B;ke++)for(let We=0;We<j;We++){const et=$e.data[4*(ke*j+We)+3]/255;if(et===0)continue;const at=(ke+Pe)*W+We+Pe;if(et===1)Ne[at]=0,Oe[at]=gt;else{const Tt=.5-et;Ne[at]=Tt>0?Tt*Tt:0,Oe[at]=Tt<0?Tt*Tt:0}}yt(Ne,0,0,W,Q,W,this.f,this.v,this.z),yt(Oe,Pe,Pe,j,B,W,this.f,this.v,this.z);for(let ke=0;ke<J;ke++){const We=Math.sqrt(Ne[ke])-Math.sqrt(Oe[ke]);ae[ke]=Math.round(255-255*(We/this.radius+this.cutoff))}return ye}};class qe{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,f){return a.x(s.expression.evaluate(f))}interpolate(s,f,v){return{x:a.y.number(s.x,f.x,v),y:a.y.number(s.y,f.y,v),z:a.y.number(s.z,f.z,v)}}}let _t;class Ke extends a.E{constructor(s){super(),_t=_t||new a.q({anchor:new a.D(a.v.light.anchor),position:new qe,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(_t),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,f={}){if(!this._validate(a.r,s,f))for(const v in s){const _=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,v){return(!v||v.validate!==!1)&&a.t(this,s.call(a.u,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const we=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class He extends a.E{constructor(s){super(),this._transitionable=new a.T(we),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(s,f={}){if(!this._validate(a.B,s,f)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in s){const _=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,v={}){return(v==null?void 0:v.validate)!==!1&&a.t(this,s.call(a.u,a.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Be{constructor(s,f){this.width=s,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,f){const v=s.join(",")+String(f);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,f)),this.dashEntry[v]}getDashRanges(s,f,v){const _=[];let S=s.length%2==1?-s[s.length-1]*v:0,O=s[0]*v,j=!0;_.push({left:S,right:O,isDash:j,zeroLength:s[0]===0});let B=s[0];for(let W=1;W<s.length;W++){j=!j;const Q=s[W];S=B*v,B+=Q,O=B*v,_.push({left:S,right:O,isDash:j,zeroLength:Q===0})}return _}addRoundDash(s,f,v){const _=f/2;for(let S=-v;S<=v;S++){const O=this.width*(this.nextRow+v+S);let j=0,B=s[j];for(let W=0;W<this.width;W++){W/B.right>1&&(B=s[++j]);const Q=Math.abs(W-B.left),J=Math.abs(W-B.right),ae=Math.min(Q,J);let ye;const xe=S/v*(_+1);if(B.isDash){const Pe=_-Math.abs(xe);ye=Math.sqrt(ae*ae+Pe*Pe)}else ye=_-Math.sqrt(ae*ae+xe*xe);this.data[O+W]=Math.max(0,Math.min(255,ye+128))}}}addRegularDash(s){for(let j=s.length-1;j>=0;--j){const B=s[j],W=s[j+1];B.zeroLength?s.splice(j,1):W&&W.isDash===B.isDash&&(W.left=B.left,s.splice(j,1))}const f=s[0],v=s[s.length-1];f.isDash===v.isDash&&(f.left=v.left-this.width,v.right=f.right+this.width);const _=this.width*this.nextRow;let S=0,O=s[S];for(let j=0;j<this.width;j++){j/O.right>1&&(O=s[++S]);const B=Math.abs(j-O.left),W=Math.abs(j-O.right),Q=Math.min(B,W);this.data[_+j]=Math.max(0,Math.min(255,(O.isDash?Q:-Q)+128))}}addDash(s,f){const v=f?7:0,_=2*v+1;if(this.nextRow+_>this.height)return a.w("LineAtlas out of space"),null;let S=0;for(let j=0;j<s.length;j++)S+=s[j];if(S!==0){const j=this.width/S,B=this.getDashRanges(s,this.width,j);f?this.addRoundDash(B,j,v):this.addRegularDash(B)}const O={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:S};return this.nextRow+=_,this.dirty=!0,O}bind(s){const f=s.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const ct="maplibre_preloaded_worker_pool";class xt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<xt.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ct]}numActive(){return Object.keys(this.active).length}}const bt=Math.floor(C.hardwareConcurrency/2);let It,qt;function fn(){return It||(It=new xt),It}xt.workerCount=a.C(globalThis)?Math.max(Math.min(bt,3),1):1;class wn{constructor(s,f){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f;const v=this.workerPool.acquire(f);for(let _=0;_<v.length;_++){const S=new a.F(v[_],f);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,f){const v=[];for(const _ of this.actors)v.push(_.sendAsync({type:s,data:f}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,f){for(const v of this.actors)v.registerMessageHandler(s,f)}}function an(){return qt||(qt=new wn(fn(),a.G),qt.registerMessageHandler("GR",(E,s,f)=>a.m(s,f))),qt}function Vt(E,s){const f=a.H();return a.J(f,f,[1,1,0]),a.K(f,f,[.5*E.width,.5*E.height,1]),a.L(f,f,E.calculatePosMatrix(s.toUnwrapped()))}function Cn(E,s,f,v,_,S){const O=function(J,ae,ye){if(J)for(const xe of J){const Pe=ae[xe];if(Pe&&Pe.source===ye&&Pe.type==="fill-extrusion")return!0}else for(const xe in ae){const Pe=ae[xe];if(Pe.source===ye&&Pe.type==="fill-extrusion")return!0}return!1}(_&&_.layers,s,E.id),j=S.maxPitchScaleFactor(),B=E.tilesIn(v,j,O);B.sort(Tn);const W=[];for(const J of B)W.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(s,f,E._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,_,S,j,Vt(E.transform,J.tileID))});const Q=function(J){const ae={},ye={};for(const xe of J){const Pe=xe.queryResults,Oe=xe.wrappedTileID,Ne=ye[Oe]=ye[Oe]||{};for(const $e in Pe){const ke=Pe[$e],We=Ne[$e]=Ne[$e]||{},et=ae[$e]=ae[$e]||[];for(const at of ke)We[at.featureIndex]||(We[at.featureIndex]=!0,et.push(at))}}return ae}(W);for(const J in Q)Q[J].forEach(ae=>{const ye=ae.feature,xe=E.getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=xe});return Q}function Tn(E,s){const f=E.tileID,v=s.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}function Fn(E,s,f){return a._(this,void 0,void 0,function*(){let v=E;if(E.url?v=(yield a.h(s.transformRequest(E.url,"Source"),f)).data:yield C.frameAsync(f),!v)return null;const _=a.M(a.e(v,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(_.vectorLayerIds=v.vector_layers.map(S=>S.id)),_})}class Qe{constructor(s,f){s&&(f?this.setSouthWest(s).setNorthEast(f):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.N?new a.N(s.lng,s.lat):a.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.N?new a.N(s.lng,s.lat):a.N.convert(s),this}extend(s){const f=this._sw,v=this._ne;let _,S;if(s instanceof a.N)_=s,S=s;else{if(!(s instanceof Qe))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Qe.convert(s)):this.extend(a.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.N.convert(s)):this;if(_=s._sw,S=s._ne,!_||!S)return this}return f||v?(f.lng=Math.min(_.lng,f.lng),f.lat=Math.min(_.lat,f.lat),v.lng=Math.max(S.lng,v.lng),v.lat=Math.max(S.lat,v.lat)):(this._sw=new a.N(_.lng,_.lat),this._ne=new a.N(S.lng,S.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:f,lat:v}=a.N.convert(s);let _=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&_}static convert(s){return s instanceof Qe?s:s&&new Qe(s)}static fromLngLat(s,f=0){const v=360*f/40075017,_=v/Math.cos(Math.PI/180*s.lat);return new Qe(new a.N(s.lng-_,s.lat-v),new a.N(s.lng+_,s.lat+v))}adjustAntiMeridian(){const s=new a.N(this._sw.lng,this._sw.lat),f=new a.N(this._ne.lng,this._ne.lat);return new Qe(s,s.lng>f.lng?new a.N(f.lng+360,f.lat):f)}}class zn{constructor(s,f,v){this.bounds=Qe.convert(this.validateBounds(s)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const f=Math.pow(2,s.z),v=Math.floor(a.O(this.bounds.getWest())*f),_=Math.floor(a.Q(this.bounds.getNorth())*f),S=Math.ceil(a.O(this.bounds.getEast())*f),O=Math.ceil(a.Q(this.bounds.getSouth())*f);return s.x>=v&&s.x<S&&s.y>=_&&s.y<O}}class Le extends a.E{constructor(s,f,v,_){if(super(),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(f,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield Fn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new zn(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(f,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((S,O)=>{s.reloadPromise={resolve:S,reject:O}})}else s.actor=this.dispatcher.getActor(),_="LT";s.abortController=new AbortController;try{const S=yield s.actor.sendAsync({type:_,data:v},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,S)}catch(S){if(delete s.abortController,s.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,f){if(f&&f.resourceTiming&&(s.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&s.setExpiryData(f),s.loadVectorData(f,this.map.painter),s.reloadPromise){const v=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(v.resolve).catch(v.reject)}}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class De extends a.E{constructor(s,f,v,_){super(),this.id=s,this.dispatcher=v,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},f),a.e(this,a.M(f,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield Fn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(a.e(this,s),s.bounds&&(this.tileBounds=new zn(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const v=yield q.getImage(this.map._requestManager.transformRequest(f,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&s.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const _=this.map.painter.context,S=_.gl,O=v.data;s.texture=this.map.painter.getTileTexture(O.width),s.texture?s.texture.update(O,{useMipmap:!0}):(s.texture=new Je(_,O,S.RGBA,{useMipmap:!0}),s.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(v){if(delete s.abortController,s.aborted)s.state="unloaded";else if(v)throw s.state="errored",v}})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Ye extends De{constructor(s,f,v,_){super(s,f,v,_),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(s){return a._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(f,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const _=yield q.getImage(v,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(_&&_.data){const S=_.data;this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&s.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const O=a.b(S)&&a.U()?S:yield this.readImageNow(S),j={type:this.type,uid:s.uid,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const B=yield s.actor.sendAsync({type:"LDT",data:j});s.dem=B,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(_){if(delete s.abortController,s.aborted)s.state="unloaded";else if(_)throw s.state="errored",_}})}readImageNow(s){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.V()){const f=s.width+2,v=s.height+2;try{return new a.R({width:f,height:v},yield a.W(s,-1,-1,f,v))}catch{}}return C.getImageData(s,1)})}_getNeighboringTiles(s){const f=s.canonical,v=Math.pow(2,f.z),_=(f.x-1+v)%v,S=f.x===0?s.wrap-1:s.wrap,O=(f.x+1+v)%v,j=f.x+1===v?s.wrap+1:s.wrap,B={};return B[new a.S(s.overscaledZ,S,f.z,_,f.y).key]={backfilled:!1},B[new a.S(s.overscaledZ,j,f.z,O,f.y).key]={backfilled:!1},f.y>0&&(B[new a.S(s.overscaledZ,S,f.z,_,f.y-1).key]={backfilled:!1},B[new a.S(s.overscaledZ,s.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},B[new a.S(s.overscaledZ,j,f.z,O,f.y-1).key]={backfilled:!1}),f.y+1<v&&(B[new a.S(s.overscaledZ,S,f.z,_,f.y+1).key]={backfilled:!1},B[new a.S(s.overscaledZ,s.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},B[new a.S(s.overscaledZ,j,f.z,O,f.y+1).key]={backfilled:!1}),B}unloadTile(s){return a._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class mt extends a.E{constructor(s,f,v,_){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(_),this._data=f.data,this._options=a.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const S=a.X/this.tileSize;f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*S,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*S,extent:a.X,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:a.X,radius:(f.clusterRadius||50)*S,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return a._(this,void 0,void 0,function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,f,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:f,offset:v}})}_updateWorkerData(s){return a._(this,void 0,void 0,function*(){const f=a.e({type:this.type},this.workerOptions);s?f.dataDiff=s:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:f});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let _=null;v.resourceTiming&&v.resourceTiming[this.id]&&(_=v.resourceTiming[this.id].slice(0));const S={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&a.e(S,{resourceTiming:_}),this.fire(new a.k("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},S),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(s){return a._(this,void 0,void 0,function*(){const f=s.actor?"RT":"LT";s.actor=this.actor;const v={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;const _=yield this.actor.sendAsync({type:f,data:v},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(_,this.map.painter,f==="RT")})}abortTile(s){return a._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return a._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ft=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class wt extends a.E{constructor(s,f,v,_){super(),this.id=s,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=f}load(s){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,s&&(this.coordinates=s),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new a.j(f))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const f=s.map(a.Z.fromLngLat);this.tileID=function(_){let S=1/0,O=1/0,j=-1/0,B=-1/0;for(const ae of _)S=Math.min(S,ae.x),O=Math.min(O,ae.y),j=Math.max(j,ae.x),B=Math.max(B,ae.y);const W=Math.max(j-S,B-O),Q=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),J=Math.pow(2,Q);return new a.a1(Q,Math.floor((S+j)/2*J),Math.floor((O+B)/2*J))}(f),this.minzoom=this.maxzoom=this.tileID.z;const v=f.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,a.X,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,a.X),this._boundsArray.emplaceBack(v[2].x,v[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,f=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Je(s,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Bt extends wt{constructor(s,f,v,_){super(s,f,v,_),this.roundZoom=!0,this.type="video",this.options=f}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const f of s.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield a.a3(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new a.j(f))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const f=this.video.seekable;s<f.start(0)||s>f.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,f=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new Je(s,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends wt{constructor(s,f,v,_){super(s,f,v,_),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(O=>typeof O!="number"))||this.fire(new a.j(new a.a2(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${s}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${s}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,v=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Je(f,this.canvas,v.RGBA,{premultiply:!0});let _=!1;for(const S in this.tiles){const O=this.tiles[S];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,_=!0)}_&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const nn={},ln=E=>{switch(E){case"geojson":return mt;case"image":return wt;case"raster":return De;case"raster-dem":return Ye;case"vector":return Le;case"video":return Bt;case"canvas":return pn}return nn[E]},it="RTLPluginLoaded";class Mn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=an()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(f=>{throw this.status="error",f})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,function*(f,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(it))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ar=null;function fr(){return ar||(ar=new Mn),ar}class Xn{constructor(s,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a4(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const f=s+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,f,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(_,S){const O={};if(!S)return O;for(const j of _){const B=j.layerIds.map(W=>S.getLayer(W)).filter(Boolean);if(B.length!==0){j.layers=B,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(W=>B.filter(Q=>Q.id===W)[0]));for(const W of B)O[W.id]=j}}return O}(s.buckets,f.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof a.a6){if(this.hasSymbolBuckets=!0,!v)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof a.a6&&S.hasRTLText){this.hasRTLText=!0,fr().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const S=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(_).queryRadius(S))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const v in this.buckets){const _=this.buckets[v];_.uploadPending()&&_.upload(s)}const f=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Je(s,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Je(s,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,f,v,_,S,O,j,B,W,Q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:S,scale:O,tileSize:this.tileSize,pixelPosMatrix:Q,transform:B,params:j,queryPadding:this.queryPadding*W},s,f,v):{}}querySourceFeatures(s,f){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const _=v.loadVTLayers(),S=f&&f.sourceLayer?f.sourceLayer:"",O=_._geojsonTileLayer||_[S];if(!O)return;const j=a.a7(f&&f.filter),{z:B,x:W,y:Q}=this.tileID.canonical,J={z:B,x:W,y:Q};for(let ae=0;ae<O.length;ae++){const ye=O.feature(ae);if(j.needGeometry){const Oe=a.a8(ye,!0);if(!j.filter(new a.z(this.tileID.overscaledZ),Oe,this.tileID.canonical))continue}else if(!j.filter(new a.z(this.tileID.overscaledZ),ye))continue;const xe=v.getId(ye,S),Pe=new a.a9(ye,B,W,Q,xe);Pe.tile=J,s.push(Pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const f=this.expirationTime;if(s.cacheControl){const v=a.aa(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const v=Date.now();let _=!1;if(this.expirationTime>v)_=!1;else if(f)if(this.expirationTime<f)_=!0;else{const S=this.expirationTime-f;S?this.expirationTime=v+Math.max(S,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!f.style.hasLayer(_))continue;const S=this.buckets[_],O=S.layers[0].sourceLayer||"_geojsonTileLayer",j=v[O],B=s[O];if(!j||!B||Object.keys(B).length===0)continue;S.update(B,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=f&&f.style&&f.style.getLayer(_);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=C.now()+s}setDependencies(s,f){const v={};for(const _ of f)v[_]=!0;this.dependencies[s]=v}hasDependency(s,f){for(const v of s){const _=this.dependencies[v];if(_){for(const S of f)if(_[S])return!0}}return!1}}class ut{constructor(s,f){this.max=s,this.onRemove=f,this.reset()}reset(){for(const s in this.data)for(const f of this.data[s])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(s,f,v){const _=s.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const S={value:f,timeout:void 0};if(v!==void 0&&(S.timeout=setTimeout(()=>{this.remove(s,S)},v)),this.data[_].push(S),this.order.push(_),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const f=this.data[s].shift();return f.timeout&&clearTimeout(f.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),f.value}getByKey(s){const f=this.data[s];return f?f[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,f){if(!this.has(s))return this;const v=s.wrapped().key,_=f===void 0?0:this.data[v].indexOf(f),S=this.data[v][_];return this.data[v].splice(_,1),S.timeout&&clearTimeout(S.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(S.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(s){const f=[];for(const v in this.data)for(const _ of this.data[v])s(_.value)||f.push(_);for(const v of f)this.remove(v.value.tileID,v)}}class vn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,f,v){const _=String(f);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][_]=this.stateChanges[s][_]||{},a.e(this.stateChanges[s][_],v),this.deletedStates[s]===null){this.deletedStates[s]={};for(const S in this.state[s])S!==_&&(this.deletedStates[s][S]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][_]===null){this.deletedStates[s][_]={};for(const S in this.state[s][_])v[S]||(this.deletedStates[s][_][S]=null)}else for(const S in v)this.deletedStates[s]&&this.deletedStates[s][_]&&this.deletedStates[s][_][S]===null&&delete this.deletedStates[s][_][S]}removeFeatureState(s,f,v){if(this.deletedStates[s]===null)return;const _=String(f);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&f!==void 0)this.deletedStates[s][_]!==null&&(this.deletedStates[s][_]=this.deletedStates[s][_]||{},this.deletedStates[s][_][v]=null);else if(f!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][_])for(v in this.deletedStates[s][_]={},this.stateChanges[s][_])this.deletedStates[s][_][v]=null;else this.deletedStates[s][_]=null;else this.deletedStates[s]=null}getState(s,f){const v=String(f),_=a.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const S=this.deletedStates[s][f];if(S===null)return{};for(const O in S)delete _[O]}return _}initializeTileState(s,f){s.setFeatureState(this.state,f)}coalesceChanges(s,f){const v={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const S={};for(const O in this.stateChanges[_])this.state[_][O]||(this.state[_][O]={}),a.e(this.state[_][O],this.stateChanges[_][O]),S[O]=this.state[_][O];v[_]=S}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const S={};if(this.deletedStates[_]===null)for(const O in this.state[_])S[O]={},this.state[_][O]={};else for(const O in this.deletedStates[_]){if(this.deletedStates[_][O]===null)this.state[_][O]={};else for(const j of Object.keys(this.deletedStates[_][O]))delete this.state[_][O][j];S[O]=this.state[_][O]}v[_]=v[_]||{},a.e(v[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const _ in s)s[_].setFeatureState(v,f)}}class Sn extends a.E{constructor(s,f,v){super(),this.id=s,this.dispatcher=v,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,S,O,j)=>{const B=new(ln(S.type))(_,S,O,j);if(B.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${B.id}`);return B})(s,f,v,this),this._tiles={},this._cache=new ut(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new vn,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const f=this._tiles[s];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,f,v){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,f,v)}catch(_){s.state="errored",_.status!==404?this._source.fire(new a.j(_,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const v=this._tiles[f];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Gr).map(s=>s.key)}getRenderableIds(s){const f=[];for(const v in this._tiles)this._isIdRenderable(v,s)&&f.push(this._tiles[v]);return s?f.sort((v,_)=>{const S=v.tileID,O=_.tileID,j=new a.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),B=new a.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-O.overscaledZ||B.y-j.y||B.x-j.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(Gr).map(v=>v.key)}hasRenderableParent(s){const f=this.findLoadedParent(s,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(s,f){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(f||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,f){return a._(this,void 0,void 0,function*(){const v=this._tiles[s];v&&(v.state!=="loading"&&(v.state=f),yield this._loadTile(v,s,f))})}_tileLoaded(s,f,v){s.timeAdded=C.now(),v==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(f,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const f=this.getRenderableIds();for(let _=0;_<f.length;_++){const S=f[_];if(s.neighboringTiles&&s.neighboringTiles[S]){const O=this.getTileByID(S);v(s,O),v(O,s)}}function v(_,S){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let O=S.tileID.canonical.x-_.tileID.canonical.x;const j=S.tileID.canonical.y-_.tileID.canonical.y,B=Math.pow(2,_.tileID.canonical.z),W=S.tileID.key;O===0&&j===0||Math.abs(j)>1||(Math.abs(O)>1&&(Math.abs(O+B)===1?O+=B:Math.abs(O-B)===1&&(O-=B)),S.dem&&_.dem&&(_.dem.backfillBorder(S.dem,O,j),_.neighboringTiles&&_.neighboringTiles[W]&&(_.neighboringTiles[W].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,f,v,_){for(const S in this._tiles){let O=this._tiles[S];if(_[S]||!O.hasData()||O.tileID.overscaledZ<=f||O.tileID.overscaledZ>v)continue;let j=O.tileID;for(;O&&O.tileID.overscaledZ>f+1;){const W=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[W.key],O&&O.hasData()&&(j=W)}let B=j;for(;B.overscaledZ>f;)if(B=B.scaledTo(B.overscaledZ-1),s[B.key]){_[j.key]=j;break}}}findLoadedParent(s,f){if(s.key in this._loadedParentTiles){const v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=f?v:null}for(let v=s.overscaledZ-1;v>=f;v--){const _=s.scaledTo(v),S=this._getLoadedTile(_);if(S)return S}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const f=this._tiles[s.key];return f&&f.hasData()?f:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const f=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,_=Math.floor(f*v*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(S)}handleWrapJump(s){const f=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,f){const v={};for(const _ in this._tiles){const S=this._tiles[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+f),v[S.tileID.key]=S}this._tiles=v;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(s,f,v,_,S,O){const j={},B={},W=Object.keys(s),Q=C.now();for(const J of W){const ae=s[J],ye=this._tiles[J];if(!ye||ye.fadeEndTime!==0&&ye.fadeEndTime<=Q)continue;const xe=this.findLoadedParent(ae,f),Pe=this.findLoadedSibling(ae),Oe=xe||Pe||null;Oe&&(this._addTile(Oe.tileID),j[Oe.tileID.key]=Oe.tileID),B[J]=ae}this._retainLoadedChildren(B,_,v,s);for(const J in j)s[J]||(this._coveredTiles[J]=!0,s[J]=j[J]);if(O){const J={},ae={};for(const ye of S)this._tiles[ye.key].hasData()?J[ye.key]=ye:ae[ye.key]=ye;for(const ye in ae){const xe=ae[ye].children(this._source.maxzoom);this._tiles[xe[0].key]&&this._tiles[xe[1].key]&&this._tiles[xe[2].key]&&this._tiles[xe[3].key]&&(J[xe[0].key]=s[xe[0].key]=xe[0],J[xe[1].key]=s[xe[1].key]=xe[1],J[xe[2].key]=s[xe[2].key]=xe[2],J[xe[3].key]=s[xe[3].key]=xe[3],delete ae[ye])}for(const ye in ae){const xe=ae[ye],Pe=this.findLoadedParent(xe,this._source.minzoom),Oe=this.findLoadedSibling(xe),Ne=Pe||Oe||null;if(Ne){J[Ne.tileID.key]=s[Ne.tileID.key]=Ne.tileID;for(const $e in J)J[$e].isChildOf(Ne.tileID)&&delete J[$e]}}for(const ye in this._tiles)J[ye]||(this._coveredTiles[ye]=!0)}}update(s,f){if(!this._sourceLoaded||this._paused)return;let v;this.transform=s,this.terrain=f,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new a.S(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(v=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(v=v.filter(Q=>this._source.hasTile(Q)))):v=[];const _=s.coveringZoomLevel(this._source),S=Math.max(_-Sn.maxOverzooming,this._source.minzoom),O=Math.max(_+Sn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const J of v)if(J.canonical.z>this._source.minzoom){const ae=J.scaledTo(J.canonical.z-1);Q[ae.key]=ae;const ye=J.scaledTo(Math.max(this._source.minzoom,Math.min(J.canonical.z,5)));Q[ye.key]=ye}v=v.concat(Object.values(Q))}const j=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(v,_);gi(this._source.type)&&this._updateCoveredAndRetainedTiles(B,S,O,_,v,f);for(const Q in B)this._tiles[Q].clearFadeHold();const W=a.ab(this._tiles,B);for(const Q of W){const J=this._tiles[Q];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,f){var v;const _={},S={},O=Math.max(f-Sn.maxOverzooming,this._source.minzoom),j=Math.max(f+Sn.maxUnderzooming,this._source.minzoom),B={};for(const W of s){const Q=this._addTile(W);_[W.key]=W,Q.hasData()||f<this._source.maxzoom&&(B[W.key]=W)}this._retainLoadedChildren(B,f,j,_);for(const W of s){let Q=this._tiles[W.key];if(Q.hasData())continue;if(f+1>this._source.maxzoom){const ae=W.children(this._source.maxzoom)[0],ye=this.getTile(ae);if(ye&&ye.hasData()){_[ae.key]=ae;continue}}else{const ae=W.children(this._source.maxzoom);if(_[ae[0].key]&&_[ae[1].key]&&_[ae[2].key]&&_[ae[3].key])continue}let J=Q.wasRequested();for(let ae=W.overscaledZ-1;ae>=O;--ae){const ye=W.scaledTo(ae);if(S[ye.key])break;if(S[ye.key]=!0,Q=this.getTile(ye),!Q&&J&&(Q=this._addTile(ye)),Q){const xe=Q.hasData();if((xe||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||J)&&(_[ye.key]=ye),J=Q.wasRequested(),xe)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const f=[];let v,_=this._tiles[s].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){v=this._loadedParentTiles[_.key];break}f.push(_.key);const S=_.scaledTo(_.overscaledZ-1);if(v=this._getLoadedTile(S),v)break;_=S}for(const S of f)this._loadedParentTiles[S]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const f=this._tiles[s].tileID,v=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=v}}_addTile(s){let f=this._tiles[s.key];if(f)return f;f=this._cache.getAndRemove(s),f&&(this._setTileReloadTimer(s.key,f),f.tileID=s,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,f)));const v=f;return f||(f=new Xn(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(f,s.key,f.state)),f.uses++,this._tiles[s.key]=f,v||this._source.fire(new a.k("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(s,f){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const v=f.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}_removeTile(s){const f=this._tiles[s];f&&(f.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(s){const f=s.sourceDataType;s.dataType==="source"&&f==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&f==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,f,v){const _=[],S=this.transform;if(!S)return _;const O=v?S.getCameraQueryGeometry(s):s,j=s.map(xe=>S.pointCoordinate(xe,this.terrain)),B=O.map(xe=>S.pointCoordinate(xe,this.terrain)),W=this.getIds();let Q=1/0,J=1/0,ae=-1/0,ye=-1/0;for(const xe of B)Q=Math.min(Q,xe.x),J=Math.min(J,xe.y),ae=Math.max(ae,xe.x),ye=Math.max(ye,xe.y);for(let xe=0;xe<W.length;xe++){const Pe=this._tiles[W[xe]];if(Pe.holdingForFade())continue;const Oe=Pe.tileID,Ne=Math.pow(2,S.zoom-Pe.tileID.overscaledZ),$e=f*Pe.queryPadding*a.X/Pe.tileSize/Ne,ke=[Oe.getTilePoint(new a.Z(Q,J)),Oe.getTilePoint(new a.Z(ae,ye))];if(ke[0].x-$e<a.X&&ke[0].y-$e<a.X&&ke[1].x+$e>=0&&ke[1].y+$e>=0){const We=j.map(at=>Oe.getTilePoint(at)),et=B.map(at=>Oe.getTilePoint(at));_.push({tile:Pe,tileID:Oe,queryGeometry:We,cameraQueryGeometry:et,scale:Ne})}}return _}getVisibleCoordinates(s){const f=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);for(const v of f)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(gi(this._source.type)){const s=C.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=s)return!0}return!1}setFeatureState(s,f,v){this._state.updateState(s=s||"_geojsonTileLayer",f,v)}removeFeatureState(s,f,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",f,v)}getFeatureState(s,f){return this._state.getState(s=s||"_geojsonTileLayer",f)}setDependencies(s,f,v){const _=this._tiles[s];_&&_.setDependencies(f,v)}reloadTilesForDependencies(s,f){for(const v in this._tiles)this._tiles[v].hasDependency(s,f)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,f))}}function Gr(E,s){const f=Math.abs(2*E.wrap)-+(E.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return E.overscaledZ-s.overscaledZ||v-f||s.canonical.y-E.canonical.y||s.canonical.x-E.canonical.x}function gi(E){return E==="raster"||E==="image"||E==="video"}Sn.maxOverzooming=10,Sn.maxUnderzooming=3;class Wn{constructor(s,f){this.reset(s,f)}reset(s,f){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ac(s,0,1);let f=1,v=this._distances[f];const _=s*this.paddedLength+this.padding;for(;v<_&&f<this._distances.length;)v=this._distances[++f];const S=f-1,O=this._distances[S],j=v-O,B=j>0?(_-O)/j:0;return this.points[S].mult(1-B).add(this.points[f].mult(B))}}function Ei(E,s){let f=!0;return E==="always"||E!=="never"&&s!=="never"||(f=!1),f}class ls{constructor(s,f,v){const _=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(f/v);for(let O=0;O<this.xCellCount*this.yCellCount;O++)_.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=f,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,f,v,_,S){this._forEachCell(f,v,_,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(S)}insertCircle(s,f,v,_){this._forEachCell(f-_,v-_,f+_,v+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(f),this.circles.push(v),this.circles.push(_)}_insertBoxCell(s,f,v,_,S,O){this.boxCells[S].push(O)}_insertCircleCell(s,f,v,_,S,O){this.circleCells[S].push(O)}_query(s,f,v,_,S,O,j){if(v<0||s>this.width||_<0||f>this.height)return[];const B=[];if(s<=0&&f<=0&&this.width<=v&&this.height<=_){if(S)return[{key:null,x1:s,y1:f,x2:v,y2:_}];for(let W=0;W<this.boxKeys.length;W++)B.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const Q=this.circles[3*W],J=this.circles[3*W+1],ae=this.circles[3*W+2];B.push({key:this.circleKeys[W],x1:Q-ae,y1:J-ae,x2:Q+ae,y2:J+ae})}}else this._forEachCell(s,f,v,_,this._queryCell,B,{hitTest:S,overlapMode:O,seenUids:{box:{},circle:{}}},j);return B}query(s,f,v,_){return this._query(s,f,v,_,!1,null)}hitTest(s,f,v,_,S,O){return this._query(s,f,v,_,!0,S,O).length>0}hitTestCircle(s,f,v,_,S){const O=s-v,j=s+v,B=f-v,W=f+v;if(j<0||O>this.width||W<0||B>this.height)return!1;const Q=[];return this._forEachCell(O,B,j,W,this._queryCellCircle,Q,{hitTest:!0,overlapMode:_,circle:{x:s,y:f,radius:v},seenUids:{box:{},circle:{}}},S),Q.length>0}_queryCell(s,f,v,_,S,O,j,B){const{seenUids:W,hitTest:Q,overlapMode:J}=j,ae=this.boxCells[S];if(ae!==null){const xe=this.bboxes;for(const Pe of ae)if(!W.box[Pe]){W.box[Pe]=!0;const Oe=4*Pe,Ne=this.boxKeys[Pe];if(s<=xe[Oe+2]&&f<=xe[Oe+3]&&v>=xe[Oe+0]&&_>=xe[Oe+1]&&(!B||B(Ne))&&(!Q||!Ei(J,Ne.overlapMode))&&(O.push({key:Ne,x1:xe[Oe],y1:xe[Oe+1],x2:xe[Oe+2],y2:xe[Oe+3]}),Q))return!0}}const ye=this.circleCells[S];if(ye!==null){const xe=this.circles;for(const Pe of ye)if(!W.circle[Pe]){W.circle[Pe]=!0;const Oe=3*Pe,Ne=this.circleKeys[Pe];if(this._circleAndRectCollide(xe[Oe],xe[Oe+1],xe[Oe+2],s,f,v,_)&&(!B||B(Ne))&&(!Q||!Ei(J,Ne.overlapMode))){const $e=xe[Oe],ke=xe[Oe+1],We=xe[Oe+2];if(O.push({key:Ne,x1:$e-We,y1:ke-We,x2:$e+We,y2:ke+We}),Q)return!0}}}return!1}_queryCellCircle(s,f,v,_,S,O,j,B){const{circle:W,seenUids:Q,overlapMode:J}=j,ae=this.boxCells[S];if(ae!==null){const xe=this.bboxes;for(const Pe of ae)if(!Q.box[Pe]){Q.box[Pe]=!0;const Oe=4*Pe,Ne=this.boxKeys[Pe];if(this._circleAndRectCollide(W.x,W.y,W.radius,xe[Oe+0],xe[Oe+1],xe[Oe+2],xe[Oe+3])&&(!B||B(Ne))&&!Ei(J,Ne.overlapMode))return O.push(!0),!0}}const ye=this.circleCells[S];if(ye!==null){const xe=this.circles;for(const Pe of ye)if(!Q.circle[Pe]){Q.circle[Pe]=!0;const Oe=3*Pe,Ne=this.circleKeys[Pe];if(this._circlesCollide(xe[Oe],xe[Oe+1],xe[Oe+2],W.x,W.y,W.radius)&&(!B||B(Ne))&&!Ei(J,Ne.overlapMode))return O.push(!0),!0}}}_forEachCell(s,f,v,_,S,O,j,B){const W=this._convertToXCellCoord(s),Q=this._convertToYCellCoord(f),J=this._convertToXCellCoord(v),ae=this._convertToYCellCoord(_);for(let ye=W;ye<=J;ye++)for(let xe=Q;xe<=ae;xe++)if(S.call(this,s,f,v,_,this.xCellCount*xe+ye,O,j,B))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,f,v,_,S,O){const j=_-s,B=S-f,W=v+O;return W*W>j*j+B*B}_circleAndRectCollide(s,f,v,_,S,O,j){const B=(O-_)/2,W=Math.abs(s-(_+B));if(W>B+v)return!1;const Q=(j-S)/2,J=Math.abs(f-(S+Q));if(J>Q+v)return!1;if(W<=B||J<=Q)return!0;const ae=W-B,ye=J-Q;return ae*ae+ye*ye<=v*v}}function es(E,s,f,v,_){const S=a.H();return s?(a.K(S,S,[1/_,1/_,1]),f||a.ad(S,S,v.angle)):a.L(S,v.labelPlaneMatrix,E),S}function ts(E,s,f,v,_){if(s){const S=a.ae(E);return a.K(S,S,[_,_,1]),f||a.ad(S,S,-v.angle),S}return v.glCoordMatrix}function Ae(E,s,f,v){let _;v?(_=[E,s,v(E,s),1],a.af(_,_,f)):(_=[E,s,0,1],jt(_,_,f));const S=_[3];return{point:new a.P(_[0]/S,_[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function se(E,s){return .5+E/s*.5}function ie(E,s){return E.x>=-s[0]&&E.x<=s[0]&&E.y>=-s[1]&&E.y<=s[1]}function pe(E,s,f,v,_,S,O,j,B,W,Q,J,ae,ye,xe){const Pe=v?E.textSizeData:E.iconSizeData,Oe=a.ag(Pe,f.transform.zoom),Ne=[256/f.width*2+1,256/f.height*2+1],$e=v?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;$e.clear();const ke=E.lineVertexArray,We=v?E.text.placedSymbolArray:E.icon.placedSymbolArray,et=f.transform.width/f.transform.height;let at=!1;for(let Tt=0;Tt<We.length;Tt++){const Ft=We.get(Tt);if(Ft.hidden||Ft.writingMode===a.ah.vertical&&!at){At(Ft.numGlyphs,$e);continue}at=!1;const Yt=Ae(Ft.anchorX,Ft.anchorY,s,xe);if(!ie(Yt.point,Ne)){At(Ft.numGlyphs,$e);continue}const un=se(f.transform.cameraToCenterDistance,Yt.signedDistanceFromCamera),Gt=a.ai(Pe,Oe,Ft),Zt=O?Gt/un:Gt*un,Pn={getElevation:xe,labelPlaneMatrix:_,lineVertexArray:ke,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:W,tileAnchorPoint:new a.P(Ft.anchorX,Ft.anchorY),unwrappedTileID:Q,width:J,height:ae,translation:ye},tr=Ge(Pn,Ft,Zt,!1,j,s,S,E.glyphOffsetArray,$e,et,B);at=tr.useVertical,(tr.notEnoughRoom||at||tr.needsFlipping&&Ge(Pn,Ft,Zt,!0,j,s,S,E.glyphOffsetArray,$e,et,B).notEnoughRoom)&&At(Ft.numGlyphs,$e)}v?E.text.dynamicLayoutVertexBuffer.updateData($e):E.icon.dynamicLayoutVertexBuffer.updateData($e)}function Se(E,s,f,v,_,S,O,j){const B=S.glyphStartIndex+S.numGlyphs,W=S.lineStartIndex,Q=S.lineStartIndex+S.lineLength,J=s.getoffsetX(S.glyphStartIndex),ae=s.getoffsetX(B-1),ye=Ve(E*J,f,v,_,S.segment,W,Q,j,O);if(!ye)return null;const xe=Ve(E*ae,f,v,_,S.segment,W,Q,j,O);return xe?j.projectionCache.anyProjectionOccluded?null:{first:ye,last:xe}:null}function Ue(E,s,f,v){return E===a.ah.horizontal&&Math.abs(f.y-s.y)>Math.abs(f.x-s.x)*v?{useVertical:!0}:(E===a.ah.vertical?s.y<f.y:s.x>f.x)?{needsFlipping:!0}:null}function Ge(E,s,f,v,_,S,O,j,B,W,Q){const J=f/24,ae=s.lineOffsetX*J,ye=s.lineOffsetY*J;let xe;if(s.numGlyphs>1){const Pe=s.glyphStartIndex+s.numGlyphs,Oe=s.lineStartIndex,Ne=s.lineStartIndex+s.lineLength,$e=Se(J,j,ae,ye,v,s,Q,E);if(!$e)return{notEnoughRoom:!0};const ke=Ae($e.first.point.x,$e.first.point.y,O,E.getElevation).point,We=Ae($e.last.point.x,$e.last.point.y,O,E.getElevation).point;if(_&&!v){const et=Ue(s.writingMode,ke,We,W);if(et)return et}xe=[$e.first];for(let et=s.glyphStartIndex+1;et<Pe-1;et++)xe.push(Ve(J*j.getoffsetX(et),ae,ye,v,s.segment,Oe,Ne,E,Q));xe.push($e.last)}else{if(_&&!v){const Oe=Ae(E.tileAnchorPoint.x,E.tileAnchorPoint.y,S,E.getElevation).point,Ne=s.lineStartIndex+s.segment+1,$e=new a.P(E.lineVertexArray.getx(Ne),E.lineVertexArray.gety(Ne)),ke=Ae($e.x,$e.y,S,E.getElevation),We=ke.signedDistanceFromCamera>0?ke.point:function(at,Tt,Ft,Yt,un,Gt){return nt(at,Tt,Ft,1,un,Gt)}(E.tileAnchorPoint,$e,Oe,0,S,E),et=Ue(s.writingMode,Oe,We,W);if(et)return et}const Pe=Ve(J*j.getoffsetX(s.glyphStartIndex),ae,ye,v,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,E,Q);if(!Pe||E.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};xe=[Pe]}for(const Pe of xe)a.aj(B,Pe.point,Pe.angle);return{}}function nt(E,s,f,v,_,S){const O=E.add(E.sub(s)._unit()),j=_!==void 0?Ae(O.x,O.y,_,S.getElevation).point:ve(O.x,O.y,S).point,B=f.sub(j);return f.add(B._mult(v/B.mag()))}function ne(E,s,f){const v=s.projectionCache;if(v.projections[E])return v.projections[E];const _=new a.P(s.lineVertexArray.getx(E),s.lineVertexArray.gety(E)),S=ve(_.x,_.y,s);if(S.signedDistanceFromCamera>0)return v.projections[E]=S.point,v.anyProjectionOccluded=v.anyProjectionOccluded||S.isOccluded,S.point;const O=E-f.direction;return function(j,B,W,Q,J){return nt(j,B,W,Q,void 0,J)}(f.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(O),s.lineVertexArray.gety(O)),_,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,s)}function ve(E,s,f){const v=E+f.translation[0],_=s+f.translation[1];let S;return!f.pitchWithMap&&f.projection.useSpecialProjectionForSymbols?(S=f.projection.projectTileCoordinates(v,_,f.unwrappedTileID,f.getElevation),S.point.x=(.5*S.point.x+.5)*f.width,S.point.y=(.5*-S.point.y+.5)*f.height):(S=Ae(v,_,f.labelPlaneMatrix,f.getElevation),S.isOccluded=!1),S}function Ie(E,s,f){return E._unit()._perp()._mult(s*f)}function Ee(E,s,f,v,_,S,O,j,B){if(j.projectionCache.offsets[E])return j.projectionCache.offsets[E];const W=f.add(s);if(E+B.direction<v||E+B.direction>=_)return j.projectionCache.offsets[E]=W,W;const Q=ne(E+B.direction,j,B),J=Ie(Q.sub(f),O,B.direction),ae=f.add(J),ye=Q.add(J);return j.projectionCache.offsets[E]=a.ak(S,W,ae,ye)||W,j.projectionCache.offsets[E]}function Ve(E,s,f,v,_,S,O,j,B){const W=v?E-s:E+s;let Q=W>0?1:-1,J=0;v&&(Q*=-1,J=Math.PI),Q<0&&(J+=Math.PI);let ae,ye=Q>0?S+_:S+_+1;j.projectionCache.cachedAnchorPoint?ae=j.projectionCache.cachedAnchorPoint:(ae=ve(j.tileAnchorPoint.x,j.tileAnchorPoint.y,j).point,j.projectionCache.cachedAnchorPoint=ae);let xe,Pe,Oe=ae,Ne=ae,$e=0,ke=0;const We=Math.abs(W),et=[];let at;for(;$e+ke<=We;){if(ye+=Q,ye<S||ye>=O)return null;$e+=ke,Ne=Oe,Pe=xe;const Yt={absOffsetX:We,direction:Q,distanceFromAnchor:$e,previousVertex:Ne};if(Oe=ne(ye,j,Yt),f===0)et.push(Ne),at=Oe.sub(Ne);else{let un;const Gt=Oe.sub(Ne);un=Gt.mag()===0?Ie(ne(ye+Q,j,Yt).sub(Oe),f,Q):Ie(Gt,f,Q),Pe||(Pe=Ne.add(un)),xe=Ee(ye,un,Oe,S,O,Pe,f,j,Yt),et.push(Pe),at=xe.sub(Pe)}ke=at.mag()}const Tt=at._mult((We-$e)/ke)._add(Pe||Ne),Ft=J+Math.atan2(Oe.y-Ne.y,Oe.x-Ne.x);return et.push(Tt),{point:Tt,angle:B?Ft:0,path:et}}const Et=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function At(E,s){for(let f=0;f<E;f++){const v=s.length;s.resize(v+4),s.float32.set(Et,3*v)}}function jt(E,s,f){const v=s[0],_=s[1];return E[0]=f[0]*v+f[4]*_+f[12],E[1]=f[1]*v+f[5]*_+f[13],E[3]=f[3]*v+f[7]*_+f[15],E}const kt=100;class Ot{constructor(s,f,v=new ls(s.width+200,s.height+200,25),_=new ls(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=f,this.grid=v,this.ignoredGrid=_,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+kt,this.screenBottomBoundary=s.height+kt,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,f,v,_,S,O,j,B,W,Q,J){const ae=s.anchorPointX+B[0],ye=s.anchorPointY+B[1],xe=this.projectAndGetPerspectiveRatio(_,ae,ye,S,Q),Pe=v*xe.perspectiveRatio;let Oe;if(O||j)Oe=this._projectCollisionBox(s,Pe,_,S,O,j,B,xe,Q,J);else{const et=xe.point.x+(J?J.x*Pe:0),at=xe.point.y+(J?J.y*Pe:0);Oe={allPointsOccluded:!1,box:[et+s.x1*Pe,at+s.y1*Pe,et+s.x2*Pe,at+s.y2*Pe]}}const[Ne,$e,ke,We]=Oe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(O?Oe.allPointsOccluded:this.mapProjection.isOccluded(ae,ye,S))||xe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ne,$e,ke,We)||f!=="always"&&this.grid.hitTest(Ne,$e,ke,We,f,W)?{box:[Ne,$e,ke,We],placeable:!1,offscreen:!1}:{box:[Ne,$e,ke,We],placeable:!0,offscreen:this.isOffscreen(Ne,$e,ke,We)}}placeCollisionCircles(s,f,v,_,S,O,j,B,W,Q,J,ae,ye,xe,Pe,Oe){const Ne=[],$e=new a.P(f.anchorX,f.anchorY),ke=this.getPerspectiveRatio(O,$e.x,$e.y,j,Oe),We=(J?S/ke:S*ke)/a.ap,et={getElevation:Oe,labelPlaneMatrix:B,lineVertexArray:v,pitchWithMap:J,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:$e,unwrappedTileID:j,width:this.transform.width,height:this.transform.height,translation:Pe},at=Se(We,_,f.lineOffsetX*We,f.lineOffsetY*We,!1,f,!1,et);let Tt=!1,Ft=!1,Yt=!0;if(at){const un=.5*ye*ke+xe,Gt=new a.P(-100,-100),Zt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new Wn,tr=at.first,Xt=at.last;let rn=[];for(let hr=tr.path.length-1;hr>=1;hr--)rn.push(tr.path[hr]);for(let hr=1;hr<Xt.path.length;hr++)rn.push(Xt.path[hr]);const Yn=2.5*un;if(W){const hr=this.projectPathToScreenSpace(rn,et,W);rn=hr.some(Cr=>Cr.signedDistanceFromCamera<=0)?[]:hr.map(Cr=>Cr.point)}let ci=[];if(rn.length>0){const hr=rn[0].clone(),Cr=rn[0].clone();for(let ui=1;ui<rn.length;ui++)hr.x=Math.min(hr.x,rn[ui].x),hr.y=Math.min(hr.y,rn[ui].y),Cr.x=Math.max(Cr.x,rn[ui].x),Cr.y=Math.max(Cr.y,rn[ui].y);ci=hr.x>=Gt.x&&Cr.x<=Zt.x&&hr.y>=Gt.y&&Cr.y<=Zt.y?[rn]:Cr.x<Gt.x||hr.x>Zt.x||Cr.y<Gt.y||hr.y>Zt.y?[]:a.al([rn],Gt.x,Gt.y,Zt.x,Zt.y)}for(const hr of ci){Pn.reset(hr,.25*un);let Cr=0;Cr=Pn.length<=.5*un?1:Math.ceil(Pn.paddedLength/Yn)+1;for(let ui=0;ui<Cr;ui++){const $s=ui/Math.max(Cr-1,1),Ma=Pn.lerp($s),di=Ma.x+kt,vo=Ma.y+kt;Ne.push(di,vo,un,0);const io=di-un,Vs=vo-un,so=di+un,ul=vo+un;if(Yt=Yt&&this.isOffscreen(io,Vs,so,ul),Ft=Ft||this.isInsideGrid(io,Vs,so,ul),s!=="always"&&this.grid.hitTestCircle(di,vo,un,s,ae)&&(Tt=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:Tt}}}}return{circles:!Q&&Tt||!Ft||ke<this.perspectiveRatioCutoff?[]:Ne,offscreen:Yt,collisionDetected:Tt}}projectPathToScreenSpace(s,f,v){return s.map(_=>Ae(_.x,_.y,v,f.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let v=1/0,_=1/0,S=-1/0,O=-1/0;for(const Q of s){const J=new a.P(Q.x+kt,Q.y+kt);v=Math.min(v,J.x),_=Math.min(_,J.y),S=Math.max(S,J.x),O=Math.max(O,J.y),f.push(J)}const j=this.grid.query(v,_,S,O).concat(this.ignoredGrid.query(v,_,S,O)),B={},W={};for(const Q of j){const J=Q.key;if(B[J.bucketInstanceId]===void 0&&(B[J.bucketInstanceId]={}),B[J.bucketInstanceId][J.featureIndex])continue;const ae=[new a.P(Q.x1,Q.y1),new a.P(Q.x2,Q.y1),new a.P(Q.x2,Q.y2),new a.P(Q.x1,Q.y2)];a.am(f,ae)&&(B[J.bucketInstanceId][J.featureIndex]=!0,W[J.bucketInstanceId]===void 0&&(W[J.bucketInstanceId]=[]),W[J.bucketInstanceId].push(J.featureIndex))}return W}insertCollisionBox(s,f,v,_,S,O){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:S,collisionGroupID:O,overlapMode:f},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,f,v,_,S,O){const j=v?this.ignoredGrid:this.grid,B={bucketInstanceId:_,featureIndex:S,collisionGroupID:O,overlapMode:f};for(let W=0;W<s.length;W+=4)j.insertCircle(B,s[W],s[W+1],s[W+2])}projectAndGetPerspectiveRatio(s,f,v,_,S){let O;S?(O=[f,v,S(f,v),1],a.af(O,O,s)):(O=[f,v,0,1],jt(O,O,s));const j=O[3];return{point:new a.P((O[0]/j+1)/2*this.transform.width+kt,(-O[1]/j+1)/2*this.transform.height+kt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/j*.5,isOccluded:!1,signedDistanceFromCamera:j}}getPerspectiveRatio(s,f,v,_,S){const O=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(f,v,_,S):Ae(f,v,s,S);return .5+this.transform.cameraToCenterDistance/O.signedDistanceFromCamera*.5}isOffscreen(s,f,v,_){return v<kt||s>=this.screenRightBoundary||_<kt||f>this.screenBottomBoundary}isInsideGrid(s,f,v,_){return v>=0&&s<this.gridRightBoundary&&_>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const s=a.an([]);return a.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,f,v,_,S,O,j,B,W,Q){let J=new a.P(1,0),ae=new a.P(0,1);const ye=new a.P(s.anchorPointX+j[0],s.anchorPointY+j[1]);if(O&&!S){const Yt=this.projectAndGetPerspectiveRatio(v,ye.x+1,ye.y,_,W).point.sub(B.point).unit(),un=Math.atan(Yt.y/Yt.x)+(Yt.x<0?Math.PI:0),Gt=Math.sin(un),Zt=Math.cos(un);J=new a.P(Zt,Gt),ae=new a.P(-Gt,Zt)}else if(!O&&S){const Yt=-this.transform.angle,un=Math.sin(Yt),Gt=Math.cos(Yt);J=new a.P(Gt,un),ae=new a.P(-un,Gt)}let xe=B.point,Pe=f;if(S){xe=ye;const Yt=this.transform.zoom-Math.floor(this.transform.zoom);Pe=Math.pow(2,-Yt),Pe*=this.mapProjection.getPitchedTextCorrection(this.transform,ye,_),Q||(Pe*=a.ac(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}Q&&(xe=xe.add(J.mult(Q.x*Pe)).add(ae.mult(Q.y*Pe)));const Oe=s.x1*Pe,Ne=s.x2*Pe,$e=(Oe+Ne)/2,ke=s.y1*Pe,We=s.y2*Pe,et=(ke+We)/2,at=[{offsetX:Oe,offsetY:ke},{offsetX:$e,offsetY:ke},{offsetX:Ne,offsetY:ke},{offsetX:Ne,offsetY:et},{offsetX:Ne,offsetY:We},{offsetX:$e,offsetY:We},{offsetX:Oe,offsetY:We},{offsetX:Oe,offsetY:et}];let Tt=[];for(const{offsetX:Yt,offsetY:un}of at)Tt.push(new a.P(xe.x+J.x*Yt+ae.x*un,xe.y+J.y*Yt+ae.y*un));let Ft=!1;if(S){const Yt=Tt.map(un=>this.projectAndGetPerspectiveRatio(v,un.x,un.y,_,W));Ft=Yt.some(un=>!un.isOccluded),Tt=Yt.map(un=>un.point)}else Ft=!0;return{box:a.ao(Tt),allPointsOccluded:!Ft}}}function zt(E,s,f){return s*(a.X/(E.tileSize*Math.pow(2,f-E.tileID.overscaledZ)))}class In{constructor(s,f,v,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?f:-f))):_&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Dn{constructor(s,f,v,_,S){this.text=new In(s?s.text:null,f,v,S),this.icon=new In(s?s.icon:null,f,_,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Nn{constructor(s,f,v){this.text=s,this.icon=f,this.skipFade=v}}class Un{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class $n{constructor(s,f,v,_,S){this.bucketInstanceId=s,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=_,this.tileID=S}}class ir{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const f=++this.maxGroupID;this.collisionGroups[s]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[s]}}function Zr(E,s,f,v,_){const{horizontalAlign:S,verticalAlign:O}=a.au(E);return new a.P(-(S-.5)*s+v[0]*_,-(O-.5)*f+v[1]*_)}class oi{constructor(s,f,v,_,S,O){this.transform=s.clone(),this.terrain=v,this.collisionIndex=new Ot(this.transform,f),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new ir(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const f=this.terrain;return f?(v,_)=>f.getElevation(s,v,_):null}getBucketParts(s,f,v,_){const S=v.getBucket(f),O=v.latestFeatureIndex;if(!S||!O||f.id!==S.layerIds[0])return;const j=v.collisionBoxArray,B=S.layers[0].layout,W=S.layers[0].paint,Q=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),J=v.tileSize/a.X,ae=v.tileID.toUnwrapped(),ye=this.transform.calculatePosMatrix(ae),xe=B.get("text-pitch-alignment")==="map",Pe=B.get("text-rotation-alignment")==="map",Oe=zt(v,1,this.transform.zoom),Ne=this.collisionIndex.mapProjection.translatePosition(this.transform,v,W.get("text-translate"),W.get("text-translate-anchor")),$e=this.collisionIndex.mapProjection.translatePosition(this.transform,v,W.get("icon-translate"),W.get("icon-translate-anchor")),ke=es(ye,xe,Pe,this.transform,Oe);let We=null;if(xe){const at=ts(ye,xe,Pe,this.transform,Oe);We=a.L([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[S.bucketInstanceId]=new $n(S.bucketInstanceId,O,S.sourceLayerIndex,S.index,v.tileID);const et={bucket:S,layout:B,translationText:Ne,translationIcon:$e,posMatrix:ye,unwrappedTileID:ae,textLabelPlaneMatrix:ke,labelToScreenMatrix:We,scale:Q,textPixelRatio:J,holdingForFade:v.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.ag(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(_)for(const at of S.sortKeyRanges){const{sortKey:Tt,symbolInstanceStart:Ft,symbolInstanceEnd:Yt}=at;s.push({sortKey:Tt,symbolInstanceStart:Ft,symbolInstanceEnd:Yt,parameters:et})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:et})}attemptAnchorPlacement(s,f,v,_,S,O,j,B,W,Q,J,ae,ye,xe,Pe,Oe,Ne,$e,ke){const We=a.aq[s.textAnchor],et=[s.textOffset0,s.textOffset1],at=Zr(We,v,_,et,S),Tt=this.collisionIndex.placeCollisionBox(f,ae,B,W,Q,j,O,Oe,J.predicate,ke,at);if((!$e||this.collisionIndex.placeCollisionBox($e,ae,B,W,Q,j,O,Ne,J.predicate,ke,at).placeable)&&Tt.placeable){let Ft;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ye.crossTileID]={textOffset:et,width:v,height:_,anchor:We,textBoxScale:S,prevAnchor:Ft},this.markUsedJustification(xe,We,ye,Pe),xe.allowVerticalPlacement&&(this.markUsedOrientation(xe,Pe,ye),this.placedOrientations[ye.crossTileID]=Pe),{shift:at,placedGlyphBoxes:Tt}}}placeLayerBucketPart(s,f,v){const{bucket:_,layout:S,translationText:O,translationIcon:j,posMatrix:B,unwrappedTileID:W,textLabelPlaneMatrix:Q,labelToScreenMatrix:J,textPixelRatio:ae,holdingForFade:ye,collisionBoxArray:xe,partiallyEvaluatedTextSize:Pe,collisionGroup:Oe}=s.parameters,Ne=S.get("text-optional"),$e=S.get("icon-optional"),ke=a.ar(S,"text-overlap","text-allow-overlap"),We=ke==="always",et=a.ar(S,"icon-overlap","icon-allow-overlap"),at=et==="always",Tt=S.get("text-rotation-alignment")==="map",Ft=S.get("text-pitch-alignment")==="map",Yt=S.get("icon-text-fit")!=="none",un=S.get("symbol-z-order")==="viewport-y",Gt=We&&(at||!_.hasIconData()||$e),Zt=at&&(We||!_.hasTextData()||Ne);!_.collisionArrays&&xe&&_.deserializeCollisionBoxes(xe);const Pn=this._getTerrainElevationFunc(this.retainedQueryData[_.bucketInstanceId].tileID),tr=(Xt,rn,Yn)=>{var ci,hr;if(f[Xt.crossTileID])return;if(ye)return void(this.placements[Xt.crossTileID]=new Nn(!1,!1,!1));let Cr=!1,ui=!1,$s=!0,Ma=null,di={box:null,placeable:!1,offscreen:null},vo={placeable:!1},io=null,Vs=null,so=null,ul=0,Fd=0,Vp=0;rn.textFeatureIndex?ul=rn.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(ul=Xt.featureIndex),rn.verticalTextFeatureIndex&&(Fd=rn.verticalTextFeatureIndex);const Bd=rn.textBox;if(Bd){const ca=Ls=>{let Hs=a.ah.horizontal;if(_.allowVerticalPlacement&&!Ls&&this.prevPlacement){const zo=this.prevPlacement.placedOrientations[Xt.crossTileID];zo&&(this.placedOrientations[Xt.crossTileID]=zo,Hs=zo,this.markUsedOrientation(_,Hs,Xt))}return Hs},ua=(Ls,Hs)=>{if(_.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&rn.verticalTextBox){for(const zo of _.writingModes)if(zo===a.ah.vertical?(di=Hs(),vo=di):di=Ls(),di&&di.placeable)break}else di=Ls()},jc=Xt.textAnchorOffsetStartIndex,Oa=Xt.textAnchorOffsetEndIndex;if(Oa===jc){const Ls=(Hs,zo)=>{const kr=this.collisionIndex.placeCollisionBox(Hs,ke,ae,B,W,Ft,Tt,O,Oe.predicate,Pn);return kr&&kr.placeable&&(this.markUsedOrientation(_,zo,Xt),this.placedOrientations[Xt.crossTileID]=zo),kr};ua(()=>Ls(Bd,a.ah.horizontal),()=>{const Hs=rn.verticalTextBox;return _.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&Hs?Ls(Hs,a.ah.vertical):{box:null,offscreen:null}}),ca(di&&di.placeable)}else{let Ls=a.aq[(hr=(ci=this.prevPlacement)===null||ci===void 0?void 0:ci.variableOffsets[Xt.crossTileID])===null||hr===void 0?void 0:hr.anchor];const Hs=(kr,Iu,Ud)=>{const $d=kr.x2-kr.x1,Q_=kr.y2-kr.y1,U1=Xt.textBoxScale,J_=Yt&&et==="never"?Iu:null;let zc=null,ex=ke==="never"?1:2,Zp="never";Ls&&ex++;for(let wf=0;wf<ex;wf++){for(let qp=jc;qp<Oa;qp++){const Gp=_.textAnchorOffsets.get(qp);if(Ls&&Gp.textAnchor!==Ls)continue;const Vd=this.attemptAnchorPlacement(Gp,kr,$d,Q_,U1,Tt,Ft,ae,B,W,Oe,Zp,Xt,_,Ud,O,j,J_,Pn);if(Vd&&(zc=Vd.placedGlyphBoxes,zc&&zc.placeable))return Cr=!0,Ma=Vd.shift,zc}Ls?Ls=null:Zp=ke}return v&&!zc&&(zc={box:this.collisionIndex.placeCollisionBox(Bd,"always",ae,B,W,Ft,Tt,O,Oe.predicate,Pn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),zc};ua(()=>Hs(Bd,rn.iconBox,a.ah.horizontal),()=>{const kr=rn.verticalTextBox;return _.allowVerticalPlacement&&(!di||!di.placeable)&&Xt.numVerticalGlyphVertices>0&&kr?Hs(kr,rn.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),di&&(Cr=di.placeable,$s=di.offscreen);const zo=ca(di&&di.placeable);if(!Cr&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[Xt.crossTileID];kr&&(this.variableOffsets[Xt.crossTileID]=kr,this.markUsedJustification(_,kr.anchor,Xt,zo))}}}if(io=di,Cr=io&&io.placeable,$s=io&&io.offscreen,Xt.useRuntimeCollisionCircles){const ca=_.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex),ua=a.ai(_.textSizeData,Pe,ca),jc=S.get("text-padding");Vs=this.collisionIndex.placeCollisionCircles(ke,ca,_.lineVertexArray,_.glyphOffsetArray,ua,B,W,Q,J,v,Ft,Oe.predicate,Xt.collisionCircleDiameter,jc,O,Pn),Vs.circles.length&&Vs.collisionDetected&&!v&&a.w("Collisions detected, but collision boxes are not shown"),Cr=We||Vs.circles.length>0&&!Vs.collisionDetected,$s=$s&&Vs.offscreen}if(rn.iconFeatureIndex&&(Vp=rn.iconFeatureIndex),rn.iconBox){const ca=ua=>this.collisionIndex.placeCollisionBox(ua,et,ae,B,W,Ft,Tt,j,Oe.predicate,Pn,Yt&&Ma?Ma:void 0);vo&&vo.placeable&&rn.verticalIconBox?(so=ca(rn.verticalIconBox),ui=so.placeable):(so=ca(rn.iconBox),ui=so.placeable),$s=$s&&so.offscreen}const la=Ne||Xt.numHorizontalGlyphVertices===0&&Xt.numVerticalGlyphVertices===0,Hp=$e||Xt.numIconVertices===0;la||Hp?Hp?la||(ui=ui&&Cr):Cr=ui&&Cr:ui=Cr=ui&&Cr;const $g=ui&&so.placeable;if(Cr&&io.placeable&&this.collisionIndex.insertCollisionBox(io.box,ke,S.get("text-ignore-placement"),_.bucketInstanceId,vo&&vo.placeable&&Fd?Fd:ul,Oe.ID),$g&&this.collisionIndex.insertCollisionBox(so.box,et,S.get("icon-ignore-placement"),_.bucketInstanceId,Vp,Oe.ID),Vs&&Cr&&this.collisionIndex.insertCollisionCircles(Vs.circles,ke,S.get("text-ignore-placement"),_.bucketInstanceId,ul,Oe.ID),v&&this.storeCollisionData(_.bucketInstanceId,Yn,rn,io,so,Vs),Xt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xt.crossTileID]=new Nn(Cr||Gt,ui||Zt,$s||_.justReloaded),f[Xt.crossTileID]=!0};if(un){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xt=_.getSortedSymbolIndexes(this.transform.angle);for(let rn=Xt.length-1;rn>=0;--rn){const Yn=Xt[rn];tr(_.symbolInstances.get(Yn),_.collisionArrays[Yn],Yn)}}else for(let Xt=s.symbolInstanceStart;Xt<s.symbolInstanceEnd;Xt++)tr(_.symbolInstances.get(Xt),_.collisionArrays[Xt],Xt);if(v&&_.bucketInstanceId in this.collisionCircleArrays){const Xt=this.collisionCircleArrays[_.bucketInstanceId];a.as(Xt.invProjMatrix,B),Xt.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}storeCollisionData(s,f,v,_,S,O){if(v.textBox||v.iconBox){let j,B;this.collisionBoxArrays.has(s)?j=this.collisionBoxArrays.get(s):(j=new Map,this.collisionBoxArrays.set(s,j)),j.has(f)?B=j.get(f):(B={text:null,icon:null},j.set(f,B)),v.textBox&&(B.text=_.box),v.iconBox&&(B.icon=S.box)}if(O){let j=this.collisionCircleArrays[s];j===void 0&&(j=this.collisionCircleArrays[s]=new Un);for(let B=0;B<O.circles.length;B+=4)j.circles.push(O.circles[B+0]),j.circles.push(O.circles[B+1]),j.circles.push(O.circles[B+2]),j.circles.push(O.collisionDetected?1:0)}}markUsedJustification(s,f,v,_){let S;S=_===a.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[a.at(f)];const O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const j of O)j>=0&&(s.text.placedSymbolArray.get(j).crossTileID=S>=0&&j!==S?0:v.crossTileID)}markUsedOrientation(s,f,v){const _=f===a.ah.horizontal||f===a.ah.horizontalOnly?f:0,S=f===a.ah.vertical?f:0,O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const j of O)s.text.placedSymbolArray.get(j).placedOrientation=_;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const _=f?f.symbolFadeChange(s):1,S=f?f.opacities:{},O=f?f.variableOffsets:{},j=f?f.placedOrientations:{};for(const B in this.placements){const W=this.placements[B],Q=S[B];Q?(this.opacities[B]=new Dn(Q,_,W.text,W.icon),v=v||W.text!==Q.text.placed||W.icon!==Q.icon.placed):(this.opacities[B]=new Dn(null,_,W.text,W.icon,W.skipFade),v=v||W.text||W.icon)}for(const B in S){const W=S[B];if(!this.opacities[B]){const Q=new Dn(W,_,!1,!1);Q.isHidden()||(this.opacities[B]=Q,v=v||W.text.placed||W.icon.placed)}}for(const B in O)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=O[B]);for(const B in j)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=j[B]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:s)}updateLayerOpacities(s,f){const v={};for(const _ of f){const S=_.getBucket(s);S&&_.latestFeatureIndex&&s.id===S.layerIds[0]&&this.updateBucketOpacities(S,_.tileID,v,_.collisionBoxArray)}}updateBucketOpacities(s,f,v,_){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const S=s.layers[0],O=S.layout,j=new Dn(null,0,!1,!1,!0),B=O.get("text-allow-overlap"),W=O.get("icon-allow-overlap"),Q=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=O.get("text-rotation-alignment")==="map",ae=O.get("text-pitch-alignment")==="map",ye=O.get("icon-text-fit")!=="none",xe=new Dn(null,0,B&&(W||!s.hasIconData()||O.get("icon-optional")),W&&(B||!s.hasTextData()||O.get("text-optional")),!0);!s.collisionArrays&&_&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(_);const Pe=(Ne,$e,ke)=>{for(let We=0;We<$e/4;We++)Ne.opacityVertexArray.emplaceBack(ke);Ne.hasVisibleVertices=Ne.hasVisibleVertices||ke!==gs},Oe=this.collisionBoxArrays.get(s.bucketInstanceId);for(let Ne=0;Ne<s.symbolInstances.length;Ne++){const $e=s.symbolInstances.get(Ne),{numHorizontalGlyphVertices:ke,numVerticalGlyphVertices:We,crossTileID:et}=$e;let at=this.opacities[et];v[et]?at=j:at||(at=xe,this.opacities[et]=at),v[et]=!0;const Tt=$e.numIconVertices>0,Ft=this.placedOrientations[$e.crossTileID],Yt=Ft===a.ah.vertical,un=Ft===a.ah.horizontal||Ft===a.ah.horizontalOnly;if(ke>0||We>0){const Zt=mr(at.text);Pe(s.text,ke,Yt?gs:Zt),Pe(s.text,We,un?gs:Zt);const Pn=at.text.isHidden();[$e.rightJustifiedTextSymbolIndex,$e.centerJustifiedTextSymbolIndex,$e.leftJustifiedTextSymbolIndex].forEach(rn=>{rn>=0&&(s.text.placedSymbolArray.get(rn).hidden=Pn||Yt?1:0)}),$e.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get($e.verticalPlacedTextSymbolIndex).hidden=Pn||un?1:0);const tr=this.variableOffsets[$e.crossTileID];tr&&this.markUsedJustification(s,tr.anchor,$e,Ft);const Xt=this.placedOrientations[$e.crossTileID];Xt&&(this.markUsedJustification(s,"left",$e,Xt),this.markUsedOrientation(s,Xt,$e))}if(Tt){const Zt=mr(at.icon),Pn=!(ye&&$e.verticalPlacedIconSymbolIndex&&Yt);$e.placedIconSymbolIndex>=0&&(Pe(s.icon,$e.numIconVertices,Pn?Zt:gs),s.icon.placedSymbolArray.get($e.placedIconSymbolIndex).hidden=at.icon.isHidden()),$e.verticalPlacedIconSymbolIndex>=0&&(Pe(s.icon,$e.numVerticalIconVertices,Pn?gs:Zt),s.icon.placedSymbolArray.get($e.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const Gt=Oe&&Oe.has(Ne)?Oe.get(Ne):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Zt=s.collisionArrays[Ne];if(Zt){let Pn=new a.P(0,0);if(Zt.textBox||Zt.verticalTextBox){let tr=!0;if(Q){const Xt=this.variableOffsets[et];Xt?(Pn=Zr(Xt.anchor,Xt.width,Xt.height,Xt.textOffset,Xt.textBoxScale),J&&Pn._rotate(ae?this.transform.angle:-this.transform.angle)):tr=!1}if(Zt.textBox||Zt.verticalTextBox){let Xt;Zt.textBox&&(Xt=Yt),Zt.verticalTextBox&&(Xt=un),Ci(s.textCollisionBox.collisionVertexArray,at.text.placed,!tr||Xt,Gt.text,Pn.x,Pn.y)}}if(Zt.iconBox||Zt.verticalIconBox){const tr=!!(!un&&Zt.verticalIconBox);let Xt;Zt.iconBox&&(Xt=tr),Zt.verticalIconBox&&(Xt=!tr),Ci(s.iconCollisionBox.collisionVertexArray,at.icon.placed,Xt,Gt.icon,ye?Pn.x:0,ye?Pn.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Ne.invProjMatrix,s.placementViewportMatrix=Ne.viewportMatrix,s.collisionCircleArray=Ne.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Ci(E,s,f,v,_,S){v&&v.length!==0||(v=[0,0,0,0]);const O=v[0]-kt,j=v[1]-kt,B=v[2]-kt,W=v[3]-kt;E.emplaceBack(s?1:0,f?1:0,_||0,S||0,O,j),E.emplaceBack(s?1:0,f?1:0,_||0,S||0,B,j),E.emplaceBack(s?1:0,f?1:0,_||0,S||0,B,W),E.emplaceBack(s?1:0,f?1:0,_||0,S||0,O,W)}const ur=Math.pow(2,25),Pa=Math.pow(2,24),po=Math.pow(2,17),Wr=Math.pow(2,16),yi=Math.pow(2,9),Js=Math.pow(2,8),Kn=Math.pow(2,1);function mr(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const s=E.placed?1:0,f=Math.floor(127*E.opacity);return f*ur+s*Pa+f*po+s*Wr+f*yi+s*Js+f*Kn+s}const gs=0;function Mi(){return{isOccluded:(E,s,f)=>!1,getPitchedTextCorrection:(E,s,f)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(E,s,f,v){throw new Error("Not implemented.")},translatePosition:(E,s,f,v)=>function(_,S,O,j,B=!1){if(!O[0]&&!O[1])return[0,0];const W=B?j==="map"?_.angle:0:j==="viewport"?-_.angle:0;if(W){const Q=Math.sin(W),J=Math.cos(W);O=[O[0]*J-O[1]*Q,O[0]*Q+O[1]*J]}return[B?O[0]:zt(S,O[0],_.zoom),B?O[1]:zt(S,O[1],_.zoom)]}(E,s,f,v),getCircleRadiusCorrection:E=>1}}class mn{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,f,v,_,S){const O=this._bucketParts;for(;this._currentTileIndex<s.length;)if(f.getBucketParts(O,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((j,B)=>j.sortKey-B.sortKey));this._currentPartIndex<O.length;)if(f.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,S())return!0;return!1}}class Sr{constructor(s,f,v,_,S,O,j,B){this.placement=new oi(s,Mi(),f,O,j,B),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(s,f,v){const _=C.now(),S=()=>!this._forceFullPlacement&&C.now()-_>2;for(;this._currentPlacementIndex>=0;){const O=f[s[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=j)&&(!O.maxzoom||O.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new mn(O)),this._inProgressLayer.continuePlacement(v[O.source],this.placement,this._showCollisionBoxes,O,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Hi=512/a.X/2;class $r{constructor(s,f,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};const _=new Map;for(let S=0;S<f.length;S++){const O=f.get(S),j=O.key,B=_.get(j);B?B.push(O):_.set(j,[O])}for(const[S,O]of _){const j={positions:O.map(B=>({x:Math.floor(B.anchorX*Hi),y:Math.floor(B.anchorY*Hi)})),crossTileIDs:O.map(B=>B.crossTileID)};if(j.positions.length>128){const B=new a.av(j.positions.length,16,Uint16Array);for(const{x:W,y:Q}of j.positions)B.add(W,Q);B.finish(),delete j.positions,j.index=B}this._symbolsByKey[S]=j}}getScaledCoordinates(s,f){const{x:v,y:_,z:S}=this.tileID.canonical,{x:O,y:j,z:B}=f.canonical,W=Hi/Math.pow(2,B-S),Q=(j*a.X+s.anchorY)*W,J=_*a.X*Hi;return{x:Math.floor((O*a.X+s.anchorX)*W-v*a.X*Hi),y:Math.floor(Q-J)}}findMatches(s,f,v){const _=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let S=0;S<s.length;S++){const O=s.get(S);if(O.crossTileID)continue;const j=this._symbolsByKey[O.key];if(!j)continue;const B=this.getScaledCoordinates(O,f);if(j.index){const W=j.index.range(B.x-_,B.y-_,B.x+_,B.y+_).sort();for(const Q of W){const J=j.crossTileIDs[Q];if(!v[J]){v[J]=!0,O.crossTileID=J;break}}}else if(j.positions)for(let W=0;W<j.positions.length;W++){const Q=j.positions[W],J=j.crossTileIDs[W];if(Math.abs(Q.x-B.x)<=_&&Math.abs(Q.y-B.y)<=_&&!v[J]){v[J]=!0,O.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class mo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ps{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const f=Math.round((s-this.lng)/360);if(f!==0)for(const v in this.indexes){const _=this.indexes[v],S={};for(const O in _){const j=_[O];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+f),S[j.tileID.key]=j}this.indexes[v]=S}this.lng=s}addBucket(s,f,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let S=0;S<f.symbolInstances.length;S++)f.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const _=this.usedCrossTileIDs[s.overscaledZ];for(const S in this.indexes){const O=this.indexes[S];if(Number(S)>s.overscaledZ)for(const j in O){const B=O[j];B.tileID.isChildOf(s)&&B.findMatches(f.symbolInstances,s,_)}else{const j=O[s.scaledTo(Number(S)).key];j&&j.findMatches(f.symbolInstances,s,_)}}for(let S=0;S<f.symbolInstances.length;S++){const O=f.symbolInstances.get(S);O.crossTileID||(O.crossTileID=v.generate(),_[O.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new $r(s,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(s,f){for(const v of f.getCrossTileIDsLists())for(const _ of v)delete this.usedCrossTileIDs[s][_]}removeStaleBuckets(s){let f=!1;for(const v in this.indexes){const _=this.indexes[v];for(const S in _)s[_[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,_[S]),delete _[S],f=!0)}return f}}class lr{constructor(){this.layerIndexes={},this.crossTileIDs=new mo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,f,v){let _=this.layerIndexes[s.id];_===void 0&&(_=this.layerIndexes[s.id]=new Ps);let S=!1;const O={};_.handleWrapJump(v);for(const j of f){const B=j.getBucket(s);B&&s.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(j.tileID,B,this.crossTileIDs)&&(S=!0),O[B.bucketInstanceId]=!0)}return _.removeStaleBuckets(O)&&(S=!0),S}pruneUnusedLayers(s){const f={};s.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const Dr=(E,s)=>a.t(E,s&&s.filter(f=>f.identifier!=="source.canvas")),yu=a.aw();class Yo extends a.E{constructor(s,f={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const _=this.sourceCaches[v].getSource().type;_!=="vector"&&_!=="geojson"||this.sourceCaches[v].reload()}},this.map=s,this.dispatcher=new wn(fn(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,_)=>this.getGlyphs(v,_)),this.dispatcher.registerMessageHandler("GI",(v,_)=>this.getImages(v,_)),this.imageManager=new Xe,this.imageManager.setEventedParent(this),this.glyphManager=new Nt(s._requestManager,f.localIdeographFontFamily),this.lineAtlas=new Be(256,512),this.crossTileSymbolIndex=new lr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),fr().on(it,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const _=this.sourceCaches[v.sourceId];if(!_)return;const S=_.getSource();if(S&&S.vectorLayerIds)for(const O in this._layers){const j=this._layers[O];j.source===S.id&&this._validateLayer(j)}})}loadURL(s,f={},v){this.fire(new a.k("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const _=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;a.h(_,this._loadStyleRequest).then(O=>{this._loadStyleRequest=null,this._load(O.data,f,v)}).catch(O=>{this._loadStyleRequest=null,O&&!S.signal.aborted&&this.fire(new a.j(O))})}loadJSON(s,f={},v){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(s,f,v)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(yu,{validate:!1})}_load(s,f,v){var _;const S=f.transformStyle?f.transformStyle(v,s):s;if(!f.validate||!Dr(this,a.u(S))){this._loaded=!0,this.stylesheet=S;for(const O in S.sources)this.addSource(O,S.sources[O],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new Ke(this.stylesheet.light),this.sky=new He(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const s=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(f=>f.id),this._layers={},this._serializedLayers=null;for(const f of s){const v=a.aA(f);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(s,f=!1,v=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(S,O,j,B){return a._(this,void 0,void 0,function*(){const W=be(S),Q=j>1?"@2x":"",J={},ae={};for(const{id:ye,url:xe}of W){const Pe=O.transformRequest(Re(xe,Q,".json"),"SpriteJSON");J[ye]=a.h(Pe,B);const Oe=O.transformRequest(Re(xe,Q,".png"),"SpriteImage");ae[ye]=q.getImage(Oe,B)}return yield Promise.all([...Object.values(J),...Object.values(ae)]),function(ye,xe){return a._(this,void 0,void 0,function*(){const Pe={};for(const Oe in ye){Pe[Oe]={};const Ne=C.getImageCanvasContext((yield xe[Oe]).data),$e=(yield ye[Oe]).data;for(const ke in $e){const{width:We,height:et,x:at,y:Tt,sdf:Ft,pixelRatio:Yt,stretchX:un,stretchY:Gt,content:Zt,textFitWidth:Pn,textFitHeight:tr}=$e[ke];Pe[Oe][ke]={data:null,pixelRatio:Yt,sdf:Ft,stretchX:un,stretchY:Gt,content:Zt,textFitWidth:Pn,textFitHeight:tr,spriteData:{width:We,height:et,x:at,y:Tt,context:Ne}}}}return Pe})}(J,ae)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(S=>{if(this._spriteRequest=null,S)for(const O in S){this._spritesImagesIds[O]=[];const j=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter(B=>!(B in S)):[];for(const B of j)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in S[O]){const W=O==="default"?B:`${O}:${B}`;this._spritesImagesIds[O].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,S[O][B],!1):this.imageManager.addImage(W,S[O][B]),f&&(this._changedImages[W]=!0)}}}).catch(S=>{this._spriteRequest=null,_=S,this.fire(new a.j(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),v&&v(_)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(s){const f=this.sourceCaches[s.source];if(!f)return;const v=s.sourceLayer;if(!v)return;const _=f.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(v)===-1)&&this.fire(new a.j(new Error(`Source layer "${v}" does not exist on source "${_.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,f=!1){const v=this._serializedAllLayers();if(!s||s.length===0)return Object.values(f?a.aB(v):v);const _=[];for(const S of s)if(v[S]){const O=f?a.aB(v[S]):v[S];_.push(O)}return _}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const f=Object.keys(this._layers);for(const v of f){const _=this._layers[v];_.type!=="custom"&&(s[v]=_.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const f=this._changed;if(f){const _=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(_.length||S.length)&&this._updateWorkerLayers(_,S);for(const O in this._updatedSources){const j=this._updatedSources[O];if(j==="reload")this._reloadSource(O);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(O)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const v={};for(const _ in this.sourceCaches){const S=this.sourceCaches[_];v[_]=S.used,S.used=!1}for(const _ of this._order){const S=this._layers[_];S.recalculate(s,this._availableImages),!S.isHidden(s.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const _ in v){const S=this.sourceCaches[_];!!v[_]!=!!S.used&&S.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,f&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,f={}){var v;this._checkLoaded();const _=this.serialize();if(s=f.transformStyle?f.transformStyle(_,s):s,((v=f.validate)===null||v===void 0||v)&&Dr(this,a.u(s)))return!1;(s=a.aB(s)).layers=a.az(s.layers);const S=a.aC(_,s),O=this._getOperationsToPerform(S);if(O.unimplemented.length>0)throw new Error(`Unimplemented: ${O.unimplemented.join(", ")}.`);if(O.operations.length===0)return!1;for(const j of O.operations)j();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const f=[],v=[];for(const _ of s)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":f.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":f.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":f.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":f.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":f.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":f.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":f.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":f.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":f.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":f.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":f.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":f.push(()=>this.setSprite.apply(this,_.args));break;case"setSky":f.push(()=>this.setSky.apply(this,_.args));break;case"setTerrain":f.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setTransition":f.push(()=>{});break;default:v.push(_.command)}return{operations:f,unimplemented:v}}addImage(s,f){if(this.getImage(s))return this.fire(new a.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,f),this._afterImageUpdated(s)}updateImage(s,f){this.imageManager.updateImage(s,f)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,f,v={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(a.u.source,`sources.${s}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const _=this.sourceCaches[s]=new Sn(s,f,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:s})),_.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===s)return this.fire(new a.j(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));const f=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],f.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,f){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const v=this.sourceCaches[s].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(f),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,f,v={}){this._checkLoaded();const _=s.id;if(this.getLayer(_))return void this.fire(new a.j(new Error(`Layer "${_}" already exists on this map.`)));let S;if(s.type==="custom"){if(Dr(this,a.aD(s)))return;S=a.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(_,s.source),s=a.aB(s),s=a.e(s,{source:_})),this._validate(a.u.layer,`layers.${_}`,s,{arrayIndex:-1},v))return;S=a.aA(s),this._validateLayer(S),S.setEventedParent(this,{layer:{id:_}})}const O=f?this._order.indexOf(f):this._order.length;if(f&&O===-1)this.fire(new a.j(new Error(`Cannot add layer "${_}" before non-existing layer "${f}".`)));else{if(this._order.splice(O,0,_),this._layerOrderChanged=!0,this._layers[_]=S,this._removedLayers[_]&&S.source&&S.type!=="custom"){const j=this._removedLayers[_];delete this._removedLayers[_],j.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(s,f){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===f)return;const v=this._order.indexOf(s);this._order.splice(v,1);const _=f?this._order.indexOf(f):this._order.length;f&&_===-1?this.fire(new a.j(new Error(`Cannot move layer "${s}" before non-existing layer "${f}".`))):(this._order.splice(_,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const f=this._layers[s];if(!f)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${s}".`)));f.setEventedParent(null);const v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=f,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],f.onRemove&&f.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,f,v){this._checkLoaded();const _=this.getLayer(s);_?_.minzoom===f&&_.maxzoom===v||(f!=null&&(_.minzoom=f),v!=null&&(_.maxzoom=v),this._updateLayer(_)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,f,v={}){this._checkLoaded();const _=this.getLayer(s);if(_){if(!a.aE(_.filter,f))return f==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(a.u.filter,`layers.${_.id}.filter`,f,null,v)||(_.filter=a.aB(f),this._updateLayer(_)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.aB(this.getLayer(s).filter)}setLayoutProperty(s,f,v,_={}){this._checkLoaded();const S=this.getLayer(s);S?a.aE(S.getLayoutProperty(f),v)||(S.setLayoutProperty(f,v,_),this._updateLayer(S)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,f){const v=this.getLayer(s);if(v)return v.getLayoutProperty(f);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,f,v,_={}){this._checkLoaded();const S=this.getLayer(s);S?a.aE(S.getPaintProperty(f),v)||(S.setPaintProperty(f,v,_)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,f){return this.getLayer(s).getPaintProperty(f)}setFeatureState(s,f){this._checkLoaded();const v=s.source,_=s.sourceLayer,S=this.sourceCaches[v];if(S===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const O=S.getSource().type;O==="geojson"&&_?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||_?(s.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),S.setFeatureState(_,s.id,f)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,f){this._checkLoaded();const v=s.source,_=this.sourceCaches[v];if(_===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const S=_.getSource().type,O=S==="vector"?s.sourceLayer:void 0;S!=="vector"||O?f&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(O,s.id,f):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const f=s.source,v=s.sourceLayer,_=this.sourceCaches[f];if(_!==void 0)return _.getSource().type!=="vector"||v?(s.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),_.getFeatureState(v,s.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.aF(this.sourceCaches,S=>S.serialize()),f=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,_=this.stylesheet;return a.aG({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,sources:s,layers:f,terrain:v},S=>S!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const f=O=>this._layers[O].type==="fill-extrusion",v={},_=[];for(let O=this._order.length-1;O>=0;O--){const j=this._order[O];if(f(j)){v[j]=O;for(const B of s){const W=B[j];if(W)for(const Q of W)_.push(Q)}}}_.sort((O,j)=>j.intersectionZ-O.intersectionZ);const S=[];for(let O=this._order.length-1;O>=0;O--){const j=this._order[O];if(f(j))for(let B=_.length-1;B>=0;B--){const W=_[B].feature;if(v[W.layer.id]<O)break;S.push(W),_.pop()}else for(const B of s){const W=B[j];if(W)for(const Q of W)S.push(Q.feature)}}return S}queryRenderedFeatures(s,f,v){f&&f.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",f.filter,null,f);const _={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const j of f.layers){const B=this._layers[j];if(!B)return this.fire(new a.j(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const S=[];f.availableImages=this._availableImages;const O=this._serializedAllLayers();for(const j in this.sourceCaches)f.layers&&!_[j]||S.push(Cn(this.sourceCaches[j],this._layers,O,s,f,v));return this.placement&&S.push(function(j,B,W,Q,J,ae,ye){const xe={},Pe=ae.queryRenderedSymbols(Q),Oe=[];for(const Ne of Object.keys(Pe).map(Number))Oe.push(ye[Ne]);Oe.sort(Tn);for(const Ne of Oe){const $e=Ne.featureIndex.lookupSymbolFeatures(Pe[Ne.bucketInstanceId],B,Ne.bucketIndex,Ne.sourceLayerIndex,J.filter,J.layers,J.availableImages,j);for(const ke in $e){const We=xe[ke]=xe[ke]||[],et=$e[ke];et.sort((at,Tt)=>{const Ft=Ne.featureSortOrder;if(Ft){const Yt=Ft.indexOf(at.featureIndex);return Ft.indexOf(Tt.featureIndex)-Yt}return Tt.featureIndex-at.featureIndex});for(const at of et)We.push(at)}}for(const Ne in xe)xe[Ne].forEach($e=>{const ke=$e.feature,We=W[j[Ne].source].getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=We});return xe}(this._layers,O,this.sourceCaches,s,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(s,f){f&&f.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",f.filter,null,f);const v=this.sourceCaches[s];return v?function(_,S){const O=_.getRenderableIds().map(W=>_.getTileByID(W)),j=[],B={};for(let W=0;W<O.length;W++){const Q=O[W],J=Q.tileID.canonical.key;B[J]||(B[J]=!0,Q.querySourceFeatures(j,S))}return j}(v,f):[]}getLight(){return this.light.getLight()}setLight(s,f={}){this._checkLoaded();const v=this.light.getLight();let _=!1;for(const O in s)if(!a.aE(s[O],v[O])){_=!0;break}if(!_)return;const S={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,f),this.light.updateTransitions(S)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,f={}){const v=this.getSky();let _=!1;if(!s&&!v)return;if(s&&!v)_=!0;else if(!s&&v)_=!0;else for(const O in s)if(!a.aE(s[O],v[O])){_=!0;break}if(!_)return;const S={now:C.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,f),this.sky.updateTransitions(S)}_validate(s,f,v,_,S={}){return(!S||S.validate!==!1)&&Dr(this,s.call(a.u,a.e({key:f,style:this.serialize(),value:v,styleSpec:a.v},_)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),fr().off(it,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const v=this.sourceCaches[f];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const f in this.sourceCaches)this.sourceCaches[f].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,f,v,_,S=!1){let O=!1,j=!1;const B={};for(const W of this._order){const Q=this._layers[W];if(Q.type!=="symbol")continue;if(!B[Q.source]){const ae=this.sourceCaches[Q.source];B[Q.source]=ae.getRenderableIds(!0).map(ye=>ae.getTileByID(ye)).sort((ye,xe)=>xe.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(xe.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(Q,B[Q.source],s.center.lng);O=O||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),s.zoom))&&(this.pauseablePlacement=new Sr(s,this.map.terrain,this._order,S,f,v,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),j=!0),O&&this.pauseablePlacement.placement.setStale()),j||O)for(const W of this._order){const Q=this._layers[W];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,B[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,f){return a._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[f.source];return _&&_.setDependencies(f.tileID.key,f.type,f.icons),v})}getGlyphs(s,f){return a._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(f.stacks),_=this.sourceCaches[f.source];return _&&_.setDependencies(f.tileID.key,f.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,f={}){this._checkLoaded(),s&&this._validate(a.u.glyphs,"glyphs",s,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,f,v={},_){this._checkLoaded();const S=[{id:s,url:f}],O=[...be(this.stylesheet.sprite),...S];this._validate(a.u.sprite,"sprite",O,null,v)||(this.stylesheet.sprite=O,this._loadSprite(S,!0,_))}removeSprite(s){this._checkLoaded();const f=be(this.stylesheet.sprite);if(f.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(const v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;f.splice(f.findIndex(v=>v.id===s),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return be(this.stylesheet.sprite)}setSprite(s,f={},v){this._checkLoaded(),s&&this._validate(a.u.sprite,"sprite",s,null,f)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}var Oi=a.Y([{name:"a_pos",type:"Int16",components:2}]);const Lo={prelude:vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:vr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:vr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:vr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function vr(E,s){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/attribute ([\w]+) ([\w]+)/g),_=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=S?S.concat(_):_,j={};return{fragmentSource:E=E.replace(f,(B,W,Q,J,ae)=>(j[ae]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
varying ${Q} ${J} ${ae};
#else
uniform ${Q} ${J} u_${ae};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ae}
    ${Q} ${J} ${ae} = u_${ae};
#endif
`)),vertexSource:s=s.replace(f,(B,W,Q,J,ae)=>{const ye=J==="float"?"vec2":"vec4",xe=ae.match(/color/)?"color":ye;return j[ae]?W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${Q} ${ye} a_${ae};
varying ${Q} ${J} ${ae};
#else
uniform ${Q} ${J} u_${ae};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = a_${ae};
#else
    ${Q} ${J} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = unpack_mix_${xe}(a_${ae}, u_${ae}_t);
#else
    ${Q} ${J} ${ae} = u_${ae};
#endif
`:W==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${Q} ${ye} a_${ae};
#else
uniform ${Q} ${J} u_${ae};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${Q} ${J} ${ae} = a_${ae};
#else
    ${Q} ${J} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${Q} ${J} ${ae} = unpack_mix_${xe}(a_${ae}, u_${ae}_t);
#else
    ${Q} ${J} ${ae} = u_${ae};
#endif
`}),staticAttributes:v,staticUniforms:O}}class Mo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,f,v,_,S,O,j,B,W){this.context=s;let Q=this.boundPaintVertexBuffers.length!==_.length;for(let J=0;!Q&&J<_.length;J++)this.boundPaintVertexBuffers[J]!==_[J]&&(Q=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||Q||this.boundIndexBuffer!==S||this.boundVertexOffset!==O||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==W?this.freshBind(f,v,_,S,O,j,B,W):(s.bindVertexArray.set(this.vao),j&&j.bind(),S&&S.dynamicDraw&&S.bind(),B&&B.bind(),W&&W.bind())}freshBind(s,f,v,_,S,O,j,B){const W=s.numAttributes,Q=this.context,J=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=_,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=B,f.enableAttributes(J,s);for(const ae of v)ae.enableAttributes(J,s);O&&O.enableAttributes(J,s),j&&j.enableAttributes(J,s),B&&B.enableAttributes(J,s),f.bind(),f.setVertexAttribPointers(J,s,S);for(const ae of v)ae.bind(),ae.setVertexAttribPointers(J,s,S);O&&(O.bind(),O.setVertexAttribPointers(J,s,S)),_&&_.bind(),j&&(j.bind(),j.setVertexAttribPointers(J,s,S)),B&&(B.bind(),B.setVertexAttribPointers(J,s,S)),Q.currentNumAttributes=W}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Qr=(E,s,f,v,_)=>({u_matrix:E,u_texture:0,u_ele_delta:s,u_fog_matrix:f,u_fog_color:v?v.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:v?v.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?v.calculateFogBlendOpacity(_):0,u_horizon_color:v?v.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:v?v.properties.get("horizon-fog-blend"):1});function As(E){const s=[];for(let f=0;f<E.length;f++){if(E[f]===null)continue;const v=E[f].split(" ");s.push(v.pop())}return s}class Aa{constructor(s,f,v,_,S,O){const j=s.gl;this.program=j.createProgram();const B=As(f.staticAttributes),W=v?v.getBinderAttributes():[],Q=B.concat(W),J=Lo.prelude.staticUniforms?As(Lo.prelude.staticUniforms):[],ae=f.staticUniforms?As(f.staticUniforms):[],ye=v?v.getBinderUniforms():[],xe=J.concat(ae).concat(ye),Pe=[];for(const at of xe)Pe.indexOf(at)<0&&Pe.push(at);const Oe=v?v.defines():[];S&&Oe.push("#define OVERDRAW_INSPECTOR;"),O&&Oe.push("#define TERRAIN3D;");const Ne=Oe.concat(Lo.prelude.fragmentSource,f.fragmentSource).join(`
`),$e=Oe.concat(Lo.prelude.vertexSource,f.vertexSource).join(`
`),ke=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(ke,Ne),j.compileShader(ke),!j.getShaderParameter(ke,j.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${j.getShaderInfoLog(ke)}`);j.attachShader(this.program,ke);const We=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);if(j.shaderSource(We,$e),j.compileShader(We),!j.getShaderParameter(We,j.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${j.getShaderInfoLog(We)}`);j.attachShader(this.program,We),this.attributes={};const et={};this.numAttributes=Q.length;for(let at=0;at<this.numAttributes;at++)Q[at]&&(j.bindAttribLocation(this.program,at,Q[at]),this.attributes[Q[at]]=at);if(j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw new Error(`Program failed to link: ${j.getProgramInfoLog(this.program)}`);j.deleteShader(We),j.deleteShader(ke);for(let at=0;at<Pe.length;at++){const Tt=Pe[at];if(Tt&&!et[Tt]){const Ft=j.getUniformLocation(this.program,Tt);Ft&&(et[Tt]=Ft)}}this.fixedUniforms=_(s,et),this.terrainUniforms=((at,Tt)=>({u_depth:new a.aH(at,Tt.u_depth),u_terrain:new a.aH(at,Tt.u_terrain),u_terrain_dim:new a.aI(at,Tt.u_terrain_dim),u_terrain_matrix:new a.aJ(at,Tt.u_terrain_matrix),u_terrain_unpack:new a.aK(at,Tt.u_terrain_unpack),u_terrain_exaggeration:new a.aI(at,Tt.u_terrain_exaggeration)}))(s,et),this.binderUniforms=v?v.getUniforms(s,et):[]}draw(s,f,v,_,S,O,j,B,W,Q,J,ae,ye,xe,Pe,Oe,Ne,$e){const ke=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(_),s.setColorMode(S),s.setCullFace(O),B){s.activeTexture.set(ke.TEXTURE2),ke.bindTexture(ke.TEXTURE_2D,B.depthTexture),s.activeTexture.set(ke.TEXTURE3),ke.bindTexture(ke.TEXTURE_2D,B.texture);for(const et in this.terrainUniforms)this.terrainUniforms[et].set(B[et])}for(const et in this.fixedUniforms)this.fixedUniforms[et].set(j[et]);Pe&&Pe.setUniforms(s,this.binderUniforms,ye,{zoom:xe});let We=0;switch(f){case ke.LINES:We=2;break;case ke.TRIANGLES:We=3;break;case ke.LINE_STRIP:We=1}for(const et of ae.get()){const at=et.vaos||(et.vaos={});(at[W]||(at[W]=new Mo)).bind(s,this,Q,Pe?Pe.getPaintVertexBuffers():[],J,et.vertexOffset,Oe,Ne,$e),ke.drawElements(f,et.primitiveLength*We,ke.UNSIGNED_SHORT,et.primitiveOffset*We*2)}}}function Qo(E,s,f){const v=1/zt(f,1,s.transform.tileZoom),_=Math.pow(2,f.tileID.overscaledZ),S=f.tileSize*Math.pow(2,s.transform.tileZoom)/_,O=S*(f.tileID.canonical.x+f.tileID.wrap*_),j=S*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[O>>16,j>>16],u_pixel_coord_lower:[65535&O,65535&j]}}const Ia=(E,s,f,v)=>{const _=s.style.light,S=_.properties.get("position"),O=[S.x,S.y,S.z],j=function(){var W=new a.A(9);return a.A!=Float32Array&&(W[1]=0,W[2]=0,W[3]=0,W[5]=0,W[6]=0,W[7]=0),W[0]=1,W[4]=1,W[8]=1,W}();_.properties.get("anchor")==="viewport"&&function(W,Q){var J=Math.sin(Q),ae=Math.cos(Q);W[0]=ae,W[1]=J,W[2]=0,W[3]=-J,W[4]=ae,W[5]=0,W[6]=0,W[7]=0,W[8]=1}(j,-s.transform.angle),function(W,Q,J){var ae=Q[0],ye=Q[1],xe=Q[2];W[0]=ae*J[0]+ye*J[3]+xe*J[6],W[1]=ae*J[1]+ye*J[4]+xe*J[7],W[2]=ae*J[2]+ye*J[5]+xe*J[8]}(O,O,j);const B=_.properties.get("color");return{u_matrix:E,u_lightpos:O,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+f,u_opacity:v}},Oo=(E,s,f,v,_,S,O)=>a.e(Ia(E,s,f,v),Qo(S,s,O),{u_height_factor:-Math.pow(2,_.overscaledZ)/O.tileSize/8}),Do=E=>({u_matrix:E}),Ra=(E,s,f,v)=>a.e(Do(E),Qo(f,s,v)),Sc=(E,s)=>({u_matrix:E,u_world:s}),Ll=(E,s,f,v,_)=>a.e(Ra(E,s,f,v),{u_world:_}),Ec=(E,s,f,v)=>{const _=E.transform;let S,O;if(v.paint.get("circle-pitch-alignment")==="map"){const j=zt(f,1,_.zoom);S=!0,O=[j,j]}else S=!1,O=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(s.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:O}},cs=(E,s,f)=>({u_matrix:E,u_inv_matrix:s,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}),sl=(E,s,f=1)=>({u_matrix:E,u_color:s,u_overlay:0,u_overlay_scale:f}),ns=E=>({u_matrix:E}),rs=(E,s,f,v)=>({u_matrix:E,u_extrude_scale:zt(s,1,f),u_intensity:v}),nr=(E,s,f,v)=>{const _=a.H();a.aP(_,0,E.width,E.height,0,0,1);const S=E.context.gl;return{u_matrix:_,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:f,u_color_ramp:v,u_opacity:s.paint.get("heatmap-opacity")}};function Is(E,s){const f=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new a.Z(0,v/f).toLngLat().lat,new a.Z(0,(v+1)/f).toLngLat().lat]}const jr=(E,s,f,v)=>{const _=E.transform;return{u_matrix:ea(E,s,f,v),u_ratio:1/zt(s,1,_.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ml=(E,s,f,v,_)=>a.e(jr(E,s,f,_),{u_image:0,u_image_height:v}),Jo=(E,s,f,v,_)=>{const S=E.transform,O=go(s,S);return{u_matrix:ea(E,s,f,_),u_texsize:s.imageAtlasTexture.size,u_ratio:1/zt(s,1,S.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[O,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},vu=(E,s,f,v,_,S)=>{const O=E.lineAtlas,j=go(s,E.transform),B=f.layout.get("line-cap")==="round",W=O.getDash(v.from,B),Q=O.getDash(v.to,B),J=W.width*_.fromScale,ae=Q.width*_.toScale;return a.e(jr(E,s,f,S),{u_patternscale_a:[j/J,-W.height/2],u_patternscale_b:[j/ae,-Q.height/2],u_sdfgamma:O.width/(256*Math.min(J,ae)*E.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:Q.y,u_mix:_.t})};function go(E,s){return 1/zt(E,1,s.tileZoom)}function ea(E,s,f,v){return E.translatePosMatrix(v?v.posMatrix:s.tileID.posMatrix,s,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const _u=(E,s,f,v,_)=>{return{u_matrix:E,u_tl_parent:s,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(O=_.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(S=_.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:Ol(_.paint.get("raster-hue-rotate"))};var S,O};function Ol(E){E*=Math.PI/180;const s=Math.sin(E),f=Math.cos(E);return[(2*f+1)/3,(-Math.sqrt(3)*s-f+1)/3,(Math.sqrt(3)*s-f+1)/3]}const Di=(E,s,f,v,_,S,O,j,B,W,Q,J,ae,ye)=>{const xe=O.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:xe.cameraToCenterDistance,u_pitch:xe.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:xe.width/xe.height,u_fade_change:O.options.fadeDuration?O.symbolFadeChange:1,u_matrix:j,u_label_plane_matrix:B,u_coord_matrix:W,u_is_text:+J,u_pitch_with_map:+v,u_is_along_line:_,u_is_variable_anchor:S,u_texsize:ae,u_texture:0,u_translation:Q,u_pitched_scale:ye}},Xr=(E,s,f,v,_,S,O,j,B,W,Q,J,ae,ye,xe)=>{const Pe=O.transform;return a.e(Di(E,s,f,v,_,S,O,j,B,W,Q,J,ae,xe),{u_gamma_scale:v?Math.cos(Pe._pitch)*Pe.cameraToCenterDistance:1,u_device_pixel_ratio:O.pixelRatio,u_is_halo:1})},Y=(E,s,f,v,_,S,O,j,B,W,Q,J,ae,ye)=>a.e(Xr(E,s,f,v,_,S,O,j,B,W,Q,!0,J,!0,ye),{u_texsize_icon:ae,u_texture_icon:1}),he=(E,s,f)=>({u_matrix:E,u_opacity:s,u_color:f}),_e=(E,s,f,v,_,S)=>a.e(function(O,j,B,W){const Q=B.imageManager.getPattern(O.from.toString()),J=B.imageManager.getPattern(O.to.toString()),{width:ae,height:ye}=B.imageManager.getPixelSize(),xe=Math.pow(2,W.tileID.overscaledZ),Pe=W.tileSize*Math.pow(2,B.transform.tileZoom)/xe,Oe=Pe*(W.tileID.canonical.x+W.tileID.wrap*xe),Ne=Pe*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[ae,ye],u_mix:j.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/zt(W,1,B.transform.tileZoom),u_pixel_coord_upper:[Oe>>16,Ne>>16],u_pixel_coord_lower:[65535&Oe,65535&Ne]}}(v,S,f,_),{u_matrix:E,u_opacity:s}),ge={fillExtrusion:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_lightpos:new a.aN(E,s.u_lightpos),u_lightintensity:new a.aI(E,s.u_lightintensity),u_lightcolor:new a.aN(E,s.u_lightcolor),u_vertical_gradient:new a.aI(E,s.u_vertical_gradient),u_opacity:new a.aI(E,s.u_opacity)}),fillExtrusionPattern:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_lightpos:new a.aN(E,s.u_lightpos),u_lightintensity:new a.aI(E,s.u_lightintensity),u_lightcolor:new a.aN(E,s.u_lightcolor),u_vertical_gradient:new a.aI(E,s.u_vertical_gradient),u_height_factor:new a.aI(E,s.u_height_factor),u_image:new a.aH(E,s.u_image),u_texsize:new a.aO(E,s.u_texsize),u_pixel_coord_upper:new a.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,s.u_pixel_coord_lower),u_scale:new a.aN(E,s.u_scale),u_fade:new a.aI(E,s.u_fade),u_opacity:new a.aI(E,s.u_opacity)}),fill:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix)}),fillPattern:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_image:new a.aH(E,s.u_image),u_texsize:new a.aO(E,s.u_texsize),u_pixel_coord_upper:new a.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,s.u_pixel_coord_lower),u_scale:new a.aN(E,s.u_scale),u_fade:new a.aI(E,s.u_fade)}),fillOutline:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_world:new a.aO(E,s.u_world)}),fillOutlinePattern:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_world:new a.aO(E,s.u_world),u_image:new a.aH(E,s.u_image),u_texsize:new a.aO(E,s.u_texsize),u_pixel_coord_upper:new a.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,s.u_pixel_coord_lower),u_scale:new a.aN(E,s.u_scale),u_fade:new a.aI(E,s.u_fade)}),circle:(E,s)=>({u_camera_to_center_distance:new a.aI(E,s.u_camera_to_center_distance),u_scale_with_map:new a.aH(E,s.u_scale_with_map),u_pitch_with_map:new a.aH(E,s.u_pitch_with_map),u_extrude_scale:new a.aO(E,s.u_extrude_scale),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_matrix:new a.aJ(E,s.u_matrix)}),collisionBox:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_pixel_extrude_scale:new a.aO(E,s.u_pixel_extrude_scale)}),collisionCircle:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_inv_matrix:new a.aJ(E,s.u_inv_matrix),u_camera_to_center_distance:new a.aI(E,s.u_camera_to_center_distance),u_viewport_size:new a.aO(E,s.u_viewport_size)}),debug:(E,s)=>({u_color:new a.aL(E,s.u_color),u_matrix:new a.aJ(E,s.u_matrix),u_overlay:new a.aH(E,s.u_overlay),u_overlay_scale:new a.aI(E,s.u_overlay_scale)}),clippingMask:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix)}),heatmap:(E,s)=>({u_extrude_scale:new a.aI(E,s.u_extrude_scale),u_intensity:new a.aI(E,s.u_intensity),u_matrix:new a.aJ(E,s.u_matrix)}),heatmapTexture:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_world:new a.aO(E,s.u_world),u_image:new a.aH(E,s.u_image),u_color_ramp:new a.aH(E,s.u_color_ramp),u_opacity:new a.aI(E,s.u_opacity)}),hillshade:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_image:new a.aH(E,s.u_image),u_latrange:new a.aO(E,s.u_latrange),u_light:new a.aO(E,s.u_light),u_shadow:new a.aL(E,s.u_shadow),u_highlight:new a.aL(E,s.u_highlight),u_accent:new a.aL(E,s.u_accent)}),hillshadePrepare:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_image:new a.aH(E,s.u_image),u_dimension:new a.aO(E,s.u_dimension),u_zoom:new a.aI(E,s.u_zoom),u_unpack:new a.aK(E,s.u_unpack)}),line:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_ratio:new a.aI(E,s.u_ratio),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,s.u_units_to_pixels)}),lineGradient:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_ratio:new a.aI(E,s.u_ratio),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,s.u_units_to_pixels),u_image:new a.aH(E,s.u_image),u_image_height:new a.aI(E,s.u_image_height)}),linePattern:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_texsize:new a.aO(E,s.u_texsize),u_ratio:new a.aI(E,s.u_ratio),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_image:new a.aH(E,s.u_image),u_units_to_pixels:new a.aO(E,s.u_units_to_pixels),u_scale:new a.aN(E,s.u_scale),u_fade:new a.aI(E,s.u_fade)}),lineSDF:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_ratio:new a.aI(E,s.u_ratio),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,s.u_units_to_pixels),u_patternscale_a:new a.aO(E,s.u_patternscale_a),u_patternscale_b:new a.aO(E,s.u_patternscale_b),u_sdfgamma:new a.aI(E,s.u_sdfgamma),u_image:new a.aH(E,s.u_image),u_tex_y_a:new a.aI(E,s.u_tex_y_a),u_tex_y_b:new a.aI(E,s.u_tex_y_b),u_mix:new a.aI(E,s.u_mix)}),raster:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_tl_parent:new a.aO(E,s.u_tl_parent),u_scale_parent:new a.aI(E,s.u_scale_parent),u_buffer_scale:new a.aI(E,s.u_buffer_scale),u_fade_t:new a.aI(E,s.u_fade_t),u_opacity:new a.aI(E,s.u_opacity),u_image0:new a.aH(E,s.u_image0),u_image1:new a.aH(E,s.u_image1),u_brightness_low:new a.aI(E,s.u_brightness_low),u_brightness_high:new a.aI(E,s.u_brightness_high),u_saturation_factor:new a.aI(E,s.u_saturation_factor),u_contrast_factor:new a.aI(E,s.u_contrast_factor),u_spin_weights:new a.aN(E,s.u_spin_weights)}),symbolIcon:(E,s)=>({u_is_size_zoom_constant:new a.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,s.u_is_size_feature_constant),u_size_t:new a.aI(E,s.u_size_t),u_size:new a.aI(E,s.u_size),u_camera_to_center_distance:new a.aI(E,s.u_camera_to_center_distance),u_pitch:new a.aI(E,s.u_pitch),u_rotate_symbol:new a.aH(E,s.u_rotate_symbol),u_aspect_ratio:new a.aI(E,s.u_aspect_ratio),u_fade_change:new a.aI(E,s.u_fade_change),u_matrix:new a.aJ(E,s.u_matrix),u_label_plane_matrix:new a.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,s.u_coord_matrix),u_is_text:new a.aH(E,s.u_is_text),u_pitch_with_map:new a.aH(E,s.u_pitch_with_map),u_is_along_line:new a.aH(E,s.u_is_along_line),u_is_variable_anchor:new a.aH(E,s.u_is_variable_anchor),u_texsize:new a.aO(E,s.u_texsize),u_texture:new a.aH(E,s.u_texture),u_translation:new a.aO(E,s.u_translation),u_pitched_scale:new a.aI(E,s.u_pitched_scale)}),symbolSDF:(E,s)=>({u_is_size_zoom_constant:new a.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,s.u_is_size_feature_constant),u_size_t:new a.aI(E,s.u_size_t),u_size:new a.aI(E,s.u_size),u_camera_to_center_distance:new a.aI(E,s.u_camera_to_center_distance),u_pitch:new a.aI(E,s.u_pitch),u_rotate_symbol:new a.aH(E,s.u_rotate_symbol),u_aspect_ratio:new a.aI(E,s.u_aspect_ratio),u_fade_change:new a.aI(E,s.u_fade_change),u_matrix:new a.aJ(E,s.u_matrix),u_label_plane_matrix:new a.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,s.u_coord_matrix),u_is_text:new a.aH(E,s.u_is_text),u_pitch_with_map:new a.aH(E,s.u_pitch_with_map),u_is_along_line:new a.aH(E,s.u_is_along_line),u_is_variable_anchor:new a.aH(E,s.u_is_variable_anchor),u_texsize:new a.aO(E,s.u_texsize),u_texture:new a.aH(E,s.u_texture),u_gamma_scale:new a.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_is_halo:new a.aH(E,s.u_is_halo),u_translation:new a.aO(E,s.u_translation),u_pitched_scale:new a.aI(E,s.u_pitched_scale)}),symbolTextAndIcon:(E,s)=>({u_is_size_zoom_constant:new a.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,s.u_is_size_feature_constant),u_size_t:new a.aI(E,s.u_size_t),u_size:new a.aI(E,s.u_size),u_camera_to_center_distance:new a.aI(E,s.u_camera_to_center_distance),u_pitch:new a.aI(E,s.u_pitch),u_rotate_symbol:new a.aH(E,s.u_rotate_symbol),u_aspect_ratio:new a.aI(E,s.u_aspect_ratio),u_fade_change:new a.aI(E,s.u_fade_change),u_matrix:new a.aJ(E,s.u_matrix),u_label_plane_matrix:new a.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,s.u_coord_matrix),u_is_text:new a.aH(E,s.u_is_text),u_pitch_with_map:new a.aH(E,s.u_pitch_with_map),u_is_along_line:new a.aH(E,s.u_is_along_line),u_is_variable_anchor:new a.aH(E,s.u_is_variable_anchor),u_texsize:new a.aO(E,s.u_texsize),u_texsize_icon:new a.aO(E,s.u_texsize_icon),u_texture:new a.aH(E,s.u_texture),u_texture_icon:new a.aH(E,s.u_texture_icon),u_gamma_scale:new a.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new a.aI(E,s.u_device_pixel_ratio),u_is_halo:new a.aH(E,s.u_is_halo),u_translation:new a.aO(E,s.u_translation),u_pitched_scale:new a.aI(E,s.u_pitched_scale)}),background:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_opacity:new a.aI(E,s.u_opacity),u_color:new a.aL(E,s.u_color)}),backgroundPattern:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_opacity:new a.aI(E,s.u_opacity),u_image:new a.aH(E,s.u_image),u_pattern_tl_a:new a.aO(E,s.u_pattern_tl_a),u_pattern_br_a:new a.aO(E,s.u_pattern_br_a),u_pattern_tl_b:new a.aO(E,s.u_pattern_tl_b),u_pattern_br_b:new a.aO(E,s.u_pattern_br_b),u_texsize:new a.aO(E,s.u_texsize),u_mix:new a.aI(E,s.u_mix),u_pattern_size_a:new a.aO(E,s.u_pattern_size_a),u_pattern_size_b:new a.aO(E,s.u_pattern_size_b),u_scale_a:new a.aI(E,s.u_scale_a),u_scale_b:new a.aI(E,s.u_scale_b),u_pixel_coord_upper:new a.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(E,s.u_tile_units_to_pixels)}),terrain:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_texture:new a.aH(E,s.u_texture),u_ele_delta:new a.aI(E,s.u_ele_delta),u_fog_matrix:new a.aJ(E,s.u_fog_matrix),u_fog_color:new a.aL(E,s.u_fog_color),u_fog_ground_blend:new a.aI(E,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(E,s.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(E,s.u_horizon_color),u_horizon_fog_blend:new a.aI(E,s.u_horizon_fog_blend)}),terrainDepth:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_ele_delta:new a.aI(E,s.u_ele_delta)}),terrainCoords:(E,s)=>({u_matrix:new a.aJ(E,s.u_matrix),u_texture:new a.aH(E,s.u_texture),u_terrain_coords_id:new a.aI(E,s.u_terrain_coords_id),u_ele_delta:new a.aI(E,s.u_ele_delta)}),sky:(E,s)=>({u_sky_color:new a.aL(E,s.u_sky_color),u_horizon_color:new a.aL(E,s.u_horizon_color),u_horizon:new a.aI(E,s.u_horizon),u_sky_horizon_blend:new a.aI(E,s.u_sky_horizon_blend)})};class ze{constructor(s,f,v){this.context=s;const _=s.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const st={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dt{constructor(s,f,v,_){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=_,this.context=s;const S=s.gl;this.buffer=S.createBuffer(),s.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,f){for(let v=0;v<this.attributes.length;v++){const _=f.attributes[this.attributes[v].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,f,v){for(let _=0;_<this.attributes.length;_++){const S=this.attributes[_],O=f.attributes[S.name];O!==void 0&&s.vertexAttribPointer(O,S.components,s[st[S.type]],!1,this.itemSize,S.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vt=new WeakMap;function Ct(E){var s;if(vt.has(E))return vt.get(E);{const f=(s=E.getParameter(E.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return vt.set(E,f),f}}class Rt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jt extends Rt{getDefault(){return a.aM.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Bn extends Rt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Wt extends Rt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class rr extends Rt{getDefault(){return[!0,!0,!0,!0]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Tr extends Rt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class ai extends Rt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Zn extends Rt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const f=this.current;(s.func!==f.func||s.ref!==f.ref||s.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class gr extends Rt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class vi extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=s,this.dirty=!1}}class Ti extends Rt{getDefault(){return[0,1]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Jr extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=s,this.dirty=!1}}class is extends Rt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class zs extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.BLEND):f.disable(f.BLEND),this.current=s,this.dirty=!1}}class eo extends Rt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class bd extends Rt{getDefault(){return a.aM.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class sf extends Rt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Dl extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=s,this.dirty=!1}}class Og extends Rt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class xu extends Rt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Op extends Rt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Dg extends Rt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Dp extends Rt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class wd extends Rt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Np extends Rt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Sd extends Rt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class of extends Rt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Nl extends Rt{getDefault(){return null}set(s){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Rs extends Rt{getDefault(){return null}set(s){var f;if(s===this.current&&!this.dirty)return;const v=this.gl;Ct(v)?v.bindVertexArray(s):(f=v.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class af extends Rt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class jl extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Fs extends Rt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class bu extends Rt{constructor(s,f){super(s),this.context=s,this.parent=f}getDefault(){return null}}class Ed extends bu{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class zl extends bu{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class wu extends bu{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class lf{constructor(s,f,v,_,S){this.context=s,this.width=f,this.height=v;const O=s.gl,j=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new Ed(s,j),_)this.depthAttachment=S?new wu(s,j):new zl(s,j);else if(S)throw new Error("Stencil cannot be set without depth");if(O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,f=this.colorAttachment.get();if(f&&s.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class _i{constructor(s,f,v){this.blendFunction=s,this.blendColor=f,this.mask=v}}_i.Replace=[1,0],_i.disabled=new _i(_i.Replace,a.aM.transparent,[!1,!1,!1,!1]),_i.unblended=new _i(_i.Replace,a.aM.transparent,[!0,!0,!0,!0]),_i.alphaBlended=new _i([1,771],a.aM.transparent,[!0,!0,!0,!0]);class Ng{constructor(s){var f,v;if(this.gl=s,this.clearColor=new Jt(this),this.clearDepth=new Bn(this),this.clearStencil=new Wt(this),this.colorMask=new rr(this),this.depthMask=new Tr(this),this.stencilMask=new ai(this),this.stencilFunc=new Zn(this),this.stencilOp=new gr(this),this.stencilTest=new vi(this),this.depthRange=new Ti(this),this.depthTest=new Jr(this),this.depthFunc=new is(this),this.blend=new zs(this),this.blendFunc=new eo(this),this.blendColor=new bd(this),this.blendEquation=new sf(this),this.cullFace=new Dl(this),this.cullFaceSide=new Og(this),this.frontFace=new xu(this),this.program=new Op(this),this.activeTexture=new Dg(this),this.viewport=new Dp(this),this.bindFramebuffer=new wd(this),this.bindRenderbuffer=new Np(this),this.bindTexture=new Sd(this),this.bindVertexBuffer=new of(this),this.bindElementBuffer=new Nl(this),this.bindVertexArray=new Rs(this),this.pixelStoreUnpack=new af(this),this.pixelStoreUnpackPremultiplyAlpha=new jl(this),this.pixelStoreUnpackFlipY=new Fs(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Ct(s)){this.HALF_FLOAT=s.HALF_FLOAT;const _=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=s.RGBA16F)!==null&&f!==void 0?f:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(v=s.RGB16F)!==null&&v!==void 0?v:_==null?void 0:_.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const _=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,f){return new ze(this,s,f)}createVertexBuffer(s,f,v){return new dt(this,s,f,v)}createRenderbuffer(s,f,v){const _=this.gl,S=_.createRenderbuffer();return this.bindRenderbuffer.set(S),_.renderbufferStorage(_.RENDERBUFFER,s,f,v),this.bindRenderbuffer.set(null),S}createFramebuffer(s,f,v,_){return new lf(this,s,f,v,_)}clear({color:s,depth:f,stencil:v}){const _=this.gl;let S=0;s&&(S|=_.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(S|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v!==void 0&&(S|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),_.clear(S)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.aE(s.blendFunction,_i.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Ct(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var f;return Ct(this.gl)?this.gl.deleteVertexArray(s):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class dr{constructor(s,f,v){this.func=s,this.mask=f,this.range=v}}dr.ReadOnly=!1,dr.ReadWrite=!0,dr.disabled=new dr(519,dr.ReadOnly,[0,1]);const Cd=7680;class Er{constructor(s,f,v,_,S,O){this.test=s,this.ref=f,this.mask=v,this.fail=_,this.depthFail=S,this.pass=O}}Er.disabled=new Er({func:519,mask:0},0,0,Cd,Cd,Cd);class Lr{constructor(s,f,v){this.enable=s,this.mode=f,this.frontFace=v}}let Fl;function to(E,s,f,v,_){const S=E.context,O=S.gl,j=E.useProgram("collisionBox"),B=[];let W=0,Q=0;for(let Ne=0;Ne<v.length;Ne++){const $e=v[Ne],ke=s.getTile($e).getBucket(f);if(!ke)continue;const We=_?ke.textCollisionBox:ke.iconCollisionBox,et=ke.collisionCircleArray;if(et.length>0){const at=a.H();a.aQ(at,ke.placementInvProjMatrix,E.transform.glCoordMatrix),a.aQ(at,at,ke.placementViewportMatrix),B.push({circleArray:et,circleOffset:Q,transform:$e.posMatrix,invTransform:at,coord:$e}),W+=et.length/4,Q=W}We&&j.draw(S,O.LINES,dr.disabled,Er.disabled,E.colorModeForRenderPass(),Lr.disabled,{u_matrix:$e.posMatrix,u_pixel_extrude_scale:[1/(J=E.transform).width,1/J.height]},E.style.map.terrain&&E.style.map.terrain.getTerrainData($e),f.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,null,E.transform.zoom,null,null,We.collisionVertexBuffer)}var J;if(!_||!B.length)return;const ae=E.useProgram("collisionCircle"),ye=new a.aR;ye.resize(4*W),ye._trim();let xe=0;for(const Ne of B)for(let $e=0;$e<Ne.circleArray.length/4;$e++){const ke=4*$e,We=Ne.circleArray[ke+0],et=Ne.circleArray[ke+1],at=Ne.circleArray[ke+2],Tt=Ne.circleArray[ke+3];ye.emplace(xe++,We,et,at,Tt,0),ye.emplace(xe++,We,et,at,Tt,1),ye.emplace(xe++,We,et,at,Tt,2),ye.emplace(xe++,We,et,at,Tt,3)}(!Fl||Fl.length<2*W)&&(Fl=function(Ne){const $e=2*Ne,ke=new a.aT;ke.resize($e),ke._trim();for(let We=0;We<$e;We++){const et=6*We;ke.uint16[et+0]=4*We+0,ke.uint16[et+1]=4*We+1,ke.uint16[et+2]=4*We+2,ke.uint16[et+3]=4*We+2,ke.uint16[et+4]=4*We+3,ke.uint16[et+5]=4*We+0}return ke}(W));const Pe=S.createIndexBuffer(Fl,!0),Oe=S.createVertexBuffer(ye,a.aS.members,!0);for(const Ne of B){const $e=cs(Ne.transform,Ne.invTransform,E.transform);ae.draw(S,O.TRIANGLES,dr.disabled,Er.disabled,E.colorModeForRenderPass(),Lr.disabled,$e,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ne.coord),f.id,Oe,Pe,a.a0.simpleSegment(0,2*Ne.circleOffset,Ne.circleArray.length,Ne.circleArray.length/2),null,E.transform.zoom,null,null,null)}Oe.destroy(),Pe.destroy()}Lr.disabled=new Lr(!1,1029,2305),Lr.backCCW=new Lr(!0,1029,2305);const Su=a.an(new Float32Array(16));function ol(E,s,f,v,_,S){const{horizontalAlign:O,verticalAlign:j}=a.au(E);return new a.P((-(O-.5)*s/_+v[0])*S,(-(j-.5)*f/_+v[1])*S)}function Bl(E,s,f,v,_,S){const O=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let j=v.mult(S);f||(j=j.rotate(-_));const B=O.add(j);return Ae(B.x,B.y,s.labelPlaneMatrix,s.getElevation).point}if(f){const j=ve(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(E),B=Math.atan(j.y/j.x)+(j.x<0?Math.PI:0);return E.add(v.rotate(B))}return E.add(v)}function ta(E,s,f,v,_,S,O,j,B,W,Q,J,ae,ye){const xe=E.text.placedSymbolArray,Pe=E.text.dynamicLayoutVertexArray,Oe=E.icon.dynamicLayoutVertexArray,Ne={};Pe.clear();for(let $e=0;$e<xe.length;$e++){const ke=xe.get($e),We=ke.hidden||!ke.crossTileID||E.allowVerticalPlacement&&!ke.placedOrientation?null:v[ke.crossTileID];if(We){const et=new a.P(ke.anchorX,ke.anchorY),at={getElevation:ye,width:_.width,height:_.height,labelPlaneMatrix:S,pitchWithMap:f,projection:Q,tileAnchorPoint:et,translation:J,unwrappedTileID:ae},Tt=f?Ae(et.x,et.y,O,ye):ve(et.x,et.y,at),Ft=se(_.cameraToCenterDistance,Tt.signedDistanceFromCamera);let Yt=a.ai(E.textSizeData,B,ke)*Ft/a.ap;f&&(Yt*=E.tilePixelRatio/j);const{width:un,height:Gt,anchor:Zt,textOffset:Pn,textBoxScale:tr}=We,Xt=ol(Zt,un,Gt,Pn,tr,Yt),rn=Q.getPitchedTextCorrection(_,et.add(new a.P(J[0],J[1])),ae),Yn=Bl(Tt.point,at,s,Xt,_.angle,rn),ci=E.allowVerticalPlacement&&ke.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let hr=0;hr<ke.numGlyphs;hr++)a.aj(Pe,Yn,ci);W&&ke.associatedIconIndex>=0&&(Ne[ke.associatedIconIndex]={shiftedAnchor:Yn,angle:ci})}else At(ke.numGlyphs,Pe)}if(W){Oe.clear();const $e=E.icon.placedSymbolArray;for(let ke=0;ke<$e.length;ke++){const We=$e.get(ke);if(We.hidden)At(We.numGlyphs,Oe);else{const et=Ne[ke];if(et)for(let at=0;at<We.numGlyphs;at++)a.aj(Oe,et.shiftedAnchor,et.angle);else At(We.numGlyphs,Oe)}}E.icon.dynamicLayoutVertexBuffer.updateData(Oe)}E.text.dynamicLayoutVertexBuffer.updateData(Pe)}function no(E,s,f){return f.iconsInText&&s?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Cc(E,s,f,v,_,S,O,j,B,W,Q,J){const ae=E.context,ye=ae.gl,xe=E.transform,Pe=Mi(),Oe=j==="map",Ne=B==="map",$e=j!=="viewport"&&f.layout.get("symbol-placement")!=="point",ke=Oe&&!Ne&&!$e,We=!Ne&&$e,et=!f.layout.get("symbol-sort-key").isConstant();let at=!1;const Tt=E.depthModeForSublayer(0,dr.ReadOnly),Ft=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Yt=[],un=Pe.getCircleRadiusCorrection(xe);for(const Gt of v){const Zt=s.getTile(Gt),Pn=Zt.getBucket(f);if(!Pn)continue;const tr=_?Pn.text:Pn.icon;if(!tr||!tr.segments.get().length||!tr.hasVisibleVertices)continue;const Xt=tr.programConfigurations.get(f.id),rn=_||Pn.sdfIcons,Yn=_?Pn.textSizeData:Pn.iconSizeData,ci=Ne||xe.pitch!==0,hr=E.useProgram(no(rn,_,Pn),Xt),Cr=a.ag(Yn,xe.zoom),ui=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Gt);let $s,Ma,di,vo,io=[0,0],Vs=null;if(_)Ma=Zt.glyphAtlasTexture,di=ye.LINEAR,$s=Zt.glyphAtlasTexture.size,Pn.iconsInText&&(io=Zt.imageAtlasTexture.size,Vs=Zt.imageAtlasTexture,vo=ci||E.options.rotating||E.options.zooming||Yn.kind==="composite"||Yn.kind==="camera"?ye.LINEAR:ye.NEAREST);else{const kr=f.layout.get("icon-size").constantOr(0)!==1||Pn.iconsNeedLinear;Ma=Zt.imageAtlasTexture,di=rn||E.options.rotating||E.options.zooming||kr||ci?ye.LINEAR:ye.NEAREST,$s=Zt.imageAtlasTexture.size}const so=zt(Zt,1,E.transform.zoom),ul=We?Gt.posMatrix:Su,Fd=es(ul,Ne,Oe,E.transform,so),Vp=ts(ul,Ne,Oe,E.transform,so),Bd=ts(Gt.posMatrix,Ne,Oe,E.transform,so),la=Pe.translatePosition(E.transform,Zt,S,O),Hp=Ft&&Pn.hasTextData(),$g=f.layout.get("icon-text-fit")!=="none"&&Hp&&Pn.hasIconData();if($e){const kr=E.style.map.terrain?(Ud,$d)=>E.style.map.terrain.getElevation(Gt,Ud,$d):null,Iu=f.layout.get("text-rotation-alignment")==="map";pe(Pn,Gt.posMatrix,E,_,Fd,Bd,Ne,W,Iu,Pe,Gt.toUnwrapped(),xe.width,xe.height,la,kr)}const ca=Gt.posMatrix,ua=_&&Ft||$g,jc=$e||ua?Su:Fd,Oa=Vp,Ls=rn&&f.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Hs;Hs=rn?Pn.iconsInText?Y(Yn.kind,Cr,ke,Ne,$e,ua,E,ca,jc,Oa,la,$s,io,un):Xr(Yn.kind,Cr,ke,Ne,$e,ua,E,ca,jc,Oa,la,_,$s,!0,un):Di(Yn.kind,Cr,ke,Ne,$e,ua,E,ca,jc,Oa,la,_,$s,un);const zo={program:hr,buffers:tr,uniformValues:Hs,atlasTexture:Ma,atlasTextureIcon:Vs,atlasInterpolation:di,atlasInterpolationIcon:vo,isSDF:rn,hasHalo:Ls};if(et&&Pn.canOverlap){at=!0;const kr=tr.segments.get();for(const Iu of kr)Yt.push({segments:new a.a0([Iu]),sortKey:Iu.sortKey,state:zo,terrainData:ui})}else Yt.push({segments:tr.segments,sortKey:0,state:zo,terrainData:ui})}at&&Yt.sort((Gt,Zt)=>Gt.sortKey-Zt.sortKey);for(const Gt of Yt){const Zt=Gt.state;if(ae.activeTexture.set(ye.TEXTURE0),Zt.atlasTexture.bind(Zt.atlasInterpolation,ye.CLAMP_TO_EDGE),Zt.atlasTextureIcon&&(ae.activeTexture.set(ye.TEXTURE1),Zt.atlasTextureIcon&&Zt.atlasTextureIcon.bind(Zt.atlasInterpolationIcon,ye.CLAMP_TO_EDGE)),Zt.isSDF){const Pn=Zt.uniformValues;Zt.hasHalo&&(Pn.u_is_halo=1,cf(Zt.buffers,Gt.segments,f,E,Zt.program,Tt,Q,J,Pn,Gt.terrainData)),Pn.u_is_halo=0}cf(Zt.buffers,Gt.segments,f,E,Zt.program,Tt,Q,J,Zt.uniformValues,Gt.terrainData)}}function cf(E,s,f,v,_,S,O,j,B,W){const Q=v.context;_.draw(Q,Q.gl.TRIANGLES,S,O,j,Lr.disabled,B,W,f.id,E.layoutVertexBuffer,E.indexBuffer,s,f.paint,v.transform.zoom,E.programConfigurations.get(f.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function na(E,s,f,v){const _=E.context,S=_.gl,O=Er.disabled,j=new _i([S.ONE,S.ONE],a.aM.transparent,[!0,!0,!0,!0]),B=s.getBucket(f);if(!B)return;const W=v.key;let Q=f.heatmapFbos.get(W);Q||(Q=Eu(_,s.tileSize,s.tileSize),f.heatmapFbos.set(W,Q)),_.bindFramebuffer.set(Q.framebuffer),_.viewport.set([0,0,s.tileSize,s.tileSize]),_.clear({color:a.aM.transparent});const J=B.programConfigurations.get(f.id),ae=E.useProgram("heatmap",J),ye=E.style.map.terrain.getTerrainData(v);ae.draw(_,S.TRIANGLES,dr.disabled,O,j,Lr.disabled,rs(v.posMatrix,s,E.transform.zoom,f.paint.get("heatmap-intensity")),ye,f.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,f.paint,E.transform.zoom,J)}function ra(E,s,f){const v=E.context,_=v.gl;v.setColorMode(E.colorModeForRenderPass());const S=Ul(v,s),O=f.key,j=s.heatmapFbos.get(O);j&&(v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,j.colorAttachment.get()),v.activeTexture.set(_.TEXTURE1),S.bind(_.LINEAR,_.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(v,_.TRIANGLES,dr.disabled,Er.disabled,E.colorModeForRenderPass(),Lr.disabled,nr(E,s,0,1),null,s.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments,s.paint,E.transform.zoom),j.destroy(),s.heatmapFbos.delete(O))}function Eu(E,s,f){var v,_;const S=E.gl,O=S.createTexture();S.bindTexture(S.TEXTURE_2D,O),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const j=(v=E.HALF_FLOAT)!==null&&v!==void 0?v:S.UNSIGNED_BYTE,B=(_=E.RGBA16F)!==null&&_!==void 0?_:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,B,s,f,0,S.RGBA,j,null);const W=E.createFramebuffer(s,f,!1,!1);return W.colorAttachment.set(O),W}function Ul(E,s){return s.colorRampTexture||(s.colorRampTexture=new Je(E,s.colorRamp,E.gl.RGBA)),s.colorRampTexture}function Tc(E,s,f,v,_){if(!f||!v||!v.imageAtlas)return;const S=v.imageAtlas.patternPositions;let O=S[f.to.toString()],j=S[f.from.toString()];if(!O&&j&&(O=j),!j&&O&&(j=O),!O||!j){const B=_.getPaintProperty(s);O=S[B],j=S[B]}O&&j&&E.setConstantPatternPositions(O,j)}function ro(E,s,f,v,_,S,O){const j=E.context.gl,B="fill-pattern",W=f.paint.get(B),Q=W&&W.constantOr(1),J=f.getCrossfadeParameters();let ae,ye,xe,Pe,Oe;O?(ye=Q&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=j.LINES):(ye=Q?"fillPattern":"fill",ae=j.TRIANGLES);const Ne=W.constantOr(null);for(const $e of v){const ke=s.getTile($e);if(Q&&!ke.patternsLoaded())continue;const We=ke.getBucket(f);if(!We)continue;const et=We.programConfigurations.get(f.id),at=E.useProgram(ye,et),Tt=E.style.map.terrain&&E.style.map.terrain.getTerrainData($e);Q&&(E.context.activeTexture.set(j.TEXTURE0),ke.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),et.updatePaintBuffers(J)),Tc(et,B,Ne,ke,f);const Ft=Tt?$e:null,Yt=E.translatePosMatrix(Ft?Ft.posMatrix:$e.posMatrix,ke,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(O){Pe=We.indexBuffer2,Oe=We.segments2;const un=[j.drawingBufferWidth,j.drawingBufferHeight];xe=ye==="fillOutlinePattern"&&Q?Ll(Yt,E,J,ke,un):Sc(Yt,un)}else Pe=We.indexBuffer,Oe=We.segments,xe=Q?Ra(Yt,E,J,ke):Do(Yt);at.draw(E.context,ae,_,E.stencilModeForClipping($e),S,Lr.disabled,xe,Tt,f.id,We.layoutVertexBuffer,Pe,Oe,f.paint,E.transform.zoom,et)}}function Td(E,s,f,v,_,S,O){const j=E.context,B=j.gl,W="fill-extrusion-pattern",Q=f.paint.get(W),J=Q.constantOr(1),ae=f.getCrossfadeParameters(),ye=f.paint.get("fill-extrusion-opacity"),xe=Q.constantOr(null);for(const Pe of v){const Oe=s.getTile(Pe),Ne=Oe.getBucket(f);if(!Ne)continue;const $e=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Pe),ke=Ne.programConfigurations.get(f.id),We=E.useProgram(J?"fillExtrusionPattern":"fillExtrusion",ke);J&&(E.context.activeTexture.set(B.TEXTURE0),Oe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ke.updatePaintBuffers(ae)),Tc(ke,W,xe,Oe,f);const et=E.translatePosMatrix(Pe.posMatrix,Oe,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),at=f.paint.get("fill-extrusion-vertical-gradient"),Tt=J?Oo(et,E,at,ye,Pe,ae,Oe):Ia(et,E,at,ye);We.draw(j,j.gl.TRIANGLES,_,S,O,Lr.backCCW,Tt,$e,f.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,f.paint,E.transform.zoom,ke,E.style.map.terrain&&Ne.centroidVertexBuffer)}}function No(E,s,f,v,_,S,O){const j=E.context,B=j.gl,W=f.fbo;if(!W)return;const Q=E.useProgram("hillshade"),J=E.style.map.terrain&&E.style.map.terrain.getTerrainData(s);j.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,W.colorAttachment.get()),Q.draw(j,B.TRIANGLES,_,S,O,Lr.disabled,((ae,ye,xe,Pe)=>{const Oe=xe.paint.get("hillshade-shadow-color"),Ne=xe.paint.get("hillshade-highlight-color"),$e=xe.paint.get("hillshade-accent-color");let ke=xe.paint.get("hillshade-illumination-direction")*(Math.PI/180);xe.paint.get("hillshade-illumination-anchor")==="viewport"&&(ke-=ae.transform.angle);const We=!ae.options.moving;return{u_matrix:Pe?Pe.posMatrix:ae.transform.calculatePosMatrix(ye.tileID.toUnwrapped(),We),u_image:0,u_latrange:Is(0,ye.tileID),u_light:[xe.paint.get("hillshade-exaggeration"),ke],u_shadow:Oe,u_highlight:Ne,u_accent:$e}})(E,f,v,J?s:null),J,v.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function kc(E,s,f,v,_,S){const O=E.context,j=O.gl,B=s.dem;if(B&&B.data){const W=B.dim,Q=B.stride,J=B.getPixels();if(O.activeTexture.set(j.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||E.getTileTexture(Q),s.demTexture){const ye=s.demTexture;ye.update(J,{premultiply:!1}),ye.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else s.demTexture=new Je(O,J,j.RGBA,{premultiply:!1}),s.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);O.activeTexture.set(j.TEXTURE0);let ae=s.fbo;if(!ae){const ye=new Je(O,{width:W,height:W,data:null},j.RGBA);ye.bind(j.LINEAR,j.CLAMP_TO_EDGE),ae=s.fbo=O.createFramebuffer(W,W,!0,!1),ae.colorAttachment.set(ye.texture)}O.bindFramebuffer.set(ae.framebuffer),O.viewport.set([0,0,W,W]),E.useProgram("hillshadePrepare").draw(O,j.TRIANGLES,v,_,S,Lr.disabled,((ye,xe)=>{const Pe=xe.stride,Oe=a.H();return a.aP(Oe,0,a.X,-a.X,0,0,1),a.J(Oe,Oe,[0,-a.X,0]),{u_matrix:Oe,u_image:1,u_dimension:[Pe,Pe],u_zoom:ye.overscaledZ,u_unpack:xe.getUnpackVector()}})(s.tileID,B),null,f.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function ia(E,s,f,v,_,S){const O=v.paint.get("raster-fade-duration");if(!S&&O>0){const j=C.now(),B=(j-E.timeAdded)/O,W=s?(j-s.timeAdded)/O:-1,Q=f.getSource(),J=_.coveringZoomLevel({tileSize:Q.tileSize,roundZoom:Q.roundZoom}),ae=!s||Math.abs(s.tileID.overscaledZ-J)>Math.abs(E.tileID.overscaledZ-J),ye=ae&&E.refreshedUponExpiration?1:a.ac(ae?B:1-W,0,1);return E.refreshedUponExpiration&&B>=1&&(E.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}const Pc=new a.aM(1,0,0,1),Rr=new a.aM(0,1,0,1),Ac=new a.aM(0,0,1,1),kd=new a.aM(1,0,1,1),Pd=new a.aM(0,1,1,1);function La(E,s,f,v){Vl(E,0,s+f/2,E.transform.width,f,v)}function $l(E,s,f,v){Vl(E,s-f/2,0,f,E.transform.height,v)}function Vl(E,s,f,v,_,S){const O=E.context,j=O.gl;j.enable(j.SCISSOR_TEST),j.scissor(s*E.pixelRatio,f*E.pixelRatio,v*E.pixelRatio,_*E.pixelRatio),O.clear({color:S}),j.disable(j.SCISSOR_TEST)}function Ad(E,s,f){const v=E.context,_=v.gl,S=f.posMatrix,O=E.useProgram("debug"),j=dr.disabled,B=Er.disabled,W=E.colorModeForRenderPass(),Q="$debug",J=E.style.map.terrain&&E.style.map.terrain.getTerrainData(f);v.activeTexture.set(_.TEXTURE0);const ae=s.getTileByID(f.key).latestRawTileData,ye=Math.floor((ae&&ae.byteLength||0)/1024),xe=s.getTile(f).tileSize,Pe=512/Math.min(xe,512)*(f.overscaledZ/E.transform.zoom)*.5;let Oe=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Oe+=` => ${f.overscaledZ}`),function(Ne,$e){Ne.initDebugOverlayCanvas();const ke=Ne.debugOverlayCanvas,We=Ne.context.gl,et=Ne.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,ke.width,ke.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText($e,5,5),et.strokeText($e,5,5),Ne.debugOverlayTexture.update(ke),Ne.debugOverlayTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE)}(E,`${Oe} ${ye}kB`),O.draw(v,_.TRIANGLES,j,B,_i.alphaBlended,Lr.disabled,sl(S,a.aM.transparent,Pe),null,Q,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),O.draw(v,_.LINE_STRIP,j,B,W,Lr.disabled,sl(S,a.aM.red),J,Q,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function uf(E,s,f){const v=E.context,_=v.gl,S=E.colorModeForRenderPass(),O=new dr(_.LEQUAL,dr.ReadWrite,E.depthRangeFor3D),j=E.useProgram("terrain"),B=s.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,E.width,E.height]);for(const W of f){const Q=E.renderToTexture.getTexture(W),J=s.getTerrainData(W.tileID);v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,Q.texture);const ae=E.transform.calculatePosMatrix(W.tileID.toUnwrapped()),ye=s.getMeshFrameDelta(E.transform.zoom),xe=E.transform.calculateFogMatrix(W.tileID.toUnwrapped()),Pe=Qr(ae,ye,xe,E.style.sky,E.transform.pitch);j.draw(v,_.TRIANGLES,O,Er.disabled,S,Lr.backCCW,Pe,J,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class Id{constructor(s,f,v){this.vertexBuffer=s,this.indexBuffer=f,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Hl{constructor(s,f){this.context=new Ng(s),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Sn.maxUnderzooming+Sn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new lr}resize(s,f,v){if(this.width=Math.floor(s*v),this.height=Math.floor(f*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const s=this.context,f=new a.aX;f.emplaceBack(0,0),f.emplaceBack(a.X,0),f.emplaceBack(0,a.X),f.emplaceBack(a.X,a.X),this.tileExtentBuffer=s.createVertexBuffer(f,Oi.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const v=new a.aX;v.emplaceBack(0,0),v.emplaceBack(a.X,0),v.emplaceBack(0,a.X),v.emplaceBack(a.X,a.X),this.debugBuffer=s.createVertexBuffer(v,Oi.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const _=new a.$;_.emplaceBack(0,0,0,0),_.emplaceBack(a.X,0,a.X,0),_.emplaceBack(0,a.X,0,a.X),_.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=s.createVertexBuffer(_,ft.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const S=new a.aX;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(S,Oi.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const O=new a.aZ;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(O);const j=new a.aY;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(j);const B=this.context.gl;this.stencilClearMode=new Er({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const s=this.context,f=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=a.H();a.aP(v,0,this.width,this.height,0,0,1),a.K(v,v,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,f.TRIANGLES,dr.disabled,this.stencilClearMode,_i.disabled,Lr.disabled,ns(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,f){if(this.currentStencilSource===s.source||!s.isTileClipped()||!f||!f.length)return;this.currentStencilSource=s.source;const v=this.context,_=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(_i.disabled),v.setDepthMode(dr.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of f){const j=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O);S.draw(v,_.TRIANGLES,dr.disabled,new Er({func:_.ALWAYS,mask:0},j,255,_.KEEP,_.KEEP,_.REPLACE),_i.disabled,Lr.disabled,ns(O.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,f=this.context.gl;return new Er({func:f.NOTEQUAL,mask:255},s,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(s){const f=this.context.gl;return new Er({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(s){const f=this.context.gl,v=s.sort((O,j)=>j.overscaledZ-O.overscaledZ),_=v[v.length-1].overscaledZ,S=v[0].overscaledZ-_+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const O={};for(let j=0;j<S;j++)O[j+_]=new Er({func:f.GEQUAL,mask:255},j+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=S,[O,v]}return[{[_]:Er.disabled},v]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new _i([s.CONSTANT_COLOR,s.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_i.unblended:_i.alphaBlended}depthModeForSublayer(s,f,v){if(!this.opaquePassEnabledForLayer())return dr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new dr(v||this.context.gl.LEQUAL,f,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,f){this.style=s,this.options=f,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const v=this.style._order,_=this.style.sourceCaches,S={},O={},j={};for(const B in _){const W=_[B];W.used&&W.prepare(this.context),S[B]=W.getVisibleCoordinates(),O[B]=S[B].slice().reverse(),j[B]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<v.length;B++)if(this.style._layers[v[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const B of v){const W=this.style._layers[B];if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const Q=O[W.source];(W.type==="custom"||Q.length)&&this.renderLayer(this,_[W.source],W,Q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(B,W){const Q=B.context,J=Q.gl,ae=((Ne,$e,ke)=>({u_sky_color:Ne.properties.get("sky-color"),u_horizon_color:Ne.properties.get("horizon-color"),u_horizon:($e.height/2+$e.getHorizon())*ke,u_sky_horizon_blend:Ne.properties.get("sky-horizon-blend")*$e.height/2*ke}))(W,B.style.map.transform,B.pixelRatio),ye=new dr(J.LEQUAL,dr.ReadWrite,[0,1]),xe=Er.disabled,Pe=B.colorModeForRenderPass(),Oe=B.useProgram("sky");if(!W.mesh){const Ne=new a.aX;Ne.emplaceBack(-1,-1),Ne.emplaceBack(1,-1),Ne.emplaceBack(1,1),Ne.emplaceBack(-1,1);const $e=new a.aY;$e.emplaceBack(0,1,2),$e.emplaceBack(0,2,3),W.mesh=new Id(Q.createVertexBuffer(Ne,Oi.members),Q.createIndexBuffer($e),a.a0.simpleSegment(0,0,Ne.length,$e.length))}Oe.draw(Q,J.TRIANGLES,ye,xe,Pe,Lr.disabled,ae,void 0,"sky",W.mesh.vertexBuffer,W.mesh.indexBuffer,W.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[v[this.currentLayer]],W=_[B.source],Q=S[B.source];this._renderTileClippingMasks(B,Q),this.renderLayer(this,W,B,Q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const B=this.style._layers[v[this.currentLayer]],W=_[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const Q=(B.type==="symbol"?j:O)[B.source];this._renderTileClippingMasks(B,S[B.source]),this.renderLayer(this,W,B,Q)}if(this.options.showTileBoundaries){const B=function(W,Q){let J=null;const ae=Object.values(W._layers).flatMap(Oe=>Oe.source&&!Oe.isHidden(Q)?[W.sourceCaches[Oe.source]]:[]),ye=ae.filter(Oe=>Oe.getSource().type==="vector"),xe=ae.filter(Oe=>Oe.getSource().type!=="vector"),Pe=Oe=>{(!J||J.getSource().maxzoom<Oe.getSource().maxzoom)&&(J=Oe)};return ye.forEach(Oe=>Pe(Oe)),J||xe.forEach(Oe=>Pe(Oe)),J}(this.style,this.transform.zoom);B&&function(W,Q,J){for(let ae=0;ae<J.length;ae++)Ad(W,Q,J[ae])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const W=B.transform.padding;La(B,B.transform.height-(W.top||0),3,Pc),La(B,W.bottom||0,3,Rr),$l(B,W.left||0,3,Ac),$l(B,B.transform.width-(W.right||0),3,kd);const Q=B.transform.centerPoint;(function(J,ae,ye,xe){Vl(J,ae-1,ye-10,2,20,xe),Vl(J,ae-10,ye-1,20,2,xe)})(B,Q.x,B.transform.height-Q.y,Pd)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=s?!a.a_(f,v):!a.a$(f,v)),_||(_=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),_&&(a.b0(f,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(S,O){const j=S.context,B=j.gl,W=_i.unblended,Q=new dr(B.LEQUAL,dr.ReadWrite,[0,1]),J=O.getTerrainMesh(),ae=O.sourceCache.getRenderableTiles(),ye=S.useProgram("terrainDepth");j.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),j.clear({color:a.aM.transparent,depth:1});for(const xe of ae){const Pe=O.getTerrainData(xe.tileID),Oe={u_matrix:S.transform.calculatePosMatrix(xe.tileID.toUnwrapped()),u_ele_delta:O.getMeshFrameDelta(S.transform.zoom)};ye.draw(j,B.TRIANGLES,Q,Er.disabled,W,Lr.backCCW,Oe,Pe,"terrain",J.vertexBuffer,J.indexBuffer,J.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain),function(S,O){const j=S.context,B=j.gl,W=_i.unblended,Q=new dr(B.LEQUAL,dr.ReadWrite,[0,1]),J=O.getTerrainMesh(),ae=O.getCoordsTexture(),ye=O.sourceCache.getRenderableTiles(),xe=S.useProgram("terrainCoords");j.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),j.clear({color:a.aM.transparent,depth:1}),O.coordsIndex=[];for(const Pe of ye){const Oe=O.getTerrainData(Pe.tileID);j.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ae.texture);const Ne={u_matrix:S.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0,u_ele_delta:O.getMeshFrameDelta(S.transform.zoom)};xe.draw(j,B.TRIANGLES,Q,Er.disabled,W,Lr.backCCW,Ne,Oe,"terrain",J.vertexBuffer,J.indexBuffer,J.segments),O.coordsIndex.push(Pe.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,S.width,S.height])}(this,this.style.map.terrain))}renderLayer(s,f,v,_){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(_||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(S,O,j,B,W){if(S.renderPass!=="translucent")return;const Q=Er.disabled,J=S.colorModeForRenderPass();(j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ae,ye,xe,Pe,Oe,Ne,$e,ke,We){const et=ye.transform,at=Mi(),Tt=Oe==="map",Ft=Ne==="map";for(const Yt of ae){const un=Pe.getTile(Yt),Gt=un.getBucket(xe);if(!Gt||!Gt.text||!Gt.text.segments.get().length)continue;const Zt=a.ag(Gt.textSizeData,et.zoom),Pn=zt(un,1,ye.transform.zoom),tr=es(Yt.posMatrix,Ft,Tt,ye.transform,Pn),Xt=xe.layout.get("icon-text-fit")!=="none"&&Gt.hasIconData();if(Zt){const rn=Math.pow(2,et.zoom-un.tileID.overscaledZ),Yn=ye.style.map.terrain?(hr,Cr)=>ye.style.map.terrain.getElevation(Yt,hr,Cr):null,ci=at.translatePosition(et,un,$e,ke);ta(Gt,Tt,Ft,We,et,tr,Yt.posMatrix,rn,Zt,Xt,at,ci,Yt.toUnwrapped(),Yn)}}}(B,S,j,O,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),W),j.paint.get("icon-opacity").constantOr(1)!==0&&Cc(S,O,j,B,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),Q,J),j.paint.get("text-opacity").constantOr(1)!==0&&Cc(S,O,j,B,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),Q,J),O.map.showCollisionBoxes&&(to(S,O,j,B,!0),to(S,O,j,B,!1))})(s,f,v,_,this.style.placement.variableOffsets);break;case"circle":(function(S,O,j,B){if(S.renderPass!=="translucent")return;const W=j.paint.get("circle-opacity"),Q=j.paint.get("circle-stroke-width"),J=j.paint.get("circle-stroke-opacity"),ae=!j.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(Q.constantOr(1)===0||J.constantOr(1)===0))return;const ye=S.context,xe=ye.gl,Pe=S.depthModeForSublayer(0,dr.ReadOnly),Oe=Er.disabled,Ne=S.colorModeForRenderPass(),$e=[];for(let ke=0;ke<B.length;ke++){const We=B[ke],et=O.getTile(We),at=et.getBucket(j);if(!at)continue;const Tt=at.programConfigurations.get(j.id),Ft=S.useProgram("circle",Tt),Yt=at.layoutVertexBuffer,un=at.indexBuffer,Gt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(We),Zt={programConfiguration:Tt,program:Ft,layoutVertexBuffer:Yt,indexBuffer:un,uniformValues:Ec(S,We,et,j),terrainData:Gt};if(ae){const Pn=at.segments.get();for(const tr of Pn)$e.push({segments:new a.a0([tr]),sortKey:tr.sortKey,state:Zt})}else $e.push({segments:at.segments,sortKey:0,state:Zt})}ae&&$e.sort((ke,We)=>ke.sortKey-We.sortKey);for(const ke of $e){const{programConfiguration:We,program:et,layoutVertexBuffer:at,indexBuffer:Tt,uniformValues:Ft,terrainData:Yt}=ke.state;et.draw(ye,xe.TRIANGLES,Pe,Oe,Ne,Lr.disabled,Ft,Yt,j.id,at,Tt,ke.segments,j.paint,S.transform.zoom,We)}})(s,f,v,_);break;case"heatmap":(function(S,O,j,B){if(j.paint.get("heatmap-opacity")===0)return;const W=S.context;if(S.style.map.terrain){for(const Q of B){const J=O.getTile(Q);O.hasRenderableParent(Q)||(S.renderPass==="offscreen"?na(S,J,j,Q):S.renderPass==="translucent"&&ra(S,j,Q))}W.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?function(Q,J,ae,ye){const xe=Q.context,Pe=xe.gl,Oe=Er.disabled,Ne=new _i([Pe.ONE,Pe.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function($e,ke,We){const et=$e.gl;$e.activeTexture.set(et.TEXTURE1),$e.viewport.set([0,0,ke.width/4,ke.height/4]);let at=We.heatmapFbos.get(a.aU);at?(et.bindTexture(et.TEXTURE_2D,at.colorAttachment.get()),$e.bindFramebuffer.set(at.framebuffer)):(at=Eu($e,ke.width/4,ke.height/4),We.heatmapFbos.set(a.aU,at))})(xe,Q,ae),xe.clear({color:a.aM.transparent});for(let $e=0;$e<ye.length;$e++){const ke=ye[$e];if(J.hasRenderableParent(ke))continue;const We=J.getTile(ke),et=We.getBucket(ae);if(!et)continue;const at=et.programConfigurations.get(ae.id),Tt=Q.useProgram("heatmap",at),{zoom:Ft}=Q.transform;Tt.draw(xe,Pe.TRIANGLES,dr.disabled,Oe,Ne,Lr.disabled,rs(ke.posMatrix,We,Ft,ae.paint.get("heatmap-intensity")),null,ae.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,ae.paint,Q.transform.zoom,at)}xe.viewport.set([0,0,Q.width,Q.height])}(S,O,j,B):S.renderPass==="translucent"&&function(Q,J){const ae=Q.context,ye=ae.gl;ae.setColorMode(Q.colorModeForRenderPass());const xe=J.heatmapFbos.get(a.aU);xe&&(ae.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,xe.colorAttachment.get()),ae.activeTexture.set(ye.TEXTURE1),Ul(ae,J).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Q.useProgram("heatmapTexture").draw(ae,ye.TRIANGLES,dr.disabled,Er.disabled,Q.colorModeForRenderPass(),Lr.disabled,nr(Q,J,0,1),null,J.id,Q.viewportBuffer,Q.quadTriangleIndexBuffer,Q.viewportSegments,J.paint,Q.transform.zoom))}(S,j)})(s,f,v,_);break;case"line":(function(S,O,j,B){if(S.renderPass!=="translucent")return;const W=j.paint.get("line-opacity"),Q=j.paint.get("line-width");if(W.constantOr(1)===0||Q.constantOr(1)===0)return;const J=S.depthModeForSublayer(0,dr.ReadOnly),ae=S.colorModeForRenderPass(),ye=j.paint.get("line-dasharray"),xe=j.paint.get("line-pattern"),Pe=xe.constantOr(1),Oe=j.paint.get("line-gradient"),Ne=j.getCrossfadeParameters(),$e=Pe?"linePattern":ye?"lineSDF":Oe?"lineGradient":"line",ke=S.context,We=ke.gl;let et=!0;for(const at of B){const Tt=O.getTile(at);if(Pe&&!Tt.patternsLoaded())continue;const Ft=Tt.getBucket(j);if(!Ft)continue;const Yt=Ft.programConfigurations.get(j.id),un=S.context.program.get(),Gt=S.useProgram($e,Yt),Zt=et||Gt.program!==un,Pn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),tr=xe.constantOr(null);if(tr&&Tt.imageAtlas){const Yn=Tt.imageAtlas,ci=Yn.patternPositions[tr.to.toString()],hr=Yn.patternPositions[tr.from.toString()];ci&&hr&&Yt.setConstantPatternPositions(ci,hr)}const Xt=Pn?at:null,rn=Pe?Jo(S,Tt,j,Ne,Xt):ye?vu(S,Tt,j,ye,Ne,Xt):Oe?Ml(S,Tt,j,Ft.lineClipsArray.length,Xt):jr(S,Tt,j,Xt);if(Pe)ke.activeTexture.set(We.TEXTURE0),Tt.imageAtlasTexture.bind(We.LINEAR,We.CLAMP_TO_EDGE),Yt.updatePaintBuffers(Ne);else if(ye&&(Zt||S.lineAtlas.dirty))ke.activeTexture.set(We.TEXTURE0),S.lineAtlas.bind(ke);else if(Oe){const Yn=Ft.gradients[j.id];let ci=Yn.texture;if(j.gradientVersion!==Yn.version){let hr=256;if(j.stepInterpolant){const Cr=O.getSource().maxzoom,ui=at.canonical.z===Cr?Math.ceil(1<<S.transform.maxZoom-at.canonical.z):1;hr=a.ac(a.aV(Ft.maxLineLength/a.X*1024*ui),256,ke.maxTextureSize)}Yn.gradient=a.aW({expression:j.gradientExpression(),evaluationKey:"lineProgress",resolution:hr,image:Yn.gradient||void 0,clips:Ft.lineClipsArray}),Yn.texture?Yn.texture.update(Yn.gradient):Yn.texture=new Je(ke,Yn.gradient,We.RGBA),Yn.version=j.gradientVersion,ci=Yn.texture}ke.activeTexture.set(We.TEXTURE0),ci.bind(j.stepInterpolant?We.NEAREST:We.LINEAR,We.CLAMP_TO_EDGE)}Gt.draw(ke,We.TRIANGLES,J,S.stencilModeForClipping(at),ae,Lr.disabled,rn,Pn,j.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,j.paint,S.transform.zoom,Yt,Ft.layoutVertexBuffer2),et=!1}})(s,f,v,_);break;case"fill":(function(S,O,j,B){const W=j.paint.get("fill-color"),Q=j.paint.get("fill-opacity");if(Q.constantOr(1)===0)return;const J=S.colorModeForRenderPass(),ae=j.paint.get("fill-pattern"),ye=S.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&W.constantOr(a.aM.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ye){const xe=S.depthModeForSublayer(1,S.renderPass==="opaque"?dr.ReadWrite:dr.ReadOnly);ro(S,O,j,B,xe,J,!1)}if(S.renderPass==="translucent"&&j.paint.get("fill-antialias")){const xe=S.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,dr.ReadOnly);ro(S,O,j,B,xe,J,!0)}})(s,f,v,_);break;case"fill-extrusion":(function(S,O,j,B){const W=j.paint.get("fill-extrusion-opacity");if(W!==0&&S.renderPass==="translucent"){const Q=new dr(S.context.gl.LEQUAL,dr.ReadWrite,S.depthRangeFor3D);if(W!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))Td(S,O,j,B,Q,Er.disabled,_i.disabled),Td(S,O,j,B,Q,S.stencilModeFor3D(),S.colorModeForRenderPass());else{const J=S.colorModeForRenderPass();Td(S,O,j,B,Q,Er.disabled,J)}}})(s,f,v,_);break;case"hillshade":(function(S,O,j,B){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const W=S.context,Q=S.depthModeForSublayer(0,dr.ReadOnly),J=S.colorModeForRenderPass(),[ae,ye]=S.renderPass==="translucent"?S.stencilConfigForOverlap(B):[{},B];for(const xe of ye){const Pe=O.getTile(xe);Pe.needsHillshadePrepare!==void 0&&Pe.needsHillshadePrepare&&S.renderPass==="offscreen"?kc(S,Pe,j,Q,Er.disabled,J):S.renderPass==="translucent"&&No(S,xe,Pe,j,Q,ae[xe.overscaledZ],J)}W.viewport.set([0,0,S.width,S.height])})(s,f,v,_);break;case"raster":(function(S,O,j,B){if(S.renderPass!=="translucent"||j.paint.get("raster-opacity")===0||!B.length)return;const W=S.context,Q=W.gl,J=O.getSource(),ae=S.useProgram("raster"),ye=S.colorModeForRenderPass(),[xe,Pe]=J instanceof wt?[{},B]:S.stencilConfigForOverlap(B),Oe=Pe[Pe.length-1].overscaledZ,Ne=!S.options.moving;for(const $e of Pe){const ke=S.depthModeForSublayer($e.overscaledZ-Oe,j.paint.get("raster-opacity")===1?dr.ReadWrite:dr.ReadOnly,Q.LESS),We=O.getTile($e);We.registerFadeDuration(j.paint.get("raster-fade-duration"));const et=O.findLoadedParent($e,0),at=O.findLoadedSibling($e),Tt=ia(We,et||at||null,O,j,S.transform,S.style.map.terrain);let Ft,Yt;const un=j.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;W.activeTexture.set(Q.TEXTURE0),We.texture.bind(un,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(Q.TEXTURE1),et?(et.texture.bind(un,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Ft=Math.pow(2,et.tileID.overscaledZ-We.tileID.overscaledZ),Yt=[We.tileID.canonical.x*Ft%1,We.tileID.canonical.y*Ft%1]):We.texture.bind(un,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),We.texture.useMipmap&&W.extTextureFilterAnisotropic&&S.transform.pitch>20&&Q.texParameterf(Q.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const Gt=S.style.map.terrain&&S.style.map.terrain.getTerrainData($e),Zt=Gt?$e:null,Pn=Zt?Zt.posMatrix:S.transform.calculatePosMatrix($e.toUnwrapped(),Ne),tr=_u(Pn,Yt||[0,0],Ft||1,Tt,j);J instanceof wt?ae.draw(W,Q.TRIANGLES,ke,Er.disabled,ye,Lr.disabled,tr,Gt,j.id,J.boundsBuffer,S.quadTriangleIndexBuffer,J.boundsSegments):ae.draw(W,Q.TRIANGLES,ke,xe[$e.overscaledZ],ye,Lr.disabled,tr,Gt,j.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}})(s,f,v,_);break;case"background":(function(S,O,j,B){const W=j.paint.get("background-color"),Q=j.paint.get("background-opacity");if(Q===0)return;const J=S.context,ae=J.gl,ye=S.transform,xe=ye.tileSize,Pe=j.paint.get("background-pattern");if(S.isPatternMissing(Pe))return;const Oe=!Pe&&W.a===1&&Q===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Oe)return;const Ne=Er.disabled,$e=S.depthModeForSublayer(0,Oe==="opaque"?dr.ReadWrite:dr.ReadOnly),ke=S.colorModeForRenderPass(),We=S.useProgram(Pe?"backgroundPattern":"background"),et=B||ye.coveringTiles({tileSize:xe,terrain:S.style.map.terrain});Pe&&(J.activeTexture.set(ae.TEXTURE0),S.imageManager.bind(S.context));const at=j.getCrossfadeParameters();for(const Tt of et){const Ft=B?Tt.posMatrix:S.transform.calculatePosMatrix(Tt.toUnwrapped()),Yt=Pe?_e(Ft,Q,S,Pe,{tileID:Tt,tileSize:xe},at):he(Ft,Q,W),un=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Tt);We.draw(J,ae.TRIANGLES,$e,Ne,ke,Lr.disabled,Yt,un,j.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}})(s,0,v,_);break;case"custom":(function(S,O,j){const B=S.context,W=j.implementation;if(S.renderPass==="offscreen"){const Q=W.prerender;Q&&(S.setCustomLayerDefaults(),B.setColorMode(S.colorModeForRenderPass()),Q.call(W,B.gl,S.transform.customLayerMatrix()),B.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),B.setColorMode(S.colorModeForRenderPass()),B.setStencilMode(Er.disabled);const Q=W.renderingMode==="3d"?new dr(S.context.gl.LEQUAL,dr.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,dr.ReadOnly);B.setDepthMode(Q),W.render(B.gl,S.transform.customLayerMatrix(),{farZ:S.transform.farZ,nearZ:S.transform.nearZ,fov:S.transform._fov,modelViewProjectionMatrix:S.transform.modelViewProjectionMatrix,projectionMatrix:S.transform.projectionMatrix}),B.setDirty(),S.setBaseState(),B.bindFramebuffer.set(null)}})(s,0,v)}}translatePosMatrix(s,f,v,_,S){if(!v[0]&&!v[1])return s;const O=S?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(O){const W=Math.sin(O),Q=Math.cos(O);v=[v[0]*Q-v[1]*W,v[0]*W+v[1]*Q]}const j=[S?v[0]:zt(f,v[0],this.transform.zoom),S?v[1]:zt(f,v[1],this.transform.zoom),0],B=new Float32Array(16);return a.J(B,s,j),B}saveTileTexture(s){const f=this._tileTextures[s.size[0]];f?f.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const f=this._tileTextures[s];return f&&f.length>0?f.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const f=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!f||!v}useProgram(s,f){this.cache=this.cache||{};const v=s+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new Aa(this.context,Lo[s],f,ge[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Je(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:f}=this.context.gl;return this.width!==s||this.height!==f}}class Ic{constructor(s,f){this.points=s,this.planes=f}static fromInvProjectionMatrix(s,f,v){const _=Math.pow(2,v),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const B=1/(j=a.af([],j,s))[3]/f*_;return a.b1(j,j,[B,B,1/j[3],B])}),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const B=function(ae,ye){var xe=ye[0],Pe=ye[1],Oe=ye[2],Ne=xe*xe+Pe*Pe+Oe*Oe;return Ne>0&&(Ne=1/Math.sqrt(Ne)),ae[0]=ye[0]*Ne,ae[1]=ye[1]*Ne,ae[2]=ye[2]*Ne,ae}([],function(ae,ye,xe){var Pe=ye[0],Oe=ye[1],Ne=ye[2],$e=xe[0],ke=xe[1],We=xe[2];return ae[0]=Oe*We-Ne*ke,ae[1]=Ne*$e-Pe*We,ae[2]=Pe*ke-Oe*$e,ae}([],Z([],S[j[0]],S[j[1]]),Z([],S[j[2]],S[j[1]]))),W=-((Q=B)[0]*(J=S[j[1]])[0]+Q[1]*J[1]+Q[2]*J[2]);var Q,J;return B.concat(W)});return new Ic(S,O)}}class Zl{constructor(s,f){this.min=s,this.max=f,this.center=function(v,_,S){return v[0]=.5*_[0],v[1]=.5*_[1],v[2]=.5*_[2],v}([],function(v,_,S){return v[0]=_[0]+S[0],v[1]=_[1]+S[1],v[2]=_[2]+S[2],v}([],this.min,this.max))}quadrant(s){const f=[s%2==0,s<2],v=ue(this.min),_=ue(this.max);for(let S=0;S<f.length;S++)v[S]=f[S]?this.min[S]:this.center[S],_[S]=f[S]?this.center[S]:this.max[S];return _[2]=this.max[2],new Zl(v,_)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let _=0;_<s.planes.length;_++){const S=s.planes[_];let O=0;for(let j=0;j<f.length;j++)a.b2(S,f[j])>=0&&O++;if(O===0)return 0;O!==f.length&&(v=!1)}if(v)return 2;for(let _=0;_<3;_++){let S=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let j=0;j<s.points.length;j++){const B=s.points[j][_]-this.min[_];S=Math.min(S,B),O=Math.max(O,B)}if(O<0||S>this.max[_]-this.min[_])return 0}return 1}}class Rc{constructor(s=0,f=0,v=0,_=0){if(isNaN(s)||s<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=f,this.left=v,this.right=_}interpolate(s,f,v){return f.top!=null&&s.top!=null&&(this.top=a.y.number(s.top,f.top,v)),f.bottom!=null&&s.bottom!=null&&(this.bottom=a.y.number(s.bottom,f.bottom,v)),f.left!=null&&s.left!=null&&(this.left=a.y.number(s.left,f.left,v)),f.right!=null&&s.right!=null&&(this.right=a.y.number(s.right,f.right,v)),this}getCenter(s,f){const v=a.ac((this.left+s-this.right)/2,0,s),_=a.ac((this.top+f-this.bottom)/2,0,f);return new a.P(v,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Rc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Rd=85.051129;class Lc{constructor(s,f,v,_,S){this.tileSize=512,this._renderWorldCopies=S===void 0||!!S,this._minZoom=s||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Rc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const s=new Lc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const f=-a.b3(s,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=function(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,_,S){var O=_[0],j=_[1],B=_[2],W=_[3],Q=Math.sin(S),J=Math.cos(S);v[0]=O*J+B*Q,v[1]=j*J+W*Q,v[2]=O*-Q+B*J,v[3]=j*-Q+W*J}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const f=a.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const f=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,f,v){this._unmodified=!1,this._edgeInsets.interpolate(s,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const f=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(s){const f=[new a.b4(0,s)];if(this._renderWorldCopies){const v=this.pointCoordinate(new a.P(0,0)),_=this.pointCoordinate(new a.P(this.width,0)),S=this.pointCoordinate(new a.P(this.width,this.height)),O=this.pointCoordinate(new a.P(0,this.height)),j=Math.floor(Math.min(v.x,_.x,S.x,O.x)),B=Math.floor(Math.max(v.x,_.x,S.x,O.x)),W=1;for(let Q=j-W;Q<=B+W;Q++)Q!==0&&f.push(new a.b4(Q,s))}return f}coveringTiles(s){var f,v;let _=this.coveringZoomLevel(s);const S=_;if(s.minzoom!==void 0&&_<s.minzoom)return[];s.maxzoom!==void 0&&_>s.maxzoom&&(_=s.maxzoom);const O=this.pointCoordinate(this.getCameraPoint()),j=a.Z.fromLngLat(this.center),B=Math.pow(2,_),W=[B*O.x,B*O.y,0],Q=[B*j.x,B*j.y,0],J=Ic.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,_);let ae=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ae=_);const ye=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,xe=ke=>({aabb:new Zl([ke*B,0,0],[(ke+1)*B,B,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Pe=[],Oe=[],Ne=_,$e=s.reparseOverscaled?S:_;if(this._renderWorldCopies)for(let ke=1;ke<=3;ke++)Pe.push(xe(-ke)),Pe.push(xe(ke));for(Pe.push(xe(0));Pe.length>0;){const ke=Pe.pop(),We=ke.x,et=ke.y;let at=ke.fullyVisible;if(!at){const Gt=ke.aabb.intersects(J);if(Gt===0)continue;at=Gt===2}const Tt=s.terrain?W:Q,Ft=ke.aabb.distanceX(Tt),Yt=ke.aabb.distanceY(Tt),un=Math.max(Math.abs(Ft),Math.abs(Yt));if(ke.zoom===Ne||un>ye+(1<<Ne-ke.zoom)-2&&ke.zoom>=ae){const Gt=Ne-ke.zoom,Zt=W[0]-.5-(We<<Gt),Pn=W[1]-.5-(et<<Gt);Oe.push({tileID:new a.S(ke.zoom===Ne?$e:ke.zoom,ke.wrap,ke.zoom,We,et),distanceSq:le([Q[0]-.5-We,Q[1]-.5-et]),tileDistanceToCamera:Math.sqrt(Zt*Zt+Pn*Pn)})}else for(let Gt=0;Gt<4;Gt++){const Zt=(We<<1)+Gt%2,Pn=(et<<1)+(Gt>>1),tr=ke.zoom+1;let Xt=ke.aabb.quadrant(Gt);if(s.terrain){const rn=new a.S(tr,ke.wrap,tr,Zt,Pn),Yn=s.terrain.getMinMaxElevation(rn),ci=(f=Yn.minElevation)!==null&&f!==void 0?f:this.elevation,hr=(v=Yn.maxElevation)!==null&&v!==void 0?v:this.elevation;Xt=new Zl([Xt.min[0],Xt.min[1],ci],[Xt.max[0],Xt.max[1],hr])}Pe.push({aabb:Xt,zoom:tr,x:Zt,y:Pn,wrap:ke.wrap,fullyVisible:at})}}return Oe.sort((ke,We)=>ke.distanceSq-We.distanceSq).map(ke=>ke.tileID)}resize(s,f){this.width=s,this.height=f,this.pixelsToGLUnits=[2/s,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const f=a.ac(s.lat,-85.051129,Rd);return new a.P(a.O(s.lng)*this.worldSize,a.Q(f)*this.worldSize)}unproject(s){return new a.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const f=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,_=this.pointLocation(this.centerPoint,s),S=s.getElevationForLngLatZoom(_,this.tileZoom);if(!(this.elevation-S))return;const O=v+f-S,j=Math.cos(this._pitch)*this.cameraToCenterDistance/O/a.b5(1,_.lat),B=this.scaleZoom(j/this.tileSize);this._elevation=S,this._center=_,this.zoom=B}setLocationAtPoint(s,f){const v=this.pointCoordinate(f),_=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(s),O=new a.Z(S.x-(v.x-_.x),S.y-(v.y-_.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,f){return f?this.coordinatePoint(this.locationCoordinate(s),f.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,f){return this.coordinateLocation(this.pointCoordinate(s,f))}locationCoordinate(s){return a.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,f){if(f){const ae=f.pointCoordinate(s);if(ae!=null)return ae}const v=[s.x,s.y,0,1],_=[s.x,s.y,1,1];a.af(v,v,this.pixelMatrixInverse),a.af(_,_,this.pixelMatrixInverse);const S=v[3],O=_[3],j=v[1]/S,B=_[1]/O,W=v[2]/S,Q=_[2]/O,J=W===Q?0:(0-W)/(Q-W);return new a.Z(a.y.number(v[0]/S,_[0]/O,J)/this.worldSize,a.y.number(j,B,J)/this.worldSize)}coordinatePoint(s,f=0,v=this.pixelMatrix){const _=[s.x*this.worldSize,s.y*this.worldSize,f,1];return a.af(_,_,v),new a.P(_[0]/_[3],_[1]/_[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return new Qe().extend(this.pointLocation(new a.P(0,s))).extend(this.pointLocation(new a.P(this.width,s))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Qe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Rd])}calculateTileMatrix(s){const f=s.canonical,v=this.worldSize/this.zoomScale(f.z),_=f.x+Math.pow(2,f.z)*s.wrap,S=a.an(new Float64Array(16));return a.J(S,S,[_*v,f.y*v,0]),a.K(S,S,[v/a.X,v/a.X,1]),S}calculatePosMatrix(s,f=!1){const v=s.key,_=f?this._alignedPosMatrixCache:this._posMatrixCache;if(_[v])return _[v];const S=this.calculateTileMatrix(s);return a.L(S,f?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,S),_[v]=new Float32Array(S),_[v]}calculateFogMatrix(s){const f=s.key,v=this._fogMatrixCache;if(v[f])return v[f];const _=this.calculateTileMatrix(s);return a.L(_,this.fogMatrix,_),v[f]=new Float32Array(_),v[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,f){f=a.ac(+f,this.minZoom,this.maxZoom);const v={center:new a.N(s.lng,s.lat),zoom:f};let _=this.lngRange;!this._renderWorldCopies&&_===null&&(_=[-179.9999999999,179.9999999999]);const S=this.tileSize*this.zoomScale(v.zoom);let O=0,j=S,B=0,W=S,Q=0,J=0;const{x:ae,y:ye}=this.size;if(this.latRange){const ke=this.latRange;O=a.Q(ke[1])*S,j=a.Q(ke[0])*S,j-O<ye&&(Q=ye/(j-O))}_&&(B=a.b3(a.O(_[0])*S,0,S),W=a.b3(a.O(_[1])*S,0,S),W<B&&(W+=S),W-B<ae&&(J=ae/(W-B)));const{x:xe,y:Pe}=this.project.call({worldSize:S},s);let Oe,Ne;const $e=Math.max(J||0,Q||0);if($e){const ke=new a.P(J?(W+B)/2:xe,Q?(j+O)/2:Pe);return v.center=this.unproject.call({worldSize:S},ke).wrap(),v.zoom+=this.scaleZoom($e),v}if(this.latRange){const ke=ye/2;Pe-ke<O&&(Ne=O+ke),Pe+ke>j&&(Ne=j-ke)}if(_){const ke=(B+W)/2;let We=xe;this._renderWorldCopies&&(We=a.b3(xe,ke-S/2,ke+S/2));const et=ae/2;We-et<B&&(Oe=B+et),We+et>W&&(Oe=W-et)}if(Oe!==void 0||Ne!==void 0){const ke=new a.P(Oe??xe,Ne??Pe);v.center=this.unproject.call({worldSize:S},ke).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:f,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=f,this.zoom=v,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,f=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let _=a.an(new Float64Array(16));a.K(_,_,[this.width/2,-this.height/2,1]),a.J(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=a.an(new Float64Array(16)),a.K(_,_,[1,-1,1]),a.J(_,_,[-1,-1,0]),a.K(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const S=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),O=Math.min(this.elevation,this.minElevationForCurrentTile),j=S-O*this._pixelPerMeter/Math.cos(this._pitch),B=O<0?j:S,W=Math.PI/2+this._pitch,Q=this._fov*(.5+s.y/this.height),J=Math.sin(Q)*B/Math.sin(a.ac(Math.PI-W-Q,.01,Math.PI-.01)),ae=this.getHorizon(),ye=2*Math.atan(ae/this.cameraToCenterDistance)*(.5+s.y/(2*ae)),xe=Math.sin(ye)*B/Math.sin(a.ac(Math.PI-W-ye,.01,Math.PI-.01)),Pe=Math.min(J,xe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Pe+B),this.nearZ=this.height/50,_=new Float64Array(16),a.b6(_,this._fov,this.width/this.height,this.nearZ,this.farZ),_[8]=2*-s.x/this.width,_[9]=2*s.y/this.height,this.projectionMatrix=a.ae(_),a.K(_,_,[1,-1,1]),a.J(_,_,[0,0,-this.cameraToCenterDistance]),a.b7(_,_,this._pitch),a.ad(_,_,this.angle),a.J(_,_,[-f,-v,0]),this.mercatorMatrix=a.K([],_,[this.worldSize,this.worldSize,this.worldSize]),a.K(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,_),a.J(_,_,[0,0,-this.elevation]),this.modelViewProjectionMatrix=_,this.invModelViewProjectionMatrix=a.as([],_),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,S,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-f,-v,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,_);const Oe=this.width%2/2,Ne=this.height%2/2,$e=Math.cos(this.angle),ke=Math.sin(this.angle),We=f-Math.round(f)+$e*Oe+ke*Ne,et=v-Math.round(v)+$e*Ne+ke*Oe,at=new Float64Array(_);if(a.J(at,at,[We>.5?We-1:We,et>.5?et-1:et,0]),this.alignedModelViewProjectionMatrix=at,_=a.as(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new a.P(0,0)),f=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.af(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,s))}getCameraQueryGeometry(s){const f=this.getCameraPoint();if(s.length===1)return[s[0],f];{let v=f.x,_=f.y,S=f.x,O=f.y;for(const j of s)v=Math.min(v,j.x),_=Math.min(_,j.y),S=Math.max(S,j.x),O=Math.max(O,j.y);return[new a.P(v,_),new a.P(S,_),new a.P(S,O),new a.P(v,O),new a.P(v,_)]}}lngLatToCameraDepth(s,f){const v=this.locationCoordinate(s),_=[v.x*this.worldSize,v.y*this.worldSize,f,1];return a.af(_,_,this.modelViewProjectionMatrix),_[2]/_[3]}}function Bs(E,s){let f,v=!1,_=null,S=null;const O=()=>{_=null,v&&(E.apply(S,f),_=setTimeout(O,s),v=!1)};return(...j)=>(v=!0,S=this,f=j,_||O(),_)}class ql{constructor(s){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let v;return f.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(v=_)}),(v&&v[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(f.length>=3&&!f.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:v,pitch:+(f[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const v=f.join("/");let _=v;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${v}`);let S=window.location.hash.replace(_,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let O=window.location.href.replace(/(#.+)?$/,S);O=O.replace("&&","&"),window.history.replaceState(window.history.state,null,O)},this._updateHash=Bs(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const f=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,_=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,_),O=Math.round(f.lng*S)/S,j=Math.round(f.lat*S)/S,B=this._map.getBearing(),W=this._map.getPitch();let Q="";if(Q+=s?`/${O}/${j}/${v}`:`${v}/${j}/${O}`,(B||W)&&(Q+="/"+Math.round(10*B)/10),W&&(Q+=`/${Math.round(W)}`),this._hashName){const J=this._hashName;let ae=!1;const ye=window.location.hash.slice(1).split("&").map(xe=>{const Pe=xe.split("=")[0];return Pe===J?(ae=!0,`${Pe}=${Q}`):xe}).filter(xe=>xe);return ae||ye.push(`${J}=${Q}`),`#${ye.join("&")}`}return`#${Q}`}}const Ld={linearity:.3,easing:a.b8(0,0,.3,1)},Mc=a.e({deceleration:2500,maxSpeed:1400},Ld),jg=a.e({deceleration:20,maxSpeed:1400},Ld),df=a.e({deceleration:1e3,maxSpeed:360},Ld),Md=a.e({deceleration:1e3,maxSpeed:90},Ld);class Gl{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,f=C.now();for(;s.length>0&&f-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)f.zoom+=S.zoomDelta||0,f.bearing+=S.bearingDelta||0,f.pitch+=S.pitchDelta||0,S.panDelta&&f.pan._add(S.panDelta),S.around&&(f.around=S.around),S.pinchAround&&(f.pinchAround=S.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(f.pan.mag()){const S=sa(f.pan.mag(),v,a.e({},Mc,s||{}));_.offset=f.pan.mult(S.amount/f.pan.mag()),_.center=this._map.transform.center,Cu(_,S)}if(f.zoom){const S=sa(f.zoom,v,jg);_.zoom=this._map.transform.zoom+S.amount,Cu(_,S)}if(f.bearing){const S=sa(f.bearing,v,df);_.bearing=this._map.transform.bearing+a.ac(S.amount,-179,179),Cu(_,S)}if(f.pitch){const S=sa(f.pitch,v,Md);_.pitch=this._map.transform.pitch+S.amount,Cu(_,S)}if(_.zoom||_.bearing){const S=f.pinchAround===void 0?f.around:f.pinchAround;_.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),a.e(_,{noMoveStart:!0})}}function Cu(E,s){(!E.duration||E.duration<s.duration)&&(E.duration=s.duration,E.easing=s.easing)}function sa(E,s,f){const{maxSpeed:v,linearity:_,deceleration:S}=f,O=a.ac(E*_/(s/1e3),-v,v),j=Math.abs(O)/(S*_);return{easing:f.easing,duration:1e3*j,amount:O*(j/2)}}class us extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v,_={}){const S=P.mousePos(f.getCanvas(),v),O=f.unproject(S);super(s,a.e({point:S,lngLat:O,originalEvent:v},_)),this._defaultPrevented=!1,this.target=f}}class al extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v){const _=s==="touchend"?v.changedTouches:v.touches,S=P.touchPos(f.getCanvasContainer(),_),O=S.map(B=>f.unproject(B)),j=S.reduce((B,W,Q,J)=>B.add(W.div(J.length)),new a.P(0,0));super(s,{points:S,point:j,lngLats:O,lngLat:f.unproject(j),originalEvent:v}),this._defaultPrevented=!1}}class jp extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class oa{constructor(s,f){this._map=s,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new jp(s.type,this._map,s))}mousedown(s,f){return this._mousedownPos=f,this._firePreventable(new us(s.type,this._map,s))}mouseup(s){this._map.fire(new us(s.type,this._map,s))}click(s,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new us(s.type,this._map,s))}dblclick(s){return this._firePreventable(new us(s.type,this._map,s))}mouseover(s){this._map.fire(new us(s.type,this._map,s))}mouseout(s){this._map.fire(new us(s.type,this._map,s))}touchstart(s){return this._firePreventable(new al(s.type,this._map,s))}touchmove(s){this._map.fire(new al(s.type,this._map,s))}touchend(s){this._map.fire(new al(s.type,this._map,s))}touchcancel(s){this._map.fire(new al(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new us(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new us("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new us(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yo{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(a.P.convert(s),this._map.terrain)}}class ds{constructor(s,f){this._map=s,this._tr=new yo(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,f){this.isEnabled()&&s.shiftKey&&s.button===0&&(P.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(s,f){if(!this._active)return;const v=f;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=v,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const S=Math.min(_.x,v.x),O=Math.max(_.x,v.x),j=Math.min(_.y,v.y),B=Math.max(_.y,v.y);P.setTransform(this._box,`translate(${S}px,${j}px)`),this._box.style.width=O-S+"px",this._box.style.height=B-j+"px"}mouseupWindow(s,f){if(!this._active||s.button!==0)return;const v=this._startPos,_=f;if(this.reset(),P.suppressClick(),v.x!==_.x||v.y!==_.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:s})),{cameraAnimation:S=>S.fitScreenCoordinates(v,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,f){return this._map.fire(new a.k(s,{originalEvent:f}))}}function Tu(E,s){if(E.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${s.length}`);const f={};for(let v=0;v<E.length;v++)f[E[v].identifier]=s[v];return f}class Oc{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(_){const S=new a.P(0,0);for(const O of _)S._add(O);return S.div(_.length)}(f),this.touches=Tu(v,f)))}touchmove(s,f,v){if(this.aborted||!this.centroid)return;const _=Tu(v,f);for(const S in this.touches){const O=_[S];(!O||O.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(s,f,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class ll{constructor(s){this.singleTap=new Oc(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,f,v){this.singleTap.touchstart(s,f,v)}touchmove(s,f,v){this.singleTap.touchmove(s,f,v)}touchend(s,f,v){const _=this.singleTap.touchend(s,f,v);if(_){const S=s.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(_)<30;if(S&&O||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Wl{constructor(s){this._tr=new yo(s),this._zoomIn=new ll({numTouches:1,numTaps:2}),this._zoomOut=new ll({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,f,v){this._zoomIn.touchstart(s,f,v),this._zoomOut.touchstart(s,f,v)}touchmove(s,f,v){this._zoomIn.touchmove(s,f,v),this._zoomOut.touchmove(s,f,v)}touchend(s,f,v){const _=this._zoomIn.touchend(s,f,v),S=this._zoomOut.touchend(s,f,v),O=this._tr;return _?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:O.zoom+1,around:O.unproject(_)},{originalEvent:s})}):S?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:O.zoom-1,around:O.unproject(S)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aa{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const f=this._moveFunction(...s);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(s,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,f){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const _=f.length?f[0]:f;return!this._moved&&_.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(v,_))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&P.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const hf={0:1,2:2};class ku{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const f=P.mouseButton(s);this._eventButton=f}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(f,v){const _=hf[v];return f.buttons===void 0||(f.buttons&_)!==_}(s,this._eventButton)}isValidEndEvent(s){return P.mouseButton(s)===this._eventButton}}class Od{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const Pu=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=s=>{s.preventDefault()}},Dd=({enable:E,clickTolerance:s,bearingDegreesPerPixelMoved:f=.8})=>{const v=new ku({checkCorrectEvent:_=>P.mouseButton(_)===0&&_.ctrlKey||P.mouseButton(_)===2});return new aa({clickTolerance:s,move:(_,S)=>({bearingDelta:(S.x-_.x)*f}),moveStateManager:v,enable:E,assignEvents:Pu})},Nd=({enable:E,clickTolerance:s,pitchDegreesPerPixelMoved:f=-.5})=>{const v=new ku({checkCorrectEvent:_=>P.mouseButton(_)===0&&_.ctrlKey||P.mouseButton(_)===2});return new aa({clickTolerance:s,move:(_,S)=>({pitchDelta:(S.y-_.y)*f}),moveStateManager:v,enable:E,assignEvents:Pu})};class Xl{constructor(s,f){this._clickTolerance=s.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,f,v){return this._calculateTransform(s,f,v)}touchmove(s,f,v){if(this._active){if(!this._shouldBePrevented(v.length))return s.preventDefault(),this._calculateTransform(s,f,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,f,v){this._calculateTransform(s,f,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,f,v){v.length>0&&(this._active=!0);const _=Tu(v,f),S=new a.P(0,0),O=new a.P(0,0);let j=0;for(const W in _){const Q=_[W],J=this._touches[W];J&&(S._add(Q),O._add(Q.sub(J)),j++,_[W]=Q)}if(this._touches=_,this._shouldBePrevented(j)||!O.mag())return;const B=O.div(j);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(j),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Au{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(s,f,v){if(!this._firstTwoTouches)return;s.preventDefault();const[_,S]=this._firstTwoTouches,O=Dc(v,f,_),j=Dc(v,f,S);if(!O||!j)return;const B=this._aroundCenter?null:O.add(j).div(2);return this._move([O,j],B,s)}touchend(s,f,v){if(!this._firstTwoTouches)return;const[_,S]=this._firstTwoTouches,O=Dc(v,f,_),j=Dc(v,f,S);O&&j||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Dc(E,s,f){for(let v=0;v<E.length;v++)if(E[v].identifier===f)return s[v]}function ff(E,s){return Math.log(E/s)/Math.LN2}class h extends Au{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,f){const v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(ff(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ff(this._distance,v),pinchAround:f}}}function b(E,s){return 180*E.angleWith(s)/Math.PI}class A extends Au{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,f,v){const _=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:b(this._vector,_),pinchAround:f}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const f=25/(Math.PI*this._minDiameter)*360,v=b(s,this._startVector);return Math.abs(v)<f}}function F(E){return Math.abs(E.y)>Math.abs(E.x)}class X extends Au{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,f,v){super.touchstart(s,f,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,F(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,f,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=s[0].sub(this._lastPoints[0]),S=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,S,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(_.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(s,f,v){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,S=f.mag()>=2;if(!_&&!S)return;if(!_||!S)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const O=s.y>0==f.y>0;return F(s)&&F(f)&&O}}const de={panStep:100,bearingStep:15,pitchStep:10};class je{constructor(s){this._tr=new yo(s);const f=de;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let f=0,v=0,_=0,S=0,O=0;switch(s.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),S=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),S=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),O=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,_=0),{cameraAnimation:j=>{const B=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:ot,zoom:f?Math.round(B.zoom)+f*(s.shiftKey?2:1):B.zoom,bearing:B.bearing+v*this._bearingStep,pitch:B.pitch+_*this._pitchStep,offset:[-S*this._panStep,-O*this._panStep],center:B.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ot(E){return E*(2-E)}const ht=4.000244140625;class Pt{constructor(s,f){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new yo(s),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let f=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const v=C.now(),_=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,f!==0&&f%ht==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),s.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=s,this._delta-=f,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=P.mousePos(this._map.getCanvas(),s),v=this._tr;this._around=f.y>v.transform.height/2-v.transform.getHorizon()?a.N.convert(this._aroundCenter?v.center:v.unproject(f)):a.N.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>ht?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&W!==0&&(W=1/W);const Q=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(Q*W))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,v=this._startZoom,_=this._easing;let S,O=!1;const j=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&v&&_&&j){const B=Math.min(j/200,1),W=_(B);S=a.y.number(v,f,W),B<1?this._frameId||(this._frameId=!0):O=!0}else S=f,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:S-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let f=a.b9;if(this._prevEase){const v=this._prevEase,_=(C.now()-v.start)/v.duration,S=v.easing(_+.01)-v.easing(_),O=.27/Math.sqrt(S*S+1e-4)*.01,j=Math.sqrt(.0729-O*O);f=a.b8(O,j,.25,1)}return this._prevEase={start:C.now(),duration:s,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cn{constructor(s,f){this._clickZoom=s,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class er{constructor(s){this._tr=new yo(s),this.reset()}reset(){this._active=!1}dblclick(s,f){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class br{constructor(){this._tap=new ll({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,f,v){if(!this._swipePoint)if(this._tapTime){const _=f[0],S=s.timeStamp-this._tapTime<500,O=this._tapPoint.dist(_)<30;S&&O?v.length>0&&(this._swipePoint=_,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,f,v)}touchmove(s,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const _=f[0],S=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(s,f,v)}touchend(s,f,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const _=this._tap.touchend(s,f,v);_&&(this._tapTime=s.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ys{constructor(s,f,v){this._el=s,this._mousePan=f,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zi{constructor(s,f,v){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Us{constructor(s,f,v,_){this._el=s,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class qi{constructor(s,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",s);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=f,this._container.appendChild(_);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=v,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,f){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:s,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const hs=E=>E.zoom||E.drag||E.pitch||E.rotate;class hn extends a.k{}function jd(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class pf{constructor(s,f){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,S)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const O=_.type==="renderFrame"?void 0:_,j={needsRenderFrame:!1},B={},W={},Q=_.touches,J=Q?this._getMapTouches(Q):void 0,ae=J?P.touchPos(this._map.getCanvas(),J):P.mousePos(this._map.getCanvas(),_);for(const{handlerName:Pe,handler:Oe,allowed:Ne}of this._handlers){if(!Oe.isEnabled())continue;let $e;this._blockedByActive(W,Ne,Pe)?Oe.reset():Oe[S||_.type]&&($e=Oe[S||_.type](_,ae,J),this.mergeHandlerResult(j,B,$e,Pe,O),$e&&$e.needsRenderFrame&&this._triggerRenderFrame()),($e||Oe.isActive())&&(W[Pe]=Oe)}const ye={};for(const Pe in this._previousActiveHandlers)W[Pe]||(ye[Pe]=O);this._previousActiveHandlers=W,(Object.keys(ye).length||jd(j))&&(this._changes.push([j,B,ye]),this._triggerRenderFrame()),(Object.keys(W).length||jd(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:xe}=j;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gl(s),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,S,O]of this._listeners)P.addEventListener(_,S,_===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[s,f,v]of this._listeners)P.removeEventListener(s,f,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new oa(f,s));const _=f.boxZoom=new ds(f,s);this._add("boxZoom",_),s.interactive&&s.boxZoom&&_.enable();const S=f.cooperativeGestures=new qi(f,s.cooperativeGestures);this._add("cooperativeGestures",S),s.cooperativeGestures&&S.enable();const O=new Wl(f),j=new er(f);f.doubleClickZoom=new cn(j,O),this._add("tapZoom",O),this._add("clickZoom",j),s.interactive&&s.doubleClickZoom&&f.doubleClickZoom.enable();const B=new br;this._add("tapDragZoom",B);const W=f.touchPitch=new X(f);this._add("touchPitch",W),s.interactive&&s.touchPitch&&f.touchPitch.enable(s.touchPitch);const Q=Dd(s),J=Nd(s);f.dragRotate=new Zi(s,Q,J),this._add("mouseRotate",Q,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]),s.interactive&&s.dragRotate&&f.dragRotate.enable();const ae=(({enable:$e,clickTolerance:ke})=>{const We=new ku({checkCorrectEvent:et=>P.mouseButton(et)===0&&!et.ctrlKey});return new aa({clickTolerance:ke,move:(et,at)=>({around:at,panDelta:at.sub(et)}),activateOnStart:!0,moveStateManager:We,enable:$e,assignEvents:Pu})})(s),ye=new Xl(s,f);f.dragPan=new ys(v,ae,ye),this._add("mousePan",ae),this._add("touchPan",ye,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&f.dragPan.enable(s.dragPan);const xe=new A,Pe=new h;f.touchZoomRotate=new Us(v,Pe,xe,B),this._add("touchRotate",xe,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&f.touchZoomRotate.enable(s.touchZoomRotate);const Oe=f.scrollZoom=new Pt(f,()=>this._triggerRenderFrame());this._add("scrollZoom",Oe,["mousePan"]),s.interactive&&s.scrollZoom&&f.scrollZoom.enable(s.scrollZoom);const Ne=f.keyboard=new je(f);this._add("keyboard",Ne),s.interactive&&s.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new pi(f))}_add(s,f,v){this._handlers.push({handlerName:s,handler:f,allowed:v}),this._handlersById[s]=f}stop(s){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!hs(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,f,v){for(const _ in s)if(_!==v&&(!f||f.indexOf(_)<0))return!0;return!1}_getMapTouches(s){const f=[];for(const v of s)this._el.contains(v.target)&&f.push(v);return f}mergeHandlerResult(s,f,v,_,S){if(!v)return;a.e(s,v);const O={handlerName:_,originalEvent:v.originalEvent||S};v.zoomDelta!==void 0&&(f.zoom=O),v.panDelta!==void 0&&(f.drag=O),v.pitchDelta!==void 0&&(f.pitch=O),v.bearingDelta!==void 0&&(f.rotate=O)}_applyChanges(){const s={},f={},v={};for(const[_,S,O]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(s.around=_.around),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),a.e(f,S),a.e(v,O);this._updateMapTransform(s,f,v),this._changes=[]}_updateMapTransform(s,f,v){const _=this._map,S=_._getTransformForUpdate(),O=_.terrain;if(!(jd(s)||O&&this._terrainMovement))return this._fireEvents(f,v,!0);let{panDelta:j,zoomDelta:B,bearingDelta:W,pitchDelta:Q,around:J,pinchAround:ae}=s;ae!==void 0&&(J=ae),_._stop(!0),J=J||_.transform.centerPoint;const ye=S.pointLocation(j?J.sub(j):J);W&&(S.bearing+=W),Q&&(S.pitch+=Q),B&&(S.zoom+=B),O?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?S.center=S.pointLocation(S.centerPoint.sub(j)):S.setLocationAtPoint(ye,J):(this._terrainMovement=!0,this._map._elevationFreeze=!0,S.setLocationAtPoint(ye,J)):S.setLocationAtPoint(ye,J),_._applyUpdatedTransform(S),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(f,v,!0)}_fireEvents(s,f,v){const _=hs(this._eventsInProgress),S=hs(s),O={};for(const J in s){const{originalEvent:ae}=s[J];this._eventsInProgress[J]||(O[`${J}start`]=ae),this._eventsInProgress[J]=s[J]}!_&&S&&this._fireEvent("movestart",S.originalEvent);for(const J in O)this._fireEvent(J,O[J]);S&&this._fireEvent("move",S.originalEvent);for(const J in s){const{originalEvent:ae}=s[J];this._fireEvent(J,ae)}const j={};let B;for(const J in this._eventsInProgress){const{handlerName:ae,originalEvent:ye}=this._eventsInProgress[J];this._handlersById[ae].isActive()||(delete this._eventsInProgress[J],B=f[ae]||ye,j[`${J}end`]=B)}for(const J in j)this._fireEvent(J,j[J]);const W=hs(this._eventsInProgress),Q=(_||S)&&!W;if(Q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const J=this._map._getTransformForUpdate();J.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(J)}if(v&&Q){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;!J||!J.essential&&C.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:B})),ae(this._map.getBearing())&&this._map.resetNorth()):(ae(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(s,f){this._map.fire(new a.k(s,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new hn("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class mf extends a.E{constructor(s,f){super(),this._renderFrameCallback=()=>{const v=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=f.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,f){return this.jumpTo({center:s},f)}panBy(s,f,v){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},f),v)}panTo(s,f,v){return this.easeTo(a.e({center:s},f),v)}getZoom(){return this.transform.zoom}setZoom(s,f){return this.jumpTo({zoom:s},f),this}zoomTo(s,f,v){return this.easeTo(a.e({zoom:s},f),v)}zoomIn(s,f){return this.zoomTo(this.getZoom()+1,s,f),this}zoomOut(s,f){return this.zoomTo(this.getZoom()-1,s,f),this}getBearing(){return this.transform.bearing}setBearing(s,f){return this.jumpTo({bearing:s},f),this}getPadding(){return this.transform.padding}setPadding(s,f){return this.jumpTo({padding:s},f),this}rotateTo(s,f,v){return this.easeTo(a.e({bearing:s},f),v)}resetNorth(s,f){return this.rotateTo(0,a.e({duration:1e3},s),f),this}resetNorthPitch(s,f){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},s),f),this}snapToNorth(s,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,f):this}getPitch(){return this.transform.pitch}setPitch(s,f){return this.jumpTo({pitch:s},f),this}cameraForBounds(s,f){s=Qe.convert(s).adjustAntiMeridian();const v=f&&f.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,f)}_cameraForBoxAndBearing(s,f,v,_){const S={top:0,bottom:0,right:0,left:0};if(typeof(_=a.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Gt=_.padding;_.padding={top:Gt,bottom:Gt,right:Gt,left:Gt}}_.padding=a.e(S,_.padding);const O=this.transform,j=O.padding,B=new Qe(s,f),W=O.project(B.getNorthWest()),Q=O.project(B.getNorthEast()),J=O.project(B.getSouthEast()),ae=O.project(B.getSouthWest()),ye=a.ba(-v),xe=W.rotate(ye),Pe=Q.rotate(ye),Oe=J.rotate(ye),Ne=ae.rotate(ye),$e=new a.P(Math.max(xe.x,Pe.x,Ne.x,Oe.x),Math.max(xe.y,Pe.y,Ne.y,Oe.y)),ke=new a.P(Math.min(xe.x,Pe.x,Ne.x,Oe.x),Math.min(xe.y,Pe.y,Ne.y,Oe.y)),We=$e.sub(ke),et=(O.width-(j.left+j.right+_.padding.left+_.padding.right))/We.x,at=(O.height-(j.top+j.bottom+_.padding.top+_.padding.bottom))/We.y;if(at<0||et<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Tt=Math.min(O.scaleZoom(O.scale*Math.min(et,at)),_.maxZoom),Ft=a.P.convert(_.offset),Yt=new a.P((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(a.ba(v)),un=Ft.add(Yt).mult(O.scale/O.zoomScale(Tt));return{center:O.unproject(W.add(J).div(2).sub(un)),zoom:Tt,bearing:v}}fitBounds(s,f,v){return this._fitInternal(this.cameraForBounds(s,f),f,v)}fitScreenCoordinates(s,f,v,_,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(s)),this.transform.pointLocation(a.P.convert(f)),v,_),_,S)}_fitInternal(s,f,v){return s?(delete(f=a.e(s,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(s,f){this.stop();const v=this._getTransformForUpdate();let _=!1,S=!1,O=!1;return"zoom"in s&&v.zoom!==+s.zoom&&(_=!0,v.zoom=+s.zoom),s.center!==void 0&&(v.center=a.N.convert(s.center)),"bearing"in s&&v.bearing!==+s.bearing&&(S=!0,v.bearing=+s.bearing),"pitch"in s&&v.pitch!==+s.pitch&&(O=!0,v.pitch=+s.pitch),s.padding==null||v.isPaddingEqual(s.padding)||(v.padding=s.padding),this._applyUpdatedTransform(v),this.fire(new a.k("movestart",f)).fire(new a.k("move",f)),_&&this.fire(new a.k("zoomstart",f)).fire(new a.k("zoom",f)).fire(new a.k("zoomend",f)),S&&this.fire(new a.k("rotatestart",f)).fire(new a.k("rotate",f)).fire(new a.k("rotateend",f)),O&&this.fire(new a.k("pitchstart",f)).fire(new a.k("pitch",f)).fire(new a.k("pitchend",f)),this.fire(new a.k("moveend",f))}calculateCameraOptionsFromTo(s,f,v,_=0){const S=a.Z.fromLngLat(s,f),O=a.Z.fromLngLat(v,_),j=O.x-S.x,B=O.y-S.y,W=O.z-S.z,Q=Math.hypot(j,B,W);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(j,B),ae=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),ye=180*Math.atan2(j,-B)/Math.PI;let xe=180*Math.acos(J/Q)/Math.PI;return xe=W<0?90-xe:90+xe,{center:O.toLngLat(),zoom:ae,pitch:xe,bearing:ye}}easeTo(s,f){var v;this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.b9},s)).animate===!1||!s.essential&&C.prefersReducedMotion)&&(s.duration=0);const _=this._getTransformForUpdate(),S=_.zoom,O=_.bearing,j=_.pitch,B=_.padding,W="bearing"in s?this._normalizeBearing(s.bearing,O):O,Q="pitch"in s?+s.pitch:j,J="padding"in s?s.padding:_.padding,ae=a.P.convert(s.offset);let ye=_.centerPoint.add(ae);const xe=_.pointLocation(ye),{center:Pe,zoom:Oe}=_.getConstrained(a.N.convert(s.center||xe),(v=s.zoom)!==null&&v!==void 0?v:S);this._normalizeCenter(Pe,_);const Ne=_.project(xe),$e=_.project(Pe).sub(Ne),ke=_.zoomScale(Oe-S);let We,et;s.around&&(We=a.N.convert(s.around),et=_.locationPoint(We));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Oe!==S,this._rotating=this._rotating||O!==W,this._pitching=this._pitching||Q!==j,this._padding=!_.isPaddingEqual(J),this._easeId=s.easeId,this._prepareEase(f,s.noMoveStart,at),this.terrain&&this._prepareElevation(Pe),this._ease(Tt=>{if(this._zooming&&(_.zoom=a.y.number(S,Oe,Tt)),this._rotating&&(_.bearing=a.y.number(O,W,Tt)),this._pitching&&(_.pitch=a.y.number(j,Q,Tt)),this._padding&&(_.interpolatePadding(B,J,Tt),ye=_.centerPoint.add(ae)),this.terrain&&!s.freezeElevation&&this._updateElevation(Tt),We)_.setLocationAtPoint(We,et);else{const Ft=_.zoomScale(_.zoom-S),Yt=Oe>S?Math.min(2,ke):Math.max(.5,ke),un=Math.pow(Yt,1-Tt),Gt=_.unproject(Ne.add($e.mult(Tt*un)).mult(Ft));_.setLocationAtPoint(_.renderWorldCopies?Gt.wrap():Gt,ye)}this._applyUpdatedTransform(_),this._fireMoveEvents(f)},Tt=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f,Tt)},s),this}_prepareEase(s,f,v={}){this._moving=!0,f||v.moving||this.fire(new a.k("movestart",s)),this._zooming&&!v.zooming&&this.fire(new a.k("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new a.k("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new a.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&f!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(f-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=f}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){const f=s.getCameraPosition(),v=this.terrain.getElevationForLngLatZoom(f.lngLat,s.zoom);if(f.altitude<v){const _=this.calculateCameraOptionsFromTo(f.lngLat,v,s.center,s.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(s){const f=[];if(this.terrain&&f.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&f.push(_=>this.transformCameraUpdate(_)),!f.length)return;const v=s.clone();for(const _ of f){const S=v.clone(),{center:O,zoom:j,pitch:B,bearing:W,elevation:Q}=_(S);O&&(S.center=O),j!==void 0&&(S.zoom=j),B!==void 0&&(S.pitch=B),W!==void 0&&(S.bearing=W),Q!==void 0&&(S.elevation=Q),v.apply(S)}this.transform.apply(v)}_fireMoveEvents(s){this.fire(new a.k("move",s)),this._zooming&&this.fire(new a.k("zoom",s)),this._rotating&&this.fire(new a.k("rotate",s)),this._pitching&&this.fire(new a.k("pitch",s))}_afterEase(s,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const v=this._zooming,_=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new a.k("zoomend",s)),_&&this.fire(new a.k("rotateend",s)),S&&this.fire(new a.k("pitchend",s)),this.fire(new a.k("moveend",s))}flyTo(s,f){var v;if(!s.essential&&C.prefersReducedMotion){const rn=a.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(rn,f)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},s);const _=this._getTransformForUpdate(),S=_.zoom,O=_.bearing,j=_.pitch,B=_.padding,W="bearing"in s?this._normalizeBearing(s.bearing,O):O,Q="pitch"in s?+s.pitch:j,J="padding"in s?s.padding:_.padding,ae=a.P.convert(s.offset);let ye=_.centerPoint.add(ae);const xe=_.pointLocation(ye),{center:Pe,zoom:Oe}=_.getConstrained(a.N.convert(s.center||xe),(v=s.zoom)!==null&&v!==void 0?v:S);this._normalizeCenter(Pe,_);const Ne=_.zoomScale(Oe-S),$e=_.project(xe),ke=_.project(Pe).sub($e);let We=s.curve;const et=Math.max(_.width,_.height),at=et/Ne,Tt=ke.mag();if("minZoom"in s){const rn=a.ac(Math.min(s.minZoom,S,Oe),_.minZoom,_.maxZoom),Yn=et/_.zoomScale(rn-S);We=Math.sqrt(Yn/Tt*2)}const Ft=We*We;function Yt(rn){const Yn=(at*at-et*et+(rn?-1:1)*Ft*Ft*Tt*Tt)/(2*(rn?at:et)*Ft*Tt);return Math.log(Math.sqrt(Yn*Yn+1)-Yn)}function un(rn){return(Math.exp(rn)-Math.exp(-rn))/2}function Gt(rn){return(Math.exp(rn)+Math.exp(-rn))/2}const Zt=Yt(!1);let Pn=function(rn){return Gt(Zt)/Gt(Zt+We*rn)},tr=function(rn){return et*((Gt(Zt)*(un(Yn=Zt+We*rn)/Gt(Yn))-un(Zt))/Ft)/Tt;var Yn},Xt=(Yt(!0)-Zt)/We;if(Math.abs(Tt)<1e-6||!isFinite(Xt)){if(Math.abs(et-at)<1e-6)return this.easeTo(s,f);const rn=at<et?-1:1;Xt=Math.abs(Math.log(at/et))/We,tr=()=>0,Pn=Yn=>Math.exp(rn*We*Yn)}return s.duration="duration"in s?+s.duration:1e3*Xt/("screenSpeed"in s?+s.screenSpeed/We:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=O!==W,this._pitching=Q!==j,this._padding=!_.isPaddingEqual(J),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(Pe),this._ease(rn=>{const Yn=rn*Xt,ci=1/Pn(Yn);_.zoom=rn===1?Oe:S+_.scaleZoom(ci),this._rotating&&(_.bearing=a.y.number(O,W,rn)),this._pitching&&(_.pitch=a.y.number(j,Q,rn)),this._padding&&(_.interpolatePadding(B,J,rn),ye=_.centerPoint.add(ae)),this.terrain&&!s.freezeElevation&&this._updateElevation(rn);const hr=rn===1?Pe:_.unproject($e.add(ke.mult(tr(Yn))).mult(ci));_.setLocationAtPoint(_.renderWorldCopies?hr.wrap():hr,ye),this._applyUpdatedTransform(_),this._fireMoveEvents(f)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,f){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,f)}return s||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(s,f,v){v.animate===!1||v.duration===0?(s(1),f()):(this._easeStart=C.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,f){s=a.b3(s,-180,180);const v=Math.abs(s-f);return Math.abs(s-360-f)<v&&(s-=360),Math.abs(s+360-f)<v&&(s+=360),s}_normalizeCenter(s,f){if(!f.renderWorldCopies||f.lngRange)return;const v=s.lng-f.center.lng;s.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}const Nc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Kl{constructor(s=Nc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,f){const v=this._map._getUIString(`AttributionControl.${f}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const f=this._map.style.sourceCaches;for(const _ in f){const S=f[_];if(S.used||S.usedForTerrain){const O=S.getSource();O.attribution&&s.indexOf(O.attribution)<0&&s.push(O.attribution)}}s=s.filter(_=>String(_).trim()),s.sort((_,S)=>_.length-S.length),s=s.filter((_,S)=>{for(let O=S+1;O<s.length;O++)if(s[O].indexOf(_)>=0)return!1;return!0});const v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xi{constructor(s={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const v=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const f=P.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class pr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const f=++this._id;return this._queue.push({callback:s,id:f,cancelled:!1}),f}remove(s){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const _ of v)if(_.id===s)return void(_.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var gf=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class zg extends a.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,f){this.sourceCache.update(s,f),this._renderableTilesKeys=[];const v={};for(const _ of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))v[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),a.aP(_.posMatrix,0,a.X,0,a.X,0,1),this._tiles[_.key]=new Xn(_,this.tileSize));for(const _ in this._tiles)v[_]||delete this._tiles[_]}freeRtt(s){for(const f in this._tiles){const v=this._tiles[f];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const f={};for(const v of this._renderableTilesKeys){const _=this._tiles[v].tileID;if(_.canonical.equals(s.canonical)){const S=s.clone();S.posMatrix=new Float64Array(16),a.aP(S.posMatrix,0,a.X,0,a.X,0,1),f[v]=S}else if(_.canonical.isChildOf(s.canonical)){const S=s.clone();S.posMatrix=new Float64Array(16);const O=_.canonical.z-s.canonical.z,j=_.canonical.x-(_.canonical.x>>O<<O),B=_.canonical.y-(_.canonical.y>>O<<O),W=a.X>>O;a.aP(S.posMatrix,0,W,0,W,0,1),a.J(S.posMatrix,S.posMatrix,[-j*W,-B*W,0]),f[v]=S}else if(s.canonical.isChildOf(_.canonical)){const S=s.clone();S.posMatrix=new Float64Array(16);const O=s.canonical.z-_.canonical.z,j=s.canonical.x-(s.canonical.x>>O<<O),B=s.canonical.y-(s.canonical.y>>O<<O),W=a.X>>O;a.aP(S.posMatrix,0,a.X,0,a.X,0,1),a.J(S.posMatrix,S.posMatrix,[j*W,B*W,0]),a.K(S.posMatrix,S.posMatrix,[1/2**O,1/2**O,0]),f[v]=S}}return f}getSourceTile(s,f){const v=this.sourceCache._source;let _=s.overscaledZ-this.deltaZoom;if(_>v.maxzoom&&(_=v.maxzoom),_<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(_).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!S||!S.dem)&&f)for(;_>=v.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(s.scaledTo(_--).key);return S}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(f=>f.timeAdded>=s)}}class yf{constructor(s,f,v){this.painter=s,this.sourceCache=new zg(f),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,f,v,_=a.X){var S;if(!(f>=0&&f<_&&v>=0&&v<_))return 0;const O=this.getTerrainData(s),j=(S=O.tile)===null||S===void 0?void 0:S.dem;if(!j)return 0;const B=function(xe,Pe,Oe){var Ne=Pe[0],$e=Pe[1];return xe[0]=Oe[0]*Ne+Oe[4]*$e+Oe[12],xe[1]=Oe[1]*Ne+Oe[5]*$e+Oe[13],xe}([],[f/_*a.X,v/_*a.X],O.u_terrain_matrix),W=[B[0]*j.dim,B[1]*j.dim],Q=Math.floor(W[0]),J=Math.floor(W[1]),ae=W[0]-Q,ye=W[1]-J;return j.get(Q,J)*(1-ae)*(1-ye)+j.get(Q+1,J)*ae*(1-ye)+j.get(Q,J+1)*(1-ae)*ye+j.get(Q+1,J+1)*ae*ye}getElevationForLngLatZoom(s,f){if(!a.bb(f,s.wrap()))return 0;const{tileID:v,mercatorX:_,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(s,f);return this.getElevation(v,_%a.X,S%a.X,a.X)}getElevation(s,f,v,_=a.X){return this.getDEMElevation(s,f,v,_)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const _=this.painter.context,S=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Je(_,S,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Je(_,new a.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const f=this.sourceCache.getSourceTile(s,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const _=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new Je(_,f.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),f.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const v=f&&f+f.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){const _=this.sourceCache.sourceCache._source.maxzoom;let S=s.canonical.z-f.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=_?S=s.canonical.z-_:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const O=s.canonical.x-(s.canonical.x>>S<<S),j=s.canonical.y-(s.canonical.y>>S<<S),B=a.bc(new Float64Array(16),[1/(a.X<<S),1/(a.X<<S),0]);a.J(B,B,[O*a.X,j*a.X,0]),this._demMatrixCache[s.key]={matrix:B,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(s){const f=this.painter,v=f.width/devicePixelRatio,_=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Je(f.context,{width:v,height:_,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Je(f.context,{width:v,height:_,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(v,_,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,v,_))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,O=0;S<this._coordsTextureSize;S++)for(let j=0;j<this._coordsTextureSize;j++,O+=4)f[O+0]=255&j,f[O+1]=255&S,f[O+2]=j>>8<<4|S>>8,f[O+3]=0;const v=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),_=new Je(s,v,s.gl.RGBA,{premultiply:!1});return _.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),v=this.painter.context,_=v.gl,S=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),O=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(S,j-O-1,1,1,_.RGBA,_.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null);const B=f[0]+(f[2]>>4<<8),W=f[1]+((15&f[2])<<8),Q=this.coordsIndex[255-f[3]],J=Q&&this.sourceCache.getTileByID(Q);if(!J)return null;const ae=this._coordsTextureSize,ye=(1<<J.tileID.canonical.z)*ae;return new a.Z((J.tileID.canonical.x*ae+B)/ye+J.tileID.wrap,(J.tileID.canonical.y*ae+W)/ye,this.getElevation(J.tileID,B,W,ae))}depthAtPoint(s){const f=new Uint8Array(4),v=this.painter.context,_=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,f=new a.bd,v=new a.aY,_=this.meshSize,S=a.X/_,O=_*_;for(let J=0;J<=_;J++)for(let ae=0;ae<=_;ae++)f.emplaceBack(ae*S,J*S,0);for(let J=0;J<O;J+=_+1)for(let ae=0;ae<_;ae++)v.emplaceBack(ae+J,_+ae+J+1,_+ae+J+2),v.emplaceBack(ae+J,_+ae+J+2,ae+J+1);const j=f.length,B=j+2*(_+1);for(const J of[0,1])for(let ae=0;ae<=_;ae++)for(const ye of[0,1])f.emplaceBack(ae*S,J*a.X,ye);for(let J=0;J<2*_;J+=2)v.emplaceBack(B+J,B+J+1,B+J+3),v.emplaceBack(B+J,B+J+3,B+J+2),v.emplaceBack(j+J,j+J+3,j+J+1),v.emplaceBack(j+J,j+J+2,j+J+3);const W=f.length,Q=W+2*(_+1);for(const J of[0,1])for(let ae=0;ae<=_;ae++)for(const ye of[0,1])f.emplaceBack(J*a.X,ae*S,ye);for(let J=0;J<2*_;J+=2)v.emplaceBack(W+J,W+J+1,W+J+3),v.emplaceBack(W+J,W+J+3,W+J+2),v.emplaceBack(Q+J,Q+J+3,Q+J+1),v.emplaceBack(Q+J,Q+J+2,Q+J+3);return this._mesh=new Id(s.createVertexBuffer(f,gf.members),s.createIndexBuffer(v),a.a0.simpleSegment(0,0,f.length,v.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*a.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,f){var v;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(s,f);return(v=this.getMinMaxElevation(_).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(s){const f=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return f&&f.dem&&(v.minElevation=f.dem.min*this.exaggeration,v.maxElevation=f.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,f){const v=a.Z.fromLngLat(s.wrap()),_=(1<<f)*a.X,S=v.x*_,O=v.y*_,j=Math.floor(S/a.X),B=Math.floor(O/a.X);return{tileID:new a.S(f,0,f,j,B),mercatorX:S,mercatorY:O}}}class vf{constructor(s,f,v){this._context=s,this._size=f,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new Je(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(v.texture),{id:s,fbo:f,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>s.id!==f),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Yl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class zp{constructor(s,f){this.painter=s,this.terrain=f,this.pool=new vf(s.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(f)),this._coordsDescendingInv={};for(const v in s.sourceCaches){this._coordsDescendingInv[v]={};const _=s.sourceCaches[v].getVisibleCoordinates();for(const S of _){const O=this.terrain.sourceCache.getTerrainCoords(S);for(const j in O)this._coordsDescendingInv[v][j]||(this._coordsDescendingInv[v][j]=[]),this._coordsDescendingInv[v][j].push(O[j])}}this._coordsDescendingInvStr={};for(const v of s._order){const _=s._layers[v],S=_.source;if(Yl[_.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const O in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][O]=this._coordsDescendingInv[S][O].map(j=>j.key).sort().join()}}for(const v of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[_][v.tileID.key];S&&S!==v.rttCoords[_]&&(v.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const f=s.type,v=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Yl[f]&&(this._prevType&&Yl[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(s.id),!_))return!0;if(Yl[this._prevType]||Yl[f]&&_){this._prevType=f;const S=this._stacks.length-1,O=this._stacks[S]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(uf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[S]){const W=this.pool.getObjectForId(j.rtt[S].id);if(W.stamp===j.rtt[S].stamp){this.pool.useObject(W);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),j.rtt[S]={id:B.id,stamp:B.stamp},v.context.bindFramebuffer.set(B.fbo.framebuffer),v.context.clear({color:a.aM.transparent,stencil:0}),v.currentStencilSource=void 0;for(let W=0;W<O.length;W++){const Q=v.style._layers[O[W]],J=Q.source?this._coordsDescendingInv[Q.source][j.tileID.key]:[j.tileID];v.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),v._renderTileClippingMasks(Q,J),v.renderLayer(v,v.style.sourceCaches[Q.source],Q,J),Q.source&&(j.rttCoords[Q.source]=this._coordsDescendingInvStr[Q.source][j.tileID.key])}}return uf(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Yl[f]}return!1}}const Fg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},K_=m,z1={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Nc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Bg=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},F1={showCompass:!0,showZoom:!0,visualizePitch:!1};class B1{constructor(s,f,v=!1){this.mousedown=O=>{this.startMouse(a.e({},O,{ctrlKey:!0,preventDefault:()=>O.preventDefault()}),P.mousePos(this.element,O)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=O=>{this.moveMouse(O,P.mousePos(this.element,O))},this.mouseup=O=>{this.mouseRotate.dragEnd(O),this.mousePitch&&this.mousePitch.dragEnd(O),this.offTemp()},this.touchstart=O=>{O.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,O.targetTouches)[0],this.startTouch(O,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=O=>{O.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,O.targetTouches)[0],this.moveTouch(O,this._lastPos))},this.touchend=O=>{O.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=s.dragRotate._mouseRotate.getClickTolerance(),S=s.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=Dd({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:O,clickTolerance:j,bearingDegreesPerPixelMoved:B=.8})=>{const W=new Od;return new aa({clickTolerance:j,move:(Q,J)=>({bearingDelta:(J.x-Q.x)*B}),moveStateManager:W,enable:O,assignEvents:Bg})})({clickTolerance:_,enable:!0}),this.map=s,v&&(this.mousePitch=Nd({clickTolerance:S,enable:!0}),this.touchPitch=(({enable:O,clickTolerance:j,pitchDegreesPerPixelMoved:B=-.5})=>{const W=new Od;return new aa({clickTolerance:j,move:(Q,J)=>({pitchDelta:(J.y-Q.y)*B}),moveStateManager:W,enable:O,assignEvents:Bg})})({clickTolerance:S,enable:!0})),P.addEventListener(f,"mousedown",this.mousedown),P.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(f,"touchcancel",this.reset)}startMouse(s,f){this.mouseRotate.dragStart(s,f),this.mousePitch&&this.mousePitch.dragStart(s,f),P.disableDrag()}startTouch(s,f){this.touchRotate.dragStart(s,f),this.touchPitch&&this.touchPitch.dragStart(s,f),P.disableDrag()}moveMouse(s,f){const v=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(s,f)||{};if(_&&v.setBearing(v.getBearing()+_),this.mousePitch){const{pitchDelta:S}=this.mousePitch.dragMove(s,f)||{};S&&v.setPitch(v.getPitch()+S)}}moveTouch(s,f){const v=this.map,{bearingDelta:_}=this.touchRotate.dragMove(s,f)||{};if(_&&v.setBearing(v.getBearing()+_),this.touchPitch){const{pitchDelta:S}=this.touchPitch.dragMove(s,f)||{};S&&v.setPitch(v.getPitch()+S)}}off(){const s=this.element;P.removeEventListener(s,"mousedown",this.mousedown),P.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let jo;function li(E,s,f){const v=new a.N(E.lng,E.lat);if(E=new a.N(E.lng,E.lat),s){const _=new a.N(E.lng-360,E.lat),S=new a.N(E.lng+360,E.lat),O=f.locationPoint(E).distSqr(s);f.locationPoint(_).distSqr(s)<O?E=_:f.locationPoint(S).distSqr(s)<O&&(E=S)}for(;Math.abs(E.lng-f.center.lng)>180;){const _=f.locationPoint(E);if(_.x>=0&&_.y>=0&&_.x<=f.width&&_.y<=f.height)break;E.lng>f.center.lng?E.lng-=360:E.lng+=360}return E.lng!==v.lng&&f.locationPoint(E).y>f.height/2-f.getHorizon()?E:v}const zd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fp(E,s,f){const v=E.classList;for(const _ in zd)v.remove(`maplibregl-${f}-anchor-${_}`);v.add(`maplibregl-${f}-anchor-${s}`)}class Bp extends a.E{constructor(s){if(super(),this._onKeyPress=f=>{const v=f.code,_=f.charCode||f.keyCode;v!=="Space"&&v!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=f=>{const v=f.originalEvent.target,_=this._element;this._popup&&(v===_||_.contains(v))&&this.togglePopup()},this._update=f=>{var v;if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();((f==null?void 0:f.type)==="terrain"||(f==null?void 0:f.type)==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?li(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${zd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${S}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(f&&f.type==="moveend")}).catch(()=>{})},this._onMove=f=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const f=P.createNS("http://www.w3.org/2000/svg","svg"),v=41,_=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${v}px`),f.setAttributeNS(null,"width",`${_}px`),f.setAttributeNS(null,"viewBox",`0 0 ${_} ${v}`);const S=P.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const O=P.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");const j=P.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ne of B){const $e=P.createNS("http://www.w3.org/2000/svg","ellipse");$e.setAttributeNS(null,"opacity","0.04"),$e.setAttributeNS(null,"cx","10.5"),$e.setAttributeNS(null,"cy","5.80029008"),$e.setAttributeNS(null,"rx",Ne.rx),$e.setAttributeNS(null,"ry",Ne.ry),j.appendChild($e)}const W=P.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"fill",this._color);const Q=P.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),W.appendChild(Q);const J=P.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const ae=P.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(ae);const ye=P.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ye.setAttributeNS(null,"fill","#FFFFFF");const xe=P.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Pe=P.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#000000"),Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962");const Oe=P.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#FFFFFF"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962"),xe.appendChild(Pe),xe.appendChild(Oe),O.appendChild(j),O.appendChild(W),O.appendChild(J),O.appendChild(ye),O.appendChild(xe),f.appendChild(O),f.setAttributeNS(null,"height",v*this._scale+"px"),f.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(f),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Fp(this._element,this._anchor,"marker"),s&&s.className)for(const f of s.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var f,v;if(!(!((f=this._map)===null||f===void 0)&&f.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const _=this._map,S=_.terrain.depthAtPoint(this._pos),O=_.terrain.getElevationForLngLatZoom(this._lngLat,_.transform.tileZoom);if(_.transform.lngLatToCameraDepth(this._lngLat,O)-S<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/_.transform._pixelPerMeter,B=Math.sin(_.getPitch()*Math.PI/180)*j,W=_.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Q=_.transform.lngLatToCameraDepth(this._lngLat,O+B)-W>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,f){return s===void 0&&f===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const Y_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let _f=0,xf=!1;const cl={maxWidth:100,unit:"metric"};function bf(E,s,f){const v=f&&f.maxWidth||100,_=E._container.clientHeight/2,S=E.unproject([0,_]),O=E.unproject([v,_]),j=S.distanceTo(O);if(f&&f.unit==="imperial"){const B=3.2808*j;B>5280?kn(s,v,B/5280,E._getUIString("ScaleControl.Miles")):kn(s,v,B,E._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?kn(s,v,j/1852,E._getUIString("ScaleControl.NauticalMiles")):j>=1e3?kn(s,v,j/1e3,E._getUIString("ScaleControl.Kilometers")):kn(s,v,j,E._getUIString("ScaleControl.Meters"))}function kn(E,s,f,v){const _=function(S){const O=Math.pow(10,`${Math.floor(S)}`.length-1);let j=S/O;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(B){const W=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*W)/W}(j),O*j}(f);E.style.width=s*(_/f)+"px",E.innerHTML=`${_}&nbsp;${v}`}const qn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Up=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $p(E){if(E){if(typeof E=="number"){const s=Math.round(Math.abs(E)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,E),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-E),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(E,0),right:new a.P(-E,0)}}if(E instanceof a.P||Array.isArray(E)){const s=a.P.convert(E);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(E.center||[0,0]),top:a.P.convert(E.top||[0,0]),"top-left":a.P.convert(E["top-left"]||[0,0]),"top-right":a.P.convert(E["top-right"]||[0,0]),bottom:a.P.convert(E.bottom||[0,0]),"bottom-left":a.P.convert(E["bottom-left"]||[0,0]),"bottom-right":a.P.convert(E["bottom-right"]||[0,0]),left:a.P.convert(E.left||[0,0]),right:a.P.convert(E.right||[0,0])}}return $p(new a.P(0,0))}const Ug=m;u.AJAXError=a.bh,u.Evented=a.E,u.LngLat=a.N,u.MercatorCoordinate=a.Z,u.Point=a.P,u.addProtocol=a.bi,u.config=a.a,u.removeProtocol=a.bj,u.AttributionControl=Kl,u.BoxZoomHandler=ds,u.CanvasSource=pn,u.CooperativeGesturesHandler=qi,u.DoubleClickZoomHandler=cn,u.DragPanHandler=ys,u.DragRotateHandler=Zi,u.EdgeInsets=Rc,u.FullscreenControl=class extends a.E{constructor(E={}){super(),this._onFullscreenChange=()=>{var s;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=f==null?void 0:f.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=mt,u.GeolocateControl=class extends a.E{constructor(E){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{const f=new a.N(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,_=this._map.getBearing(),S=a.e({bearing:_},this.options.fitBoundsOptions),O=Qe.fromLngLat(f,v);this._map.fitBounds(O,S,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const f=new a.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&xf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bp({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},Y_,E)}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(s=!1){if(jo!==void 0&&!s)return jo;if(window.navigator.permissions===void 0)return jo=!!window.navigator.geolocation,jo;try{jo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{jo=!!window.navigator.geolocation}return jo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_f=0,xf=!1}_isOutOfMapMaxBounds(E){const s=this._map.getMaxBounds(),f=E.coords;return s&&(f.longitude<s.getWest()||f.longitude>s.getEast()||f.latitude<s.getSouth()||f.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),s=E.getSouthEast(),f=E.getNorthEast(),v=s.distanceTo(f),_=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_f--,xf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),_f++,_f>1?(E={maximumAge:6e5,timeout:0},xf=!0):(E=this.options.positionOptions,xf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=ql,u.ImageSource=wt,u.KeyboardHandler=je,u.LngLatBounds=Qe,u.LogoControl=xi,u.Map=class extends mf{constructor(E){a.bf.mark(a.bg.create);const s=Object.assign(Object.assign({},z1),E);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Lc(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new pr,this._controls=[],this._mapId=a.a4(),this._contextLost=f=>{f.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:f}))},this._contextRestored=f=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:f}))},this._onMapScroll=f=>{if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Fg),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=q.addThrottleControl(()=>this.isMoving()),this._requestManager=new te(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let f=!1;const v=Bs(_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())},50);this._resizeObserver=new ResizeObserver(_=>{f?v(_):f=!0}),this._resizeObserver.observe(this._container)}this.handlers=new pf(this,s),this._hash=s.hash&&new ql(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,a.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Kl(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new xi,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update(f.dataType==="style"),this.fire(new a.k(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new a.k(`${f.dataType}dataloading`,f))}),this.on("dataabort",f=>{this.fire(new a.k("sourcedataabort",f))})}_getMapId(){return this._mapId}addControl(E,s){if(s===void 0&&(s=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=E.onAdd(this);this._controls.push(E);const v=this._controlPositions[s];return s.indexOf("bottom")!==-1?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(E);return s>-1&&this._controls.splice(s,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,s,f,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,s,f,v)}resize(E){var s;const f=this._containerDimensions(),v=f[0],_=f[1],S=this._getClampedPixelRatio(v,_);if(this._resizeCanvas(v,_,S),this.painter.resize(v,_,S),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const B=this._getClampedPixelRatio(v,_);this._resizeCanvas(v,_,B),this.painter.resize(v,_,B)}this.transform.resize(v,_),(s=this._requestedCameraState)===null||s===void 0||s.resize(v,_);const O=!this._moving;return O&&(this.stop(),this.fire(new a.k("movestart",E)).fire(new a.k("move",E))),this.fire(new a.k("resize",E)),O&&this.fire(new a.k("moveend",E)),this}_getClampedPixelRatio(E,s){const{0:f,1:v}=this._maxCanvasSize,_=this.getPixelRatio(),S=E*_,O=s*_;return Math.min(S>f?f/S:1,O>v?v/O:1)*_}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(Qe.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(a.N.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(a.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,s,f){if(E==="mouseenter"||E==="mouseover"){let v=!1;return{layers:s,listener:f,delegates:{mousemove:S=>{const O=s.filter(B=>this.getLayer(B)),j=O.length!==0?this.queryRenderedFeatures(S.point,{layers:O}):[];j.length?v||(v=!0,f.call(this,new us(E,this,S.originalEvent,{features:j}))):v=!1},mouseout:()=>{v=!1}}}}if(E==="mouseleave"||E==="mouseout"){let v=!1;return{layers:s,listener:f,delegates:{mousemove:O=>{const j=s.filter(B=>this.getLayer(B));(j.length!==0?this.queryRenderedFeatures(O.point,{layers:j}):[]).length?v=!0:v&&(v=!1,f.call(this,new us(E,this,O.originalEvent)))},mouseout:O=>{v&&(v=!1,f.call(this,new us(E,this,O.originalEvent)))}}}}{const v=_=>{const S=s.filter(j=>this.getLayer(j)),O=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];O.length&&(_.features=O,f.call(this,_),delete _.features)};return{layers:s,listener:f,delegates:{[E]:v}}}}_saveDelegatedListener(E,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(s)}_removeDelegatedListener(E,s,f){if(!this._delegatedListeners||!this._delegatedListeners[E])return;const v=this._delegatedListeners[E];for(let _=0;_<v.length;_++){const S=v[_];if(S.listener===f&&S.layers.length===s.length&&S.layers.every(O=>s.includes(O))){for(const O in S.delegates)this.off(O,S.delegates[O]);return void v.splice(_,1)}}}on(E,s,f){if(f===void 0)return super.on(E,s);const v=this._createDelegatedListener(E,typeof s=="string"?[s]:s,f);this._saveDelegatedListener(E,v);for(const _ in v.delegates)this.on(_,v.delegates[_]);return this}once(E,s,f){if(f===void 0)return super.once(E,s);const v=typeof s=="string"?[s]:s,_=this._createDelegatedListener(E,v,f);for(const S in _.delegates){const O=_.delegates[S];_.delegates[S]=(...j)=>{this._removeDelegatedListener(E,v,f),O(...j)}}this._saveDelegatedListener(E,_);for(const S in _.delegates)this.once(S,_.delegates[S]);return this}off(E,s,f){return f===void 0?super.off(E,s):(this._removeDelegatedListener(E,typeof s=="string"?[s]:s,f),this)}queryRenderedFeatures(E,s){if(!this.style)return[];let f;const v=E instanceof a.P||Array.isArray(E),_=v?E:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:E)||{},_ instanceof a.P||typeof _[0]=="number")f=[a.P.convert(_)];else{const S=a.P.convert(_[0]),O=a.P.convert(_[1]);f=[S,new a.P(O.x,S.y),O,new a.P(S.x,O.y),S]}return this.style.queryRenderedFeatures(f,s,this.transform)}querySourceFeatures(E,s){return this.style.querySourceFeatures(E,s)}setStyle(E,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(E,s))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const s=this._locale[E];if(s==null)throw new Error(`Missing UI string '${E}'`);return s}_updateStyle(E,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(E,s));const f=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Yo(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,s,f):this.style.loadJSON(E,s,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Yo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,s){if(typeof E=="string"){const f=this._requestManager.transformRequest(E,"Style");a.h(f,new AbortController).then(v=>{this._updateDiff(v.data,s)}).catch(v=>{v&&this.fire(new a.j(v))})}else typeof E=="object"&&this._updateDiff(E,s)}_updateDiff(E,s){try{this.style.setState(E,s)&&this._update(!0)}catch(f){a.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(E,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(E,s){return this._lazyInitEmptyStyle(),this.style.addSource(E,s),this._update(!0)}isSourceLoaded(E){const s=this.style&&this.style.sourceCaches[E];if(s!==void 0)return s.loaded();this.fire(new a.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const s=this.style.sourceCaches[E.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);this.terrain===null&&s.reload();for(const f in this.style._layers){const v=this.style._layers[f];v.type==="hillshade"&&v.source===E.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new yf(this.painter,s,E),this.painter.renderToTexture=new zp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==E.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:E})),this}getTerrain(){var E,s;return(s=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const s in E){const f=E[s]._tiles;for(const v in f){const _=f[v];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,s,f={}){const{pixelRatio:v=1,sdf:_=!1,stretchX:S,stretchY:O,content:j,textFitWidth:B,textFitHeight:W}=f;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Q,height:J,data:ae}=s,ye=s;return this.style.addImage(E,{data:new a.R({width:Q,height:J},new Uint8Array(ae)),pixelRatio:v,stretchX:S,stretchY:O,content:j,textFitWidth:B,textFitHeight:W,sdf:_,version:0,userImage:ye}),ye.onAdd&&ye.onAdd(this,E),this}}{const{width:Q,height:J,data:ae}=C.getImageData(s);this.style.addImage(E,{data:new a.R({width:Q,height:J},ae),pixelRatio:v,stretchX:S,stretchY:O,content:j,textFitWidth:B,textFitHeight:W,sdf:_,version:0})}}updateImage(E,s){const f=this.style.getImage(E);if(!f)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=s instanceof HTMLImageElement||a.b(s)?C.getImageData(s):s,{width:_,height:S,data:O}=v;if(_===void 0||S===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==f.data.width||S!==f.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(s instanceof HTMLImageElement||a.b(s));return f.data.replace(O,j),this.style.updateImage(E,f),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return q.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,s){return this._lazyInitEmptyStyle(),this.style.addLayer(E,s),this._update(!0)}moveLayer(E,s){return this.style.moveLayer(E,s),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,s,f){return this.style.setLayerZoomRange(E,s,f),this._update(!0)}setFilter(E,s,f={}){return this.style.setFilter(E,s,f),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,s,f,v={}){return this.style.setPaintProperty(E,s,f,v),this._update(!0)}getPaintProperty(E,s){return this.style.getPaintProperty(E,s)}setLayoutProperty(E,s,f,v={}){return this.style.setLayoutProperty(E,s,f,v),this._update(!0)}getLayoutProperty(E,s){return this.style.getLayoutProperty(E,s)}setGlyphs(E,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,s,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,s,f,v=>{v||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,s,f=>{f||this._update(!0)}),this}setLight(E,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(E){return this._lazyInitEmptyStyle(),this.style.setSky(E),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(E,s){return this.style.setFeatureState(E,s),this._update()}removeFeatureState(E,s){return this.style.removeFeatureState(E,s),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,s=0;return this._container&&(E=this._container.clientWidth||400,s=this._container.clientHeight||300),[E,s]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const s=this._canvasContainer=P.create("div","maplibregl-canvas-container",E);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),v=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],v);const _=this._controlContainer=P.create("div","maplibregl-control-container",E),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(O=>{S[O]=P.create("div",`maplibregl-ctrl-${O} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,s,f){this._canvas.width=Math.floor(f*E),this._canvas.height=Math.floor(f*s),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:E},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});const f=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!f){const v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new Hl(f,this.transform),I.testSupport(f)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,S=C.now();this.style.zoomHistory.update(_,S);const O=new a.z(_,{now:S,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),j=O.crossFadingFactor();j===1&&j===this._crossFadingFactor||(f=!0,this._crossFadingFactor=j),this.style.update(O)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(E=>{a.bf.frame(E),this._frameRequest=null,this._render(E)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return K_}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=us,u.MapTouchEvent=al,u.MapWheelEvent=jp,u.Marker=Bp,u.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const s=this._map.getZoom(),f=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,f)=>{const v=this._map._getUIString(`NavigationControl.${f}`);s.title=v,s.setAttribute("aria-label",v)},this.options=a.e({},F1,E),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new B1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,s){const f=P.create("button",E,this._container);return f.type="button",f.addEventListener("click",s),f}},u.Popup=class extends a.E{constructor(E){super(),this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var f;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const j of this.options.className.split(" "))this._container.classList.add(j);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?li(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._trackPointer&&!s)return;const v=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let _=this.options.anchor;const S=$p(this.options.offset);if(!_){const j=this._container.offsetWidth,B=this._container.offsetHeight;let W;W=v.y+S.bottom.y<B?["top"]:v.y>this._map.transform.height-B?["bottom"]:[],v.x<j/2?W.push("left"):v.x>this._map.transform.width-j/2&&W.push("right"),_=W.length===0?"bottom":W.join("-")}let O=v.add(S[_]);this.options.subpixelPositioning||(O=O.round()),P.setTransform(this._container,`${zd[_]} translate(${O.x}px,${O.y}px)`),Fp(this._container,_,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(qn),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=a.N.convert(E),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const s=document.createDocumentFragment(),f=document.createElement("body");let v;for(f.innerHTML=E;v=f.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){return this._container&&this._container.classList.add(E),this}removeClassName(E){return this._container&&this._container.classList.remove(E),this}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}setSubpixelPositioning(E){this.options.subpixelPositioning=E}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(Up);E&&E.focus()}},u.RasterDEMTileSource=Ye,u.RasterTileSource=De,u.ScaleControl=class{constructor(E){this._onMove=()=>{bf(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,bf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cl),E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=Pt,u.Style=Yo,u.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=X,u.TwoFingersTouchRotateHandler=A,u.TwoFingersTouchZoomHandler=h,u.TwoFingersTouchZoomRotateHandler=Us,u.VectorTileSource=Le,u.VideoSource=Bt,u.addSourceType=(E,s)=>a._(void 0,void 0,void 0,function*(){if(ln(E))throw new Error(`A source type called "${E}" already exists.`);((f,v)=>{nn[f]=v})(E,s)}),u.clearPrewarmedResources=function(){const E=It;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(ct),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return fr().getRTLTextPluginStatus()},u.getVersion=function(){return Ug},u.getWorkerCount=function(){return xt.workerCount},u.getWorkerUrl=function(){return a.a.WORKER_URL},u.importScriptInWorkers=function(E){return an().broadcast("IS",E)},u.prewarm=function(){fn().acquire(ct)},u.setMaxParallelImageRequests=function(E){a.a.MAX_PARALLEL_IMAGE_REQUESTS=E},u.setRTLTextPlugin=function(E,s){return fr().setRTLTextPlugin(E,s)},u.setWorkerCount=function(E){xt.workerCount=E},u.setWorkerUrl=function(E){a.a.WORKER_URL=E}});var l=n;return l})}(nC)),nC.exports}(function(e,t){(function(n,r){e.exports=r(sr,ile())})(typeof globalThis<"u"?globalThis:cc||self,function(n,r){n.MaplibreGL=n.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},initialize:function(i){n.setOptions(this,i),this._throttledUpdate=n.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(i){this._container||this._initContainer();var l=this.getPaneName();i.getPane(l).appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),i.options.zoomAnimation&&n.DomEvent.on(i._proxy,n.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(i){this._map._proxy&&this._map.options.zoomAnimation&&n.DomEvent.off(this._map._proxy,n.DomUtil.TRANSITION_END,this._transitionEnd,this);var l=this.getPaneName();i.getPane(l).removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaplibreMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){var i=this.getSize().multiplyBy(.5),l=this._map.latLngToContainerPoint(this._map.getCenter());return n.latLngBounds(this._map.containerPointToLatLng(l.subtract(i)),this._map.containerPointToLatLng(l.add(i)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},_roundPoint:function(i){return{x:Math.round(i.x),y:Math.round(i.y)}},_initContainer:function(){var i=this._container=n.DomUtil.create("div","leaflet-gl-layer"),l=this.getSize(),u=this._map.getSize().multiplyBy(this.options.padding);i.style.width=l.x+"px",i.style.height=l.y+"px";var a=this._map.containerPointToLayerPoint([0,0]).subtract(u);n.DomUtil.setPosition(i,this._roundPoint(a))},_initGL:function(){var i=this._map.getCenter(),l=n.extend({},this.options,{container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new r.Map(l),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas;var u=this._glMap._actualCanvas;n.DomUtil.addClass(u,"leaflet-image-layer"),n.DomUtil.addClass(u,"leaflet-zoom-animated"),this.options.interactive&&n.DomUtil.addClass(u,"leaflet-interactive"),this.options.className&&n.DomUtil.addClass(u,this.options.className)},_update:function(i){if(this._map&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var l=this.getSize(),u=this._container,a=this._glMap,m=this._map.getSize().multiplyBy(this.options.padding),g=this._map.containerPointToLayerPoint([0,0]).subtract(m);n.DomUtil.setPosition(u,this._roundPoint(g)),this._transformGL(a),a.transform.width!==l.x||a.transform.height!==l.y?(u.style.width=l.x+"px",u.style.height=l.y+"px",a._resize!==null&&a._resize!==void 0?a._resize():a.resize()):a._update!==null&&a._update!==void 0?a._update():a.update()}},_transformGL:function(i){var l=this._map.getCenter(),u=i.transform;u.center=r.LngLat.convert([l.lng,l.lat]),u.zoom=this._map.getZoom()-1},_pinchZoom:function(i){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),u=this._map.getSize().multiplyBy(this.options.padding*l),a=this.getSize()._divideBy(2),m=this._map.project(i.center,i.zoom)._subtract(a)._add(this._map._getMapPanePos().add(u))._round(),g=this._map.project(this._map.getBounds().getNorthWest(),i.zoom)._subtract(m);n.DomUtil.setTransform(this._glMap._actualCanvas,g.subtract(this._offset),l)},_zoomStart:function(i){this._zooming=!0},_zoomEnd:function(){var i=this._map.getZoomScale(this._map.getZoom());n.DomUtil.setTransform(this._glMap._actualCanvas,null,i),this._zooming=!1,this._update()},_transitionEnd:function(i){n.Util.requestAnimFrame(function(){var l=this._map.getZoom(),u=this._map.getCenter(),a=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());n.DomUtil.setTransform(this._glMap._actualCanvas,a,1),this._glMap.once("moveend",n.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:u,zoom:l-1})},this)},_resize:function(i){this._transitionEnd(i)}}),n.maplibreGL=function(i){return new n.MaplibreGL(i)}})})(rle);const sle=tI(({styleUrl:e,...t},n)=>{const r={style:e,...t};return{instance:new xae.MaplibreGL(r),context:n}},nI),pa=class pa extends sr.Marker{constructor(t,n,r,i,l){l={...l,icon:pa.normalIcon(n),riseOnHover:!0,riseOffset:1e3},super(i,l),this.isMinimized=!1,this.isActive=!1,this.isClicked=!1,this.id=t,this.price=n,this.setActiveIdStateCallback=r,this.on("click",this.onClick),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut)}minimize(){this.isActive||(this.isMinimized=!0,this.setZIndexOffset(0),this.setIcon(pa.minimizedIcon))}unminimize(){this.isActive||(this.isMinimized=!1,this.setZIndexOffset(300),this.setIcon(pa.normalIcon(this.price)))}onClick(){this.setActiveIdStateCallback(this.id),this.setActive()}onMouseOver(){this.setIcon(pa.activeIcon(this.price))}onMouseOut(){this.isClicked||(this.isMinimized?this.setIcon(pa.minimizedIcon):this.setIcon(pa.normalIcon(this.price)))}setActive(){this.isActive=!0,this.isClicked=!0,this.setZIndexOffset(1e3),this.setIcon(pa.activeIcon(this.price))}setDefaultIcon(){return this.setIcon(pa.normalIcon(this.price))}setInactive(){this.isActive=!1,this.isClicked=!1,this.setZIndexOffset(0),this.isMinimized?this.setIcon(pa.minimizedIcon):this.setIcon(pa.normalIcon(this.price))}static normalIcon(t){return this.createDivIcon("cvg-hotel-marker__icon",t)}static activeIcon(t){return this.createDivIcon("cvg-hotel-marker__icon cvg-hotel-marker__icon--active",t)}static createDivIcon(t,n){return sr.divIcon({className:t,html:n??"",iconSize:void 0})}};pa.minimizedIcon=pa.createDivIcon("cvg-hotel-marker__icon--minimized");let ik=pa;const ole=({hotels:e,onMarkerClicked:t,isHotelActive:n})=>{const[r,i]=M.useState(null),[l,u]=M.useState([]);M.useEffect(()=>{n||i(null)},[n]),M.useEffect(()=>{l.forEach(I=>{I.id===r?I.setActive():I.setInactive()}),C(l),t(r)},[r]),M.useEffect(()=>{const I=g(e);P(I,m),u(I)},[e]),M.useEffect(()=>{w(l),C(l)},[l]);const m=o5({zoomend:()=>{w(l),C(l)}}),g=I=>I.map(N=>{var z,$;return new ik(N.id,N.price,i,[((z=N.coordinates)==null?void 0:z.latitude)??0,(($=N.coordinates)==null?void 0:$.longitude)??0])}),w=I=>{m.eachLayer(N=>{N instanceof sr.Marker&&m.removeLayer(N)}),I.forEach(N=>N.addTo(m))},C=I=>{var $,H;const z=[];for(let V=0;V<I.length-1;V++){const q=I[V],te=($=q.setDefaultIcon().getElement())==null?void 0:$.getBoundingClientRect();if(!te)continue;const ue=m.latLngToLayerPoint(q.getLatLng());for(let fe=V+1;fe<I.length;fe++){const Z=I[fe],le=(H=Z.setDefaultIcon().getElement())==null?void 0:H.getBoundingClientRect();if(!le)continue;const be=m.latLngToLayerPoint(Z.getLatLng()),Re=ue.x<be.x+le.width-8&&ue.x+te.width-8>be.x,Je=ue.y<be.y+le.height-8&&ue.y+te.height-8>be.y;if(Re&&Je){let Fe;Z.isActive?Fe=q.id:Fe=Z.id,z.includes(Fe)||z.push(Fe)}}}for(const V of I)z.includes(V.id)?V.minimize():V.id===r?V.setActive():V.unminimize()},P=(I,N)=>{if(I.length===1)N.setView(I[0].getLatLng(),13);else{const $=sr.featureGroup();I.forEach(H=>{H.addTo($)}),N.fitBounds($.getBounds(),{padding:[50,50]})}};return y.jsx(y.Fragment,{})},ale=({hotel:e,specialOffer:t,isOpen:n,onClickClose:r})=>{const{onOpenDrawer:i}=dn.useContext(rf),l=Te(w=>w.configuration.displayConstraints.ratePriceDisplayMode);if(!e)return null;const{name:u,rating:a,picture:m,price:g}=e;return n?y.jsxs("article",{className:"cvg-hotel-card-map",children:[y.jsxs("div",{className:Or("cvg-hotel-card-map__header",{"cvg-hotel-card-map__header--special-offer":t}),children:[t?y.jsx(b3,{"data-testid":"special-offer",variation:"positive",children:t}):null,y.jsx(bn,{variation:"close",className:"cvg-hotel-card-map__header-close-button",onClick:r,children:re(Ur.Close)})]}),m!=null&&m.picture2XUrl?y.jsx("img",{src:m.picture2XUrl,className:"cvg-hotel-card-map__image",loading:"lazy",decoding:"async",alt:""}):y.jsx("div",{className:"cvg-hotel-card-map__image cvg-hotel-card-map__image--placeholder","data-testid":"hotel-map-image-placeholder",children:y.jsx(sn,{name:"hotel",size:"large",className:"cvg-hotel-card-map__image-placeholder-icon"})}),y.jsxs("div",{className:"cvg-hotel-card-map__information",children:[y.jsxs("div",{className:"cvg-hotel-card-map__information-name-and-rating",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-hotel-card-map__information-name",children:u}),a?y.jsxs("span",{className:"cvg-hotel-card-map__stars-icons",children:[y.jsx(sn,{name:"star",size:"small","data-testid":"star-icon"}),y.jsx("span",{children:a})]}):null]}),y.jsx(bn,{variation:"link",type:"button",onClick:()=>{i(e)},children:re(yr.HotelDetails)})]}),y.jsxs("div",{className:"cvg-hotel-card-map__footer",children:[y.jsx("span",{children:re(yr.StartingFrom)}),y.jsx("span",{className:"cvg-typo-price-1",children:g}),y.jsx("span",{className:"cvg-typo-body-tiny cvg-hotel-card-map__rate-per",children:re(l==="Average"?yr.RatePerNightLabel:yr.RatePerStayLabel)})]})]}):null},lle=({activeHotel:e,onClickClose:t})=>{const a=B_(),m=a.getBounds(),g=a.getSize(),w=(H,V,q)=>{const te=new sr.Point(H.x+V,H.y+q),ue=a.containerPointToLatLng(H),fe=a.containerPointToLatLng(te);return new sr.LatLngBounds(ue,fe)},C=()=>{const H=new sr.Point(N.x-180+40,N.y+45+5),V=new sr.Point(N.x-360/2+80/2,N.y-340-5),q=new sr.Point(N.x+80,N.y-340/2-5),te=new sr.Point(N.x-360-5,N.y-340/2-5),ue=new sr.Point(N.x+80+5,N.y+45+5),fe=new sr.Point(N.x-5-360,N.y-5-340),Z=new sr.Point(N.x-5-360,N.y+45+5),le=new sr.Point(N.x+80+5,N.y-5-340);return[H,V,q,te,ue,fe,Z,le].find(Re=>m.contains(w(Re,360,340)))??P()},P=()=>{const H=new sr.Point(N.x-5-360,(g.y-340)/2),V=new sr.Point(N.x+80+5,(g.y-340)/2),q=w(H,360,340);return!m.contains(q)&&!q.contains(I)?V:H},I=sr.latLng(e.coordinates.latitude,e.coordinates.longitude),N=a.latLngToContainerPoint(I),z=C(),$={"--cvg-card-position-x":`${z.x}px`,"--cvg-card-position-y":`${z.y}px`};return y.jsx("div",{className:"cvg-hotel-map__hotel-card",style:$,children:y.jsx(ale,{hotel:e,isOpen:!!e,onClickClose:t})})},cle=({lat:e,lng:t})=>{const n=B_();return M.useEffect(()=>{const l=-(n.getSize().y*2/5)+370,a=n.latLngToContainerPoint(sr.latLng(e,t)).add([0,l]),m=n.containerPointToLatLng(a);n.setView(m)},[n,e,t]),null},ule=({onClickAway:e})=>(s5("click",t=>{const n=document.querySelector(".cvg-hotel-map__hotel-card"),r=t.originalEvent.target;n!=null&&n.contains(r)||e()}),null),dle=({availableHotels:e,className:t,children:n,isMobile:r})=>{const i=e.filter(C=>C.coordinates),l=ple(i),u=l==null?void 0:l.getCenter(),[a,m]=M.useState(void 0),g=C=>{const P=e.find(I=>I.id===C);P&&m(P)},w=()=>{m(void 0)};return u?y.jsx("div",{"data-testid":"hotel-map-container",className:t,children:y.jsxs(l5,{className:"cvg-hotel-map__full-height-map",center:[u.lat,u.lng],zoom:3,minZoom:3,scrollWheelZoom:!0,zoomControl:!1,attributionControl:!1,worldCopyJump:!0,children:[y.jsx("div",{className:"cvg-hotel-map__action-map",children:n}),y.jsx(ole,{hotels:e,onMarkerClicked:g,isHotelActive:!!a}),y.jsx(sle,{styleUrl:"map_multi_primary.json"}),a?y.jsx(lle,{activeHotel:a,onClickClose:w}):null,y.jsx(ule,{onClickAway:w}),r&&(a!=null&&a.coordinates)?y.jsx(cle,{lat:a.coordinates.latitude,lng:a.coordinates.longitude}):null]})}):null},hle=e=>e.map(t=>{var n,r;return[((n=t.coordinates)==null?void 0:n.latitude)??0,((r=t.coordinates)==null?void 0:r.longitude)??0]}),fle=e=>e&&!(e[0]===0&&e[1]===0),ple=e=>{const t=hle(e).filter(()=>fle);if(t.length===0)return null;if(t.length===1)return sr.latLngBounds([t[0][0]-.1,t[0][1]-.1],[t[0][0]+.1,t[0][1]+.1]);const n=sr.latLngBounds([t[0][0]-.1,t[0][1]-.1],[t[0][0]+.1,t[0][1]+.1]);return t.forEach(r=>{n.extend([r[0],r[1]])}),n},mle=({hotel:e})=>{const{name:t,rating:n,picture:r,zipCode:i,city:l,district:u,country:a,amenities:m}=e,{onOpenDrawer:g}=M.useContext(rf),w=Ir(),C=VA({hotelId:e.id});return y.jsxs("article",{className:"cvg-hotel-carousel-card",children:[r!=null&&r.picture2XUrl?y.jsx("img",{src:r.picture2XUrl,className:"cvg-hotel-carousel-card__image",loading:"lazy",decoding:"async",alt:""}):y.jsx("div",{className:"cvg-hotel-carousel-card__image cvg-hotel-carousel-card__image--placeholder","data-testid":"unavailable-hotel-image-placeholder",children:y.jsx(sn,{name:"hotel",size:"large",className:"cvg-hotel-carousel-card__image-placeholder-icon"})}),y.jsxs("div",{className:"cvg-hotel-carousel-card__information",children:[y.jsxs("div",{className:"cvg-hotel-carousel-card__information-name-and-rating",children:[y.jsx("h2",{className:"cvg-typo-heading-4 cvg-hotel-carousel-card__information-name",children:t}),n?y.jsxs("span",{className:"cvg-hotel-carousel-card__stars-icons",children:[y.jsx(sn,{name:"star",size:"small","data-testid":"star-icon"}),y.jsx("span",{children:n})]}):null]}),i||l||u||a?y.jsxs("address",{className:"cvg-hotel-carousel-card__address",children:[y.jsx(sn,{name:"location-dot",size:"small"}),y.jsx("span",{children:[[i,l].filter(Boolean).join(" "),u,a].filter(P=>!!P).join(", ")})]}):null,m&&m.length>0?y.jsx("div",{className:"cvg-typo-body-small cvg-hotel-carousel-card__amenities-count",children:m.length>1?re(yr.AssociatedServices,{nbAssociatedServices:m.length}):m[0]}):null,y.jsx(bn,{variation:"link",type:"button",onClick:()=>{g(e)},children:re(yr.HotelDetails)})]}),y.jsx("footer",{className:"cvg-hotel-carousel-card__footer",children:y.jsx(bn,{variation:"secondary",fullWidth:!0,asChild:!0,children:y.jsx(oA,{to:`${C}${Jn.dateSelection.path}`,...!w&&{target:"_blank",rel:"noopener noreferrer"},reloadDocument:!0,children:re(yr.Discover).toLocaleUpperCase()})})})]})},f5=({hotels:e,className:t})=>{const n=M.useId(),r=M.useRef(null),[i,l]=M.useState(!0),[u,a]=M.useState(!1),m=Te(C=>{var P;return(P=C.configuration.configurationCulture)==null?void 0:P.cultureIsRightToLeft}),g=C=>{if(r.current){let P=280;P=C==="start"===m?P:-P,r.current.scrollBy({left:P})}},w=C=>{const P=C.currentTarget,{direction:I}=P.dataset;P.getAttribute("aria-disabled")!=="true"&&g(I||"start")};return(e==null?void 0:e.length)>0&&y.jsxs("div",{className:Or("cvg-hotels-carousel",t),children:[y.jsxs("div",{className:"cvg-hotels-carousel__header",children:[y.jsx("h2",{id:n,className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:re(yr.DiscoverOtherAccommodations)}),y.jsxs("div",{className:"cvg-hotels-carousel__carousel-controls",children:[y.jsxs(bn,{variation:"secondary",type:"button","data-direction":"start",onClick:w,"aria-disabled":i,children:[y.jsx(sn,{name:"chevron-left"}),y.jsx("span",{className:"gst-u-visually-hidden",children:re(Ur.Previous)})]}),y.jsxs(bn,{variation:"secondary",type:"button","data-direction":"end",onClick:w,"aria-disabled":u,children:[y.jsx(sn,{name:"chevron-right"}),y.jsx("span",{className:"gst-u-visually-hidden",children:re(Ur.Next)})]})]})]}),y.jsx("div",{ref:r,className:"cvg-hotels-carousel__scroll-container",role:"region","aria-labelledby":n,tabIndex:0,onScroll:C=>{const P=Math.abs(C.currentTarget.scrollLeft),I=C.currentTarget.clientWidth+1,N=Math.floor(P)===0,z=Math.ceil(I+P)>=C.currentTarget.scrollWidth;l(N),a(z)},children:y.jsxs("ol",{role:"list",className:"cvg-hotels-carousel__list",children:[e.map(C=>y.jsx("li",{className:"cvg-hotels-carousel__list-item",children:y.jsx(mle,{hotel:C})},`hotel-${C.id}`)),y.jsx("li",{className:"cvg-hotels-carousel__list-item"})]})})]})};function gle({open:e,onOpenChange:t}){const n=Te(m=>m.session.stay.arrivalDate.date),r=Te(m=>{var g;return(g=m.session.stay.departureDate)==null?void 0:g.date}),i=Te(m=>m.session.hotelFilters).filter(m=>m.id!=="City"&&m.id!=="Country"),l=Te(m=>m.hotelSelection.filters).filter(m=>m.id!=="City"&&m.id!=="Country"),[u,a]=M.useState(i);return l&&l.length>0?y.jsx(gd,{open:e,onOpenChange:m=>{m||a(i),t(m)},children:y.jsxs(dd,{children:[y.jsx(md,{children:re(yr.Filter)}),y.jsx("input",{type:"hidden",name:"arrivalDate",value:n}),y.jsx("input",{type:"hidden",name:"departureDate",value:r}),y.jsx(nf,{children:y.jsx(Yw,{method:"GET",id:"hotels-filter",className:"cvg-hotel-filter-drawer__body",children:l.map(m=>{var g;return m.isRadio?y.jsxs(hB,{name:m.id,defaultValue:(g=i.find(w=>w.id===m.id))==null?void 0:g.values[0],children:[y.jsx(pB,{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small",children:m.name}),y.jsx(fB,{children:m.values.map(w=>y.jsxs(gF,{children:[y.jsx(dB,{value:w.id}),y.jsx(hd,{children:w.name})]},w.id))})]},m.id):y.jsxs("fieldset",{className:"cvg-hotel-filter-drawer__fieldset",children:[y.jsx("legend",{className:"cvg-typo-heading-5  cvg-typo-heading-4--breakpoint-small cvg-hotel-filter-drawer__legend",children:m.name}),m.values.map(w=>y.jsx(Km,{label:w.name,name:m.id,value:w.id,checked:u.some(C=>C.id===m.id&&C.values.includes(w.id)),onChange:C=>{var P;C.currentTarget.checked?u.some(I=>m.id===I.id)?a(u.map(I=>I.id===m.id?{...I,values:[...I.values,w.id]}:I)):a([...u,{id:m.id,values:[w.id]}]):u.findIndex(I=>m.id===I.id)!==-1&&(((P=u.find(I=>m.id===I.id))==null?void 0:P.values.length)===1?a(u.filter(I=>I.id!==m.id)):a(u.map(I=>I.id===m.id?{...I,values:I.values.filter(N=>N!==w.id)}:I)))}},w.id))]},m.id)})})}),y.jsxs(su,{className:"cvg-hotel-filter-drawer__footer",children:[y.jsx(bn,{variation:"secondary",type:"button",onClick:()=>{a([])},children:re(yr.ClearFilters)}),y.jsx(bn,{variation:"brand",type:"submit",form:"hotels-filter",onClick:()=>{t(!1)},children:re(yr.ApplyFilters)})]})]})}):null}var yle={exports:{}};const sD=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Qu=(()=>{if(typeof document>"u")return!1;const e=sD[0],t={};for(const n of sD)if((n==null?void 0:n[1])in document){for(const[i,l]of n.entries())t[e[i]]=l;return t}return!1})(),oD={change:Qu.fullscreenchange,error:Qu.fullscreenerror};let Ua={request(e=document.documentElement,t){return new Promise((n,r)=>{const i=()=>{Ua.off("change",i),n()};Ua.on("change",i);const l=e[Qu.requestFullscreen](t);l instanceof Promise&&l.then(i).catch(r)})},exit(){return new Promise((e,t)=>{if(!Ua.isFullscreen){e();return}const n=()=>{Ua.off("change",n),e()};Ua.on("change",n);const r=document[Qu.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)})},toggle(e,t){return Ua.isFullscreen?Ua.exit():Ua.request(e,t)},onchange(e){Ua.on("change",e)},onerror(e){Ua.on("error",e)},on(e,t){const n=oD[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=oD[e];n&&document.removeEventListener(n,t,!1)},raw:Qu};Object.defineProperties(Ua,{isFullscreen:{get:()=>!!document[Qu.fullscreenElement]},element:{enumerable:!0,get:()=>document[Qu.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Qu.fullscreenEnabled]}});Qu||(Ua={isEnabled:!1});const vle=Ua,_le=Object.freeze(Object.defineProperty({__proto__:null,default:vle},Symbol.toStringTag,{value:"Module"})),xle=hN(_le);/*!
* Based on package 'screenfull'
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
* Added definition for using screenfull as an amd module
* Must be placed before the definition of leaflet.fullscreen
* as it is required by that
*/(function(e){(function(t,n){e.exports?e.exports.screenfull=n():t.screenfull=n()})(typeof self<"u"?self:cc,function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},n=function(){for(var l,u=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,m=u.length,g={};a<m;a++)if(l=u[a],l&&l[1]in t){for(a=0;a<l.length;a++)g[u[0][a]]=l[a];return g}return!1}(),r={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(l,u){return new Promise((function(a,m){var g=(function(){this.off("change",g),a()}).bind(this);this.on("change",g),l=l||t.documentElement;var w=l[n.requestFullscreen](u);w instanceof Promise&&w.then(g).catch(m)}).bind(this))},exit:function(){return new Promise((function(l,u){if(!this.isFullscreen){l();return}var a=(function(){this.off("change",a),l()}).bind(this);this.on("change",a);var m=t[n.exitFullscreen]();m instanceof Promise&&m.then(a).catch(u)}).bind(this))},toggle:function(l,u){return this.isFullscreen?this.exit():this.request(l,u)},onchange:function(l){this.on("change",l)},onerror:function(l){this.on("error",l)},on:function(l,u){var a=r[l];a&&t.addEventListener(a,u,!1)},off:function(l,u){var a=r[l];a&&t.removeEventListener(a,u,!1)},raw:n};return n?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!t[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!t[n.fullscreenEnabled]}}}),i):{isEnabled:!1}});/*!
* leaflet.fullscreen
*/(function(t,n){e.exports?e.exports=n(sr,xle):n(t.L,t.screenfull)})(typeof self<"u"?self:cc,function(t,n){return t.Control.FullScreen=t.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},_screenfull:n,onAdd:function(r){var i="leaflet-control-zoom-fullscreen",l,u="";return r.zoomControl&&!this.options.forceSeparateButton?l=r.zoomControl._container:l=t.DomUtil.create("div","leaflet-bar"),this.options.content?u=this.options.content:i+=" fullscreen-icon",this._createButton(this.options.title,i,u,l,this.toggleFullScreen,this),this._map.fullscreenControl=this,this._map.on("enterFullscreen exitFullscreen",this._toggleState,this),l},onRemove:function(){t.DomEvent.off(this.link,"click",t.DomEvent.stop).off(this.link,"click",this.toggleFullScreen,this),this._screenfull.isEnabled&&(t.DomEvent.off(this._container,this._screenfull.raw.fullscreenchange,t.DomEvent.stop).off(this._container,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,this),t.DomEvent.off(document,this._screenfull.raw.fullscreenchange,t.DomEvent.stop).off(document,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,this))},_createButton:function(r,i,l,u,a,m){return this.link=t.DomUtil.create("a",i,u),this.link.href="#",this.link.title=r,this.link.innerHTML=l,this.link.setAttribute("role","button"),this.link.setAttribute("aria-label",r),L.DomEvent.disableClickPropagation(u),t.DomEvent.on(this.link,"click",t.DomEvent.stop).on(this.link,"click",a,m),this._screenfull.isEnabled&&(t.DomEvent.on(u,this._screenfull.raw.fullscreenchange,t.DomEvent.stop).on(u,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,m),t.DomEvent.on(document,this._screenfull.raw.fullscreenchange,t.DomEvent.stop).on(document,this._screenfull.raw.fullscreenchange,this._handleFullscreenChange,m)),this.link},toggleFullScreen:function(){var r=this._map;r._exitFired=!1,r._isFullscreen?(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.exit():(t.DomUtil.removeClass(this.options.fullscreenElement?this.options.fullscreenElement:r._container,"leaflet-pseudo-fullscreen"),r.invalidateSize()),r.fire("exitFullscreen"),r._exitFired=!0,r._isFullscreen=!1):(this._screenfull.isEnabled&&!this.options.forcePseudoFullscreen?this._screenfull.request(this.options.fullscreenElement?this.options.fullscreenElement:r._container):(t.DomUtil.addClass(this.options.fullscreenElement?this.options.fullscreenElement:r._container,"leaflet-pseudo-fullscreen"),r.invalidateSize()),r.fire("enterFullscreen"),r._isFullscreen=!0)},_toggleState:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel,this._map._isFullscreen?L.DomUtil.removeClass(this.link,"leaflet-fullscreen-on"):L.DomUtil.addClass(this.link,"leaflet-fullscreen-on")},_handleFullscreenChange:function(){var r=this._map;r.invalidateSize(),!this._screenfull.isFullscreen&&!r._exitFired&&(r.fire("exitFullscreen"),r._exitFired=!0,r._isFullscreen=!1)}}),t.Map.include({toggleFullscreen:function(){this.fullscreenControl.toggleFullScreen()}}),t.Map.addInitHook(function(){this.options.fullscreenControl&&this.addControl(t.control.fullscreen(this.options.fullscreenControlOptions))}),t.control.fullscreen=function(r){return new t.Control.FullScreen(r)},{leaflet:t,screenfull:n}})})(yle);const ble=hN(Jae);var wle=sr,aD=M,Sle=ble;function Ele(e){const t=Sle.useMap(),n=aD.useRef(wle.control.fullscreen(e));return aD.useEffect(()=>(n.current.addTo(t),()=>{n.current.remove(),n.current.link.remove()})),null}var Cle=Ele;function Tle(){return y.jsx(Cle,{content:'<span class="btn-compress"><i aria-hidden="true" class="fa-regular fa-compress gst-icon gst-icon--size-medium "></i><span class="gst-u-visually-hidden">Fullscreen</span></span><span class="btn-expand"><i aria-hidden="true" class="fa-regular fa-expand gst-icon gst-icon--size-medium "></i><span class="gst-u-visually-hidden">Fullscreen</span></span>',position:"topright"})}function kle(e,t){var i,l;const n=[];e.forEach(u=>{const a=t.getAll(u.id);a&&a.length>0&&n.push({id:u.id,values:a})});const r=t.get("location");if(r){const u=e.some(a=>a.id==="Country"&&a.values.some(m=>m.name===r))?"Country":e.some(a=>a.id==="City"&&a.values.some(m=>m.name===r))?"City":null;if(u!==null){const a=(l=(i=e.find(m=>m.id===u))==null?void 0:i.values.find(m=>m.name===r))==null?void 0:l.id;a&&n.push({id:u,values:[a]})}}else n.push({id:"Country",values:[]},{id:"City",values:[]});return n}const Ple=async({request:e})=>{const{session:t}=Fr.getState(),{selectedHotel:n}=t;await Fr.dispatch(hg(s3(t))),n!=null&&n.id&&await Fr.dispatch(LB("0")),Fr.getState().hotelSelection.filters.length===0&&await Fr.dispatch(FT());let r=!1;const i=new URL(e.url),l=kle(Fr.getState().hotelSelection.filters,i.searchParams);l.length>0&&(r=!0,await Fr.dispatch(LY(l)));const u=i.searchParams.get("sort");return u&&(r=!0,await Fr.dispatch(NY(u))),r&&Fr.dispatch(FT()),null},Ale=()=>{const e=Ir(),{trackPageView:t}=Vi();dn.useEffect(()=>{t("HotelSelection")},[t]);const{showMap:n,setShowMap:r}=M.useContext(gA),i=Te(q=>{var te,ue,fe;return(fe=(ue=(te=q.configuration.configurationTheme)==null?void 0:te.headerAndFooter)==null?void 0:ue.header)==null?void 0:fe.pageTitle}),l=Te(q=>q.session.stay.arrivalDate.date),u=Te(q=>{var te;return(te=q.session.stay.departureDate)==null?void 0:te.date}),a=Te(q=>q.session.stay.nightCount),m=Te(q=>q.session.hotelSortOrder),{isFetching:g,availableHotels:w,unavailableHotels:C,sortOrders:P}=Te(q=>q.hotelSelection),N=sA().state==="loading"||g,z=()=>{r(!n)},$=a===1?re(yr.Title_one,{nightCount:a}):re(yr.Title_other,{nightCount:a}),[H,V]=dn.useState(!1);return y.jsxs("div",{className:Or({"cvg-hotel-selection":n}),children:[y.jsx(rd,{children:y.jsxs("title",{children:[$," | ",i??""]})}),y.jsx(I_,{isUsingLocalState:!0,children:y.jsxs(f1,{children:[y.jsx(g1,{}),y.jsx(Rg,{})]})}),y.jsx(gle,{open:H,onOpenChange:V}),e&&!n||!e?y.jsx(tle,{title:$,isHotelSelectionFetching:N,onShowMap:z,showMap:n,sortProps:{sortOrder:m,sortOrders:P,arrivalDate:l,departureDate:u},openFilter:H,setOpenFilter:V}):null,n?y.jsx(dle,{className:"cvg-hotel-selection__map",availableHotels:w,isMobile:e,children:e?y.jsxs(y.Fragment,{children:[y.jsx(bn,{variation:"secondary",type:"button",icon:"list-ul",className:"cvg-hotel-selection__action-map-mobile",onClick:z,children:re(yr.List)}),y.jsx(d5,{openFilter:H,setOpenFilter:V,className:"cvg-hotel-selection__action-map-mobile"})]}):y.jsxs(y.Fragment,{children:[y.jsx(Tle,{}),y.jsx(c5,{position:"bottomright"})]})}):y.jsxs("div",{className:"cvg-hotel-selection__body",children:[y.jsx(ele,{children:N?Array.from(Array(3)).map((q,te)=>y.jsx(Oh,{className:"cvg-hotel-skeleton"},`hotel-skeleton-${te}`)):w==null?void 0:w.map(q=>y.jsx(nle,{hotel:q},`hotel-${q.id}`))}),y.jsx(f5,{hotels:C,className:"cvg-hotel-selection__unavailable-hotels"})]})]})},Ile=()=>{const{trackSearchCompleted:e}=Vi(),t=Te(l=>l.roomSelection.isFetching),n=Te(l=>l.roomSelection.alternativeGuestsAllocation),r=Te(l=>l.basket.rooms),i=Te(l=>l.session.guests);M.useEffect(()=>{const l=Ep(i,r);!t&&l===1&&r.length===0&&n.length===0&&e()},[t,r,n,i,e])},Rle=()=>y.jsx("div",{"data-testid":"rooms-loading-skeleton",className:"cvg-rooms__skeleton",children:y.jsx(Oh,{className:"cvg-rooms__content--loading",inline:!0,height:332,count:3})}),p5=({bookRate:e,isBookingRequest:t,minStay:n,loading:r})=>{const i=Ir(),l=Te(a=>a.basket.isUpdating),u=async()=>{await e()};return y.jsx(bn,{variation:"brand",loading:r,onClick:u,fullWidth:i,disabled:!r&&l,"data-testid":t?"booking-request-button":"book-rate-button",children:n?re(Lt.BookNumberNights,{nights:n}):re(t?Lt.BookingRequestButton:Lt.BookActionLink)})},m5=({quantity:e,hasLastQuantityBadge:t,isBookingRequest:n,minStay:r})=>y.jsxs("div",{className:"cvg-rate-card__booking-badges",children:[r?y.jsx("div",{className:"cvg-typo-heading-5 cvg-rate-card__booking-badge",children:re(Lt.MinimumNightsStay,{nights:r})}):null,!r&&n?y.jsx("div",{className:"cvg-typo-heading-5 cvg-rate-card__booking-badge",children:re(Lt.BookingReplyTimeframeNotice)}):null,!r&&t?y.jsx("div",{className:"cvg-typo-heading-5 cvg-rate-card__booking-badge",children:re(e===2?Lt.LastTwoQuantity:Lt.LastOneQuantity)}):null]}),Lle=({quantity:e,onBookRoom:t,hasLastQuantityBadge:n,isBookingRequest:r,minStay:i,loading:l})=>{const{isAccommodatedPosition:u}=Tg(),a=re(js.AddedExtrasIndicator);return y.jsxs("div",{className:"cvg-rate-card__booking-action",children:[y.jsx("div",{className:"cvg-rate-card__booking-action-select",children:u?y.jsxs("div",{className:"cvg-extra-card__extra-added",children:[y.jsx(sn,{name:"check"}),y.jsx("p",{className:"cvg-typo-body-small",children:a})]}):y.jsx(p5,{bookRate:t,isBookingRequest:r,minStay:i,loading:l})}),y.jsx(m5,{quantity:e,hasLastQuantityBadge:n,isBookingRequest:r,minStay:i})]})},Mle=({quantity:e,onBookRoom:t,hasLastQuantityBadge:n,isBookingRequest:r,minStay:i,loading:l})=>{const{isAccommodatedPosition:u}=Tg(),a=re(js.AddedExtrasIndicator);return y.jsxs("div",{className:"cvg-rate-card__booking-action",children:[y.jsx("div",{className:"cvg-rate-card__booking-action-select",children:y.jsx(m5,{quantity:e,hasLastQuantityBadge:n,isBookingRequest:r,minStay:i})}),u?y.jsxs("div",{className:"cvg-extra-card__extra-added",children:[y.jsx(sn,{name:"check"}),y.jsx("p",{className:"cvg-typo-body-small",children:a})]}):y.jsx(p5,{bookRate:t,isBookingRequest:r,minStay:i,loading:l})]})},Ole=(e,t,n)=>{const r=e;if(!t)return r;const i=Dle(t,n);return r<i?r:i},Dle=(e,t)=>e?t?Math.abs(e-t):e:0,g5=(e,t)=>({rate:e,room:t}),y5=({rate:e,room:t})=>{const n=Ir(),r=Si(),{onAddItem:i}=pu(),{trackAddRoom:l}=Vi(),u=r3(),{setIsLoading:a}=T4(),[m,g]=M.useState(!1),w=e.isLastQuantity,{isBookingRequest:C,availabilityInfos:P}=e,I=(P==null?void 0:P.reason)!==Gu.MinStay?void 0:P.minStay,N=Te(q=>q.basket.rooms),z=Te(q=>q.configuration.bookingEngineConstraints.bookingLimit),$=N.reduce((q,te)=>q+te.rates.reduce((ue,fe)=>ue+fe.selectedQuantity,0),0),H=Ole(e.quantity,z,$),V=async()=>{if(g(!0),r(Gw("")),i({type:"room",roomRateId:{rateId:e.id,roomId:t.id,occupancyId:e.occupancyId},guestPosition:1}),I?await r(hY(I)):!0){const te=await r(DB(e,t,1,t.guestPosition));if(a(!0),l(t,e),te)return r(dp()),g(!1),await r(XP([])),r(kB()),a(!1),u(te)}a(!1),g(!1)};return y.jsx("div",{className:"cvg-rate-card__booking",children:n?y.jsx(Mle,{isBookingRequest:C,quantity:H,onBookRoom:V,hasLastQuantityBadge:w,minStay:I,loading:m}):y.jsx(Lle,{isBookingRequest:C,quantity:H,onBookRoom:V,hasLastQuantityBadge:w,minStay:I,loading:m})})},v5=e=>({cancelConditionsName:e.cancelConditionsName,breakfast:e.breakfast,internet:e.internet,typeText:e.typeText}),_5=({breakfast:e,internet:t,cancelConditionsName:n,onOpenRateDetails:r,typeText:i})=>y.jsxs("div",{className:"cvg-rate-card__conditions",children:[y.jsxs("div",{className:"cvg-typo-body-small cvg-rate-card__conditions-list",children:[i&&y.jsxs("span",{children:[i,"  "]}),e&&y.jsxs("span",{children:[e,"  "]}),t&&y.jsxs("span",{children:[t,"  "]}),n&&y.jsx("span",{children:n})]}),y.jsx(bn,{className:"cvg-rate-card__conditions-button",variation:"link",type:"button",onClick:r,children:re(Lt.RateDetailsInformation)})]}),x5=e=>({name:e.name,occupancyText:e.occupancyText,promoCode:e.promoCode}),b5=({name:e,occupancyText:t,promoCode:n})=>y.jsxs("div",{className:"cvg-rate-card__presentation",children:[y.jsxs("div",{className:"cvg-rate-card__presentation-title",children:[y.jsx("h3",{className:"cvg-typo-heading-5",children:e}),y.jsxs("div",{className:"cvg-typo-body-small cvg-rate-card__presentation__icon",children:[y.jsx(sn,{name:"user-group",size:"small"}),t]})]}),n!=null&&n.discount?y.jsx(j_,{calculationMode:__[n.calculationMode],label:n.discount}):null]}),lD=({taxes:e,type:t})=>y.jsx(y.Fragment,{children:e.taxes.length>0&&y.jsxs("li",{className:"cvg-typo-body-tiny cvg-rate-card__price-taxes-item",children:[y.jsx("div",{children:Nle(t)}),y.jsx("div",{children:e.amount})]})}),Nle=e=>({Included:`${re(Ur.IncludedTaxesFeesProposal)}`,Excluded:`${re(Ur.ExcludedTaxesFees)}`})[e],w5=e=>({includedTaxes:{taxes:e.includedTaxes,amount:e.includedTaxesAmount},excludedTaxes:{taxes:[...e.excludedTaxes,...e.onSiteTaxes],amount:e.excludedTaxesAmount},prices:e.prices}),S5=({prices:e,includedTaxes:t,excludedTaxes:n})=>{const r=Te(u=>u.configuration.displayConstraints.ratePriceDisplayMode),i=re(r==="Average"?Lt.RatePerNightLabel:Lt.RatePerStayLabel),l=e[0];return y.jsxs("div",{className:"cvg-rate-card__price",children:[l.price!==l.crossedOutPrice&&y.jsx("bdi",{className:"cvg-typo-price-strike cvg-rate-card__price-crossed-out",children:l.crossedOutPrice}),y.jsxs("div",{children:[y.jsx("span",{className:"cvg-typo-heading-3",children:`${l.price} `}),y.jsx("span",{className:"cvg-typo-body-small",children:i})]}),y.jsxs("ul",{className:"cvg-typo-body-tiny cvg-rate-card__price-taxes",children:[y.jsx(lD,{taxes:t,type:"Included"}),y.jsx(lD,{taxes:n,type:"Excluded"})]})]})},E5=({rate:e,room:t})=>{const{picture:n,id:r,occupancyId:i}=e,{openRateDetails:l}=gu(),u=()=>{l({rateId:r,roomId:t.id,occupancyId:i})};return y.jsxs("article",{className:"cvg-rate-card","data-testid":`rate-card-${r}`,children:[y.jsxs("div",{className:"cvg-rate-card__package",children:[y.jsx("button",{onClick:u,className:"cvg-rate-card__package-image-container",children:n!=null&&n.pictureUrl?y.jsx(y.Fragment,{children:y.jsx("img",{src:n.pictureUrl,alt:"",className:"cvg-rate-card__package-image"})}):y.jsx("div",{className:"cvg-rate-card__package-placeholder",children:y.jsx(sn,{name:"bed-front",size:"large"})})}),y.jsxs("div",{className:"cvg-rate-card__package-presentation",children:[y.jsx(b5,{...x5(e)}),y.jsx(_5,{...v5(e),onOpenRateDetails:u})]})]}),y.jsxs("div",{className:"cvg-rate-card__package-price-and-booking",children:[y.jsx(S5,{...w5(e)}),y.jsx(y5,{...g5(e,t)})]})]})},C5=({rate:e,room:t})=>{const{openRateDetails:n}=gu(),{trackViewRateDetails:r}=Vi(),{id:i}=e,l=()=>{r(t,e,1),n({rateId:i,roomId:t.id,occupancyId:e.occupancyId})};return y.jsxs("article",{className:"cvg-rate-card","data-testid":`rate-card-${i}`,children:[y.jsx(b5,{...x5(e)}),y.jsx(_5,{...v5(e),onOpenRateDetails:l}),y.jsxs("div",{className:"cvg-rate-card__package-price-and-booking",children:[y.jsx(S5,{...w5(e)}),y.jsx(y5,{...g5(e,t)})]})]})},jle=300,zle=200,Fle=(e,t)=>{const[n,r]=M.useState(0),i=M.useRef(null),l=()=>{i.current&&r(i.current.getBoundingClientRect().height)},u=()=>{var w;const g=(w=i.current)==null?void 0:w.querySelectorAll("img");g==null||g.forEach(C=>{C.addEventListener("load",l)})},a=()=>{var w;const g=(w=i.current)==null?void 0:w.querySelectorAll("img");g==null||g.forEach(C=>{C.removeEventListener("load",l)})},{height:m}=s4({from:{height:"0px"},to:{height:e?"0px":`${n}px`},config:{duration:e?zle:jle,easing:CA.easeInOutQuad,...IA.default}});return M.useEffect(()=>(l(),u(),()=>{a()}),[t]),{height:m,ref:i}},Ble=yd(E5),Ule=yd(C5),cD=({rates:e,room:t,isCondensed:n,ratesDisplayLimit:r})=>{const{ref:i,height:l}=Fle(n,e),u=e.slice(0,r),a=e.slice(r),m=g=>`${g.id}-${g.offerId}`;return y.jsxs("div",{children:[u.map(g=>y.jsx(M.Fragment,{children:g.type===Hm.Package?y.jsx(Ble,{rate:g,room:t}):y.jsx(Ule,{rate:g,room:t},g.id)},m(g))),y.jsx(yd.div,{className:"cvg-rate-list",style:{height:l},children:y.jsx("div",{ref:i,children:a.map(g=>y.jsx(M.Fragment,{children:g.type===Hm.Package?y.jsx(E5,{rate:g,room:t},g.id):y.jsx(C5,{rate:g,room:t},g.id)},m(g)))})})]})},uD=e=>t=>{var n;return e===(((n=t.availabilityInfos)==null?void 0:n.reason)??Gu.None)},$le=({rates:e,isCondensed:t,room:n,setDisplayRates:r})=>{const i=Ir(),l=Te(P=>P.configuration.displayConstraints.ratesDisplayLimit??Number.MAX_VALUE),u=i?0:l,a=e.slice(0,u),m=a.length<e.length,g=t?a:e,w=g.filter(uD(Gu.None)),C=g.filter(uD(Gu.MinStay));return y.jsxs(y.Fragment,{children:[w.length>0&&y.jsx(cD,{ratesDisplayLimit:u,rates:w,room:n,isCondensed:t}),C.length>0&&y.jsxs(y.Fragment,{children:[w.length>0&&y.jsx("div",{className:"cvg-rate-list__info",children:y.jsx("span",{className:"cvg-typo-heading-5 cvg-rate-list__info-text",children:re(Lt.ExtendStayForOffersSuggestion)})}),y.jsx(cD,{ratesDisplayLimit:u,rates:C,room:n,isCondensed:t})]}),!i&&m?y.jsx("div",{className:"cvg-rate-list__button",children:y.jsx(bn,{onClick:()=>r(P=>!P),variation:"tertiary-large",fullWidth:!0,icon:t?"chevron-down":"chevron-up",children:re(t?Lt.MoreRatesDisplayButton:Lt.LessRatesDisplayButton)})}):null]})},Vle=({rates:e,setDisplayRates:t,isDisplayRates:n})=>{var m;const r=e.reduce((g,w)=>(g==null?void 0:g.priceAmount)<(w==null?void 0:w.priceAmount)?g:w),i=e.find(g=>g.promoCode!==null),l=Ir(),u=re(Lt.RatesDisplayButton),a=re(Lt.LessRatesDisplayButton);return y.jsxs("div",{className:"cvg-room-card-footer",children:[y.jsxs("div",{className:"cvg-room-card-footer__starting-price-container",children:[((m=i==null?void 0:i.promoCode)==null?void 0:m.discount)&&y.jsx(j_,{calculationMode:__[i.promoCode.calculationMode],label:i.promoCode.discount}),r&&y.jsx(y.Fragment,{children:y.jsxs("div",{className:"cvg-room-card-footer__starting-price",children:[y.jsx("span",{className:"cvg-typo-body",children:re(Lt.StartingPriceIndicator)}),y.jsx("span",{className:"cvg-typo-heading-3","data-testid":"bestRate-price",children:r.prices[0].price})]})})]}),l&&y.jsx(y.Fragment,{children:n?y.jsx(bn,{className:"cvg-room-card-footer__display-rates",variation:"brand-large",onClick:t,icon:"chevron-down",children:u}):y.jsx(bn,{variation:"secondary-large",onClick:t,icon:"chevron-up",children:a})})]})},Hle=e=>({id:e.id,beds:e.beds,defaultOccupancy:e.defaultOccupancy,area:e.area}),Zle=({id:e,defaultOccupancy:t,area:n,beds:r})=>y.jsxs("ul",{className:"cvg-room-information cvg-typo-body-small",children:[y.jsxs("li",{"data-testid":`room-${e}-card-occupancy`,className:"cvg-room-information__list-item",children:[y.jsx(sn,{name:"user-group",size:"small"}),y.jsx("span",{children:t})]}),n?y.jsxs("li",{"data-testid":`room-${e}-card-area`,className:"cvg-room-information__list-item",children:[y.jsx(sn,{name:"arrows-maximize",size:"small"}),y.jsx("span",{children:n})]}):null,y.jsxs("li",{"data-testid":`room-${e}-card-beds`,className:"cvg-room-information__list-item",children:[y.jsx(sn,{name:"bed-front",size:"small"}),y.jsx("span",{children:r.length===1?r[0]:re(Lt.MultipleBedsOption)})]})]}),dD=({room:e,roomListPosition:t})=>{const{trackViewRateList:n,trackViewRoomDetails:r}=Vi(),{id:i,name:l,amenities:u,galleryPictures:a,rates:m}=e;Te(z=>{var $;return($=z.configuration.configurationCulture)==null?void 0:$.cultureIsRightToLeft});const{openRoomDetails:g}=gu(),[w,C]=M.useState(!m.find(z=>z.isBookingRequest)),P=u.slice(0,3),I=()=>{w&&n(e,m),C(z=>!z)},N=M.useCallback(()=>{r(e,t,"rooms"),g(i)},[i,g,e,t,r]);return y.jsxs("section",{"data-testid":"room-card",className:"cvg-room-card",children:[y.jsxs("article",{"data-testid":i,className:"cvg-room-card__article",children:[y.jsxs("div",{className:"cvg-room-card__body",children:[y.jsx("div",{className:"cvg-room-card__gallery",children:a.length>0?y.jsx(Ag,{onClickPicturesSlider:N,picture2XHeight:332,picture2XWidth:272,pictures:a,galleryPicturesLength:a.length}):y.jsx("div",{className:"cvg-room-card__placeholder",children:y.jsx(sn,{name:"bed-front",size:"large"})})}),y.jsxs("div",{className:"cvg-room-card__content",children:[y.jsx("h2",{className:"cvg-typo-heading-3 cvg-typo-heading-2--breakpoint-small",children:l}),y.jsx(Zle,{...Hle(e)}),e.summary?y.jsx("p",{dangerouslySetInnerHTML:{__html:e.summary},className:"cvg-typo-body-small cvg-room-card__summary cvg-room-card__summary--hidden"}):null,P.length>0?y.jsx("div",{className:"cvg-room-card__amenities cvg-room-card__amenities--hidden",children:y.jsxs("ul",{className:"cvg-room-card__list",children:[P.map((z,$)=>y.jsxs("li",{className:"cvg-typo-body-small","data-testid":`room-${i}-card-amenity-${$}`,children:[y.jsx("span",{children:z}),u.slice(3).length>0&&y.jsx("span",{className:"cvg-typo-body-small cvg-room-card__list-separator",children:""})]},`room-card-amenity-${$}`)),y.jsx("li",{children:u.slice(3).length>0&&y.jsx("div",{className:"cvg-typo-body-small cvg-room-card__more-amenities",children:re(Lt.AdditionalFacilitiesIndicator,{quantity:u.slice(3).length})})})]})}):null,y.jsx("div",{className:"cvg-room-card__button-room-details",children:y.jsx(bn,{variation:"link",type:"button",onClick:N,children:re(Lt.RoomDetailsViewLink)})})]})]}),y.jsx(Vle,{setDisplayRates:I,isDisplayRates:w,rates:m})]}),y.jsx($le,{setDisplayRates:I,rates:m,isCondensed:w,room:e})]})},qle=()=>{const e=re(Lt.BookingRequestMessage),t=Te(m=>m.roomSelection.rooms),{isAccommodatedPosition:n,roomSelected:r,guestPosition:i}=Tg(),l=n?r.filter(m=>m.guestPosition===i):t,u=[],a=[];return l.forEach(m=>{m.rates.length===1&&m.rates[0].isBookingRequest?u.push(m):a.push(m)}),y.jsxs(y.Fragment,{children:[a.map((m,g)=>y.jsx(dD,{room:m,roomListPosition:g+1},m.id)),u.length>0&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"cvg-room-cards__info",children:y.jsx("span",{"data-testid":"booking-request-info-text",className:"cvg-typo-heading-5 cvg-room-cards__info-text",children:e})}),u.map((m,g)=>y.jsx(dD,{room:m,roomListPosition:g+1},m.id))]})]})},Gle=({type:e,message:t})=>{const n=Si(),r=Te($=>$.basket.rooms),{setStateFilters:i}=gu(),l=Rl(),u=Te($=>$.roomSelection.isFetching),a=Te($=>$.basket.isUpdating),m=Te($=>$.session.guests),g=Te($=>$.basket.rooms),w=Ep(m,g),C=async()=>{await n(Qy()),await n(_c(1))},P=$=>{switch($){case mi.NoAvailability:case mi.NoAvailabilityWithCrossSell:case mi.NoAvailabilityWithSelectedGuests:return{label:re(Lt.ClearButton),handleClick:async()=>{await n(Qy()),l(Jn.dateSelection.path)},displayMessage:t};case mi.NoAvailabilityWithFilters:return{label:re(Lt.FilterRemovalLink),handleClick:async()=>{i(ek([])),await n(XP([])),await n(AB("Default")),await n(_c(1,w))},displayMessage:t};case mi.NoAvailabilityWithSelectedRoom:return{label:re(Lt.FilterRemovalLink),handleClick:()=>n(nee(w)),displayMessage:t};case mi.NoAvailabilityWithRoomInBasket:return{label:r.length>0?re(Lt.ModifyButton):re(Pr.ModifySearchLink),handleClick:r.length>0?C:()=>l(Jn.dateSelection.path),displayMessage:r.length>0?re(Lt.WrongDistributionMessage):t};default:return{label:re(Lt.BasketDeletionButton),handleClick:()=>n(Qy()),displayMessage:t}}},{label:I,handleClick:N,displayMessage:z}=P(e);return y.jsxs(Rv,{className:"cvg-card",children:[y.jsx(Ov,{variation:"default"}),y.jsx(Dv,{children:re(Lt.NoAvailabilityTitle)}),y.jsx(Mv,{children:z}),y.jsx(Lv,{children:y.jsx(bn,{variation:"secondary",loading:u||a,onClick:N,children:I})})]})},Wle=({children:e})=>{var u;const t=Te(a=>a.roomSelection.error),n=Te(a=>a.session.error),r=Te(a=>a.alternativeHotels.isFetching),i=Te(a=>a.alternativeHotels.availableHotels),l=n||t;return l&&[mi.NoAvailability,mi.NoAvailabilityWithCrossSell,mi.NoAvailabilityWithSelectedGuests,mi.NoAvailabilityWithFilters,mi.NoAvailabilityWithSelectedRoom,mi.NoAvailabilityWithRoomInBasket].includes(l==null?void 0:l.type)?y.jsxs(y.Fragment,{children:[y.jsx(Gle,{type:l.type,message:(u=l==null?void 0:l.messages)==null?void 0:u[0]}),r?null:y.jsx(f5,{hotels:i,className:"cvg-rooms__alternative-hotels"})]}):y.jsx(y.Fragment,{children:e})},Xle=()=>{const e=Si(),t=Te(w=>w.session.guests),n=Te(w=>w.basket.rooms),r=Te(w=>w.roomSelection.rooms),i=Te(w=>w.roomSelection.currentPage),l=Te(w=>w.roomSelection.totalPage),u=Te(w=>w.roomSelection.isFetching),{isAccommodatedPosition:a}=Tg(),m=r.length>0&&i<l&&!u,g=()=>{const w=Ep(t,n);e(_c(i+1,w,!0))};return y.jsx(y.Fragment,{children:m&&!a?y.jsx(bn,{variation:"tertiary-large",fullWidth:!0,type:"button",icon:"chevron-down",onClick:g,"data-testid":"show-more-rooms-button",children:re(Lt.MoreRoomsDisplayButton)}):null})},Kle=()=>{const{trackOnloadViewRoomList:e}=Vi(),t=Te(l=>l.roomSelection.rooms),n=Te(l=>l.configuration.displayConstraints.ratesDisplayLimit??Number.MAX_VALUE),i=Ir()?0:n;return()=>{t.length>0&&e(t,i)}},Yle=({alternativeOccupancies:e})=>{const t=re(Lt.NoOfferMatchesCriteria),n=re(Lt.AlternativeOccupancyMessage),r=re(Lt.Adults),i=re(Lt.Adult),l=re(Lt.Children),u=re(Lt.Child),a=re(Lt.Infants),m=re(Lt.Infant),g=re(Lt.OneRoomFor),w=re(Lt.YouCanAdjustYourSearch),C=I=>{const N={};return I.map(z=>{N[`adults:${z.adults}/children:${z.children}/infants:${z.infants}`]=[...N[`adults:${z.adults}/children:${z.children}/infants:${z.infants}`]??[],z]}),N},P=I=>I.length>1?re(Lt.NbOfRoomsFor,{nbOfRooms:I.length}):g;return y.jsxs(Xo,{direction:"row",variation:"brand",children:[y.jsx(Ko,{children:t}),y.jsxs(wc,{children:[y.jsx("p",{children:n}),y.jsx("ul",{className:"cvg-alternative-occupancies-banner__list",children:Object.entries(C(e)).map(([,I])=>{const[N]=I,z=kg(N,{adultLabel:i,childLabel:u,infantLabel:m,adultsLabel:r,childrenLabel:l,infantsLabel:a}),$=P(I);return y.jsxs("li",{className:"cvg-alternative-occupancies-banner__list-item",children:[$," ",z]},N.position)})}),y.jsx("p",{children:w})]})]})},Qle=({invalidPromoCode:e})=>{const t=Si(),n=Rl(),r=()=>{t(Gw("")),n(Jn.dateSelection.path)};return y.jsxs(Xo,{direction:"row",variation:"brand","data-testid":"banner-invalid-promo-code",children:[y.jsx(Ko,{children:re(Lt.InvalidPromoCodeAfterChangesTitle,{CODE:e})}),y.jsx(wc,{children:y.jsx("p",{children:re(Lt.InvalidPromoCodeAfterChangesDesc)})}),y.jsx(N_,{children:y.jsx(bn,{variation:"secondary",onClick:r,children:re(Lt.InvalidPromoCodeAfterChangesCTA)})})]})},Jle=()=>y.jsxs(Xo,{direction:"row",variation:"brand","data-testid":"banner-no-offer",children:[y.jsx(Ko,{children:re(Lt.NoOfferForDatesTitle)}),y.jsx(wc,{children:y.jsx("p",{children:re(Lt.NoOfferForDatesMessage)})})]}),ece=e=>{switch(__[e.calculationMode]){case"None":return e.description??"";case"Percentage":case"Nominal":return re(Lt.PromoCodeDiscountPercentage,{discount:e.discount??""});case"PercentageWoExtras":return re(Lt.PromoCodeDiscountPercentageAccomodationOnly,{discount:e.discount??""})}},tce=({promoCode:e})=>y.jsxs(Xo,{direction:"row",variation:"brand","data-testid":"banner-private-promoCode",children:[y.jsx(Ko,{children:re(Lt.PromoCodeBookingOffer,{code:e.code??""})}),y.jsx(wc,{children:y.jsx("p",{children:ece(e)})})]}),nce=()=>{const e=Te(n=>n.session.roomFilters),{openFilter:t}=gu();return y.jsx(bn,{variation:"secondary",onClick:t,"data-testid":"rooms-filter-button",children:`${re(Lt.FilterOption)} ${e.length?`(${e.reduce((n,r)=>n+r.values.length,0)})`:""}`})},rce=()=>{const e=Te(g=>g.session.stay.nightCount),t=Te(g=>g.session.guestPositionUsed),n=Te(g=>g.roomSelection.sortOrders),r=Te(g=>g.session.stay.arrivalDate.date),i=Te(g=>{var w;return(w=g.session.stay.departureDate)==null?void 0:w.date}),l=Te(g=>g.session.roomSortOrder),{isAccommodatedPosition:u}=Tg(),a=Ir(),m=re(e===1?Lt.SelectRoomSingleRoom:Lt.SelectRoomManyRooms,{position:t,nbOfNights:e});return y.jsxs("div",{className:"cvg-room-selection-header",children:[y.jsx("h1",{className:"cvg-typo-heading-3 cvg-typo-heading-2--breakpoint-small ",children:m}),u&&!a?y.jsx(m1,{}):!u&&y.jsxs("div",{className:"cvg-room-selection-header__actions",children:[y.jsx(nce,{}),y.jsx(u5,{sortOrder:l,sortOrders:n,arrivalDate:r,departureDate:i})]})]})},ice=()=>{var P;const e=Kle(),{isLoading:t}=T4(),n=Te(I=>I.extraSelection.isFetching),r=Te(I=>I.session.invalidPromoCode),i=Te(I=>I.summary.isFetching),l=Te(I=>I.roomSelection.rooms),u=Te(I=>I.roomSelection.isFetching),a=Te(I=>I.roomSelection.alternativeGuestsAllocation),m=Te(I=>I.basket.rooms.length>0),g=l.reduce((I,N)=>[...I,...N.rates],[]),w=(P=g.find(I=>{var N;return((N=I.promoCode)==null?void 0:N.isPublic)===!1}))==null?void 0:P.promoCode,C=g.findIndex(I=>{var N;return((N=I.availabilityInfos)==null?void 0:N.reason)===Gu.MinStay})>-1&&g.findIndex(I=>{var N;return(((N=I.availabilityInfos)==null?void 0:N.reason)??Gu.None)===Gu.None},Gu.None)===-1;return M.useEffect(()=>{e()},[e]),y.jsxs(y.Fragment,{children:[y.jsx(F4,{}),y.jsxs("div",{"data-testid":"room-selection-content",className:"cvg-rooms",children:[w?y.jsx(tce,{promoCode:w}):null,C?y.jsx(Jle,{}):null,r?y.jsx(Qle,{invalidPromoCode:r}):null,((a==null?void 0:a.length)??0)>0&&!m&&y.jsx(Yle,{alternativeOccupancies:a}),y.jsx(rce,{}),y.jsxs(Wle,{children:[u||t||n||i?y.jsx(Rle,{}):y.jsx(qle,{}),y.jsx(Xle,{})]})]})]})},sce=async({request:e})=>{if(!oae(Fr.getState().session.sessionValidity))return Yf("/");const{guests:t,stay:n,selectedHotel:r}=Fr.getState().session,i=Fr.getState().basket.rooms,l=Ep(t,i),u=new URL(e.url),a=u.searchParams.get("promoCode");if(a===""){const{arrivalDate:w,departureDate:C}=n,P=r==null?void 0:r.id,I=r==null?void 0:r.coordinates,N={stay:{arrivalDate:w.date,departureDate:C.date},guests:t,selectedHotelId:P,promoCode:a,coordinates:I??null,focusedRoomForExtras:null};await Fr.dispatch(hg(N))}const m=u.searchParams.get("hotelId");m&&await Fr.dispatch(LB(m));const g=u.searchParams.get("sort");return g&&await Fr.dispatch(AB(g)),i.map(w=>w.guestPosition).includes(l)||Fr.dispatch(_c(1,l)),{}},oce=()=>{const e=Ir(),{trackPageView:t}=Vi(),{isAccommodatedPosition:n}=Tg();Ile();const r=Te(l=>l.basket.rooms.length>0);M.useEffect(()=>{t("RoomSelection")});const i=re(Lt.SelectRoom);return y.jsxs(y.Fragment,{children:[y.jsx(rd,{children:y.jsx("title",{children:i})}),y.jsx(RP,{children:y.jsx(zA,{children:y.jsx(I_,{isUsingLocalState:!0,children:y.jsxs(uA,{children:[y.jsxs(f1,{children:[y.jsx(g1,{}),y.jsx(Rg,{isBasketVisible:r})]}),y.jsx(qA,{}),y.jsx("div",{className:"cvg-room-selection-container",children:y.jsxs($oe,{children:[y.jsx(woe,{className:"cvg-room-selection__extras-button"}),y.jsx(V4,{children:y.jsx(w4,{children:y.jsx(ice,{})})})]})}),y.jsx($A,{})]})})})}),e&&n?y.jsx("div",{className:"cvg-continue-button",children:y.jsx(m1,{})}):null]})};var U_=e=>e.type==="checkbox",Zf=e=>e instanceof Date,Vo=e=>e==null;const T5=e=>typeof e=="object";var ms=e=>!Vo(e)&&!Array.isArray(e)&&T5(e)&&!Zf(e),ace=e=>ms(e)&&e.target?U_(e.target)?e.target.checked:e.target.value:e,lce=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,cce=(e,t)=>e.has(lce(t)),uce=e=>{const t=e.constructor&&e.constructor.prototype;return ms(t)&&t.hasOwnProperty("isPrototypeOf")},sI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function co(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(sI&&(e instanceof Blob||r))&&(n||ms(e)))if(t=n?[]:{},!n&&!uce(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=co(e[i]));else return e;return t}var $_=e=>Array.isArray(e)?e.filter(Boolean):[],Ui=e=>e===void 0,En=(e,t,n)=>{if(!t||!ms(e))return n;const r=$_(t.split(/[,[\].]+?/)).reduce((i,l)=>Vo(i)?i:i[l],e);return Ui(r)||r===e?Ui(e[t])?n:e[t]:r},qc=e=>typeof e=="boolean",oI=e=>/^\w*$/.test(e),k5=e=>$_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ti=(e,t,n)=>{let r=-1;const i=oI(t)?[t]:k5(t),l=i.length,u=l-1;for(;++r<l;){const a=i[r];let m=n;if(r!==u){const g=e[a];m=ms(g)||Array.isArray(g)?g:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=m,e=e[a]}return e};const hD={BLUR:"blur",FOCUS_OUT:"focusout"},_l={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ju={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},P5=dn.createContext(null),il=()=>dn.useContext(P5),dce=e=>{const{children:t,...n}=e;return dn.createElement(P5.Provider,{value:n},t)};var hce=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(i,l,{get:()=>{const u=l;return t._proxyFormState[u]!==_l.all&&(t._proxyFormState[u]=!r||_l.all),e[u]}});return i},Uo=e=>ms(e)&&!Object.keys(e).length,fce=(e,t,n,r)=>{n(e);const{name:i,...l}=e;return Uo(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(u=>t[u]===_l.all)},Ga=e=>Array.isArray(e)?e:[e];function A5(e){const t=dn.useRef(e);t.current=e,dn.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var Qc=e=>typeof e=="string",pce=(e,t,n,r,i)=>Qc(e)?(r&&t.watch.add(e),En(n,e,i)):Array.isArray(e)?e.map(l=>(r&&t.watch.add(l),En(n,l))):(r&&(t.watchAll=!0),n),I5=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},nh=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(Math.random()*16+e)%16|0;return(t=="x"?n:n&3|8).toString(16)})},rC=(e,t,n={})=>n.shouldFocus||Ui(n.shouldFocus)?n.focusName||`${e}.${Ui(n.focusIndex)?t:n.focusIndex}.`:"",iv=e=>({isOnSubmit:!e||e===_l.onSubmit,isOnBlur:e===_l.onBlur,isOnChange:e===_l.onChange,isOnAll:e===_l.all,isOnTouch:e===_l.onTouched}),sk=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ym=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const l=En(e,i);if(l){const{_f:u,...a}=l;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!r)return!0;if(u.ref&&t(u.ref,u.name)&&!r)return!0;if(Ym(a,t))break}else if(ms(a)&&Ym(a,t))break}}};var R5=(e,t,n)=>{const r=Ga(En(e,n));return ti(r,"root",t[n]),ti(e,n,r),e},aI=e=>e.type==="file",Kc=e=>typeof e=="function",w0=e=>{if(!sI)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yb=e=>Qc(e),lI=e=>e.type==="radio",S0=e=>e instanceof RegExp;const fD={value:!1,isValid:!1},pD={value:!0,isValid:!0};var L5=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ui(e[0].attributes.value)?Ui(e[0].value)||e[0].value===""?pD:{value:e[0].value,isValid:!0}:pD:fD}return fD};const mD={isValid:!1,value:null};var M5=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,mD):mD;function gD(e,t,n="validate"){if(yb(e)||Array.isArray(e)&&e.every(yb)||qc(e)&&!e)return{type:n,message:yb(e)?e:"",ref:t}}var hm=e=>ms(e)&&!S0(e)?e:{value:e,message:""},ok=async(e,t,n,r,i,l)=>{const{ref:u,refs:a,required:m,maxLength:g,minLength:w,min:C,max:P,pattern:I,validate:N,name:z,valueAsNumber:$,mount:H}=e._f,V=En(n,z);if(!H||t.has(z))return{};const q=a?a[0]:u,te=Fe=>{i&&q.reportValidity&&(q.setCustomValidity(qc(Fe)?"":Fe||""),q.reportValidity())},ue={},fe=lI(u),Z=U_(u),le=fe||Z,be=($||aI(u))&&Ui(u.value)&&Ui(V)||w0(u)&&u.value===""||V===""||Array.isArray(V)&&!V.length,Re=I5.bind(null,z,r,ue),Je=(Fe,Xe,gt,yt=ju.maxLength,lt=ju.minLength)=>{const Nt=Fe?Xe:gt;ue[z]={type:Fe?yt:lt,message:Nt,ref:u,...Re(Fe?yt:lt,Nt)}};if(l?!Array.isArray(V)||!V.length:m&&(!le&&(be||Vo(V))||qc(V)&&!V||Z&&!L5(a).isValid||fe&&!M5(a).isValid)){const{value:Fe,message:Xe}=yb(m)?{value:!!m,message:m}:hm(m);if(Fe&&(ue[z]={type:ju.required,message:Xe,ref:q,...Re(ju.required,Xe)},!r))return te(Xe),ue}if(!be&&(!Vo(C)||!Vo(P))){let Fe,Xe;const gt=hm(P),yt=hm(C);if(!Vo(V)&&!isNaN(V)){const lt=u.valueAsNumber||V&&+V;Vo(gt.value)||(Fe=lt>gt.value),Vo(yt.value)||(Xe=lt<yt.value)}else{const lt=u.valueAsDate||new Date(V),Nt=Ke=>new Date(new Date().toDateString()+" "+Ke),qe=u.type=="time",_t=u.type=="week";Qc(gt.value)&&V&&(Fe=qe?Nt(V)>Nt(gt.value):_t?V>gt.value:lt>new Date(gt.value)),Qc(yt.value)&&V&&(Xe=qe?Nt(V)<Nt(yt.value):_t?V<yt.value:lt<new Date(yt.value))}if((Fe||Xe)&&(Je(!!Fe,gt.message,yt.message,ju.max,ju.min),!r))return te(ue[z].message),ue}if((g||w)&&!be&&(Qc(V)||l&&Array.isArray(V))){const Fe=hm(g),Xe=hm(w),gt=!Vo(Fe.value)&&V.length>+Fe.value,yt=!Vo(Xe.value)&&V.length<+Xe.value;if((gt||yt)&&(Je(gt,Fe.message,Xe.message),!r))return te(ue[z].message),ue}if(I&&!be&&Qc(V)){const{value:Fe,message:Xe}=hm(I);if(S0(Fe)&&!V.match(Fe)&&(ue[z]={type:ju.pattern,message:Xe,ref:u,...Re(ju.pattern,Xe)},!r))return te(Xe),ue}if(N){if(Kc(N)){const Fe=await N(V,n),Xe=gD(Fe,q);if(Xe&&(ue[z]={...Xe,...Re(ju.validate,Xe.message)},!r))return te(Xe.message),ue}else if(ms(N)){let Fe={};for(const Xe in N){if(!Uo(Fe)&&!r)break;const gt=gD(await N[Xe](V,n),q,Xe);gt&&(Fe={...gt,...Re(Xe,gt.message)},te(gt.message),r&&(ue[z]=Fe))}if(!Uo(Fe)&&(ue[z]={ref:q,...Fe},!r))return ue}}return te(!0),ue},iC=(e,t)=>[...e,...Ga(t)],sC=e=>Array.isArray(e)?e.map(()=>{}):void 0;function oC(e,t,n){return[...e.slice(0,t),...Ga(n),...e.slice(t)]}var aC=(e,t,n)=>Array.isArray(e)?(Ui(e[n])&&(e[n]=void 0),e.splice(n,0,e.splice(t,1)[0]),e):[],lC=(e,t)=>[...Ga(t),...Ga(e)];function mce(e,t){let n=0;const r=[...e];for(const i of t)r.splice(i-n,1),n++;return $_(r).length?r:[]}var cC=(e,t)=>Ui(t)?[]:mce(e,Ga(t).sort((n,r)=>n-r)),uC=(e,t,n)=>{[e[t],e[n]]=[e[n],e[t]]};function gce(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Ui(e)?r++:e[t[r++]];return e}function yce(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ui(e[t]))return!1;return!0}function bs(e,t){const n=Array.isArray(t)?t:oI(t)?[t]:k5(t),r=n.length===1?e:gce(e,n),i=n.length-1,l=n[i];return r&&delete r[l],i!==0&&(ms(r)&&Uo(r)||Array.isArray(r)&&yce(r))&&bs(e,n.slice(0,-1)),e}var yD=(e,t,n)=>(e[t]=n,e);function O5(e){const t=il(),{control:n=t.control,name:r,keyName:i="id",shouldUnregister:l,rules:u}=e,[a,m]=dn.useState(n._getFieldArray(r)),g=dn.useRef(n._getFieldArray(r).map(nh)),w=dn.useRef(a),C=dn.useRef(r),P=dn.useRef(!1);C.current=r,w.current=a,n._names.array.add(r),u&&n.register(r,u),A5({next:({values:fe,name:Z})=>{if(Z===C.current||!Z){const le=En(fe,C.current);Array.isArray(le)&&(m(le),g.current=le.map(nh))}},subject:n._subjects.array});const I=dn.useCallback(fe=>{P.current=!0,n._updateFieldArray(r,fe)},[n,r]),N=(fe,Z)=>{const le=Ga(co(fe)),be=iC(n._getFieldArray(r),le);n._names.focus=rC(r,be.length-1,Z),g.current=iC(g.current,le.map(nh)),I(be),m(be),n._updateFieldArray(r,be,iC,{argA:sC(fe)})},z=(fe,Z)=>{const le=Ga(co(fe)),be=lC(n._getFieldArray(r),le);n._names.focus=rC(r,0,Z),g.current=lC(g.current,le.map(nh)),I(be),m(be),n._updateFieldArray(r,be,lC,{argA:sC(fe)})},$=fe=>{const Z=cC(n._getFieldArray(r),fe);g.current=cC(g.current,fe),I(Z),m(Z),!Array.isArray(En(n._fields,r))&&ti(n._fields,r,void 0),n._updateFieldArray(r,Z,cC,{argA:fe})},H=(fe,Z,le)=>{const be=Ga(co(Z)),Re=oC(n._getFieldArray(r),fe,be);n._names.focus=rC(r,fe,le),g.current=oC(g.current,fe,be.map(nh)),I(Re),m(Re),n._updateFieldArray(r,Re,oC,{argA:fe,argB:sC(Z)})},V=(fe,Z)=>{const le=n._getFieldArray(r);uC(le,fe,Z),uC(g.current,fe,Z),I(le),m(le),n._updateFieldArray(r,le,uC,{argA:fe,argB:Z},!1)},q=(fe,Z)=>{const le=n._getFieldArray(r);aC(le,fe,Z),aC(g.current,fe,Z),I(le),m(le),n._updateFieldArray(r,le,aC,{argA:fe,argB:Z},!1)},te=(fe,Z)=>{const le=co(Z),be=yD(n._getFieldArray(r),fe,le);g.current=[...be].map((Re,Je)=>!Re||Je===fe?nh():g.current[Je]),I(be),m([...be]),n._updateFieldArray(r,be,yD,{argA:fe,argB:le},!0,!1)},ue=fe=>{const Z=Ga(co(fe));g.current=Z.map(nh),I([...Z]),m([...Z]),n._updateFieldArray(r,[...Z],le=>le,{},!0,!1)};return dn.useEffect(()=>{if(n._state.action=!1,sk(r,n._names)&&n._subjects.state.next({...n._formState}),P.current&&(!iv(n._options.mode).isOnSubmit||n._formState.isSubmitted))if(n._options.resolver)n._executeSchema([r]).then(fe=>{const Z=En(fe.errors,r),le=En(n._formState.errors,r);(le?!Z&&le.type||Z&&(le.type!==Z.type||le.message!==Z.message):Z&&Z.type)&&(Z?ti(n._formState.errors,r,Z):bs(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const fe=En(n._fields,r);fe&&fe._f&&!(iv(n._options.reValidateMode).isOnSubmit&&iv(n._options.mode).isOnSubmit)&&ok(fe,n._names.disabled,n._formValues,n._options.criteriaMode===_l.all,n._options.shouldUseNativeValidation,!0).then(Z=>!Uo(Z)&&n._subjects.state.next({errors:R5(n._formState.errors,Z,r)}))}n._subjects.values.next({name:r,values:{...n._formValues}}),n._names.focus&&Ym(n._fields,(fe,Z)=>{if(n._names.focus&&Z.startsWith(n._names.focus)&&fe.focus)return fe.focus(),1}),n._names.focus="",n._updateValid(),P.current=!1},[a,r,n]),dn.useEffect(()=>(!En(n._formValues,r)&&n._updateFieldArray(r),()=>{(n._options.shouldUnregister||l)&&n.unregister(r)}),[r,n,i,l]),{swap:dn.useCallback(V,[I,r,n]),move:dn.useCallback(q,[I,r,n]),prepend:dn.useCallback(z,[I,r,n]),append:dn.useCallback(N,[I,r,n]),remove:dn.useCallback($,[I,r,n]),insert:dn.useCallback(H,[I,r,n]),update:dn.useCallback(te,[I,r,n]),replace:dn.useCallback(ue,[I,r,n]),fields:dn.useMemo(()=>a.map((fe,Z)=>({...fe,[i]:g.current[Z]||nh()})),[a,i])}}var dC=()=>{let e=[];return{get observers(){return e},next:i=>{for(const l of e)l.next&&l.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(l=>l!==i)}}),unsubscribe:()=>{e=[]}}},ak=e=>Vo(e)||!T5(e);function fh(e,t){if(ak(e)||ak(t))return e===t;if(Zf(e)&&Zf(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const l=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const u=t[i];if(Zf(l)&&Zf(u)||ms(l)&&ms(u)||Array.isArray(l)&&Array.isArray(u)?!fh(l,u):l!==u)return!1}}return!0}var D5=e=>e.type==="select-multiple",vce=e=>lI(e)||U_(e),hC=e=>w0(e)&&e.isConnected,N5=e=>{for(const t in e)if(Kc(e[t]))return!0;return!1};function E0(e,t={}){const n=Array.isArray(e);if(ms(e)||n)for(const r in e)Array.isArray(e[r])||ms(e[r])&&!N5(e[r])?(t[r]=Array.isArray(e[r])?[]:{},E0(e[r],t[r])):Vo(e[r])||(t[r]=!0);return t}function j5(e,t,n){const r=Array.isArray(e);if(ms(e)||r)for(const i in e)Array.isArray(e[i])||ms(e[i])&&!N5(e[i])?Ui(t)||ak(n[i])?n[i]=Array.isArray(e[i])?E0(e[i],[]):{...E0(e[i])}:j5(e[i],Vo(t)?{}:t[i],n[i]):n[i]=!fh(e[i],t[i]);return n}var Ty=(e,t)=>j5(e,t,E0(t)),z5=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Ui(e)?e:t?e===""?NaN:e&&+e:n&&Qc(e)?new Date(e):r?r(e):e;function fC(e){const t=e.ref;return aI(t)?t.files:lI(t)?M5(e.refs).value:D5(t)?[...t.selectedOptions].map(({value:n})=>n):U_(t)?L5(e.refs).value:z5(Ui(t.value)?e.ref.value:t.value,e)}var _ce=(e,t,n,r)=>{const i={};for(const l of e){const u=En(t,l);u&&ti(i,l,u._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},ky=e=>Ui(e)?e:S0(e)?e.source:ms(e)?S0(e.value)?e.value.source:e.value:e;const vD="AsyncFunction";var xce=e=>!!e&&!!e.validate&&!!(Kc(e.validate)&&e.validate.constructor.name===vD||ms(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===vD)),bce=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function _D(e,t,n){const r=En(e,n);if(r||oI(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const l=i.join("."),u=En(t,l),a=En(e,l);if(u&&!Array.isArray(u)&&n!==l)return{name:n};if(a&&a.type)return{name:l,error:a};i.pop()}return{name:n}}var wce=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,Sce=(e,t)=>!$_(En(e,t)).length&&bs(e,t);const Ece={mode:_l.onSubmit,reValidateMode:_l.onChange,shouldFocusError:!0};function Cce(e={}){let t={...Ece,...e},n={submitCount:0,isDirty:!1,isLoading:Kc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=ms(t.defaultValues)||ms(t.values)?co(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:co(i),u={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,g=0;const w={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},C={values:dC(),array:dC(),state:dC()},P=iv(t.mode),I=iv(t.reValidateMode),N=t.criteriaMode===_l.all,z=Le=>De=>{clearTimeout(g),g=setTimeout(Le,De)},$=async Le=>{if(!t.disabled&&(w.isValid||Le)){const De=t.resolver?Uo((await le()).errors):await Re(r,!0);De!==n.isValid&&C.state.next({isValid:De})}},H=(Le,De)=>{!t.disabled&&(w.isValidating||w.validatingFields)&&((Le||Array.from(a.mount)).forEach(Ye=>{Ye&&(De?ti(n.validatingFields,Ye,De):bs(n.validatingFields,Ye))}),C.state.next({validatingFields:n.validatingFields,isValidating:!Uo(n.validatingFields)}))},V=(Le,De=[],Ye,mt,ft=!0,wt=!0)=>{if(mt&&Ye&&!t.disabled){if(u.action=!0,wt&&Array.isArray(En(r,Le))){const Bt=Ye(En(r,Le),mt.argA,mt.argB);ft&&ti(r,Le,Bt)}if(wt&&Array.isArray(En(n.errors,Le))){const Bt=Ye(En(n.errors,Le),mt.argA,mt.argB);ft&&ti(n.errors,Le,Bt),Sce(n.errors,Le)}if(w.touchedFields&&wt&&Array.isArray(En(n.touchedFields,Le))){const Bt=Ye(En(n.touchedFields,Le),mt.argA,mt.argB);ft&&ti(n.touchedFields,Le,Bt)}w.dirtyFields&&(n.dirtyFields=Ty(i,l)),C.state.next({name:Le,isDirty:Fe(Le,De),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ti(l,Le,De)},q=(Le,De)=>{ti(n.errors,Le,De),C.state.next({errors:n.errors})},te=Le=>{n.errors=Le,C.state.next({errors:n.errors,isValid:!1})},ue=(Le,De,Ye,mt)=>{const ft=En(r,Le);if(ft){const wt=En(l,Le,Ui(Ye)?En(i,Le):Ye);Ui(wt)||mt&&mt.defaultChecked||De?ti(l,Le,De?wt:fC(ft._f)):yt(Le,wt),u.mount&&$()}},fe=(Le,De,Ye,mt,ft)=>{let wt=!1,Bt=!1;const pn={name:Le};if(!t.disabled){const nn=!!(En(r,Le)&&En(r,Le)._f&&En(r,Le)._f.disabled);if(!Ye||mt){w.isDirty&&(Bt=n.isDirty,n.isDirty=pn.isDirty=Fe(),wt=Bt!==pn.isDirty);const ln=nn||fh(En(i,Le),De);Bt=!!(!nn&&En(n.dirtyFields,Le)),ln||nn?bs(n.dirtyFields,Le):ti(n.dirtyFields,Le,!0),pn.dirtyFields=n.dirtyFields,wt=wt||w.dirtyFields&&Bt!==!ln}if(Ye){const ln=En(n.touchedFields,Le);ln||(ti(n.touchedFields,Le,Ye),pn.touchedFields=n.touchedFields,wt=wt||w.touchedFields&&ln!==Ye)}wt&&ft&&C.state.next(pn)}return wt?pn:{}},Z=(Le,De,Ye,mt)=>{const ft=En(n.errors,Le),wt=w.isValid&&qc(De)&&n.isValid!==De;if(t.delayError&&Ye?(m=z(()=>q(Le,Ye)),m(t.delayError)):(clearTimeout(g),m=null,Ye?ti(n.errors,Le,Ye):bs(n.errors,Le)),(Ye?!fh(ft,Ye):ft)||!Uo(mt)||wt){const Bt={...mt,...wt&&qc(De)?{isValid:De}:{},errors:n.errors,name:Le};n={...n,...Bt},C.state.next(Bt)}},le=async Le=>{H(Le,!0);const De=await t.resolver(l,t.context,_ce(Le||a.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return H(Le),De},be=async Le=>{const{errors:De}=await le(Le);if(Le)for(const Ye of Le){const mt=En(De,Ye);mt?ti(n.errors,Ye,mt):bs(n.errors,Ye)}else n.errors=De;return De},Re=async(Le,De,Ye={valid:!0})=>{for(const mt in Le){const ft=Le[mt];if(ft){const{_f:wt,...Bt}=ft;if(wt){const pn=a.array.has(wt.name),nn=ft._f&&xce(ft._f);nn&&w.validatingFields&&H([mt],!0);const ln=await ok(ft,a.disabled,l,N,t.shouldUseNativeValidation&&!De,pn);if(nn&&w.validatingFields&&H([mt]),ln[wt.name]&&(Ye.valid=!1,De))break;!De&&(En(ln,wt.name)?pn?R5(n.errors,ln,wt.name):ti(n.errors,wt.name,ln[wt.name]):bs(n.errors,wt.name))}!Uo(Bt)&&await Re(Bt,De,Ye)}}return Ye.valid},Je=()=>{for(const Le of a.unMount){const De=En(r,Le);De&&(De._f.refs?De._f.refs.every(Ye=>!hC(Ye)):!hC(De._f.ref))&&bt(Le)}a.unMount=new Set},Fe=(Le,De)=>!t.disabled&&(Le&&De&&ti(l,Le,De),!fh(we(),i)),Xe=(Le,De,Ye)=>pce(Le,a,{...u.mount?l:Ui(De)?i:Qc(Le)?{[Le]:De}:De},Ye,De),gt=Le=>$_(En(u.mount?l:i,Le,t.shouldUnregister?En(i,Le,[]):[])),yt=(Le,De,Ye={})=>{const mt=En(r,Le);let ft=De;if(mt){const wt=mt._f;wt&&(!wt.disabled&&ti(l,Le,z5(De,wt)),ft=w0(wt.ref)&&Vo(De)?"":De,D5(wt.ref)?[...wt.ref.options].forEach(Bt=>Bt.selected=ft.includes(Bt.value)):wt.refs?U_(wt.ref)?wt.refs.length>1?wt.refs.forEach(Bt=>(!Bt.defaultChecked||!Bt.disabled)&&(Bt.checked=Array.isArray(ft)?!!ft.find(pn=>pn===Bt.value):ft===Bt.value)):wt.refs[0]&&(wt.refs[0].checked=!!ft):wt.refs.forEach(Bt=>Bt.checked=Bt.value===ft):aI(wt.ref)?wt.ref.value="":(wt.ref.value=ft,wt.ref.type||C.values.next({name:Le,values:{...l}})))}(Ye.shouldDirty||Ye.shouldTouch)&&fe(Le,ft,Ye.shouldTouch,Ye.shouldDirty,!0),Ye.shouldValidate&&Ke(Le)},lt=(Le,De,Ye)=>{for(const mt in De){const ft=De[mt],wt=`${Le}.${mt}`,Bt=En(r,wt);(a.array.has(Le)||ms(ft)||Bt&&!Bt._f)&&!Zf(ft)?lt(wt,ft,Ye):yt(wt,ft,Ye)}},Nt=(Le,De,Ye={})=>{const mt=En(r,Le),ft=a.array.has(Le),wt=co(De);ti(l,Le,wt),ft?(C.array.next({name:Le,values:{...l}}),(w.isDirty||w.dirtyFields)&&Ye.shouldDirty&&C.state.next({name:Le,dirtyFields:Ty(i,l),isDirty:Fe(Le,wt)})):mt&&!mt._f&&!Vo(wt)?lt(Le,wt,Ye):yt(Le,wt,Ye),sk(Le,a)&&C.state.next({...n}),C.values.next({name:u.mount?Le:void 0,values:{...l}})},qe=async Le=>{u.mount=!0;const De=Le.target;let Ye=De.name,mt=!0;const ft=En(r,Ye),wt=()=>De.type?fC(ft._f):ace(Le),Bt=pn=>{mt=Number.isNaN(pn)||Zf(pn)&&isNaN(pn.getTime())||fh(pn,En(l,Ye,pn))};if(ft){let pn,nn;const ln=wt(),it=Le.type===hD.BLUR||Le.type===hD.FOCUS_OUT,Mn=!bce(ft._f)&&!t.resolver&&!En(n.errors,Ye)&&!ft._f.deps||wce(it,En(n.touchedFields,Ye),n.isSubmitted,I,P),ar=sk(Ye,a,it);ti(l,Ye,ln),it?(ft._f.onBlur&&ft._f.onBlur(Le),m&&m(0)):ft._f.onChange&&ft._f.onChange(Le);const fr=fe(Ye,ln,it,!1),Xn=!Uo(fr)||ar;if(!it&&C.values.next({name:Ye,type:Le.type,values:{...l}}),Mn)return w.isValid&&(t.mode==="onBlur"&&it?$():it||$()),Xn&&C.state.next({name:Ye,...ar?{}:fr});if(!it&&ar&&C.state.next({...n}),t.resolver){const{errors:ut}=await le([Ye]);if(Bt(ln),mt){const vn=_D(n.errors,r,Ye),Sn=_D(ut,r,vn.name||Ye);pn=Sn.error,Ye=Sn.name,nn=Uo(ut)}}else H([Ye],!0),pn=(await ok(ft,a.disabled,l,N,t.shouldUseNativeValidation))[Ye],H([Ye]),Bt(ln),mt&&(pn?nn=!1:w.isValid&&(nn=await Re(r,!0)));mt&&(ft._f.deps&&Ke(ft._f.deps),Z(Ye,nn,pn,fr))}},_t=(Le,De)=>{if(En(n.errors,De)&&Le.focus)return Le.focus(),1},Ke=async(Le,De={})=>{let Ye,mt;const ft=Ga(Le);if(t.resolver){const wt=await be(Ui(Le)?Le:ft);Ye=Uo(wt),mt=Le?!ft.some(Bt=>En(wt,Bt)):Ye}else Le?(mt=(await Promise.all(ft.map(async wt=>{const Bt=En(r,wt);return await Re(Bt&&Bt._f?{[wt]:Bt}:Bt)}))).every(Boolean),!(!mt&&!n.isValid)&&$()):mt=Ye=await Re(r);return C.state.next({...!Qc(Le)||w.isValid&&Ye!==n.isValid?{}:{name:Le},...t.resolver||!Le?{isValid:Ye}:{},errors:n.errors}),De.shouldFocus&&!mt&&Ym(r,_t,Le?ft:a.mount),mt},we=Le=>{const De={...u.mount?l:i};return Ui(Le)?De:Qc(Le)?En(De,Le):Le.map(Ye=>En(De,Ye))},He=(Le,De)=>({invalid:!!En((De||n).errors,Le),isDirty:!!En((De||n).dirtyFields,Le),error:En((De||n).errors,Le),isValidating:!!En(n.validatingFields,Le),isTouched:!!En((De||n).touchedFields,Le)}),Be=Le=>{Le&&Ga(Le).forEach(De=>bs(n.errors,De)),C.state.next({errors:Le?n.errors:{}})},ct=(Le,De,Ye)=>{const mt=(En(r,Le,{_f:{}})._f||{}).ref,ft=En(n.errors,Le)||{},{ref:wt,message:Bt,type:pn,...nn}=ft;ti(n.errors,Le,{...nn,...De,ref:mt}),C.state.next({name:Le,errors:n.errors,isValid:!1}),Ye&&Ye.shouldFocus&&mt&&mt.focus&&mt.focus()},xt=(Le,De)=>Kc(Le)?C.values.subscribe({next:Ye=>Le(Xe(void 0,De),Ye)}):Xe(Le,De,!0),bt=(Le,De={})=>{for(const Ye of Le?Ga(Le):a.mount)a.mount.delete(Ye),a.array.delete(Ye),De.keepValue||(bs(r,Ye),bs(l,Ye)),!De.keepError&&bs(n.errors,Ye),!De.keepDirty&&bs(n.dirtyFields,Ye),!De.keepTouched&&bs(n.touchedFields,Ye),!De.keepIsValidating&&bs(n.validatingFields,Ye),!t.shouldUnregister&&!De.keepDefaultValue&&bs(i,Ye);C.values.next({values:{...l}}),C.state.next({...n,...De.keepDirty?{isDirty:Fe()}:{}}),!De.keepIsValid&&$()},It=({disabled:Le,name:De,field:Ye,fields:mt})=>{(qc(Le)&&u.mount||Le||a.disabled.has(De))&&(Le?a.disabled.add(De):a.disabled.delete(De),fe(De,fC(Ye?Ye._f:En(mt,De)._f),!1,!1,!0))},qt=(Le,De={})=>{let Ye=En(r,Le);const mt=qc(De.disabled)||qc(t.disabled);return ti(r,Le,{...Ye||{},_f:{...Ye&&Ye._f?Ye._f:{ref:{name:Le}},name:Le,mount:!0,...De}}),a.mount.add(Le),Ye?It({field:Ye,disabled:qc(De.disabled)?De.disabled:t.disabled,name:Le}):ue(Le,!0,De.value),{...mt?{disabled:De.disabled||t.disabled}:{},...t.progressive?{required:!!De.required,min:ky(De.min),max:ky(De.max),minLength:ky(De.minLength),maxLength:ky(De.maxLength),pattern:ky(De.pattern)}:{},name:Le,onChange:qe,onBlur:qe,ref:ft=>{if(ft){qt(Le,De),Ye=En(r,Le);const wt=Ui(ft.value)&&ft.querySelectorAll&&ft.querySelectorAll("input,select,textarea")[0]||ft,Bt=vce(wt),pn=Ye._f.refs||[];if(Bt?pn.find(nn=>nn===wt):wt===Ye._f.ref)return;ti(r,Le,{_f:{...Ye._f,...Bt?{refs:[...pn.filter(hC),wt,...Array.isArray(En(i,Le))?[{}]:[]],ref:{type:wt.type,name:Le}}:{ref:wt}}}),ue(Le,!1,void 0,wt)}else Ye=En(r,Le,{}),Ye._f&&(Ye._f.mount=!1),(t.shouldUnregister||De.shouldUnregister)&&!(cce(a.array,Le)&&u.action)&&a.unMount.add(Le)}}},fn=()=>t.shouldFocusError&&Ym(r,_t,a.mount),wn=Le=>{qc(Le)&&(C.state.next({disabled:Le}),Ym(r,(De,Ye)=>{const mt=En(r,Ye);mt&&(De.disabled=mt._f.disabled||Le,Array.isArray(mt._f.refs)&&mt._f.refs.forEach(ft=>{ft.disabled=mt._f.disabled||Le}))},0,!1))},an=(Le,De)=>async Ye=>{let mt;Ye&&(Ye.preventDefault&&Ye.preventDefault(),Ye.persist&&Ye.persist());let ft=co(l);if(a.disabled.size)for(const wt of a.disabled)ti(ft,wt,void 0);if(C.state.next({isSubmitting:!0}),t.resolver){const{errors:wt,values:Bt}=await le();n.errors=wt,ft=Bt}else await Re(r);if(bs(n.errors,"root"),Uo(n.errors)){C.state.next({errors:{}});try{await Le(ft,Ye)}catch(wt){mt=wt}}else De&&await De({...n.errors},Ye),fn(),setTimeout(fn);if(C.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Uo(n.errors)&&!mt,submitCount:n.submitCount+1,errors:n.errors}),mt)throw mt},Vt=(Le,De={})=>{En(r,Le)&&(Ui(De.defaultValue)?Nt(Le,co(En(i,Le))):(Nt(Le,De.defaultValue),ti(i,Le,co(De.defaultValue))),De.keepTouched||bs(n.touchedFields,Le),De.keepDirty||(bs(n.dirtyFields,Le),n.isDirty=De.defaultValue?Fe(Le,co(En(i,Le))):Fe()),De.keepError||(bs(n.errors,Le),w.isValid&&$()),C.state.next({...n}))},Cn=(Le,De={})=>{const Ye=Le?co(Le):i,mt=co(Ye),ft=Uo(Le),wt=ft?i:mt;if(De.keepDefaultValues||(i=Ye),!De.keepValues){if(De.keepDirtyValues){const Bt=new Set([...a.mount,...Object.keys(Ty(i,l))]);for(const pn of Array.from(Bt))En(n.dirtyFields,pn)?ti(wt,pn,En(l,pn)):Nt(pn,En(wt,pn))}else{if(sI&&Ui(Le))for(const Bt of a.mount){const pn=En(r,Bt);if(pn&&pn._f){const nn=Array.isArray(pn._f.refs)?pn._f.refs[0]:pn._f.ref;if(w0(nn)){const ln=nn.closest("form");if(ln){ln.reset();break}}}}r={}}l=t.shouldUnregister?De.keepDefaultValues?co(i):{}:co(wt),C.array.next({values:{...wt}}),C.values.next({values:{...wt}})}a={mount:De.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!w.isValid||!!De.keepIsValid||!!De.keepDirtyValues,u.watch=!!t.shouldUnregister,C.state.next({submitCount:De.keepSubmitCount?n.submitCount:0,isDirty:ft?!1:De.keepDirty?n.isDirty:!!(De.keepDefaultValues&&!fh(Le,i)),isSubmitted:De.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ft?{}:De.keepDirtyValues?De.keepDefaultValues&&l?Ty(i,l):n.dirtyFields:De.keepDefaultValues&&Le?Ty(i,Le):De.keepDirty?n.dirtyFields:{},touchedFields:De.keepTouched?n.touchedFields:{},errors:De.keepErrors?n.errors:{},isSubmitSuccessful:De.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Tn=(Le,De)=>Cn(Kc(Le)?Le(l):Le,De);return{control:{register:qt,unregister:bt,getFieldState:He,handleSubmit:an,setError:ct,_executeSchema:le,_getWatch:Xe,_getDirty:Fe,_updateValid:$,_removeUnmounted:Je,_updateFieldArray:V,_updateDisabledField:It,_getFieldArray:gt,_reset:Cn,_resetDefaultValues:()=>Kc(t.defaultValues)&&t.defaultValues().then(Le=>{Tn(Le,t.resetOptions),C.state.next({isLoading:!1})}),_updateFormState:Le=>{n={...n,...Le}},_disableForm:wn,_subjects:C,_proxyFormState:w,_setErrors:te,get _fields(){return r},get _formValues(){return l},get _state(){return u},set _state(Le){u=Le},get _defaultValues(){return i},get _names(){return a},set _names(Le){a=Le},get _formState(){return n},set _formState(Le){n=Le},get _options(){return t},set _options(Le){t={...t,...Le}}},trigger:Ke,register:qt,handleSubmit:an,watch:xt,setValue:Nt,getValues:we,reset:Tn,resetField:Vt,clearErrors:Be,unregister:bt,setError:ct,setFocus:(Le,De={})=>{const Ye=En(r,Le),mt=Ye&&Ye._f;if(mt){const ft=mt.refs?mt.refs[0]:mt.ref;ft.focus&&(ft.focus(),De.shouldSelect&&Kc(ft.select)&&ft.select())}},getFieldState:He}}function Tce(e={}){const t=dn.useRef(void 0),n=dn.useRef(void 0),[r,i]=dn.useState({isDirty:!1,isValidating:!1,isLoading:Kc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Kc(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Cce(e),formState:r});const l=t.current.control;return l._options=e,A5({subject:l._subjects.state,next:u=>{fce(u,l._proxyFormState,l._updateFormState)&&i({...l._formState})}}),dn.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),dn.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==r.isDirty&&l._subjects.state.next({isDirty:u})}},[l,r.isDirty]),dn.useEffect(()=>{e.values&&!fh(e.values,n.current)?(l._reset(e.values,l._options.resetOptions),n.current=e.values,i(u=>({...u}))):l._resetDefaultValues()},[e.values,l]),dn.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),dn.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),dn.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),t.current.formState=hce(r,l),t.current}const xD=(e,t,n)=>{if(e&&"reportValidity"in e){const r=En(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},F5=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?xD(r.ref,n,e):r.refs&&r.refs.forEach(i=>xD(i,n,e))}},kce=(e,t)=>{t.shouldUseNativeValidation&&F5(e,t);const n={};for(const r in e){const i=En(t.fields,r),l=Object.assign(e[r]||{},{ref:i&&i.ref});if(Pce(t.names||Object.keys(e),r)){const u=Object.assign({},En(n,r));ti(u,"root",l),ti(n,r,u)}else ti(n,r,l)}return n},Pce=(e,t)=>e.some(n=>n.startsWith(t+"."));var Ace=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,l=r.message,u=r.path.join(".");if(!n[u])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[u]={message:a.message,type:a.code}}else n[u]={message:l,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(w){return w.errors.forEach(function(C){return e.push(C)})}),t){var m=n[u].types,g=m&&m[r.code];n[u]=I5(u,t,n,i,g?[].concat(g,r.message):r.message)}e.shift()}return n},Ice=function(e,t,n){return n===void 0&&(n={}),function(r,i,l){try{return Promise.resolve(function(u,a){try{var m=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(g){return l.shouldUseNativeValidation&&F5({},l),{errors:{},values:n.raw?r:g}})}catch(g){return a(g)}return m&&m.then?m.then(void 0,a):m}(0,function(u){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(u))return{values:{},errors:kce(Ace(u.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw u}))}catch(u){return Promise.reject(u)}}};const bD=({url:e,label:t})=>e?y.jsx(bn,{asChild:!0,variation:"link",children:y.jsx("a",{href:e,target:"_blank",rel:"noreferrer noopener",children:t})}):y.jsx(y.Fragment,{}),Rce=""+new URL("allianz@2x-B_8dBjre.png",import.meta.url).href,Lce=""+new URL("safebooking@2x-PpIe4o2R.png",import.meta.url).href,Mce=""+new URL("chapka@2x-32-xJCnB.png",import.meta.url).href;var Vr;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const l={};for(const u of i)l[u]=u;return l},e.getValidEnumValues=i=>{const l=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),u={};for(const a of l)u[a]=i[a];return e.objectValues(u)},e.objectValues=i=>e.objectKeys(i).map(function(l){return i[l]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const l=[];for(const u in i)Object.prototype.hasOwnProperty.call(i,u)&&l.push(u);return l},e.find=(i,l)=>{for(const u of i)if(l(u))return u},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,l=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}e.joinValues=r,e.jsonStringifyReplacer=(i,l)=>typeof l=="bigint"?l.toString():l})(Vr||(Vr={}));var lk;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(lk||(lk={}));const Ln=Vr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vu=e=>{switch(typeof e){case"undefined":return Ln.undefined;case"string":return Ln.string;case"number":return isNaN(e)?Ln.nan:Ln.number;case"boolean":return Ln.boolean;case"function":return Ln.function;case"bigint":return Ln.bigint;case"symbol":return Ln.symbol;case"object":return Array.isArray(e)?Ln.array:e===null?Ln.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ln.promise:typeof Map<"u"&&e instanceof Map?Ln.map:typeof Set<"u"&&e instanceof Set?Ln.set:typeof Date<"u"&&e instanceof Date?Ln.date:Ln.object;default:return Ln.unknown}},$t=Vr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Oce=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ka extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(l){return l.message},r={_errors:[]},i=l=>{for(const u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let a=r,m=0;for(;m<u.path.length;){const g=u.path[m];m===u.path.length-1?(a[g]=a[g]||{_errors:[]},a[g]._errors.push(n(u))):a[g]=a[g]||{_errors:[]},a=a[g],m++}}};return i(this),r}static assert(t){if(!(t instanceof Ka))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ka.create=e=>new Ka(e);const yg=(e,t)=>{let n;switch(e.code){case $t.invalid_type:e.received===Ln.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case $t.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Vr.jsonStringifyReplacer)}`;break;case $t.unrecognized_keys:n=`Unrecognized key(s) in object: ${Vr.joinValues(e.keys,", ")}`;break;case $t.invalid_union:n="Invalid input";break;case $t.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Vr.joinValues(e.options)}`;break;case $t.invalid_enum_value:n=`Invalid enum value. Expected ${Vr.joinValues(e.options)}, received '${e.received}'`;break;case $t.invalid_arguments:n="Invalid function arguments";break;case $t.invalid_return_type:n="Invalid function return type";break;case $t.invalid_date:n="Invalid date";break;case $t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Vr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case $t.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case $t.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case $t.custom:n="Invalid input";break;case $t.invalid_intersection_types:n="Intersection results could not be merged";break;case $t.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $t.not_finite:n="Number must be finite";break;default:n=t.defaultError,Vr.assertNever(e)}return{message:n}};let B5=yg;function Dce(e){B5=e}function C0(){return B5}const T0=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,l=[...n,...i.path||[]],u={...i,path:l};if(i.message!==void 0)return{...i,path:l,message:i.message};let a="";const m=r.filter(g=>!!g).slice().reverse();for(const g of m)a=g(u,{data:t,defaultError:a}).message;return{...i,path:l,message:a}},Nce=[];function xn(e,t){const n=C0(),r=T0({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===yg?void 0:yg].filter(i=>!!i)});e.common.issues.push(r)}class Ro{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return cr;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const l=await i.key,u=await i.value;r.push({key:l,value:u})}return Ro.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:l,value:u}=i;if(l.status==="aborted"||u.status==="aborted")return cr;l.status==="dirty"&&t.dirty(),u.status==="dirty"&&t.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(r[l.value]=u.value)}return{status:t.value,value:r}}}const cr=Object.freeze({status:"aborted"}),Im=e=>({status:"dirty",value:e}),qo=e=>({status:"valid",value:e}),ck=e=>e.status==="aborted",uk=e=>e.status==="dirty",gp=e=>e.status==="valid",Qv=e=>typeof Promise<"u"&&e instanceof Promise;function k0(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function U5(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var Hn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Hn||(Hn={}));var Dy,Ny;class au{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wD=(e,t)=>{if(gp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ka(e.common.issues);return this._error=n,this._error}}};function wr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(u,a)=>{var m,g;const{message:w}=e;return u.code==="invalid_enum_value"?{message:w??a.defaultError}:typeof a.data>"u"?{message:(m=w??r)!==null&&m!==void 0?m:a.defaultError}:u.code!=="invalid_type"?{message:a.defaultError}:{message:(g=w??n)!==null&&g!==void 0?g:a.defaultError}},description:i}}class Ar{get description(){return this._def.description}_getType(t){return Vu(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Vu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ro,ctx:{common:t.parent.common,data:t.data,parsedType:Vu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Qv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vu(t)},l=this._parseSync({data:t,path:i.path,parent:i});return wD(i,l)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vu(t)};if(!this["~standard"].async)try{const l=this._parseSync({data:t,path:[],parent:i});return gp(l)?{value:l.value}:{issues:i.common.issues}}catch(l){!((r=(n=l==null?void 0:l.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(l=>gp(l)?{value:l.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vu(t)},i=this._parse({data:t,path:r.path,parent:r}),l=await(Qv(i)?i:Promise.resolve(i));return wD(r,l)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,l)=>{const u=t(i),a=()=>l.addIssue({code:$t.custom,...r(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(m=>m?!0:(a(),!1)):u?!0:(a(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new bc({schema:this,typeName:or.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return iu.create(this,this._def)}nullable(){return Wh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yc.create(this)}promise(){return _g.create(this,this._def)}or(t){return n_.create([this,t],this._def)}and(t){return r_.create(this,t,this._def)}transform(t){return new bc({...wr(this._def),schema:this,typeName:or.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new l_({...wr(this._def),innerType:this,defaultValue:n,typeName:or.ZodDefault})}brand(){return new cI({typeName:or.ZodBranded,type:this,...wr(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new c_({...wr(this._def),innerType:this,catchValue:n,typeName:or.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return V_.create(this,t)}readonly(){return u_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jce=/^c[^\s-]{8,}$/i,zce=/^[0-9a-z]+$/,Fce=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bce=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Uce=/^[a-z0-9_-]{21}$/i,$ce=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Vce=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Hce=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zce="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pC;const qce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Wce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Kce=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yce=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qce=new RegExp(`^${$5}$`);function V5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Jce(e){return new RegExp(`^${V5(e)}$`)}function H5(e){let t=`${$5}T${V5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function eue(e,t){return!!((t==="v4"||!t)&&qce.test(e)||(t==="v6"||!t)&&Wce.test(e))}function tue(e,t){if(!$ce.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function nue(e,t){return!!((t==="v4"||!t)&&Gce.test(e)||(t==="v6"||!t)&&Xce.test(e))}class fc extends Ar{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ln.string){const l=this._getOrReturnCtx(t);return xn(l,{code:$t.invalid_type,expected:Ln.string,received:l.parsedType}),cr}const r=new Ro;let i;for(const l of this._def.checks)if(l.kind==="min")t.data.length<l.value&&(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),r.dirty());else if(l.kind==="max")t.data.length>l.value&&(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),r.dirty());else if(l.kind==="length"){const u=t.data.length>l.value,a=t.data.length<l.value;(u||a)&&(i=this._getOrReturnCtx(t,i),u?xn(i,{code:$t.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):a&&xn(i,{code:$t.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),r.dirty())}else if(l.kind==="email")Hce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"email",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="emoji")pC||(pC=new RegExp(Zce,"u")),pC.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"emoji",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="uuid")Bce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"uuid",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="nanoid")Uce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"nanoid",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="cuid")jce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"cuid",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="cuid2")zce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"cuid2",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="ulid")Fce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"ulid",code:$t.invalid_string,message:l.message}),r.dirty());else if(l.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),xn(i,{validation:"url",code:$t.invalid_string,message:l.message}),r.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"regex",code:$t.invalid_string,message:l.message}),r.dirty())):l.kind==="trim"?t.data=t.data.trim():l.kind==="includes"?t.data.includes(l.value,l.position)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),r.dirty()):l.kind==="toLowerCase"?t.data=t.data.toLowerCase():l.kind==="toUpperCase"?t.data=t.data.toUpperCase():l.kind==="startsWith"?t.data.startsWith(l.value)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:{startsWith:l.value},message:l.message}),r.dirty()):l.kind==="endsWith"?t.data.endsWith(l.value)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:{endsWith:l.value},message:l.message}),r.dirty()):l.kind==="datetime"?H5(l).test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:"datetime",message:l.message}),r.dirty()):l.kind==="date"?Qce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:"date",message:l.message}),r.dirty()):l.kind==="time"?Jce(l).test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.invalid_string,validation:"time",message:l.message}),r.dirty()):l.kind==="duration"?Vce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"duration",code:$t.invalid_string,message:l.message}),r.dirty()):l.kind==="ip"?eue(t.data,l.version)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"ip",code:$t.invalid_string,message:l.message}),r.dirty()):l.kind==="jwt"?tue(t.data,l.alg)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"jwt",code:$t.invalid_string,message:l.message}),r.dirty()):l.kind==="cidr"?nue(t.data,l.version)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"cidr",code:$t.invalid_string,message:l.message}),r.dirty()):l.kind==="base64"?Kce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"base64",code:$t.invalid_string,message:l.message}),r.dirty()):l.kind==="base64url"?Yce.test(t.data)||(i=this._getOrReturnCtx(t,i),xn(i,{validation:"base64url",code:$t.invalid_string,message:l.message}),r.dirty()):Vr.assertNever(l);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:$t.invalid_string,...Hn.errToObj(r)})}_addCheck(t){return new fc({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Hn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Hn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Hn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Hn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Hn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Hn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Hn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Hn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Hn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Hn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Hn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Hn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Hn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...Hn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Hn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Hn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Hn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Hn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Hn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Hn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Hn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Hn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Hn.errToObj(n)})}nonempty(t){return this.min(1,Hn.errToObj(t))}trim(){return new fc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}fc.create=e=>{var t;return new fc({checks:[],typeName:or.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...wr(e)})};function rue(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,l=parseInt(e.toFixed(i).replace(".","")),u=parseInt(t.toFixed(i).replace(".",""));return l%u/Math.pow(10,i)}class Zh extends Ar{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ln.number){const l=this._getOrReturnCtx(t);return xn(l,{code:$t.invalid_type,expected:Ln.number,received:l.parsedType}),cr}let r;const i=new Ro;for(const l of this._def.checks)l.kind==="int"?Vr.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.invalid_type,expected:"integer",received:"float",message:l.message}),i.dirty()):l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),i.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),i.dirty()):l.kind==="multipleOf"?rue(t.data,l.value)!==0&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.not_multiple_of,multipleOf:l.value,message:l.message}),i.dirty()):l.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.not_finite,message:l.message}),i.dirty()):Vr.assertNever(l);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Hn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Hn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Hn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Hn.toString(n))}setLimit(t,n,r,i){return new Zh({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Hn.toString(i)}]})}_addCheck(t){return new Zh({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Hn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Hn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Hn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Hn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Hn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Hn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Hn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Hn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Hn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Vr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Zh.create=e=>new Zh({checks:[],typeName:or.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...wr(e)});class qh extends Ar{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ln.bigint)return this._getInvalidInput(t);let r;const i=new Ro;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),i.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),i.dirty()):l.kind==="multipleOf"?t.data%l.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),xn(r,{code:$t.not_multiple_of,multipleOf:l.value,message:l.message}),i.dirty()):Vr.assertNever(l);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return xn(n,{code:$t.invalid_type,expected:Ln.bigint,received:n.parsedType}),cr}gte(t,n){return this.setLimit("min",t,!0,Hn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Hn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Hn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Hn.toString(n))}setLimit(t,n,r,i){return new qh({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Hn.toString(i)}]})}_addCheck(t){return new qh({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Hn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Hn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Hn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Hn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Hn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}qh.create=e=>{var t;return new qh({checks:[],typeName:or.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...wr(e)})};class Jv extends Ar{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ln.boolean){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.boolean,received:r.parsedType}),cr}return qo(t.data)}}Jv.create=e=>new Jv({typeName:or.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...wr(e)});class yp extends Ar{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ln.date){const l=this._getOrReturnCtx(t);return xn(l,{code:$t.invalid_type,expected:Ln.date,received:l.parsedType}),cr}if(isNaN(t.data.getTime())){const l=this._getOrReturnCtx(t);return xn(l,{code:$t.invalid_date}),cr}const r=new Ro;let i;for(const l of this._def.checks)l.kind==="min"?t.data.getTime()<l.value&&(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),r.dirty()):l.kind==="max"?t.data.getTime()>l.value&&(i=this._getOrReturnCtx(t,i),xn(i,{code:$t.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),r.dirty()):Vr.assertNever(l);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new yp({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Hn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Hn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}yp.create=e=>new yp({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:or.ZodDate,...wr(e)});class P0 extends Ar{_parse(t){if(this._getType(t)!==Ln.symbol){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.symbol,received:r.parsedType}),cr}return qo(t.data)}}P0.create=e=>new P0({typeName:or.ZodSymbol,...wr(e)});class e_ extends Ar{_parse(t){if(this._getType(t)!==Ln.undefined){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.undefined,received:r.parsedType}),cr}return qo(t.data)}}e_.create=e=>new e_({typeName:or.ZodUndefined,...wr(e)});class t_ extends Ar{_parse(t){if(this._getType(t)!==Ln.null){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.null,received:r.parsedType}),cr}return qo(t.data)}}t_.create=e=>new t_({typeName:or.ZodNull,...wr(e)});class vg extends Ar{constructor(){super(...arguments),this._any=!0}_parse(t){return qo(t.data)}}vg.create=e=>new vg({typeName:or.ZodAny,...wr(e)});class Jf extends Ar{constructor(){super(...arguments),this._unknown=!0}_parse(t){return qo(t.data)}}Jf.create=e=>new Jf({typeName:or.ZodUnknown,...wr(e)});class ad extends Ar{_parse(t){const n=this._getOrReturnCtx(t);return xn(n,{code:$t.invalid_type,expected:Ln.never,received:n.parsedType}),cr}}ad.create=e=>new ad({typeName:or.ZodNever,...wr(e)});class A0 extends Ar{_parse(t){if(this._getType(t)!==Ln.undefined){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.void,received:r.parsedType}),cr}return qo(t.data)}}A0.create=e=>new A0({typeName:or.ZodVoid,...wr(e)});class yc extends Ar{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==Ln.array)return xn(n,{code:$t.invalid_type,expected:Ln.array,received:n.parsedType}),cr;if(i.exactLength!==null){const u=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(u||a)&&(xn(n,{code:u?$t.too_big:$t.too_small,minimum:a?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(xn(n,{code:$t.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(xn(n,{code:$t.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,a)=>i.type._parseAsync(new au(n,u,n.path,a)))).then(u=>Ro.mergeArray(r,u));const l=[...n.data].map((u,a)=>i.type._parseSync(new au(n,u,n.path,a)));return Ro.mergeArray(r,l)}get element(){return this._def.type}min(t,n){return new yc({...this._def,minLength:{value:t,message:Hn.toString(n)}})}max(t,n){return new yc({...this._def,maxLength:{value:t,message:Hn.toString(n)}})}length(t,n){return new yc({...this._def,exactLength:{value:t,message:Hn.toString(n)}})}nonempty(t){return this.min(1,t)}}yc.create=(e,t)=>new yc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:or.ZodArray,...wr(t)});function mm(e){if(e instanceof Xi){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=iu.create(mm(r))}return new Xi({...e._def,shape:()=>t})}else return e instanceof yc?new yc({...e._def,type:mm(e.element)}):e instanceof iu?iu.create(mm(e.unwrap())):e instanceof Wh?Wh.create(mm(e.unwrap())):e instanceof lu?lu.create(e.items.map(t=>mm(t))):e}class Xi extends Ar{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Vr.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Ln.object){const g=this._getOrReturnCtx(t);return xn(g,{code:$t.invalid_type,expected:Ln.object,received:g.parsedType}),cr}const{status:r,ctx:i}=this._processInputParams(t),{shape:l,keys:u}=this._getCached(),a=[];if(!(this._def.catchall instanceof ad&&this._def.unknownKeys==="strip"))for(const g in i.data)u.includes(g)||a.push(g);const m=[];for(const g of u){const w=l[g],C=i.data[g];m.push({key:{status:"valid",value:g},value:w._parse(new au(i,C,i.path,g)),alwaysSet:g in i.data})}if(this._def.catchall instanceof ad){const g=this._def.unknownKeys;if(g==="passthrough")for(const w of a)m.push({key:{status:"valid",value:w},value:{status:"valid",value:i.data[w]}});else if(g==="strict")a.length>0&&(xn(i,{code:$t.unrecognized_keys,keys:a}),r.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const w of a){const C=i.data[w];m.push({key:{status:"valid",value:w},value:g._parse(new au(i,C,i.path,w)),alwaysSet:w in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const g=[];for(const w of m){const C=await w.key,P=await w.value;g.push({key:C,value:P,alwaysSet:w.alwaysSet})}return g}).then(g=>Ro.mergeObjectSync(r,g)):Ro.mergeObjectSync(r,m)}get shape(){return this._def.shape()}strict(t){return Hn.errToObj,new Xi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,l,u,a;const m=(u=(l=(i=this._def).errorMap)===null||l===void 0?void 0:l.call(i,n,r).message)!==null&&u!==void 0?u:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Hn.errToObj(t).message)!==null&&a!==void 0?a:m}:{message:m}}}:{}})}strip(){return new Xi({...this._def,unknownKeys:"strip"})}passthrough(){return new Xi({...this._def,unknownKeys:"passthrough"})}extend(t){return new Xi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Xi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:or.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Xi({...this._def,catchall:t})}pick(t){const n={};return Vr.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Xi({...this._def,shape:()=>n})}omit(t){const n={};return Vr.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Xi({...this._def,shape:()=>n})}deepPartial(){return mm(this)}partial(t){const n={};return Vr.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new Xi({...this._def,shape:()=>n})}required(t){const n={};return Vr.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let l=this.shape[r];for(;l instanceof iu;)l=l._def.innerType;n[r]=l}}),new Xi({...this._def,shape:()=>n})}keyof(){return Z5(Vr.objectKeys(this.shape))}}Xi.create=(e,t)=>new Xi({shape:()=>e,unknownKeys:"strip",catchall:ad.create(),typeName:or.ZodObject,...wr(t)});Xi.strictCreate=(e,t)=>new Xi({shape:()=>e,unknownKeys:"strict",catchall:ad.create(),typeName:or.ZodObject,...wr(t)});Xi.lazycreate=(e,t)=>new Xi({shape:e,unknownKeys:"strip",catchall:ad.create(),typeName:or.ZodObject,...wr(t)});class n_ extends Ar{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(l){for(const a of l)if(a.result.status==="valid")return a.result;for(const a of l)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(a=>new Ka(a.ctx.common.issues));return xn(n,{code:$t.invalid_union,unionErrors:u}),cr}if(n.common.async)return Promise.all(r.map(async l=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(i);{let l;const u=[];for(const m of r){const g={...n,common:{...n.common,issues:[]},parent:null},w=m._parseSync({data:n.data,path:n.path,parent:g});if(w.status==="valid")return w;w.status==="dirty"&&!l&&(l={result:w,ctx:g}),g.common.issues.length&&u.push(g.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const a=u.map(m=>new Ka(m));return xn(n,{code:$t.invalid_union,unionErrors:a}),cr}}get options(){return this._def.options}}n_.create=(e,t)=>new n_({options:e,typeName:or.ZodUnion,...wr(t)});const zu=e=>e instanceof s_?zu(e.schema):e instanceof bc?zu(e.innerType()):e instanceof o_?[e.value]:e instanceof Gh?e.options:e instanceof a_?Vr.objectValues(e.enum):e instanceof l_?zu(e._def.innerType):e instanceof e_?[void 0]:e instanceof t_?[null]:e instanceof iu?[void 0,...zu(e.unwrap())]:e instanceof Wh?[null,...zu(e.unwrap())]:e instanceof cI||e instanceof u_?zu(e.unwrap()):e instanceof c_?zu(e._def.innerType):[];class x1 extends Ar{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ln.object)return xn(n,{code:$t.invalid_type,expected:Ln.object,received:n.parsedType}),cr;const r=this.discriminator,i=n.data[r],l=this.optionsMap.get(i);return l?n.common.async?l._parseAsync({data:n.data,path:n.path,parent:n}):l._parseSync({data:n.data,path:n.path,parent:n}):(xn(n,{code:$t.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),cr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const l of n){const u=zu(l.shape[t]);if(!u.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of u){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,l)}}return new x1({typeName:or.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...wr(r)})}}function dk(e,t){const n=Vu(e),r=Vu(t);if(e===t)return{valid:!0,data:e};if(n===Ln.object&&r===Ln.object){const i=Vr.objectKeys(t),l=Vr.objectKeys(e).filter(a=>i.indexOf(a)!==-1),u={...e,...t};for(const a of l){const m=dk(e[a],t[a]);if(!m.valid)return{valid:!1};u[a]=m.data}return{valid:!0,data:u}}else if(n===Ln.array&&r===Ln.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let l=0;l<e.length;l++){const u=e[l],a=t[l],m=dk(u,a);if(!m.valid)return{valid:!1};i.push(m.data)}return{valid:!0,data:i}}else return n===Ln.date&&r===Ln.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class r_ extends Ar{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(l,u)=>{if(ck(l)||ck(u))return cr;const a=dk(l.value,u.value);return a.valid?((uk(l)||uk(u))&&n.dirty(),{status:n.value,value:a.data}):(xn(r,{code:$t.invalid_intersection_types}),cr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([l,u])=>i(l,u)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}r_.create=(e,t,n)=>new r_({left:e,right:t,typeName:or.ZodIntersection,...wr(n)});class lu extends Ar{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ln.array)return xn(r,{code:$t.invalid_type,expected:Ln.array,received:r.parsedType}),cr;if(r.data.length<this._def.items.length)return xn(r,{code:$t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cr;!this._def.rest&&r.data.length>this._def.items.length&&(xn(r,{code:$t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...r.data].map((u,a)=>{const m=this._def.items[a]||this._def.rest;return m?m._parse(new au(r,u,r.path,a)):null}).filter(u=>!!u);return r.common.async?Promise.all(l).then(u=>Ro.mergeArray(n,u)):Ro.mergeArray(n,l)}get items(){return this._def.items}rest(t){return new lu({...this._def,rest:t})}}lu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lu({items:e,typeName:or.ZodTuple,rest:null,...wr(t)})};class i_ extends Ar{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ln.object)return xn(r,{code:$t.invalid_type,expected:Ln.object,received:r.parsedType}),cr;const i=[],l=this._def.keyType,u=this._def.valueType;for(const a in r.data)i.push({key:l._parse(new au(r,a,r.path,a)),value:u._parse(new au(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Ro.mergeObjectAsync(n,i):Ro.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ar?new i_({keyType:t,valueType:n,typeName:or.ZodRecord,...wr(r)}):new i_({keyType:fc.create(),valueType:t,typeName:or.ZodRecord,...wr(n)})}}class I0 extends Ar{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ln.map)return xn(r,{code:$t.invalid_type,expected:Ln.map,received:r.parsedType}),cr;const i=this._def.keyType,l=this._def.valueType,u=[...r.data.entries()].map(([a,m],g)=>({key:i._parse(new au(r,a,r.path,[g,"key"])),value:l._parse(new au(r,m,r.path,[g,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const m of u){const g=await m.key,w=await m.value;if(g.status==="aborted"||w.status==="aborted")return cr;(g.status==="dirty"||w.status==="dirty")&&n.dirty(),a.set(g.value,w.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const m of u){const g=m.key,w=m.value;if(g.status==="aborted"||w.status==="aborted")return cr;(g.status==="dirty"||w.status==="dirty")&&n.dirty(),a.set(g.value,w.value)}return{status:n.value,value:a}}}}I0.create=(e,t,n)=>new I0({valueType:t,keyType:e,typeName:or.ZodMap,...wr(n)});class vp extends Ar{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ln.set)return xn(r,{code:$t.invalid_type,expected:Ln.set,received:r.parsedType}),cr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(xn(r,{code:$t.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(xn(r,{code:$t.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const l=this._def.valueType;function u(m){const g=new Set;for(const w of m){if(w.status==="aborted")return cr;w.status==="dirty"&&n.dirty(),g.add(w.value)}return{status:n.value,value:g}}const a=[...r.data.values()].map((m,g)=>l._parse(new au(r,m,r.path,g)));return r.common.async?Promise.all(a).then(m=>u(m)):u(a)}min(t,n){return new vp({...this._def,minSize:{value:t,message:Hn.toString(n)}})}max(t,n){return new vp({...this._def,maxSize:{value:t,message:Hn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}vp.create=(e,t)=>new vp({valueType:e,minSize:null,maxSize:null,typeName:or.ZodSet,...wr(t)});class Qm extends Ar{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ln.function)return xn(n,{code:$t.invalid_type,expected:Ln.function,received:n.parsedType}),cr;function r(a,m){return T0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,C0(),yg].filter(g=>!!g),issueData:{code:$t.invalid_arguments,argumentsError:m}})}function i(a,m){return T0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,C0(),yg].filter(g=>!!g),issueData:{code:$t.invalid_return_type,returnTypeError:m}})}const l={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof _g){const a=this;return qo(async function(...m){const g=new Ka([]),w=await a._def.args.parseAsync(m,l).catch(I=>{throw g.addIssue(r(m,I)),g}),C=await Reflect.apply(u,this,w);return await a._def.returns._def.type.parseAsync(C,l).catch(I=>{throw g.addIssue(i(C,I)),g})})}else{const a=this;return qo(function(...m){const g=a._def.args.safeParse(m,l);if(!g.success)throw new Ka([r(m,g.error)]);const w=Reflect.apply(u,this,g.data),C=a._def.returns.safeParse(w,l);if(!C.success)throw new Ka([i(w,C.error)]);return C.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Qm({...this._def,args:lu.create(t).rest(Jf.create())})}returns(t){return new Qm({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Qm({args:t||lu.create([]).rest(Jf.create()),returns:n||Jf.create(),typeName:or.ZodFunction,...wr(r)})}}class s_ extends Ar{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}s_.create=(e,t)=>new s_({getter:e,typeName:or.ZodLazy,...wr(t)});class o_ extends Ar{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return xn(n,{received:n.data,code:$t.invalid_literal,expected:this._def.value}),cr}return{status:"valid",value:t.data}}get value(){return this._def.value}}o_.create=(e,t)=>new o_({value:e,typeName:or.ZodLiteral,...wr(t)});function Z5(e,t){return new Gh({values:e,typeName:or.ZodEnum,...wr(t)})}class Gh extends Ar{constructor(){super(...arguments),Dy.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return xn(n,{expected:Vr.joinValues(r),received:n.parsedType,code:$t.invalid_type}),cr}if(k0(this,Dy)||U5(this,Dy,new Set(this._def.values)),!k0(this,Dy).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return xn(n,{received:n.data,code:$t.invalid_enum_value,options:r}),cr}return qo(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Gh.create(t,{...this._def,...n})}exclude(t,n=this._def){return Gh.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Dy=new WeakMap;Gh.create=Z5;class a_ extends Ar{constructor(){super(...arguments),Ny.set(this,void 0)}_parse(t){const n=Vr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ln.string&&r.parsedType!==Ln.number){const i=Vr.objectValues(n);return xn(r,{expected:Vr.joinValues(i),received:r.parsedType,code:$t.invalid_type}),cr}if(k0(this,Ny)||U5(this,Ny,new Set(Vr.getValidEnumValues(this._def.values))),!k0(this,Ny).has(t.data)){const i=Vr.objectValues(n);return xn(r,{received:r.data,code:$t.invalid_enum_value,options:i}),cr}return qo(t.data)}get enum(){return this._def.values}}Ny=new WeakMap;a_.create=(e,t)=>new a_({values:e,typeName:or.ZodNativeEnum,...wr(t)});class _g extends Ar{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ln.promise&&n.common.async===!1)return xn(n,{code:$t.invalid_type,expected:Ln.promise,received:n.parsedType}),cr;const r=n.parsedType===Ln.promise?n.data:Promise.resolve(n.data);return qo(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_g.create=(e,t)=>new _g({type:e,typeName:or.ZodPromise,...wr(t)});class bc extends Ar{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===or.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,l={addIssue:u=>{xn(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(l.addIssue=l.addIssue.bind(l),i.type==="preprocess"){const u=i.transform(r.data,l);if(r.common.async)return Promise.resolve(u).then(async a=>{if(n.value==="aborted")return cr;const m=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return m.status==="aborted"?cr:m.status==="dirty"||n.value==="dirty"?Im(m.value):m});{if(n.value==="aborted")return cr;const a=this._def.schema._parseSync({data:u,path:r.path,parent:r});return a.status==="aborted"?cr:a.status==="dirty"||n.value==="dirty"?Im(a.value):a}}if(i.type==="refinement"){const u=a=>{const m=i.refinement(a,l);if(r.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?cr:(a.status==="dirty"&&n.dirty(),u(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?cr:(a.status==="dirty"&&n.dirty(),u(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gp(u))return u;const a=i.transform(u.value,l);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>gp(u)?Promise.resolve(i.transform(u.value,l)).then(a=>({status:n.value,value:a})):u);Vr.assertNever(i)}}bc.create=(e,t,n)=>new bc({schema:e,typeName:or.ZodEffects,effect:t,...wr(n)});bc.createWithPreprocess=(e,t,n)=>new bc({schema:t,effect:{type:"preprocess",transform:e},typeName:or.ZodEffects,...wr(n)});class iu extends Ar{_parse(t){return this._getType(t)===Ln.undefined?qo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}iu.create=(e,t)=>new iu({innerType:e,typeName:or.ZodOptional,...wr(t)});class Wh extends Ar{_parse(t){return this._getType(t)===Ln.null?qo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wh.create=(e,t)=>new Wh({innerType:e,typeName:or.ZodNullable,...wr(t)});class l_ extends Ar{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Ln.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}l_.create=(e,t)=>new l_({innerType:e,typeName:or.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...wr(t)});class c_ extends Ar{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qv(i)?i.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Ka(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ka(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}c_.create=(e,t)=>new c_({innerType:e,typeName:or.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...wr(t)});class R0 extends Ar{_parse(t){if(this._getType(t)!==Ln.nan){const r=this._getOrReturnCtx(t);return xn(r,{code:$t.invalid_type,expected:Ln.nan,received:r.parsedType}),cr}return{status:"valid",value:t.data}}}R0.create=e=>new R0({typeName:or.ZodNaN,...wr(e)});const iue=Symbol("zod_brand");class cI extends Ar{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class V_ extends Ar{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?cr:l.status==="dirty"?(n.dirty(),Im(l.value)):this._def.out._parseAsync({data:l.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?cr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new V_({in:t,out:n,typeName:or.ZodPipeline})}}class u_ extends Ar{_parse(t){const n=this._def.innerType._parse(t),r=i=>(gp(i)&&(i.value=Object.freeze(i.value)),i);return Qv(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}u_.create=(e,t)=>new u_({innerType:e,typeName:or.ZodReadonly,...wr(t)});function SD(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function q5(e,t={},n){return e?vg.create().superRefine((r,i)=>{var l,u;const a=e(r);if(a instanceof Promise)return a.then(m=>{var g,w;if(!m){const C=SD(t,r),P=(w=(g=C.fatal)!==null&&g!==void 0?g:n)!==null&&w!==void 0?w:!0;i.addIssue({code:"custom",...C,fatal:P})}});if(!a){const m=SD(t,r),g=(u=(l=m.fatal)!==null&&l!==void 0?l:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...m,fatal:g})}}):vg.create()}const sue={object:Xi.lazycreate};var or;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(or||(or={}));const oue=(e,t={message:`Input not instance of ${e.name}`})=>q5(n=>n instanceof e,t),G5=fc.create,W5=Zh.create,aue=R0.create,lue=qh.create,X5=Jv.create,cue=yp.create,uue=P0.create,due=e_.create,hue=t_.create,fue=vg.create,pue=Jf.create,mue=ad.create,gue=A0.create,yue=yc.create,vue=Xi.create,_ue=Xi.strictCreate,xue=n_.create,bue=x1.create,wue=r_.create,Sue=lu.create,Eue=i_.create,Cue=I0.create,Tue=vp.create,kue=Qm.create,Pue=s_.create,Aue=o_.create,Iue=Gh.create,Rue=a_.create,Lue=_g.create,ED=bc.create,Mue=iu.create,Oue=Wh.create,Due=bc.createWithPreprocess,Nue=V_.create,jue=()=>G5().optional(),zue=()=>W5().optional(),Fue=()=>X5().optional(),Bue={string:e=>fc.create({...e,coerce:!0}),number:e=>Zh.create({...e,coerce:!0}),boolean:e=>Jv.create({...e,coerce:!0}),bigint:e=>qh.create({...e,coerce:!0}),date:e=>yp.create({...e,coerce:!0})},Uue=cr;var Gn=Object.freeze({__proto__:null,defaultErrorMap:yg,setErrorMap:Dce,getErrorMap:C0,makeIssue:T0,EMPTY_PATH:Nce,addIssueToContext:xn,ParseStatus:Ro,INVALID:cr,DIRTY:Im,OK:qo,isAborted:ck,isDirty:uk,isValid:gp,isAsync:Qv,get util(){return Vr},get objectUtil(){return lk},ZodParsedType:Ln,getParsedType:Vu,ZodType:Ar,datetimeRegex:H5,ZodString:fc,ZodNumber:Zh,ZodBigInt:qh,ZodBoolean:Jv,ZodDate:yp,ZodSymbol:P0,ZodUndefined:e_,ZodNull:t_,ZodAny:vg,ZodUnknown:Jf,ZodNever:ad,ZodVoid:A0,ZodArray:yc,ZodObject:Xi,ZodUnion:n_,ZodDiscriminatedUnion:x1,ZodIntersection:r_,ZodTuple:lu,ZodRecord:i_,ZodMap:I0,ZodSet:vp,ZodFunction:Qm,ZodLazy:s_,ZodLiteral:o_,ZodEnum:Gh,ZodNativeEnum:a_,ZodPromise:_g,ZodEffects:bc,ZodTransformer:bc,ZodOptional:iu,ZodNullable:Wh,ZodDefault:l_,ZodCatch:c_,ZodNaN:R0,BRAND:iue,ZodBranded:cI,ZodPipeline:V_,ZodReadonly:u_,custom:q5,Schema:Ar,ZodSchema:Ar,late:sue,get ZodFirstPartyTypeKind(){return or},coerce:Bue,any:fue,array:yue,bigint:lue,boolean:X5,date:cue,discriminatedUnion:bue,effect:ED,enum:Iue,function:kue,instanceof:oue,intersection:wue,lazy:Pue,literal:Aue,map:Cue,nan:aue,nativeEnum:Rue,never:mue,null:hue,nullable:Oue,number:W5,object:vue,oboolean:Fue,onumber:zue,optional:Mue,ostring:jue,pipeline:Nue,preprocess:Due,promise:Lue,record:Eue,set:Tue,strictObject:_ue,string:G5,symbol:uue,transformer:ED,tuple:Sue,undefined:due,union:xue,unknown:pue,void:gue,NEVER:Uue,ZodIssueCode:$t,quotelessJson:Oce,ZodError:Ka});const K5=()=>{const e=re(tn.CancellationInsuranceSelectionDemand);return Gn.object({cancellationInsurance:Gn.preprocess(t=>typeof t=="string"?t.endsWith("yes"):!1,Gn.boolean()).nullish().refine(t=>t!=null,{message:e})})},$ue=()=>{const e=re(tn.AddressFieldErrorMessage),t=re(tn.TownCityFieldErrorMessage),n=re(tn.ValidZipcodeErrorMessage),r=re(tn.StateFieldErrorMessage);return Gn.object({address:Gn.string().min(1,{message:e}),city:Gn.string().min(1,{message:t}),zipcode:Gn.string().min(1,{message:n}),state:Gn.string().min(1,{message:r})})},Y5=()=>Gn.object({address:Gn.string().optional(),city:Gn.string().optional(),zipcode:Gn.string().optional(),state:Gn.string().optional()}),Vue=e=>{switch(e){case"Required":return $ue();case"None":case"Optional":default:return Y5()}},Q5=()=>{const e=re(tn.SurnameErrorMessage),t=re(tn.FirstNameErrorMessage),n=re(tn.CodeSelectionErrorMessage),r=re(tn.ValidPhoneNumberErrorMessage),i=re(tn.ValidEmailAddressErrorMessage),l=re(tn.ValidEmailAddressErrorMessage),u=re(tn.CountrySelectionErrorMessage);return Gn.object({title:Gn.string(),lastName:Gn.string().min(1,{message:e}),firstName:Gn.string().min(1,{message:t}),phoneCountryCode:Gn.string().min(1,{message:n}),phone:Gn.string().min(1,{message:r}),email:Gn.string().min(1,{message:i}).email({message:l}),country:Gn.string().min(1,{message:u})})},Hue=()=>{const e=re(tn.CheckinTimeSelectionErrorMessage);return Gn.object({checkinTime:Gn.string().min(1,{message:e})})},J5=()=>Gn.object({checkinTime:Gn.string()}),Zue=e=>{switch(e){case"Required":return Hue();case"None":case"Optional":default:return J5()}},eU=()=>Gn.object({specialRequest:Gn.string()}),tU=()=>Gn.object({hotelPromotion:Gn.boolean(),partnersPromotion:Gn.boolean(),salesTermsConditions:Gn.literal(!0)}),que=Gn.string().optional().nullable(),nU=()=>Gn.object({paymentName:que});var vb=(e=>(e.NoAdult="NoAdult",e.TooManyAdults="TooManyAdults",e.MissingGuest="MissingGuest",e))(vb||{});const CD=e=>{const t=re(tn.SurnameErrorMessage),n=re(tn.FirstNameErrorMessage),r=re(tn.AgeSelectionErrorMessage);return e==="Required"?Gn.object({title:Gn.string(),lastName:Gn.string().min(1,{message:t}),firstName:Gn.string().min(1,{message:n}),age:Gn.string().min(1,{message:r}),roomId:Gn.number().optional(),occupancyId:Gn.number().optional()}):Gn.object({title:Gn.string(),lastName:Gn.string(),firstName:Gn.string(),age:Gn.string(),roomId:Gn.number().optional(),occupancyId:Gn.number().optional()})},rU=e=>e==="Required"?Gn.object({maxAdultCount:Gn.number(),guestsPosition:Gn.number(),guestsError:Gn.boolean().optional(),guests:CD(e).array()}).refine(t=>t.guests.findIndex(n=>n.age==="adult")>=0,{message:"NoAdult",path:["guestsError"]}).refine(t=>t.guests.filter(n=>n.age==="adult").length<=t.maxAdultCount,{message:"TooManyAdults",path:["guestsError"]}):Gn.object({maxAdultCount:Gn.number().optional(),guestsPosition:Gn.number(),guestsError:Gn.boolean().optional(),guests:CD(e).array()}),iU=()=>{const t=rU("Optional").array().optional();return Gn.object({guestsRepartitionError:Gn.boolean().optional(),guestsRepartition:t})},Gue=e=>{const t=rU("Required");return Gn.object({guestsRepartitionError:Gn.boolean().optional(),guestsRepartition:t.array()}).refine(n=>n.guestsRepartition.filter(r=>{var i;return(i=r==null?void 0:r.guests)==null?void 0:i.length}).reduce((r,i)=>r+i.guests.length,0)>=e,{message:"MissingGuest",path:["guestsRepartitionError"]})},Wue=Q5().required().merge(Y5().partial()).merge(J5().partial()).merge(eU().partial()).merge(K5().partial()).merge(tU().partial()).merge(nU().partial()).merge(iU()),Xue={Allianz:Rce,Safebooking:Lce,Chapka:Mce},TD=["cancellation-insurance-yes","cancellation-insurance-no",null,void 0],Kue=({cancellationInsurance:e})=>{var m;const{register:t,formState:{errors:n}}=il(),{trackSelectCancellationInsurance:r}=Vi(),i={yes:TD[0],no:TD[1]},l=Si(),u=()=>[{id:i.yes,label:re(tn.AffirmativeOptionButton)},{id:i.no,label:re(tn.NegativeOptionButton)}],a=g=>{const w=Wue.shape.cancellationInsurance.parse(g);l(jB({cancellationInsurance:w})),w&&r(e.priceAmount)};return y.jsxs("div",{className:"cvg-cancellation-insurance",children:[y.jsx("img",{className:"cvg-cancellation-insurance__logo",src:Xue[e.type],alt:""}),y.jsxs("div",{className:"cvg-cancellation-insurance__body",children:[y.jsxs("div",{className:"cvg-cancellation-insurance__description",children:[y.jsx("h5",{className:"cvg-typo-heading-5",children:re(tn.CancellationInsuranceTitle,{amount:e.price})}),y.jsx("p",{className:"cvg-typo-body-small",children:re(tn.CancellationInsuranceClickingYes)})]}),y.jsx(a4,{className:"cvg-cancellation-insurance__radios",inline:!0,name:"cancellationInsurance",groups:u(),register:t,showError:!!n.cancellationInsurance,error:(m=n.cancellationInsurance)==null?void 0:m.message,onChange:a}),y.jsx(bD,{url:e.termsUrl,label:re(tn.SalesTermsConditionsInsuranceLink)}),y.jsx(bD,{url:e.ipidUrl,label:re(tn.InsuranceSummaryDocumentLink)})]})]})},Yue=()=>{const{register:e}=il(),t=re(tn.SpecialRequestsHint),n=re(tn.SpecialRequestTitle);return y.jsx("div",{className:"cvg-summary-container__form-container-line",children:y.jsx(E3,{"data-testid":"special-request",id:"special-request",className:"customer__email",label:n,hint:t,fullWidth:!0,...e("specialRequest")})})},Que=()=>{var Z,le,be,Re,Je,Fe,Xe;const{register:e,formState:{errors:t}}=il(),{titles:n,internationalCodes:r,guestInformation:i,hasSmsConfirmation:l}=Te(gt=>gt.summary),u=Te(gt=>{var yt;return(yt=gt.session.selectedHotel)==null?void 0:yt.countryCode}),a=Te(gt=>gt.summary.countries),{title:m,firstName:g,lastName:w,phone:C,email:P}=i??{},I=re(tn.TitleSelectionDropdown),N=re(tn.FirstNameInputField),z=re(tn.SurnameInputField),$=re(tn.EmailAddressInputField),H=re(tn.CountryOfResidenceSelector),V=re(tn.InternationalCodeSelector),q=re(tn.CodeSelectionDropdown),te=re(tn.CountrySelectionDropdown),ue=re(tn.SmsConfirmationNotice),fe=re(tn.OptOutTelemarketingStatement);return y.jsxs("div",{className:"cvg-customer",children:[y.jsxs("div",{className:"cvg-customer__line",children:[y.jsx(Yu,{className:"cvg-customer__item cvg-customer__title",label:I,defaultValue:m!==""?m:(n==null?void 0:n.length)>0?n[0].value:"",options:n,mandatory:!0,id:"title",showError:!!t.title,error:(Z=t.title)==null?void 0:Z.message,...e("title")}),y.jsx(bl,{className:"cvg-customer__item cvg-customer__first-name",label:N,mandatory:!0,defaultValue:g,showError:!!t.firstName,error:(le=t.firstName)==null?void 0:le.message,id:"first-name",fullWidth:!0,...e("firstName")}),y.jsx(bl,{className:"cvg-customer__item cvg-customer__last-name",label:z,mandatory:!0,defaultValue:w,showError:!!t.lastName,error:(be=t.lastName)==null?void 0:be.message,id:"last-name",fullWidth:!0,...e("lastName")})]}),y.jsxs("div",{className:"cvg-customer__phone-line",children:[y.jsxs("div",{className:"cvg-customer__line",children:[y.jsx(Yu,{className:"cvg-customer__item cvg-customer__phone-country-code",label:V,options:r,placeholder:q,mandatory:!0,showError:!!t.phoneCountryCode,error:(Re=t.phoneCountryCode)==null?void 0:Re.message,id:"phone-country-code",defaultValue:"",...e("phoneCountryCode")}),y.jsx(bl,{className:"cvg-customer__item cvg-customer__phone",label:re(tn.PhoneNumberInputField),defaultValue:C,mandatory:!0,showError:!!t.phone,error:(Je=t.phone)==null?void 0:Je.message,id:"phone-number",fullWidth:!0,...e("phone")})]}),y.jsxs("div",{children:[l&&ue?y.jsx("p",{"data-testid":"smsConfirmationNotice",className:"cvg-typo-heading-5",children:ue}):null,(u==null?void 0:u.toLocaleUpperCase())==="FR"&&fe?y.jsx("p",{"data-testid":"optOutTelemarketingStatement",className:"cvg-typo-body-tiny",children:fe}):null]})]}),y.jsx("div",{className:"cvg-customer__line",children:y.jsx(bl,{label:$,defaultValue:P,className:"cvg-customer__email",mandatory:!0,showError:!!t.email,error:(Fe=t.email)==null?void 0:Fe.message,id:"email",fullWidth:!0,...e("email")})}),y.jsx("div",{className:"cvg-customer__line",children:y.jsx(Yu,{className:"cvg-address__item cvg-address__country",label:H,defaultValue:"",options:a,mandatory:!0,id:"country",showError:!!t.country,error:(Xe=t.country)==null?void 0:Xe.message,placeholder:te,...e("country")})})]})},fm=()=>y.jsx("div",{className:"cvg-summary-separator"}),Jue=()=>{var P,I,N,z;const{register:e,formState:{errors:t}}=il(),n=Te($=>$.summary.guestInformation),{address:r,city:i,state:l,zipcode:u}=n??{},a=re(tn.AddressInputField),m=re(tn.ZipcodeInputField),g=re(tn.StateInputField),w=re(tn.TownCityInputField),C=Te($=>{var H;return((H=$.configuration.summaryConstraints)==null?void 0:H.address)==="Required"});return y.jsxs("div",{className:"cvg-address",children:[y.jsxs("div",{className:"cvg-address__line cvg-address__address-city",children:[y.jsx(bl,{errorLabelClass:!1,className:"cvg-address__item",label:a,mandatory:C,defaultValue:r,showError:!!t.address,error:(P=t.address)==null?void 0:P.message,id:"address",fullWidth:!0,...e("address")}),y.jsx(bl,{errorLabelClass:!1,className:"cvg-address__item cvg-address__city",label:w,mandatory:C,defaultValue:i,showError:!!t.city,error:(I=t.city)==null?void 0:I.message,id:"city",fullWidth:!0,...e("city")})]}),y.jsxs("div",{className:"cvg-address__line cvg-address__zipcode-state",children:[y.jsx(bl,{errorLabelClass:!1,className:"cvg-address__item",label:m,mandatory:C,defaultValue:u,showError:!!t.zipcode,error:(N=t.zipcode)==null?void 0:N.message,id:"zip-code",fullWidth:!0,...e("zipcode")}),y.jsx(bl,{errorLabelClass:!1,className:"cvg-address__item",label:g,mandatory:C,defaultValue:l,showError:!!t.state,error:(z=t.state)==null?void 0:z.message,id:"state",fullWidth:!0,...e("state")})]})]})},ede=()=>{var g;const{register:e,formState:{errors:t}}=il(),n=Te(w=>{var C;return(C=w.session.selectedHotel)==null?void 0:C.checkin}),r=Te(w=>{var C;return(C=w.session.selectedHotel)==null?void 0:C.receptionOpeningHours}),{culture:i}=Te(w=>w.session),l=Te(w=>{var C;return((C=w.configuration.summaryConstraints)==null?void 0:C.checkinTime)==="Required"}),u=re(tn.CheckinTimePreferenceField),a=re(tn.CheckinTimeDropdown),m=(w="00:00",C="23:30",P="default")=>{w=w||"00:00",C=C||"23:30",P=P||"default";const I=[],N=new Date(`1970-01-01T${w}Z`),z=new Date(`1970-01-01T${C}Z`);for(z<N&&z.setDate(z.getDate()+1);N<=z;){const $=N.toLocaleTimeString(P,{hour:"2-digit",minute:"2-digit",timeZone:"UTC"});I.push({value:$,name:$}),N.setUTCMinutes(N.getUTCMinutes()+30)}return I};return y.jsx(Yu,{id:"checkin-time",className:"cvg-customer__item cvg-customer__title",label:u,placeholder:a,mandatory:l,defaultValue:"",options:m(n,r==null?void 0:r.closingTime,i),...e("checkinTime"),showError:!!t.checkinTime,error:(g=t.checkinTime)==null?void 0:g.message})},tde=e=>Array(e.adults).fill("adult").concat(Array(e.children).fill("child")).concat(Array(e.infants).fill("infant")),nde=({title:e,occupancy:t,roomId:n,rateIndex:r,occupancyId:i})=>{var Nt,qe,_t;const{control:l,register:u,formState:a,setValue:m}=il(),g=Ir(),w=re(tn.TitleSelectionDropdown),C=re(tn.FirstNameInputField),P=re(tn.SurnameInputField),I=re(tn.AgeInputField),N=re(tn.AdultOccupancyLabel),z=re(tn.ChildOccupancyLabel),$=re(tn.InfantOccupancyLabel),H=Te(Ke=>{var we;return(we=Ke.configuration.summaryConstraints)==null?void 0:we.occupancyDetails})==="Required",V=re(Lt.Adults),q=re(Lt.Children),te=re(Lt.Infants),ue=re(Lt.Adult),fe=re(Lt.Child),Z=re(Lt.Infant),le=kg(t,{adultLabel:ue,childLabel:fe,infantLabel:Z,adultsLabel:V,childrenLabel:q,infantsLabel:te}),be={adult:N,child:z,infant:$},Re=Ke=>[{name:be[Ke],value:Ke}],{titles:Je}=Te(Ke=>Ke.summary),{fields:Fe,append:Xe}=O5({control:l,name:`guestsRepartition.${r}.guests`}),gt=M.useCallback(Ke=>{Xe({title:Je[0].value,lastName:"",firstName:"",age:Ke,roomId:n,occupancyId:i})},[Je,Xe,n,i]),yt=tde(t);M.useEffect(()=>{Fe.length===0&&(yt.forEach(Ke=>{gt(Ke)}),m(`guestsRepartition.${r}.maxAdultCount`,t.adults))},[gt,Fe.length,m,r,t,yt]);const lt=(_t=(qe=(Nt=a==null?void 0:a.errors)==null?void 0:Nt.guestsRepartition)==null?void 0:qe[r])==null?void 0:_t.guests;return y.jsxs("div",{className:"cvg-guest-repartition-room",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"cvg-typo-heading-4",children:e}),y.jsxs("div",{className:"cvg-typo-body-small cvg-guest-repartition-room__occupancy",children:[y.jsx(sn,{name:"user-group",size:"small",className:"cvg-guest-repartition-room__occupancy-icon"}),y.jsx("span",{children:le})]})]}),y.jsx("div",{className:"cvg-guest-repartition-room__group",children:Fe.map((Ke,we)=>{var He,Be,ct,xt,bt,It,qt,fn,wn,an,Vt,Cn;return y.jsxs("div",{className:"cvg-guest-repartition-room__line",children:[y.jsx(Yu,{classNameLabel:"cvg-guest-repartition-room__select",label:g||we===0?w:void 0,options:Je,id:`${n}.${we}.title`,mandatory:H,...u(`guestsRepartition.${r}.guests.${we}.title`),showError:!!((He=lt==null?void 0:lt[we])!=null&&He.title),error:(ct=(Be=lt==null?void 0:lt[we])==null?void 0:Be.title)==null?void 0:ct.message}),y.jsx(bl,{errorLabelClass:!1,className:"cvg-guest-repartition-room__first-name",label:g||we===0?C:void 0,mandatory:H,id:`${n}.${we}.first-name`,fullWidth:!0,...u(`guestsRepartition.${r}.guests.${we}.firstName`),showError:!!((xt=lt==null?void 0:lt[we])!=null&&xt.firstName),error:(It=(bt=lt==null?void 0:lt[we])==null?void 0:bt.firstName)==null?void 0:It.message}),y.jsx(bl,{errorLabelClass:!1,className:"cvg-guest-repartition-room__last-name",label:g||we===0?P:void 0,mandatory:H,id:`${n}.${we}.last-name`,fullWidth:!0,...u(`guestsRepartition.${r}.guests.${we}.lastName`),showError:!!((qt=lt==null?void 0:lt[we])!=null&&qt.lastName),error:(wn=(fn=lt==null?void 0:lt[we])==null?void 0:fn.lastName)==null?void 0:wn.message}),y.jsx(Yu,{classNameLabel:"cvg-guest-repartition-room__select",label:g||we===0?I:void 0,options:Re(yt[we]),mandatory:H,id:`${n}.${we}.age`,fullWidth:!0,...u(`guestsRepartition.${r}.guests.${we}.age`),showError:!!((an=lt==null?void 0:lt[we])!=null&&an.age),error:(Cn=(Vt=lt==null?void 0:lt[we])==null?void 0:Vt.age)==null?void 0:Cn.message})]},Ke.id)})})]})},rde=e=>e.map(n=>({...n,rates:n.rates.filter(r=>r.selectedQuantity>0)})).filter(n=>n.rates.length>0).map(n=>Array.from({length:n.rates[0].selectedQuantity}).map(()=>n)).flat(),ide=()=>{const e=re(tn.PreparationForStaySectionHeader),t=Te(g=>{var w,C;return(C=(w=g.summary)==null?void 0:w.quote)==null?void 0:C.rooms}),n=rde(t),{control:r,watch:i}=il(),{fields:l,append:u,remove:a}=O5({control:r,name:"guestsRepartition"}),m=i("guestsRepartition");return M.useEffect(()=>{if(n!=null&&n.length){if((m==null?void 0:m.length)===void 0||(m==null?void 0:m.length)===0)u(n.map(g=>({maxAdultCount:g.rates[0].occupancy.adults,guestsPosition:g.guestPosition,guests:[]})));else if((m==null?void 0:m.length)>(n==null?void 0:n.length)){const g=n.map(C=>C.guestPosition),w=m.findIndex(C=>g.indexOf(C.guestsPosition)<0);w>-1&&a(w)}}},[u,a,m,n]),y.jsxs("div",{className:"cvg-summary-guest-repartition",children:[y.jsx("h2",{className:"cvg-typo-heading-2 cvg-typo-heading-1--breakpoint-small",children:e}),y.jsx("div",{className:"cvg-summary-guest-repartition__rooms",children:l.length===(n==null?void 0:n.length)&&l.map((g,w)=>y.jsx(nde,{rateIndex:w,roomId:n[w].id,title:n[w].name,occupancy:n[w].rates[0].occupancy,occupancyId:n[w].rates[0].occupancyId},`${g.id}.${w}`))})]})},sde=()=>{const e=Te(N=>N.session.guests[0]),t=e.adults+e.children+e.infants,n=Te(N=>{var z;return(z=N.configuration.summaryConstraints)==null?void 0:z.occupancyDetails}),r=Te(N=>N.summary.cancellationInsurance),i=Te(N=>{var z;return(z=N.configuration.summaryConstraints)==null?void 0:z.checkinTime}),l=Te(N=>{var z;return(z=N.configuration.summaryConstraints)==null?void 0:z.address}),u=Q5().required(),a=ode(u,Vue(l),l),m=ade(u,Zue(i),i),g=Gx(u,eU(),"Optional"),w=Gx(u,K5(),r?"Required":"None"),C=Gx(u,tU(),"Optional"),P=Gx(u,nU(),"Optional"),I=n==="Required"?Gue(t):iU();return u.and(a).and(I).and(m).and(g).and(w).and(C).and(P)},Gx=(e,t,n)=>{switch(n){case"Optional":return e.merge(t.partial());case"Required":return e.merge(t.required());case"None":default:return e}},ode=(e,t,n)=>{switch(n){case"Required":return e.merge(t.required());case"Optional":case"None":default:return e.merge(t.partial())}},ade=(e,t,n)=>{switch(n){case"Required":return e.merge(t.required());case"Optional":case"None":default:return e.merge(t.partial())}},lde=()=>{const e=re(tn.MandatoryFieldIndicator),t=Te(r=>{var i;return(i=r.session.selectedHotel)==null?void 0:i.name})??"",n=re(tn.PersonalDataCollectionStatement,{hotel:t});return y.jsxs("div",{className:"cvg-sales-terms-conditions__notice cvg-typo-body",children:[y.jsxs("p",{children:["* = ",e]}),y.jsx("p",{children:n})]})},cde=()=>async e=>{e(nY());try{const t=await MK();e(rY(t.data));return}catch{e(iY());return}},ude=({isOpen:e,handleOpenChange:t})=>{var te,ue,fe,Z,le,be,Re,Je,Fe;const n=Ir(),r=Si(),i=Te(Xe=>Xe.summary.termsAndConditions);M.useEffect(()=>{i!=null&&i.cancelConditions||r(cde())},[r,i==null?void 0:i.cancelConditions]);const l=re(tn.SalesTermsConditionsTitle),u=re(yn.OkLabel),a=re(Pr.CancellationConditionTitle),m=re(Pr.CancellationInsuranceOption),g=re(tn.TermsDepositTitle),w=re(Ur.TaxesFeesUponBooking),C=re(Ur.IncludedTaxesFees),P=re(Ur.TaxesFeesPaidHotel),I=re(Lt.CloseButton),N=re(tn.AcceptedCards),z=re(tn.HoursTitle),$=`${re(yn.ReceptionOpeningHours)}: ${i.openingHours}`,H=`${re(yn.HotelCheckin)}: ${i.checkInTime}`,V=`${re(yn.HotelCheckout)}: ${i.checkOutTime}`,q=Xe=>Xe==null?void 0:Xe.map(gt=>y.jsx("p",{className:"cvg-typo-body-small",children:gt.text},gt.name));return y.jsx(MA,{open:e,onOpenChange:t,children:y.jsxs(OA,{open:e,"data-testid":"terms-dialog-element",heading:l,headingClassName:"cvg-default-dialog-heading",closeButton:y.jsx(jA,{"data-testid":"terms-dialog-close-icon","aria-label":I}),children:[y.jsx(DA,{children:y.jsxs("div",{className:"cvg-termsconditionsratedialog__container",children:[i.cancelConditions?y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:a}),y.jsx("p",{className:"cvg-typo-body-small",children:i.cancelConditions})]}):null,i.customCancelConditions?y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:m}),y.jsx("p",{dangerouslySetInnerHTML:{__html:i.customCancelConditions},className:"cvg-typo-body-small"})]}):null,i.depositText||i.depositCurrency?y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:g}),y.jsx("p",{className:"cvg-typo-body-small",children:i.depositText}),y.jsx("p",{className:"cvg-typo-body-small",children:i.depositCurrency})]}):null,((ue=(te=i.taxes)==null?void 0:te.included)==null?void 0:ue.length)>0&&y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:C}),q((fe=i.taxes)==null?void 0:fe.included)]}),((le=(Z=i.taxes)==null?void 0:Z.excluded)==null?void 0:le.length)>0&&y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:w}),q((be=i.taxes)==null?void 0:be.excluded)]}),((Je=(Re=i.taxes)==null?void 0:Re.onSite)==null?void 0:Je.length)>0&&y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:P}),q((Fe=i.taxes)==null?void 0:Fe.onSite)]}),i.openingHours||i.checkInTime||i.checkOutTime?y.jsxs("div",{children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:z}),i.openingHours?y.jsx("p",{children:$}):null,i.checkInTime?y.jsx("p",{children:H}):null,i.checkOutTime?y.jsx("p",{children:V}):null]}):null,i.acceptedCards.length>0&&y.jsxs("div",{"data-testid":"terms-supported-cards",children:[y.jsx("h4",{className:"cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",children:N}),y.jsx(g3,{supportedCardTypes:i.acceptedCards,supportedPaymentMethods:[]})]})]})}),y.jsx(NA,{className:"cvg-default-dialog-footer",children:y.jsx(bn,{variation:"brand",fullWidth:n,onClick:()=>t(!1),className:"cvg-default-dialog-button","data-testid":"terms-dialog-button",children:u})})]})})},dde=()=>{const e=`* ${re(tn.SalesConditionsAcceptanceConfirmation)}`,t=Te(g=>g.session.salesTermsAndConditions),n="{{.*}}",r=new RegExp(`(${n})`,"g"),i=new RegExp(n,"g"),l=e.split(r).filter(Boolean),[u,a]=M.useState(!1),m=()=>{a(g=>!g)};return y.jsxs(y.Fragment,{children:[l.map(g=>i.test(g)?y.jsxs(M.Fragment,{children:[y.jsx(bn,{onClick:m,variation:"link",type:"button",className:"cvg-typo-body",children:g.replace(/{{|}}/g,"")}),(t==null?void 0:t.isVisible)&&y.jsxs(y.Fragment,{children:[", ",y.jsx(v3,{isExternal:!0,href:(t==null?void 0:t.url)??"",className:"cvg-typo-body",children:t.name})]})]},g):y.jsx(M.Fragment,{children:g},g)),y.jsx(ude,{isOpen:u,handleOpenChange:a})]})},sU=()=>{const{watch:e}=il(),{paymentOptions:t}=Te(l=>l.summary);if(t===void 0)return{};const n=(t==null?void 0:t.find(l=>l.selected))??(t==null?void 0:t[0]),r=e("paymentName"),i=(t==null?void 0:t.find(l=>l.paymentName==r))??n;return(i==null?void 0:i.sellingConditions)??{}},hde=()=>{const{register:e,formState:{errors:t}}=il(),n=re(tn.SalesTermsConditionsDocumentLink),r=re(tn.MarketingPreferenceFromPropertyCheckbox),i=re(tn.MarketingPreferenceFromPartnersCheckbox),l=re(tn.DepositSectionHeader),u=re(tn.BalanceDueSectionHeader),a=re(tn.CancellationTermsConditionsHeader),m=Te(H=>{var V;return(V=H.summary.quote)==null?void 0:V.marketing}),g=m==null?void 0:m.optin.hotel,w=m==null?void 0:m.optin.partners,{deposit:C,balanceText:P,cancellationPolicy:I}=sU(),N=Te(H=>H.summary.cancellationInsurance),z=N!=null&&N.selected?N.depositText:void 0,$=Te(H=>H.summary.isBookingRequest);return y.jsxs("section",{className:"cvg-sales-terms-conditions",children:[!$&&y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"cvg-typo-heading-2 cvg-typo-heading-1--breakpoint-small","data-testid":"sales-terms-conditions__title",children:n}),y.jsxs("section",{className:"cvg-sales-terms-conditions__descriptions","data-testid":"sales-terms-conditions__descriptions",children:[C?y.jsxs("p",{className:"cvg-typo-body","data-testid":"summary-deposit",children:[y.jsxs("span",{className:"cvg-typo-heading-4",children:[l," "]}),C,y.jsx("br",{}),z]}):null,P?y.jsxs("p",{className:"cvg-typo-body","data-testid":"summary-balance",children:[y.jsxs("span",{className:"cvg-typo-heading-4",children:[u," "]}),P]}):null,y.jsxs("p",{className:"cvg-typo-body",children:[y.jsxs("span",{className:"cvg-typo-heading-4",children:[a," "]}),I]})]})]}),y.jsxs("div",{className:"cvg-sales-terms-conditions__checkboxes",children:[g?y.jsx(Km,{"data-testid":"hotel-promotion",label:r,className:"cvg-typo-body",...e("hotelPromotion")}):null,w?y.jsx(Km,{"data-testid":"partners-promotion",label:i,className:"cvg-typo-body",...e("partnersPromotion")}):null,y.jsx(Km,{label:dde(),className:"cvg-typo-body",showError:!!t.salesTermsConditions,...e("salesTermsConditions")})]})]})},fde=()=>{const e=re(tn.BookingRequestTitle),t=re(tn.SummaryBookingRequest),n=re(tn.ObligationBookingRequest),r=re(tn.PaymentBookingRequest),i=re(tn.ResponseBookingRequest),l=re(tn.ConfirmRoomBookingRequest);return y.jsxs("div",{className:"cvg-booking-request-summary__container",children:[y.jsx("h2",{"data-testid":"booking-request-title",className:"cvg-typo-heading-1",children:e}),y.jsxs("div",{className:"cvg-booking-request-summary__information",children:[y.jsx("h3",{className:"cvg-typo-heading-5",children:t}),y.jsxs("ul",{children:[y.jsx("li",{className:"cvg-typo-body-small",children:n}),y.jsx("li",{className:"cvg-typo-body-small",children:r}),y.jsx("li",{className:"cvg-typo-body-small",children:i})]}),y.jsx("h3",{className:"cvg-typo-heading-5",children:l})]})]})},oU=()=>{var a;const e=il(),t=e==null?void 0:e.formState,n=t==null?void 0:t.errors,r=Object.keys(n??{}).length>0,i=(n==null?void 0:n.guestsRepartition)!=null?Array.from(Object.keys(n==null?void 0:n.guestsRepartition)).findIndex(m=>{var g,w,C;return((C=(w=(g=n==null?void 0:n.guestsRepartition)==null?void 0:g[+m])==null?void 0:w.guestsError)==null?void 0:C.message)===vb.NoAdult})>-1:!1,l=(n==null?void 0:n.guestsRepartition)!=null?Array.from(Object.keys(n==null?void 0:n.guestsRepartition)).findIndex(m=>{var g,w,C;return((C=(w=(g=n==null?void 0:n.guestsRepartition)==null?void 0:g[+m])==null?void 0:w.guestsError)==null?void 0:C.message)===vb.TooManyAdults})>-1:!1,u=((a=n==null?void 0:n.guestsRepartitionError)==null?void 0:a.message)===vb.MissingGuest;return{noAdultError:i,tooManyAdultsError:l,missingGuestError:u,anyError:r}},pde=({isBookingRequest:e})=>{const t=Te(P=>P.summary.isFetching),n=Te(P=>{var I,N,z;return(z=(N=(I=P.basket.rooms[0])==null?void 0:I.rates)==null?void 0:N[0])==null?void 0:z.depositType}),r=typeof n=="number"?Tq[n]:n,{watch:i}=il(),l=i("cancellationInsurance"),{anyError:u}=oU(),{depositAmountText:a,paymentAmountText:m,depositAmount:g}=sU(),C=mde(e,r,(!a||g===0)&&!m&&l!=="cancellation-insurance-yes");return y.jsxs(y.Fragment,{children:[e?y.jsx(fde,{}):y.jsx(hde,{}),y.jsx(lde,{}),y.jsxs("div",{className:"cvg-summary-confirm-booking",children:[y.jsx(bn,{"data-testid":"button-confirmBooking",variation:"brand-large",fullWidth:!0,type:"submit",loading:t,children:C}),y.jsxs("div",{className:"cvg-summary-confirm-booking-messages",children:[u?y.jsxs("div",{className:"cvg-summary-confirm-booking-messages__error cvg-typo-body-tiny",children:[y.jsx(sn,{name:"triangle-exclamation"}),y.jsx("p",{children:re(tn.FormErrorNotification)})]}):null,y.jsxs("div",{className:"cvg-summary-confirm-booking-messages__info cvg-typo-body-tiny",children:[y.jsx(sn,{name:"lock"}),y.jsx("p",{children:re(tn.PaymentRedirectPrompt)})]})]})]})]})},mde=(e,t,n)=>re(e?tn.SendBookingRequestOption:(t==="Nothing"||t==="CreditCardNumber")&&n?tn.BookNowPayOnArrivalOption:tn.BookNowPayNowOption),gde=({occupancy:e,roomNumber:t})=>{const n=re(Lt.Adults),r=re(Lt.Children),i=re(Lt.Infants),l=re(Lt.Adult),u=re(Lt.Child),a=re(Lt.Infant),m=kg(e,{adultLabel:l,childLabel:u,infantLabel:a,adultsLabel:n,childrenLabel:r,infantsLabel:i});return y.jsxs("div",{className:"cvg-room-occupancy",children:[y.jsxs("div",{className:"cvg-room-occupancy-title",children:[y.jsx("h2",{className:"cvg-typo-heading-5 cvg-typo-heading-4--breakpoint-small cvg-room-occupancy-title__label",children:re(Cs.RoomWithIndex,{position:t})}),y.jsxs("div",{className:"cvg-typo-body-tiny cvg-typo-body-small--breakpoint-small cvg-room-occupancy-title__status",children:[y.jsx(sn,{name:"check",size:"small"}),y.jsx("span",{children:re(js.AddedExtrasIndicator)})]})]}),y.jsx("div",{className:"cvg-typo-body-small cvg-typo-body--breakpoint-small cvg-room-occupancy__occupancy",children:m})]})},yde=()=>{const e=re(Lt.NoAvailabilityTitle),t=re(Ur.NoAvilabilityGuestRoom);return y.jsxs(Xo,{variation:"error",direction:"column",children:[y.jsx(Ko,{children:e}),y.jsx(wc,{children:t})]})},vde=({newGuests:e,setNewGuests:t,hasAvailability:n})=>{const{rooms:r}=Te(u=>u.basket),i=_ee(e.position),l=u=>async a=>{t(m=>({...m,[u]:a}))};return y.jsxs("div",{className:"cvg-guests-dialog-body",children:[r.map((u,a)=>{var g;const m=(g=u.rates[0])==null?void 0:g.occupancy;return y.jsx(gde,{roomNumber:a+1,occupancy:m},a)}),y.jsx(A4,{}),y.jsx(I4,{guests:e,guestConstraints:i,roomNumber:r.length+1,onChange:l}),!n&&y.jsx(yde,{})]})},_de=({onClose:e,onContinue:t})=>{const n=Te(r=>r.session.isFetching||r.roomSelection.isFetching);return y.jsxs("div",{className:"cvg-guests-dialog__footer",children:[y.jsx(bn,{variation:"secondary",onClick:e,"data-testid":"guests_dialog_footer_cancel_button",children:re(yn.Cancel)}),y.jsx(bn,{variation:"brand",loading:n,onClick:t,"data-testid":"guests_dialog_footer_continue_button",children:re(Pr.ContinueButton)})]})},xde=({isOpen:e,onClose:t})=>{const n=Si(),r=Rl(),{newGuests:i}=hA(),l=lA(),[u,a]=M.useState(i()),[m,g]=M.useState(!0),w=async()=>{g(!0),await n(KP(u));const z=l();await n(hg(z))&&await C(z)},C=async z=>{n(aA()),await n(_c(1));const $=Fr.getState().roomSelection.rooms.length>0;if(g($),!$){await n(hg({...z,guests:z.guests.slice(0,z.guests.length-1)}));return}P()},P=()=>{n(GY()),r(Jn.roomSelection.path)},I=re(Cs.AddRoom),N=re(Lt.CloseButton);return y.jsx(MA,{open:e,onOpenChange:t,children:y.jsxs(OA,{open:e,"data-testid":"guests-dialog-element",heading:I,headingClassName:"cvg-default-dialog-heading",closeButton:y.jsx(jA,{"data-testid":"guests-dialog-close-icon","aria-label":N}),children:[y.jsx(DA,{children:y.jsx(vde,{newGuests:u,setNewGuests:a,hasAvailability:m})}),y.jsx(NA,{children:y.jsx(_de,{onClose:t,onContinue:w})})]})})},bde=()=>{const e=Ir(),t=Rl(),n=Te(w=>w.basket.skipExtraSelection),r=re(tn.ReturnToExtrasLink),i=re(Pr.AddRoomButton),[l,u]=M.useState(!1),a=()=>{u(w=>!w)},m=async()=>{t(Jn.extraSelection.path)},{canAddRoom:g}=hA();return y.jsxs(y.Fragment,{children:[n?y.jsx("div",{}):y.jsx(bn,{variation:e?"tertiary":"tertiary-large",icon:"chevron-left",iconPosition:"start",onClick:m,children:r}),g?e?y.jsx(bn,{variation:"tertiary",iconPosition:"start",icon:"plus",onClick:a,"data-testid":"add-room-button",children:i}):y.jsx(bn,{variation:"secondary-large",icon:"plus",onClick:a,"data-testid":"add-room-button",children:i}):null,y.jsx(xde,{isOpen:l,onClose:a})]})},aU=({children:e})=>y.jsx("div",{className:"cvg-summary__blocking-error",children:e}),kD=()=>{const e=Ir(),t=Rl(),n=Te(m=>m.basket.skipExtraSelection),r=re(yn.PageLoadError),i=re(yn.TechnicalIssueRetry),l=re(yn.PageReload),u=re(tn.ReturnToExtrasLink),a=()=>{t(`${n?Jn.roomSelection.path:Jn.extraSelection.path}`)};return y.jsxs(aU,{children:[!n&&y.jsx(bn,{variation:e?"tertiary":"tertiary-large",iconPosition:n&&!e?"end":"start",icon:"chevron-left",onClick:a,children:u}),y.jsx("div",{className:"cvg-summary__blocking-error-banner",children:y.jsxs(Xo,{direction:e?"column":"row",variation:"error",children:[y.jsx(Ko,{children:r}),y.jsx(wc,{children:i}),y.jsx(N_,{children:y.jsx(bn,{variation:"secondary",onClick:()=>window.location.reload(),children:l})})]})})]})},wde=()=>{const e=Si(),t=Ir(),n=Rl(),r=re(yn.BasketInvalid),i=re(yn.BasketItemsInvalid),l=re(js.ReturnToRoomsLink),u=async()=>{await e(Qy()),n(Jn.roomSelection.path)};return y.jsxs(y.Fragment,{children:[!t&&y.jsx(Rg,{}),y.jsx(aU,{children:y.jsx("div",{className:"cvg-summary__blocking-error-banner",children:y.jsxs(Xo,{direction:t?"column":"row",variation:"error",children:[y.jsx(Ko,{children:r}),y.jsx(wc,{children:i}),y.jsx(N_,{children:y.jsx(bn,{variation:"secondary",onClick:u,children:l})})]})})})]})},Sde=({children:e})=>{const t=Te(i=>i.summary.error),n=Te(i=>i.summary.isBasketUnavailable),r={[Ta.BusinessError]:y.jsx(kD,{}),[Ta.TechnicalError]:y.jsx(kD,{})};return n?y.jsx(wde,{}):t?r[t.type]??y.jsx(y.Fragment,{children:e}):y.jsx(y.Fragment,{children:e})},Ede=()=>{const e=Te(n=>n.summary.priceWarnings),t=re(yn.BasketPriceChangeTitle);return y.jsxs(Xo,{variation:"brand",direction:"column",children:[y.jsx(Ko,{children:t}),y.jsx(wc,{children:y.jsx("ul",{className:"cvg-price-warnings-banner__list",children:e.map(n=>y.jsx("li",{children:n},n))})})]})},Cde=()=>{const e=re(yn.RoomsInsufficient),t=re(yn.GuestAccommodationError);return y.jsx(y.Fragment,{children:y.jsxs(Xo,{variation:"error",direction:"column",children:[y.jsx(Ko,{children:e}),y.jsx(wc,{children:t})]})})},PD=({title:e})=>y.jsx(Xo,{variation:"error",direction:"column",children:y.jsx(Ko,{children:e})}),Tde=({className:e})=>{const t=Te(a=>a.summary.priceWarnings.length>0),n=Te(a=>a.summary.notEnoughRooms),{noAdultError:r,tooManyAdultsError:i,missingGuestError:l}=oU();return(t||n||r||i||l)&&y.jsxs("div",{className:Or("cvg-summary-banner",e),children:[t?y.jsx(Ede,{}):null,n?y.jsx(Cde,{}):null,r?y.jsx(PD,{title:re(tn.UnaccompaniedChildErrorNotice)}):null,i?y.jsx(PD,{title:re(tn.GuestAgeMismatchNotice)}):null]})},kde=({iconName:e,title:t,subtitle:n})=>y.jsxs("div",{className:"cvg-summary-payment__radio-label","data-testid":`summary-payment-${t==re(tn.OnlinePaymentOptionDescription)?"online":"deposit"}`,children:[y.jsxs("div",{className:"cvg-summary-payment__radio-label-title",children:[y.jsx(sn,{className:"cvg-summary-payment__radio-label-icon",name:e}),y.jsx("span",{className:"cvg-typo-action",children:t})]}),y.jsx("p",{className:"cvg-typo-body-tiny cvg-summary-payment__radio-label-subtitle",children:n})]}),Pde=()=>{var w;const{register:e}=il(),t=Te(C=>C.summary.paymentOptions),n=t.find(C=>C.isFullOnlinePayment),r=re({page:"Summary",tag:"PaymentMethodChoiceSection"}),i=re(tn.OnlinePaymentOptionDescription),l=re({page:"Summary",tag:"CardPaymentAmountDisplay",interpolate:{amount:((w=t.find(C=>C.isFullOnlinePayment))==null?void 0:w.sellingConditions.paymentAmountText)??""}}),u=t.find(C=>!C.isFullOnlinePayment),a=(u==null?void 0:u.sellingConditions.depositAmountText)===""||(u==null?void 0:u.sellingConditions.depositAmountText)===null?re(tn.PaymentInformationRequired):re({page:"Summary",tag:"DepositPaymentOptionDescription",interpolate:{amount:(u==null?void 0:u.sellingConditions.depositAmountText)??""}}),m=re(tn.BalancePaymentHotelNotice),g=t.slice().sort(C=>C.isFullOnlinePayment?-1:1).map(C=>{const{isFullOnlinePayment:P}=C;return{id:C.paymentName,label:y.jsx(kde,{iconName:P?"globe":"bell-concierge",title:P?i:a,subtitle:P?l:m})}});return y.jsx("div",{className:"cvg-summary-payment",children:y.jsx(a4,{legend:y.jsx("h2",{className:"cvg-typo-heading-2 cvg-typo-heading-3--breakpoint-small",children:r}),name:"paymentName",defaultValue:n==null?void 0:n.paymentName,groups:g,register:e,showError:!1})})},Ade=()=>{var q;const e=Ir(),t=Si(),{isConfirmingDelete:n}=pu(),{trackSubmitQuote:r}=Vi(),{cancellationInsurance:i,quote:l,notEnoughRooms:u}=Te(te=>te.summary),a=(q=l==null?void 0:l.rooms)==null?void 0:q.reduce((te,ue)=>[...te,...ue.rates],[]),{isBookingRequest:m}=(a==null?void 0:a[0])??{},g=Te(te=>{var ue;return(ue=te.configuration.summaryConstraints)==null?void 0:ue.checkinTime}),w=Te(te=>{var ue;return(ue=te.configuration.summaryConstraints)==null?void 0:ue.address}),C=Te(te=>{var ue;return(ue=te.configuration.summaryConstraints)==null?void 0:ue.occupancyDetails}),P=Te(te=>te.summary.priceWarnings.length>0),I=Te(te=>te.summary.paymentOptions.length>1),N=te=>te==="Optional"||te==="Required",z=re(tn.GuestInformationSectionHeader),$=sde(),H=te=>{t(jB(te)),t(JY()),r()},V=Tce({resolver:Ice($)});return y.jsx(y.Fragment,{children:y.jsxs(Sde,{children:[y.jsxs(f1,{children:[y.jsx(g1,{}),y.jsx(Rg,{isBasketVisible:!0})]}),y.jsxs("article",{className:"cvg-summary-container",children:[y.jsxs(dce,{...V,children:[y.jsxs("div",{children:[y.jsx("div",{className:Or("cvg-summary-container__navigation",{"cvg-summary-container__navigation--with-warnings":P}),children:y.jsx(bde,{})}),y.jsx(Tde,{className:"cvg-summary-container__banner"})]}),!u&&y.jsxs("form",{className:"cvg-summary-container__form",onSubmit:V.handleSubmit(H),noValidate:!0,children:[y.jsx("h2",{className:"cvg-typo-heading-2 cvg-typo-heading-1--breakpoint-small",children:z}),y.jsxs("div",{className:"cvg-summary-container__form-container",id:"summary-guest",children:[y.jsx(Que,{}),N(w)&&y.jsxs(y.Fragment,{children:[y.jsx(fm,{}),y.jsx(Jue,{})]}),N(C)&&y.jsxs(y.Fragment,{children:[y.jsx(fm,{}),y.jsx(ide,{})]}),y.jsx(fm,{}),y.jsxs("div",{className:"cvg-summary-container__request-container",children:[N(g)&&y.jsx(ede,{}),y.jsx(Yue,{})]})]}),i?y.jsxs(y.Fragment,{children:[y.jsx(fm,{}),y.jsx(Kue,{cancellationInsurance:i})]}):null,I?y.jsxs(y.Fragment,{children:[y.jsx(fm,{}),y.jsx(Pde,{})]}):null,y.jsx(fm,{}),y.jsx(pde,{isBookingRequest:m})]})]}),l||u?y.jsxs("section",{className:"cvg-summary-container__section",children:[y.jsx("div",{className:"cvg-summary-container__section-basket",children:y.jsx($4,{})}),n&&!e?y.jsx(tk,{}):null]}):null]}),n&&e?y.jsx(qA,{}):null]})})},Ide=async()=>{const{sessionValidity:e}=Fr.getState().session,{basket:t}=Fr.getState();return lae(e,t)?(await Fr.dispatch(NB()),{}):Yf("/")},Rde=()=>{const{trackPageView:e}=Vi();return M.useEffect(()=>{e("Summary")},[]),y.jsxs(y.Fragment,{children:[y.jsx(rd,{children:y.jsx("title",{children:re(tn.SummaryTitle)})}),y.jsx(zA,{children:y.jsx(I_,{isUsingLocalState:!0,children:y.jsx(RP,{children:y.jsxs(uA,{children:[y.jsx(Ade,{}),y.jsx($A,{})]})})})})]})},Lde=({title:e,pictureUrl:t,crossedOutPrice:n,price:r,priceDetails:i,isExtraInBasket:l,isExtraMandatory:u,openDetails:a})=>{const m=re(js.AddExtraButton),g=re(js.ExtraDetailsLink),w=re(js.AddedExtrasIndicator),C=re(js.UpdateActionLink),P=Ir();return y.jsxs("article",{className:"cvg-extra-card",children:[y.jsx("div",{className:"cvg-extra-card__picture",children:t===""?y.jsx(sn,{className:"cvg-extra-card__picture-placeholder",name:"tag",size:"large"}):y.jsx("img",{src:t,alt:""})}),y.jsxs("div",{className:"cvg-extra-card__description",children:[y.jsxs("div",{className:"cvg-extra-card__summary",children:[y.jsx("h3",{className:"cvg-typo-heading-4 cvg-extra-card__title","data-testid":"extra-card-title",children:e}),y.jsxs("div",{className:"cvg-extra-card__details-group",children:[y.jsx(bn,{className:"cvg-extra-card__details-link","data-testid":"extra-card-details-link",variation:"link",onClick:a,children:g}),l?y.jsxs("div",{className:"cvg-extra-card__extra-added",children:[y.jsx(sn,{name:"check"}),y.jsx("p",{className:"cvg-typo-body-small",children:w})]}):null]})]}),y.jsxs("div",{className:"cvg-extra-card__cost-breakdown",children:[y.jsxs("div",{className:"cvg-extra-card__prices",children:[n?y.jsx("div",{className:"cvg-typo-price-strike",children:n}):null,y.jsx("div",{className:"cvg-typo-price-1 cvg-extra-card__price",children:r})]}),y.jsx("div",{className:"cvg-typo-body-small cvg-extra-card__price-details",children:i})]}),y.jsx("div",{className:"cvg-extra-card__footer",children:!u&&(l?y.jsx(bn,{variation:"secondary",fullWidth:P,icon:"pen-to-square",onClick:a,children:C}):y.jsx(bn,{"data-testid":"extra-card-add-button",variation:"brand",fullWidth:P,onClick:a,children:m}))})]})]})},Mde=({roomId:e,guestPosition:t})=>{const r=Te(u=>u.basket.rooms).find(u=>u.id===e&&u.guestPosition===t),i=r==null?void 0:r.rates[0],l=e===0;return y.jsx("h2",{className:Or("cvg-typo-heading-4 cvg-typo-heading-3--breakpoint-small",{"cvg-extras-catalog__title-container":!l}),"data-testid":"title",children:l?re(js.OthersExtrasList):y.jsxs(y.Fragment,{children:[`${re(js.ExtrasForRoomSelectionWithIndex,{position:t,roomName:(r==null?void 0:r.name)??""})}`," ",y.jsxs("span",{className:"cvg-extras-catalog__title-occupancy",children:[y.jsx(sn,{name:"user",size:"medium"})," ",i==null?void 0:i.occupancy.adults]})]})})},Ode=({guestPosition:e,roomId:t,extras:n,openDetails:r})=>{const{trackViewExtraDetails:i}=Vi(),l=re(js.ShowMoreExtrasButton),u=re(js.ShowLessExtrasButton),a=(V,q)=>q?V.slice(0,q):V,m=Te(V=>{var q;return(q=V.configuration.displayConstraints)==null?void 0:q.extrasDisplayLimit}),[g,w]=M.useState(a(n,m)),[C,P]=M.useState(n&&!!m&&n.length>m),[I,N]=M.useState(!1),z=()=>{w(n),P(!1),N(!0)},$=()=>{w(a(n,m)),P(!0),N(!1)},H=V=>{const q=n.findIndex(ue=>ue.id===V.id);i(V,t===0?"hotel_extras":"room_extras",q),r(V)};return y.jsxs("div",{className:"cvg-extras-catalog",children:[y.jsxs("div",{className:"cvg-extras-catalog__category",children:[y.jsx(Mde,{roomId:t,guestPosition:e}),y.jsx("ul",{className:"cvg-extras-catalog__list",children:g==null?void 0:g.map(V=>y.jsx("li",{children:y.jsx(Lde,{title:V.name,pictureUrl:V.picture.pictureUrl,crossedOutPrice:V.crossedOutPrice,price:V.unitPrice,priceDetails:V.counting,isExtraInBasket:V.selectedQuantity>0,isExtraMandatory:V.mandatory,openDetails:()=>H(V)})},V.id))})]}),C?y.jsx("div",{"data-testid":"extras-catalog-showmore",className:"cvg-extras-catalog__showmore",children:y.jsx(bn,{variation:"tertiary",fullWidth:!0,onClick:z,icon:"chevron-down","data-testid":"extra_showmore",children:l})}):null,I?y.jsx("div",{"data-testid":"extras-catalog-showless",className:"cvg-extras-catalog__showless",children:y.jsx(bn,{variation:"tertiary",fullWidth:!0,onClick:$,icon:"chevron-up","data-testid":"extra_showless",children:u})}):null]})},Dde=()=>{const e=Si(),t=Te(u=>u.basket.error),n=re(yn.AddExtraErrorTitle),r=re(yn.AddExtraErrorMessage),i=re(yn.OkLabel),l=()=>e(OB());return y.jsx(p1,{open:!!(t&&t.type===Xf.ErrorAddingExtra),description:r,heading:n,onClick:l,buttonLabel:i,closeOnOverlayClick:!0})},Nde=({children:e})=>{const t=Ir(),n=Te(i=>i.basket.error),r=M4();return n&&n.type===Ta.TechnicalError?y.jsx(y.Fragment,{children:y.jsxs(Xo,{variation:"error",direction:t?"column":"row",children:[y.jsx(Ko,{children:re(yn.PageLoadError)}),y.jsx(wc,{children:re(yn.TechnicalIssueRetry)}),y.jsx(N_,{children:y.jsx(bn,{variation:"secondary",onClick:r,children:re(yn.PageReload)})})]})}):y.jsx(y.Fragment,{children:e})},jde=()=>y.jsx("div",{className:"cvg-extras-catalog",children:y.jsxs("div",{className:"cvg-extras-catalog__category",children:[y.jsx(Oh,{className:"cvg-extra-card__title--loading"}),y.jsx("div",{className:"cvg-extras-catalog__list--loading",children:Array(4).fill(null).map((e,t)=>y.jsx("div",{className:"cvg-extra-card__container--loading",children:y.jsx(Oh,{className:"cvg-extra-card__content--loading"})},t))})]})}),zde=()=>{const{trackOnloadViewExtraList:e}=Vi(),t=Te(n=>{var r;return(r=n.extraSelection)==null?void 0:r.extras});return()=>{t.length>0&&e(t,"extras_rooms_and_hotel")}},Fde=({selectExtraDetails:e})=>{const t=Ir(),n=zde(),r=re(js.ExtrasTitle),i=Te(a=>{var m;return(m=a.extraSelection)==null?void 0:m.extras}),l={};i==null||i.forEach(a=>{l[a.guestPosition]||(l[a.guestPosition]=[]),l[a.guestPosition].push(a)});const u=Te(a=>a.extraSelection.isFetching);return M.useEffect(()=>{n()},[n]),y.jsx("div",{className:"cvg-extras-container",children:y.jsxs(Nde,{children:[y.jsxs("div",{className:"cvg-extras-container__navigation--booking-limit",children:[y.jsx(Dde,{}),y.jsx("div",{className:"cvg-extras-container__navigation-button-group",children:!t&&y.jsx(m1,{})})]}),y.jsx("h1",{className:"cvg-typo-heading-3 cvg-typo-heading-2--breakpoint-small",children:r}),y.jsx("div",{children:u?y.jsx(jde,{}):Object.keys(l).reverse().map(a=>{const m=l[Number(a)],[g]=m;return y.jsx(Ode,{guestPosition:Number(a),roomId:g.roomId,extras:m,openDetails:e},a)})})]})})},Bde=(e,t)=>t.find(n=>n.productId===e.productId&&n.guestPosition===e.guestPosition),Ude=async()=>{const{sessionValidity:e}=Fr.getState().session,{basket:t}=Fr.getState();return aae(e,t)?(Fr.dispatch(Ww()),{}):Yf("/")},$de=()=>{const e=Ir(),{trackPageView:t}=Vi();M.useEffect(()=>{t("ExtraSelection")},[]);const n=Te(C=>C.basket.hotelExtras),i=Te(C=>C.basket.rooms).map(C=>C.extras).flat(),l=[...n,...i],[u,a]=M.useState(),m=C=>{const P=Bde(C,l)??C;a(P)},g=Te(C=>C.basket.rooms.length>0),w=re(js.ExtrasTitle);return y.jsxs(y.Fragment,{children:[y.jsx(rd,{children:y.jsx("title",{children:w})}),y.jsx(RP,{children:y.jsx(uA,{children:y.jsx(zA,{children:y.jsxs(I_,{isUsingLocalState:!0,children:[y.jsx("h1",{"aria-label":w,children:" "}),y.jsx(qA,{}),y.jsxs(V4,{children:[y.jsxs(f1,{children:[y.jsx(g1,{}),y.jsx(Rg,{isBasketVisible:g})]}),y.jsx(ZA,{extra:u,onClose:()=>a(void 0)}),y.jsx(Fde,{selectExtraDetails:m})]}),y.jsx($A,{})]})})})}),e?y.jsx("div",{className:"cvg-continue-button",children:y.jsx(m1,{})}):null]})},lU=e=>{const t=up.getBookingRef(e);return t||cU()},cU=()=>{const e=window.location.search;return new URLSearchParams(e).get("ref")},Vde=({bookingRef:e,customerEmail:t,hotel:n})=>{const r=()=>{window.print()};return y.jsxs(Rv,{className:"cvg-confirmation-block-message",children:[y.jsx(bn,{variation:"tertiary",icon:"print",iconPosition:"end",className:"cvg-confirmation-block-message__print",onClick:r,type:"button",children:re(Ho.Print)}),y.jsx(Ov,{variation:"positive"}),y.jsx(Dv,{children:re(Ho.BookingConfirmed,{bookingRef:e})}),y.jsx(Mv,{children:re(Ho.EmailSent,{email:t})}),y.jsxs(Lv,{children:[y.jsx(bn,{variation:"secondary",asChild:!0,children:y.jsx("a",{href:n.websiteUrl,target:"__blank",children:re(Ho.BackToHotel)})}),y.jsx(bn,{variation:"tertiary",asChild:!0,children:y.jsx("a",{href:n.bookingEngineUrl,target:"__blank",children:re(Ho.MakeAnotherBooking)})})]})]})},AD=({label:e,iconName:t,isMobile:n,date:r,receptionHour:i})=>y.jsxs("div",{className:"cvg-confirmation-key-information__container",children:[y.jsx("div",{className:"cvg-typo-search-label cvg-confirmation-key-information__label",children:e}),y.jsx(sn,{name:t,size:n?"small":"large",className:"cvg-confirmation-key-information__icon"}),y.jsxs("span",{className:"cvg-typo-search-mobile cvg-typo-search-desktop-secondary--breakpoint-small cvg-confirmation-key-information__day",children:[y.jsx("span",{className:"cvg-confirmation-key-information__day",children:r.map((l,u)=>y.jsx("span",{className:Or({"cvg-typo-search-desktop-primary":l.type==="day"&&!n}),children:l.value},l.type+l.value+u))}),i]})]}),Hde=({stay:e,guests:t,numberOfRooms:n})=>{const r=Ir(),i=Te(P=>{var I;return((I=P.session.selectedHotel)==null?void 0:I.checkin)??""}),l=Te(P=>{var I;return((I=P.session.selectedHotel)==null?void 0:I.checkout)??""}),u=Te(P=>P.session.culture),a=new b_(u),m=r?a.toShortFormatPartsLocaleDate(e.arrival.date):a.toLongFormatPartsLocaleDate(e.arrival.date),g=r?a.toShortFormatPartsLocaleDate(e.departure.date):a.toLongFormatPartsLocaleDate(new Date(e.departure.date)),w=bp(),C=a3();return y.jsxs("div",{className:Or("cvg-typo-body-small cvg-confirmation-key-information",{"cvg-confirmation-key-information--inverted":w.colors.brand.inverted}),children:[y.jsxs("div",{className:"cvg-confirmation-key-information__stay",children:[y.jsx(AD,{label:re(Pr.CheckinTimeDisplay),iconName:"calendar",date:m,receptionHour:re(Ho.FromHour,{hour:i}),isMobile:r}),y.jsx(AD,{label:re(Pr.CheckoutTimeDisplay),iconName:"arrow-right",date:g,receptionHour:re(Ho.ToHour,{hour:l}),isMobile:r})]}),y.jsx("div",{className:"cvg-confirmation-key-information__container",children:y.jsxs("div",{children:[y.jsx("div",{className:"cvg-typo-search-label cvg-confirmation-key-information__label",children:re(Cs.StayGuestTitle)}),y.jsxs("div",{className:"cvg-confirmation-key-information__guests",children:[y.jsx(sn,{name:"user-group",size:r?"small":"large",className:"cvg-confirmation-key-information__guests-icon"}),y.jsx("span",{className:"cvg-typo-search-mobile cvg-typo-search-desktop-secondary--breakpoint-small cvg-confirmation-key-information__value",children:C(t)}),y.jsx(sn,{name:"door-closed",size:r?"small":"large",className:"cvg-confirmation-key-information__guests-icon"}),y.jsx("span",{className:"cvg-typo-search-mobile cvg-typo-search-desktop-secondary--breakpoint-small cvg-confirmation-key-information__value",children:n})]})]})})]})},Zde=({price:e,onArrivalTax:t})=>{const n=Te(u=>u.session.currency),r=re(Ur.TaxesFeesPaidHotel),i=re(Pr.TotalCostSummary),l=n!==(e==null?void 0:e.originalRateCurrency);return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"cvg-confirmation-content__total",children:[y.jsx("span",{className:"cvg-typo-heading-3",children:i}),y.jsx("span",{className:"cvg-typo-price-1",children:e==null?void 0:e.displayAmount})]}),l?y.jsx("div",{className:"cvg-typo-price-3 cvg-confirmation-content__total-alternative",children:`${re(Pr.OrLabel)} ${e==null?void 0:e.hotelCurrencyAmount}`}):null,t!=null&&t.displayAmount?y.jsxs("div",{className:"cvg-confirmation-content__total-taxes-hotel",children:[y.jsx("span",{children:r}),y.jsx("span",{children:t==null?void 0:t.displayAmount})]}):null]})},qde=({taxes:e,bookingFees:t})=>{var u,a;const n=re(Pr.BookingFeesTitle),r=re(Ur.TaxesFees),i=re(Ur.IncludedTaxesFees),l=re(Ur.TaxesFeesUponBooking);return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"cvg-typo-heading-3 cvg-confirmation-content__rooms-title",children:r}),(u=e==null?void 0:e.included)!=null&&u.displayAmount?y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{children:i}),y.jsx("span",{className:"cvg-typo-price-2",children:e.included.displayAmount})]}):null,(a=e==null?void 0:e.excluded)!=null&&a.displayAmount?y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{children:l}),y.jsx("span",{className:"cvg-typo-price-2",children:e.excluded.displayAmount})]}):null,t?y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{children:n}),y.jsx("span",{className:"cvg-typo-price-2",children:t})]}):null]})},Gde=({insurance:e})=>y.jsxs(y.Fragment,{children:[y.jsx("h3",{className:"cvg-typo-heading-3 cvg-confirmation-content__rooms-title",children:re(Pr.InsuranceOption)}),y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{children:e.name}),y.jsx("span",{className:"cvg-typo-price-2",children:e.displayAmount})]})]}),Wde=({discount:e})=>y.jsxs(y.Fragment,{children:[y.jsx("h3",{className:"cvg-typo-heading-3 cvg-confirmation-content__rooms-title",children:re(Pr.DiscountInformationDisplay)}),y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{children:e==null?void 0:e.code}),y.jsx("span",{className:"cvg-typo-price-2",children:e==null?void 0:e.displayAmount})]})]}),Xde=({extras:e})=>y.jsxs(y.Fragment,{children:[y.jsx("h3",{className:"cvg-typo-heading-3 cvg-confirmation-content__rooms-title",children:re(Pr.ExtrasLabel)}),e.map(t=>y.jsxs("p",{className:"cvg-confirmation-content__room-name",children:[y.jsxs("span",{className:"cvg-typo-heading-5",children:[t.quantity,"x ",t.name]}),y.jsx("span",{className:"cvg-typo-price-2",children:t.price.displayAmount})]},t.id))]}),Kde=({rooms:e})=>{const t=a3();return y.jsxs(y.Fragment,{children:[y.jsx("h3",{className:"cvg-typo-heading-3 cvg-confirmation-content__rooms-title",children:re(Pr.RoomLabel)}),e.map(n=>{var r,i,l,u;return y.jsxs(M.Fragment,{children:[(r=n==null?void 0:n.picturesUrl)!=null&&r.pictureUrl?y.jsx("img",{className:"cvg-room-details-list__room-image",src:n.picturesUrl.pictureUrl,alt:""}):null,y.jsxs("div",{className:"cvg-confirmation-content__room-name",children:[y.jsx("span",{className:"cvg-typo-heading-4",children:n==null?void 0:n.name}),y.jsx("span",{className:"cvg-typo-price-2",children:(i=n==null?void 0:n.price)==null?void 0:i.displayAmount})]}),n!=null&&n.occupancy?y.jsxs("p",{className:"cvg-room-details-list__room-capacity",children:[y.jsx(sn,{name:"user-group",size:"small"}),y.jsx("span",{children:t(n==null?void 0:n.occupancy)})]}):null,y.jsx("p",{children:(l=n==null?void 0:n.rate)==null?void 0:l.name}),y.jsx("ul",{className:"cvg-room-details-list__room-extras",children:(u=n==null?void 0:n.extras)==null?void 0:u.map(a=>{var m;return y.jsxs("li",{className:"cvg-room-details-list__room-extra",children:[y.jsxs("span",{children:[a.quantity,"x ",a.name]}),y.jsx("span",{className:"cvg-typo-price-2",children:(m=a==null?void 0:a.price)==null?void 0:m.displayAmount})]},a.id)})})]},n.id)})]})},Yde=({bookingReference:e,customerFullName:t,creationDate:n,cancelConditionsName:r,breakfast:i,internet:l,rooms:u,hotelExtras:a,discount:m,insurance:g,taxes:w,price:C})=>y.jsxs(y1,{children:[y.jsxs("div",{children:[y.jsx("div",{className:"cvg-typo-heading-3",children:re(Ho.BookingDetails)}),y.jsx("p",{className:"cvg-card-booking-details__ref",children:re(Ho.BookingMadeBy,{bookingRef:e,customerName:t,bookingDate:n})}),y.jsxs("p",{className:"cvg-card-booking-details__details",children:[[i,l].filter(Boolean).join("  "),y.jsx("br",{}),r]})]}),y.jsx(Kde,{rooms:u}),(a==null?void 0:a.length)>0?y.jsx(Xde,{extras:a}):null,m!=null&&m.displayAmount?y.jsx(Wde,{discount:m}):null,g!=null&&g.displayAmount?y.jsx(Gde,{insurance:g}):null,y.jsx(qde,{taxes:w,bookingFees:C==null?void 0:C.bookingFees}),y.jsx("div",{className:"cvg-card-booking-details__horizontal-separator"}),y.jsx(Zde,{price:C,onArrivalTax:w==null?void 0:w.onArrival})]}),Qde=({cancellationPolicy:e,modificationUrl:t})=>y.jsxs(y1,{children:[y.jsx("h3",{className:"cvg-typo-heading-4",children:re(Lt.CancellationPolicyDetails)}),y.jsx("p",{className:"cvg-card-cancellation-policy__body",children:e}),y.jsx("br",{}),y.jsx("p",{className:"cvg-typo-heading-5",children:re(Ho.PinBooking)}),y.jsx(bn,{className:"cvg-card-cancellation-policy__modify-button",variation:"secondary",icon:"pen-to-square",asChild:!0,children:y.jsx("a",{href:t,target:"_blank",children:re(Ho.ModifyOrCancel)})})]}),Jde=({cancellationInsurance:e})=>{var t;return y.jsxs(y1,{children:[y.jsx("div",{className:"cvg-typo-heading-4",children:re(Pr.CancellationInsuranceOption)}),y.jsxs("div",{className:"cvg-card-cancellation-insurance",children:[y.jsx("p",{className:"cvg-card-cancellation-insurance__title",children:re(Ho.InsuranceTitle,{insuranceName:e==null?void 0:e.name,bookingDate:(t=e==null?void 0:e.lastUpdate)==null?void 0:t.displayDate})}),y.jsx("p",{children:re(Ho.ContractNumber,{contractNumber:e==null?void 0:e.contractNumber})}),y.jsx("p",{children:re(Ho.ProductPurchased)}),y.jsx("p",{children:re(Ho.InsuranceFurtherInformation,{insuranceName:e==null?void 0:e.name})}),y.jsx("a",{href:e==null?void 0:e.contactUrl,target:"_blank",rel:"noreferrer",children:e==null?void 0:e.contactUrl})]})]})},ehe=()=>{var l,u;const e=Te(a=>a.session.selectedHotel),t=pA(e),[n,r,i]=hee.map(a=>t.find(m=>m.type===a));return y.jsxs("div",{className:"cvg-confirmation-hotel-information",children:[y.jsxs(y1,{className:"cvg-confirmation-hotel-information__card",children:[y.jsx("div",{className:"cvg-typo-heading-3 cvg-confirmation-hotel-information__name",children:e==null?void 0:e.name}),y.jsxs("div",{className:"cvg-confirmation-hotel-information__item",children:[y.jsx(sn,{name:"location-dot",size:"small"}),y.jsx("span",{children:Jw(e).join(", ")})]}),n?y.jsxs("div",{className:"cvg-confirmation-hotel-information__item",children:[y.jsx(sn,{name:"phone",size:"small"}),y.jsx("p",{children:y.jsx(Qf,{...n})})]}):null,r?y.jsxs("div",{className:"cvg-confirmation-hotel-information__item",children:[y.jsx(sn,{name:"envelope",size:"small"}),y.jsx("p",{children:y.jsx(Qf,{...r})})]}):null,i?y.jsxs("div",{className:"cvg-confirmation-hotel-information__item",children:[y.jsx(sn,{name:"globe",size:"small"}),y.jsx("p",{children:y.jsx(Qf,{...i})})]}):null]}),(l=e==null?void 0:e.picture)!=null&&l.pictureUrl?y.jsx("img",{className:"cvg-confirmation-hotel-information__image",src:(u=e.picture)==null?void 0:u.pictureUrl,alt:""}):null]})},the=({data:e})=>{var r,i;const t=Te(l=>l.session),n=lU(t.id);return y.jsxs("div",{children:[y.jsx(Vde,{bookingRef:n,customerEmail:e.customer.email,hotel:e.hotel}),y.jsx(Hde,{stay:e.stay,guests:e.guests,numberOfRooms:e.booking.basket.rooms.length}),y.jsxs("div",{className:"cvg-typo-body-small cvg-confirmation-content",children:[y.jsx(Yde,{bookingReference:n,customerFullName:e.customer.fullName,creationDate:e.customer.bookingDate.displayDate,breakfast:e.booking.breakfast,internet:e.booking.internet,cancelConditionsName:(r=e.booking.cancelConditions)==null?void 0:r.name,rooms:e.booking.basket.rooms,hotelExtras:e.booking.basket.hotelExtras,discount:e.booking.discount,insurance:e.booking.insurance,taxes:e.booking.taxes,price:e.booking.price}),y.jsxs("div",{className:"cvg-confirmation-content__secondary-information",children:[y.jsx(Qde,{cancellationPolicy:(i=e.booking.cancelConditions)==null?void 0:i.summary,modificationUrl:e.booking.modificationUrl}),e.booking.insurance?y.jsx(Jde,{cancellationInsurance:e.booking.insurance}):null]})]}),y.jsx(ehe,{})]})},nhe=async()=>{if(!lU(Fr.getState().session.id))throw new Response("Not Found",{status:404});return(await vK()).data},rhe=()=>{const e=Te(u=>u.session),t=dJ(),{trackPageView:n,trackPurchase:r,trackLegacyConfirmationPageView:i,trackLegacyTransactionCompleted:l}=Vi();return M.useEffect(()=>{const u=cU();!up.getBookingRef(e.id)&&u&&(n("Confirmation"),i(),l(u,t.booking),r(u,t.booking.price.amount,!t.booking.taxes.onArrival.displayAmount),up.saveBookingRef(u,e.id))},[]),y.jsx(the,{data:t})};function Xh(e,t){return typeof e===t}function b1(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function uU(e,t){try{return e instanceof t}catch{return!1}}const H_=e=>Xh(e,"null"),w1=e=>Xh(e,"string"),ihe=e=>Xh(e,"number")&&!isNaN(e)||Xh(e,"bigint"),cu=e=>!H_(e)&&Xh(e,"object"),uI=e=>Xh(e,"function"),d_=e=>b1(e,"Array"),she=e=>!cu(e)&&!uI(e),ohe=typeof Event<"u",ahe=e=>ohe&&uU(e,Event),lhe=typeof Error<"u",dI=e=>lhe&&uU(e,Error),che=e=>b1(e,"ErrorEvent"),uhe=e=>b1(e,"DOMError"),dhe=e=>b1(e,"DOMException");function dU(e){return e==null?!0:d_(e)||w1(e)?e.length===0:cu(e)?Object.keys(e).length===0:!1}function Kh(e,t){if(e===t)return!0;if(Xh(e,"number")&&isNaN(e))return Xh(t,"number")&&isNaN(t);const n=d_(e),r=d_(t);if(n!==r)return!1;if(n&&r){const u=e.length;if(u!==t.length)return!1;for(let a=u;a--!==0;)if(!Kh(e[a],t[a]))return!1;return!0}const i=cu(e),l=cu(t);if(i!==l)return!1;if(e&&t&&i&&l){const u=Object.keys(e),a=Object.keys(t),m=u.length,g=a.length;if(m!==g)return!1;for(let w of u)if(!a.includes(w))return!1;for(let w of u)if(!Kh(e[w],t[w]))return!1;return!0}return!1}function S1(){return Date.now()}function E1(){return new Date().toISOString()}function C1(e){return new Date(e).toISOString()}var _a;(function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error"})(_a||(_a={}));const hhe=_a.LOG,fhe=[_a.TRACE,_a.DEBUG,_a.INFO,_a.LOG,_a.WARN,_a.ERROR];function Wu(){}function phe(e){const{size:t,concurrency:n}=e,r=[];let i=0;const l=()=>{if(i<n&&r.length){const{producer:a,resolve:m,reject:g}=r.shift();i++,a().then(w=>{i--,l(),m(w)},w=>{i--,l(),g(w)})}};return{add:a=>{if(r.length+i>=t)throw new Error("Task buffer full");return new Promise((m,g)=>{r.push({producer:a,resolve:m,reject:g}),l()})}}}const ID="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789";function T1(e=10){return Array.from(Array(e)).map(()=>ID[Math.floor(Math.random()*ID.length)]).join("")}const Ya=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof self<"u"?self:void 0;function mhe(e){return Ya==null?void 0:Ya[`__faroBundleId_${e}`]}function ghe(){const e=new WeakSet;return function(t,n){if(cu(n)&&n!==null){if(e.has(n))return null;e.add(n)}return n}}function Z_(e={}){return JSON.stringify(e??{},ghe())}function k1(e={}){const t={};for(const[n,r]of Object.entries(e))t[n]=cu(r)&&r!==null?Z_(r):String(r);return t}const yhe=250,vhe=50;class _he{constructor(t,n){var r,i;this.signalBuffer=[],this.itemLimit=(r=n==null?void 0:n.itemLimit)!==null&&r!==void 0?r:vhe,this.sendTimeout=(i=n==null?void 0:n.sendTimeout)!==null&&i!==void 0?i:yhe,this.paused=(n==null?void 0:n.paused)||!1,this.sendFn=t,this.flushInterval=-1,this.paused||this.start(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this.flush()})}addItem(t){this.paused||(this.signalBuffer.push(t),this.signalBuffer.length>=this.itemLimit&&this.flush())}start(){this.paused=!1,this.sendTimeout>0&&(this.flushInterval=window.setInterval(()=>this.flush(),this.sendTimeout))}pause(){this.paused=!0,clearInterval(this.flushInterval)}groupItems(t){const n=new Map;return t.forEach(r=>{const i=JSON.stringify(r.meta);let l=n.get(i);l===void 0?l=[r]:l=[...l,r],n.set(i,l)}),Array.from(n.values())}flush(){if(this.paused||this.signalBuffer.length===0)return;this.groupItems(this.signalBuffer).forEach(this.sendFn),this.signalBuffer=[]}}var Es;(function(e){e.EXCEPTION="exception",e.LOG="log",e.MEASUREMENT="measurement",e.TRACE="trace",e.EVENT="event"})(Es||(Es={}));const xhe={[Es.EXCEPTION]:"exceptions",[Es.LOG]:"logs",[Es.MEASUREMENT]:"measurements",[Es.TRACE]:"traces",[Es.EVENT]:"events"};function bhe(e,t){return e.some(n=>w1(n)?t.includes(n):!!t.match(n))}function whe(e){return t=>{if(t.type===Es.EXCEPTION&&t.payload){const n=t.payload,r=`${n.type}: ${n.value}`;if(bhe(e,r))return null}return t}}function She(e,t,n,r){var i;t.debug("Initializing transports");const l=[];let u=n.paused,a=[];const m=(...fe)=>{t.debug("Adding transports"),fe.forEach(Z=>{if(t.debug(`Adding "${Z.name}" transport`),l.some(be=>be===Z)){t.warn(`Transport ${Z.name} is already added`);return}Z.unpatchedConsole=e,Z.internalLogger=t,Z.config=n,Z.metas=r,l.push(Z)})},g=(...fe)=>{t.debug(`Adding beforeSendHooks
`,a),fe.forEach(Z=>{Z&&a.push(Z)})},w=(...fe)=>{t.debug(`Adding ignoreErrorsPatterns
`,fe),fe.forEach(Z=>{Z&&a.push(whe(Z))})},C=fe=>{let Z=fe;for(const le of a){const be=Z.map(le).filter(Boolean);if(be.length===0)return[];Z=be}return Z},P=fe=>{const Z=C(fe);if(Z.length!==0)for(const le of l)t.debug(`Transporting item using ${le.name}
`,Z),le.isBatched()&&le.send(Z)},I=fe=>{var Z,le;if(!((Z=n.batching)===null||Z===void 0)&&Z.enabled&&l.every(Re=>Re.isBatched()))return;const[be]=C([fe]);if(be!==void 0)for(const Re of l)t.debug(`Transporting item using ${Re.name}
`,be),Re.isBatched()?!((le=n.batching)===null||le===void 0)&&le.enabled||Re.send([be]):Re.send(be)};let N;return!((i=n.batching)===null||i===void 0)&&i.enabled&&(N=new _he(P,{sendTimeout:n.batching.sendTimeout,itemLimit:n.batching.itemLimit,paused:u})),{add:m,addBeforeSendHooks:g,addIgnoreErrorsPatterns:w,getBeforeSendHooks:()=>[...a],execute:fe=>{var Z;u||(!((Z=n.batching)===null||Z===void 0)&&Z.enabled&&(N==null||N.addItem(fe)),I(fe))},isPaused:()=>u,pause:()=>{t.debug("Pausing transports"),N==null||N.pause(),u=!0},remove:(...fe)=>{t.debug("Removing transports"),fe.forEach(Z=>{t.debug(`Removing "${Z.name}" transport`);const le=l.indexOf(Z);if(le===-1){t.warn(`Transport "${Z.name}" is not added`);return}l.splice(le,1)})},removeBeforeSendHooks:(...fe)=>{a.filter(Z=>!fe.includes(Z))},get transports(){return[...l]},unpause:()=>{t.debug("Unpausing transports"),N==null||N.start(),u=!1}}}var Hu;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.VERBOSE=4]="VERBOSE"})(Hu||(Hu={}));const Ehe="Faro",hI={debug:Wu,error:Wu,info:Wu,prefix:Ehe,warn:Wu},hU=Hu.ERROR,P1=Object.assign({},console);let mC=P1;function Che(e){var t;return mC=(t=e.unpatchedConsole)!==null&&t!==void 0?t:mC,mC}function fU(e=P1,t=hU){const n=hI;return t>Hu.OFF&&(n.error=t>=Hu.ERROR?function(...r){e.error(`${n.prefix}
`,...r)}:Wu,n.warn=t>=Hu.WARN?function(...r){e.warn(`${n.prefix}
`,...r)}:Wu,n.info=t>=Hu.INFO?function(...r){e.info(`${n.prefix}
`,...r)}:Wu,n.debug=t>=Hu.VERBOSE?function(...r){e.debug(`${n.prefix}
`,...r)}:Wu),n}let RD=hI;function The(e,t){return RD=fU(e,t.internalLoggerLevel),RD}class pU{constructor(){this.unpatchedConsole=P1,this.internalLogger=hI,this.config={},this.metas={}}logDebug(...t){this.internalLogger.debug(`${this.name}
`,...t)}logInfo(...t){this.internalLogger.info(`${this.name}
`,...t)}logWarn(...t){this.internalLogger.warn(`${this.name}
`,...t)}logError(...t){this.internalLogger.error(`${this.name}
`,...t)}}class khe extends pU{isBatched(){return!1}getIgnoreUrls(){return[]}}function Phe(e){e.transports.add(...e.config.transports),e.transports.addBeforeSendHooks(e.config.beforeSend),e.transports.addIgnoreErrorsPatterns(e.config.ignoreErrors)}function Ahe(e,t){var n,r;if(t===void 0)return e;if(e===void 0)return{resourceSpans:t};const i=(n=e.resourceSpans)===null||n===void 0?void 0:n[0];if(i===void 0)return e;const l=(i==null?void 0:i.scopeSpans)||[],u=((r=t==null?void 0:t[0])===null||r===void 0?void 0:r.scopeSpans)||[];return Object.assign(Object.assign({},e),{resourceSpans:[Object.assign(Object.assign({},i),{scopeSpans:[...l,...u]})]})}function Ihe(e){let t={meta:{}};return e[0]!==void 0&&(t.meta=e[0].meta),e.forEach(n=>{switch(n.type){case Es.LOG:case Es.EVENT:case Es.EXCEPTION:case Es.MEASUREMENT:const r=xhe[n.type],i=t[r];t=Object.assign(Object.assign({},t),{[r]:i===void 0?[n.payload]:[...i,n.payload]});break;case Es.TRACE:t=Object.assign(Object.assign({},t),{traces:Ahe(t.traces,n.payload.resourceSpans)});break}}),t}function Rhe(e,t,n,r,i,l){let u=null;return{pushEvent:(m,g,w,{skipDedupe:C,spanContext:P,timestampOverwriteMs:I}={})=>{try{const N={meta:r.value,payload:{name:m,domain:w??n.eventDomain,attributes:k1(g),timestamp:I?C1(I):E1(),trace:P?{trace_id:P.traceId,span_id:P.spanId}:l.getTraceContext()},type:Es.EVENT},z={name:N.payload.name,attributes:N.payload.attributes,domain:N.payload.domain};if(!C&&n.dedupe&&!H_(u)&&Kh(z,u)){t.debug(`Skipping event push because it is the same as the last one
`,N.payload);return}u=z,t.debug(`Pushing event
`,N),i.execute(N)}catch(N){t.error("Error pushing event",N)}}}}const mU="Error",LD=e=>e.map(t=>cu(t)?Z_(t):String(t)).join(" ");let rh;function Lhe(e,t,n,r,i,l){var u;t.debug("Initializing exceptions API");let a=null;rh=(u=n.parseStacktrace)!==null&&u!==void 0?u:rh;const m=C=>{t.debug("Changing stacktrace parser"),rh=C??rh},g=()=>rh,w=(C,{skipDedupe:P,stackFrames:I,type:N,context:z,spanContext:$,timestampOverwriteMs:H}={})=>{N=N||C.name||mU;const V={meta:r.value,payload:{type:N,value:C.message,timestamp:H?C1(H):E1(),trace:$?{trace_id:$.traceId,span_id:$.spanId}:l.getTraceContext(),context:k1(Object.assign(Object.assign({},Mhe(C)),z??{}))},type:Es.EXCEPTION};I=I??(C.stack?rh==null?void 0:rh(C).frames:void 0),I!=null&&I.length&&(V.payload.stacktrace={frames:I});const q={type:V.payload.type,value:V.payload.value,stackTrace:V.payload.stacktrace,context:V.payload.context};if(!P&&n.dedupe&&!H_(a)&&Kh(q,a)){t.debug(`Skipping error push because it is the same as the last one
`,V.payload);return}a=q,t.debug(`Pushing exception
`,V),i.execute(V)};return m(n.parseStacktrace),{changeStacktraceParser:m,getStacktraceParser:g,pushError:w}}function Mhe(e){let t=e.cause;return dI(t)?t=e.cause.toString():t!==null&&(cu(e.cause)||d_(e.cause))?t=Z_(e.cause):t!=null&&(t=e.cause.toString()),t==null?{}:{cause:t}}const L0=e=>e.map(t=>{try{return String(t)}catch{return""}}).join(" ");function Ohe(e,t,n,r,i,l){var u;t.debug("Initializing logs API");let a=null;const m=(u=n.logArgsSerializer)!==null&&u!==void 0?u:L0;return{pushLog:(w,{context:C,level:P,skipDedupe:I,spanContext:N,timestampOverwriteMs:z}={})=>{try{const $={type:Es.LOG,payload:{message:m(w),level:P??hhe,context:k1(C),timestamp:z?C1(z):E1(),trace:N?{trace_id:N.traceId,span_id:N.spanId}:l.getTraceContext()},meta:r.value},H={message:$.payload.message,level:$.payload.level,context:$.payload.context};if(!I&&n.dedupe&&!H_(a)&&Kh(H,a)){t.debug(`Skipping log push because it is the same as the last one
`,$.payload);return}a=H,t.debug(`Pushing log
`,$),i.execute($)}catch($){t.error(`Error pushing log
`,$)}}}}function Dhe(e,t,n,r,i,l){t.debug("Initializing measurements API");let u=null;return{pushMeasurement:(m,{skipDedupe:g,context:w,spanContext:C,timestampOverwriteMs:P}={})=>{try{const I={type:Es.MEASUREMENT,payload:Object.assign(Object.assign({},m),{trace:C?{trace_id:C.traceId,span_id:C.spanId}:l.getTraceContext(),timestamp:P?C1(P):E1(),context:k1(w)}),meta:r.value},N={type:I.payload.type,values:I.payload.values,context:I.payload.context};if(!g&&n.dedupe&&!H_(u)&&Kh(N,u)){t.debug(`Skipping measurement push because it is the same as the last one
`,I.payload);return}u=N,t.debug(`Pushing measurement
`,I),i.execute(I)}catch(I){t.error(`Error pushing measurement
`,I)}}}}function Nhe(e,t,n,r,i){t.debug("Initializing meta API");let l,u,a,m;const g=$=>{u&&r.remove(u),u={user:$},r.add(u)},w=($,H)=>{const V=H==null?void 0:H.overrides;l&&r.remove(l),l={session:Object.assign(Object.assign({},dU($)?void 0:$),V?{overrides:V}:{})},r.add(l)},C=()=>r.value.session,P=($,H)=>{var V;if(H!=null&&H.overrides&&w(C(),{overrides:H.overrides}),((V=a==null?void 0:a.view)===null||V===void 0?void 0:V.name)===($==null?void 0:$.name))return;const q=a;a={view:$},r.add(a),q&&r.remove(q)},I=()=>r.value.view,N=$=>{var H;const V=w1($)?Object.assign(Object.assign({},(H=m==null?void 0:m.page)!==null&&H!==void 0?H:z()),{id:$}):$;m&&r.remove(m),m={page:V},r.add(m)},z=()=>r.value.page;return{setUser:g,resetUser:g,setSession:w,resetSession:w,getSession:C,setView:P,getView:I,setPage:N,getPage:z}}function jhe(e,t,n,r,i){t.debug("Initializing traces API");let l;return{getOTEL:()=>l,getTraceContext:()=>{const C=l==null?void 0:l.trace.getSpanContext(l.context.active());return C?{trace_id:C.traceId,span_id:C.spanId}:void 0},initOTEL:(C,P)=>{t.debug("Initializing OpenTelemetry"),l={trace:C,context:P}},isOTELInitialized:()=>!!l,pushTraces:C=>{try{const P={type:Es.TRACE,payload:C,meta:r.value};t.debug(`Pushing trace
`,P),i.execute(P)}catch(P){t.error(`Error pushing trace
`,P)}}}}function zhe(e,t,n,r,i){t.debug("Initializing API");const l=jhe(e,t,n,r,i);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l),Lhe(e,t,n,r,i,l)),Nhe(e,t,n,r)),Ohe(e,t,n,r,i,l)),Dhe(e,t,n,r,i,l)),Rhe(e,t,n,r,i,l))}class Ip extends pU{constructor(){super(...arguments),this.api={},this.transports={}}}function Fhe(e,t,n,r,i,l){t.debug("Initializing instrumentations");const u=[];return{add:(...g)=>{t.debug("Adding instrumentations"),g.forEach(w=>{if(t.debug(`Adding "${w.name}" instrumentation`),u.some(P=>P.name===w.name)){t.warn(`Instrumentation ${w.name} is already added`);return}w.unpatchedConsole=e,w.internalLogger=t,w.config=n,w.metas=r,w.transports=i,w.api=l,u.push(w),w.initialize()})},get instrumentations(){return[...u]},remove:(...g)=>{t.debug("Removing instrumentations"),g.forEach(w=>{var C,P;t.debug(`Removing "${w.name}" instrumentation`);const I=u.reduce((N,z,$)=>N===null&&z.name===w.name?$:null,null);if(!I){t.warn(`Instrumentation "${w.name}" is not added`);return}(P=(C=u[I]).destroy)===null||P===void 0||P.call(C),u.splice(I,1)})}}}function Bhe(e){e.instrumentations.add(...e.config.instrumentations)}function Uhe(e,t,n){let r=[],i=[];const l=()=>r.reduce((C,P)=>Object.assign(C,uI(P)?P():P),{}),u=()=>{if(i.length){const C=l();i.forEach(P=>P(C))}};return{add:(...C)=>{t.debug(`Adding metas
`,C),r.push(...C),u()},remove:(...C)=>{t.debug(`Removing metas
`,C),r=r.filter(P=>!C.includes(P)),u()},addListener:C=>{t.debug(`Adding metas listener
`,C),i.push(C)},removeListener:C=>{t.debug(`Removing metas listener
`,C),i=i.filter(P=>P!==C)},get value(){return l()}}}const xd="1.13.3";function $he(e){var t,n;const r={sdk:{version:xd},app:{bundleId:e.config.app.name&&mhe(e.config.app.name)}},i=(t=e.config.sessionTracking)===null||t===void 0?void 0:t.session;i&&e.api.setSession(i),e.config.app&&(r.app=Object.assign(Object.assign({},e.config.app),r.app)),e.config.user&&(r.user=e.config.user),e.config.view&&(r.view=e.config.view),e.metas.add(r,...(n=e.config.metas)!==null&&n!==void 0?n:[])}const gU="_faroInternal";function Vhe(e){if(e.config.preventGlobalExposure)e.internalLogger.debug("Skipping registering public Faro instance in the global scope");else{if(e.internalLogger.debug(`Registering public faro reference in the global scope using "${e.config.globalObjectKey}" key`),e.config.globalObjectKey in Ya){e.internalLogger.warn(`Skipping global registration due to key "${e.config.globalObjectKey}" being used already. Please set "globalObjectKey" to something else or set "preventGlobalExposure" to "true"`);return}Object.defineProperty(Ya,e.config.globalObjectKey,{configurable:!1,writable:!1,value:e})}}function Hhe(e){e.config.isolate?e.internalLogger.debug("Skipping registering internal Faro instance on global object"):(e.internalLogger.debug("Registering internal Faro instance on global object"),Object.defineProperty(Ya,gU,{configurable:!1,enumerable:!1,writable:!1,value:e}))}function Zhe(){return gU in Ya}let Ts={};function qhe(e,t,n,r,i,l,u){return t.debug("Initializing Faro"),Ts={api:l,config:n,instrumentations:u,internalLogger:t,metas:r,pause:i.pause,transports:i,unpatchedConsole:e,unpause:i.unpause},Hhe(Ts),Vhe(Ts),Ts}function Ghe(e){const t=Che(e),n=The(t,e);if(Zhe()&&!e.isolate){n.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property');return}n.debug("Initializing");const r=Uhe(t,n),i=She(t,n,e,r),l=zhe(t,n,e,r,i),u=Fhe(t,n,e,r,i,l),a=qhe(t,n,e,r,i,l,u);return $he(a),Phe(a),Bhe(a),a}const Whe="faro",Xhe={enabled:!0,sendTimeout:250,itemLimit:50},Khe="view_changed",Wx="session_start",gC="session_resume",Yhe="session_extend",Qhe="service_name_override",fI="route_change",pl="unknown";var hk={exports:{}};(function(e,t){(function(n,r){var i="1.0.40",l="",u="?",a="function",m="undefined",g="object",w="string",C="major",P="model",I="name",N="type",z="vendor",$="version",H="architecture",V="console",q="mobile",te="tablet",ue="smarttv",fe="wearable",Z="embedded",le=500,be="Amazon",Re="Apple",Je="ASUS",Fe="BlackBerry",Xe="Browser",gt="Chrome",yt="Edge",lt="Firefox",Nt="Google",qe="Huawei",_t="LG",Ke="Microsoft",we="Motorola",He="Opera",Be="Samsung",ct="Sharp",xt="Sony",bt="Xiaomi",It="Zebra",qt="Facebook",fn="Chromium OS",wn="Mac OS",an=" Browser",Vt=function(nn,ln){var it={};for(var Mn in nn)ln[Mn]&&ln[Mn].length%2===0?it[Mn]=ln[Mn].concat(nn[Mn]):it[Mn]=nn[Mn];return it},Cn=function(nn){for(var ln={},it=0;it<nn.length;it++)ln[nn[it].toUpperCase()]=nn[it];return ln},Tn=function(nn,ln){return typeof nn===w?Fn(ln).indexOf(Fn(nn))!==-1:!1},Fn=function(nn){return nn.toLowerCase()},Qe=function(nn){return typeof nn===w?nn.replace(/[^\d\.]/g,l).split(".")[0]:r},zn=function(nn,ln){if(typeof nn===w)return nn=nn.replace(/^\s\s*/,l),typeof ln===m?nn:nn.substring(0,le)},Le=function(nn,ln){for(var it=0,Mn,ar,fr,Xn,ut,vn;it<ln.length&&!ut;){var Sn=ln[it],Gr=ln[it+1];for(Mn=ar=0;Mn<Sn.length&&!ut&&Sn[Mn];)if(ut=Sn[Mn++].exec(nn),ut)for(fr=0;fr<Gr.length;fr++)vn=ut[++ar],Xn=Gr[fr],typeof Xn===g&&Xn.length>0?Xn.length===2?typeof Xn[1]==a?this[Xn[0]]=Xn[1].call(this,vn):this[Xn[0]]=Xn[1]:Xn.length===3?typeof Xn[1]===a&&!(Xn[1].exec&&Xn[1].test)?this[Xn[0]]=vn?Xn[1].call(this,vn,Xn[2]):r:this[Xn[0]]=vn?vn.replace(Xn[1],Xn[2]):r:Xn.length===4&&(this[Xn[0]]=vn?Xn[3].call(this,vn.replace(Xn[1],Xn[2])):r):this[Xn]=vn||r;it+=2}},De=function(nn,ln){for(var it in ln)if(typeof ln[it]===g&&ln[it].length>0){for(var Mn=0;Mn<ln[it].length;Mn++)if(Tn(ln[it][Mn],nn))return it===u?r:it}else if(Tn(ln[it],nn))return it===u?r:it;return ln.hasOwnProperty("*")?ln["*"]:nn},Ye={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},mt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ft={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[$,[I,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[$,[I,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[I,$],[/opios[\/ ]+([\w\.]+)/i],[$,[I,He+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[$,[I,He+" GX"]],[/\bopr\/([\w\.]+)/i],[$,[I,He]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[$,[I,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[$,[I,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[I,$],[/quark(?:pc)?\/([-\w\.]+)/i],[$,[I,"Quark"]],[/\bddg\/([\w\.]+)/i],[$,[I,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[$,[I,"UC"+Xe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[$,[I,"WeChat"]],[/konqueror\/([\w\.]+)/i],[$,[I,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[$,[I,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[$,[I,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[$,[I,"Smart Lenovo "+Xe]],[/(avast|avg)\/([\w\.]+)/i],[[I,/(.+)/,"$1 Secure "+Xe],$],[/\bfocus\/([\w\.]+)/i],[$,[I,lt+" Focus"]],[/\bopt\/([\w\.]+)/i],[$,[I,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[$,[I,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[$,[I,"Dolphin"]],[/coast\/([\w\.]+)/i],[$,[I,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[$,[I,"MIUI"+an]],[/fxios\/([\w\.-]+)/i],[$,[I,lt]],[/\bqihoobrowser\/?([\w\.]*)/i],[$,[I,"360"]],[/\b(qq)\/([\w\.]+)/i],[[I,/(.+)/,"$1Browser"],$],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[I,/(.+)/,"$1"+an],$],[/samsungbrowser\/([\w\.]+)/i],[$,[I,Be+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[$,[I,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[I,"Sogou Mobile"],$],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[I,$],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[I],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[$,I],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[I,qt],$],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[I,$],[/\bgsa\/([\w\.]+) .*safari\//i],[$,[I,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[$,[I,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[$,[I,gt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[I,gt+" WebView"],$],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[$,[I,"Android "+Xe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[I,$],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[$,[I,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[$,I],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[I,[$,De,Ye]],[/(webkit|khtml)\/([\w\.]+)/i],[I,$],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[I,"Netscape"],$],[/(wolvic|librewolf)\/([\w\.]+)/i],[I,$],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[$,[I,lt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[I,[$,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[I,[$,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[H,"amd64"]],[/(ia32(?=;))/i],[[H,Fn]],[/((?:i[346]|x)86)[;\)]/i],[[H,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[H,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[H,"armhf"]],[/windows (ce|mobile); ppc;/i],[[H,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[H,/ower/,l,Fn]],[/(sun4\w)[;\)]/i],[[H,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[H,Fn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[P,[z,Be],[N,te]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[P,[z,Be],[N,q]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[P,[z,Re],[N,q]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[P,[z,Re],[N,te]],[/(macintosh);/i],[P,[z,Re]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[P,[z,ct],[N,q]],[/(?:honor)([-\w ]+)[;\)]/i],[P,[z,"Honor"],[N,q]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[P,[z,qe],[N,te]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[P,[z,qe],[N,q]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[P,/_/g," "],[z,bt],[N,q]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[P,/_/g," "],[z,bt],[N,te]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[P,[z,"OPPO"],[N,q]],[/\b(opd2\d{3}a?) bui/i],[P,[z,"OPPO"],[N,te]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[P,[z,"Vivo"],[N,q]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[P,[z,"Realme"],[N,q]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[P,[z,we],[N,q]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[P,[z,we],[N,te]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[P,[z,_t],[N,te]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[P,[z,_t],[N,q]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[P,[z,"Lenovo"],[N,te]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[P,/_/g," "],[z,"Nokia"],[N,q]],[/(pixel c)\b/i],[P,[z,Nt],[N,te]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[P,[z,Nt],[N,q]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[P,[z,xt],[N,q]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[P,"Xperia Tablet"],[z,xt],[N,te]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[P,[z,"OnePlus"],[N,q]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[P,[z,be],[N,te]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[P,/(.+)/g,"Fire Phone $1"],[z,be],[N,q]],[/(playbook);[-\w\),; ]+(rim)/i],[P,z,[N,te]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[P,[z,Fe],[N,q]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[P,[z,Je],[N,te]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[P,[z,Je],[N,q]],[/(nexus 9)/i],[P,[z,"HTC"],[N,te]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[z,[P,/_/g," "],[N,q]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[P,[z,"TCL"],[N,te]],[/(itel) ((\w+))/i],[[z,Fn],P,[N,De,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[P,[z,"Acer"],[N,te]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[P,[z,"Meizu"],[N,q]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[P,[z,"Ulefone"],[N,q]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[P,[z,"Energizer"],[N,q]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[P,[z,"Cat"],[N,q]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[P,[z,"Smartfren"],[N,q]],[/droid.+; (a(?:015|06[35]|142p?))/i],[P,[z,"Nothing"],[N,q]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[z,P,[N,q]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[z,P,[N,te]],[/(surface duo)/i],[P,[z,Ke],[N,te]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[P,[z,"Fairphone"],[N,q]],[/(u304aa)/i],[P,[z,"AT&T"],[N,q]],[/\bsie-(\w*)/i],[P,[z,"Siemens"],[N,q]],[/\b(rct\w+) b/i],[P,[z,"RCA"],[N,te]],[/\b(venue[\d ]{2,7}) b/i],[P,[z,"Dell"],[N,te]],[/\b(q(?:mv|ta)\w+) b/i],[P,[z,"Verizon"],[N,te]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[P,[z,"Barnes & Noble"],[N,te]],[/\b(tm\d{3}\w+) b/i],[P,[z,"NuVision"],[N,te]],[/\b(k88) b/i],[P,[z,"ZTE"],[N,te]],[/\b(nx\d{3}j) b/i],[P,[z,"ZTE"],[N,q]],[/\b(gen\d{3}) b.+49h/i],[P,[z,"Swiss"],[N,q]],[/\b(zur\d{3}) b/i],[P,[z,"Swiss"],[N,te]],[/\b((zeki)?tb.*\b) b/i],[P,[z,"Zeki"],[N,te]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[z,"Dragon Touch"],P,[N,te]],[/\b(ns-?\w{0,9}) b/i],[P,[z,"Insignia"],[N,te]],[/\b((nxa|next)-?\w{0,9}) b/i],[P,[z,"NextBook"],[N,te]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[z,"Voice"],P,[N,q]],[/\b(lvtel\-)?(v1[12]) b/i],[[z,"LvTel"],P,[N,q]],[/\b(ph-1) /i],[P,[z,"Essential"],[N,q]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[P,[z,"Envizen"],[N,te]],[/\b(trio[-\w\. ]+) b/i],[P,[z,"MachSpeed"],[N,te]],[/\btu_(1491) b/i],[P,[z,"Rotor"],[N,te]],[/(shield[\w ]+) b/i],[P,[z,"Nvidia"],[N,te]],[/(sprint) (\w+)/i],[z,P,[N,q]],[/(kin\.[onetw]{3})/i],[[P,/\./g," "],[z,Ke],[N,q]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[P,[z,It],[N,te]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[P,[z,It],[N,q]],[/smart-tv.+(samsung)/i],[z,[N,ue]],[/hbbtv.+maple;(\d+)/i],[[P,/^/,"SmartTV"],[z,Be],[N,ue]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[z,_t],[N,ue]],[/(apple) ?tv/i],[z,[P,Re+" TV"],[N,ue]],[/crkey/i],[[P,gt+"cast"],[z,Nt],[N,ue]],[/droid.+aft(\w+)( bui|\))/i],[P,[z,be],[N,ue]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[P,[z,ct],[N,ue]],[/(bravia[\w ]+)( bui|\))/i],[P,[z,xt],[N,ue]],[/(mitv-\w{5}) bui/i],[P,[z,bt],[N,ue]],[/Hbbtv.*(technisat) (.*);/i],[z,P,[N,ue]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[z,zn],[P,zn],[N,ue]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[N,ue]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[z,P,[N,V]],[/droid.+; (shield) bui/i],[P,[z,"Nvidia"],[N,V]],[/(playstation [345portablevi]+)/i],[P,[z,xt],[N,V]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[P,[z,Ke],[N,V]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[P,[z,Be],[N,fe]],[/((pebble))app/i],[z,P,[N,fe]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[P,[z,Re],[N,fe]],[/droid.+; (glass) \d/i],[P,[z,Nt],[N,fe]],[/droid.+; (wt63?0{2,3})\)/i],[P,[z,It],[N,fe]],[/droid.+; (glass) \d/i],[P,[z,Nt],[N,fe]],[/(pico) (4|neo3(?: link|pro)?)/i],[z,P,[N,fe]],[/; (quest( \d| pro)?)/i],[P,[z,qt],[N,fe]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[z,[N,Z]],[/(aeobc)\b/i],[P,[z,be],[N,Z]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[P,[N,q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[P,[N,te]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[N,te]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[N,q]],[/(android[-\w\. ]{0,9});.+buil/i],[P,[z,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[$,[I,yt+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[I,$],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[$,[I,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[I,$],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[$,I]],os:[[/microsoft (windows) (vista|xp)/i],[I,$],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[I,[$,De,mt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[$,De,mt],[I,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[$,/_/g,"."],[I,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[I,wn],[$,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[$,I],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[I,$],[/\(bb(10);/i],[$,[I,Fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[$,[I,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[$,[I,lt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[$,[I,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[$,[I,"watchOS"]],[/crkey\/([\d\.]+)/i],[$,[I,gt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[I,fn],$],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[I,$],[/(sunos) ?([\w\.\d]*)/i],[[I,"Solaris"],$],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[I,$]]},wt=function(nn,ln){if(typeof nn===g&&(ln=nn,nn=r),!(this instanceof wt))return new wt(nn,ln).getResult();var it=typeof n!==m&&n.navigator?n.navigator:r,Mn=nn||(it&&it.userAgent?it.userAgent:l),ar=it&&it.userAgentData?it.userAgentData:r,fr=ln?Vt(ft,ln):ft,Xn=it&&it.userAgent==Mn;return this.getBrowser=function(){var ut={};return ut[I]=r,ut[$]=r,Le.call(ut,Mn,fr.browser),ut[C]=Qe(ut[$]),Xn&&it&&it.brave&&typeof it.brave.isBrave==a&&(ut[I]="Brave"),ut},this.getCPU=function(){var ut={};return ut[H]=r,Le.call(ut,Mn,fr.cpu),ut},this.getDevice=function(){var ut={};return ut[z]=r,ut[P]=r,ut[N]=r,Le.call(ut,Mn,fr.device),Xn&&!ut[N]&&ar&&ar.mobile&&(ut[N]=q),Xn&&ut[P]=="Macintosh"&&it&&typeof it.standalone!==m&&it.maxTouchPoints&&it.maxTouchPoints>2&&(ut[P]="iPad",ut[N]=te),ut},this.getEngine=function(){var ut={};return ut[I]=r,ut[$]=r,Le.call(ut,Mn,fr.engine),ut},this.getOS=function(){var ut={};return ut[I]=r,ut[$]=r,Le.call(ut,Mn,fr.os),Xn&&!ut[I]&&ar&&ar.platform&&ar.platform!="Unknown"&&(ut[I]=ar.platform.replace(/chrome os/i,fn).replace(/macos/i,wn)),ut},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mn},this.setUA=function(ut){return Mn=typeof ut===w&&ut.length>le?zn(ut,le):ut,this},this.setUA(Mn),this};wt.VERSION=i,wt.BROWSER=Cn([I,$,C]),wt.CPU=Cn([H]),wt.DEVICE=Cn([P,z,N,V,q,ue,te,fe,Z]),wt.ENGINE=wt.OS=Cn([I,$]),e.exports&&(t=e.exports=wt),t.UAParser=wt;var Bt=typeof n!==m&&(n.jQuery||n.Zepto);if(Bt&&!Bt.ua){var pn=new wt;Bt.ua=pn.getResult(),Bt.ua.get=function(){return pn.getUA()},Bt.ua.set=function(nn){pn.setUA(nn);var ln=pn.getResult();for(var it in ln)Bt.ua[it]=ln[it]}}})(typeof window=="object"?window:cc)})(hk,hk.exports);var Jhe=hk.exports;const efe=()=>{const e=new Jhe.UAParser,{name:t,version:n}=e.getBrowser(),{name:r,version:i}=e.getOS(),l=e.getUA(),u=navigator.language,a=navigator.userAgent.includes("Mobi"),m=g();return{browser:{name:t??pl,version:n??pl,os:`${r??pl} ${i??pl}`,userAgent:l??pl,language:u??pl,mobile:a,brands:m??pl,viewportWidth:`${window.innerWidth}`,viewportHeight:`${window.innerHeight}`}};function g(){if(!(!t||!n)&&"userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.brands}};function tfe(e){var t,n,r,i;return{id:(i=(r=(n=(t=Ts.config)===null||t===void 0?void 0:t.sessionTracking)===null||n===void 0?void 0:n.generateSessionId)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:T1(),attributes:e}}const ld={session:"sessionStorage",local:"localStorage"};function yU(e){var t;try{let n;n=window[e];const r="__faro_storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(n){return(t=Ts.internalLogger)===null||t===void 0||t.info(`Web storage of type ${e} is not available. Reason: ${n}`),!1}}function A1(e,t){return mI(t)?window[t].getItem(e):null}function pI(e,t,n){if(mI(n))try{window[n].setItem(e,t)}catch{}}function vU(e,t){mI(t)&&window[t].removeItem(e)}const _U=yU(ld.local),xU=yU(ld.session);function mI(e){return e===ld.local?_U:e===ld.session?xU:!1}function bU(e,t){let n=!1,r;const i=()=>{if(r==null){n=!1;return}e(...r),r=null,setTimeout(i,t)};return(...l)=>{if(n){r=l;return}e(...l),n=!0,setTimeout(i,t)}}const Jm="com.grafana.faro.session",nfe=4*60*60*1e3,wU=15*60*1e3,SU=1*1e3,rfe=wU,ife={enabled:!0,persistent:!1,maxSessionPersistenceTime:rfe};function gI(){var e,t,n;const i=Ts.config.sessionTracking;let l=(n=(t=(e=i==null?void 0:i.sampler)===null||e===void 0?void 0:e.call(i,{metas:Ts.metas.value}))!==null&&t!==void 0?t:i==null?void 0:i.samplingRate)!==null&&n!==void 0?n:1;return typeof l!="number"&&(l=0),Math.random()<l}function M0({sessionId:e,started:t,lastActivity:n,isSampled:r=!0}={}){var i,l;const u=S1(),a=(l=(i=Ts.config)===null||i===void 0?void 0:i.sessionTracking)===null||l===void 0?void 0:l.generateSessionId;return e==null&&(e=typeof a=="function"?a():T1()),{sessionId:e,lastActivity:n??u,started:t??u,isSampled:r}}function EU(e){if(e==null)return!1;const t=S1();return t-e.started<nfe?t-e.lastActivity<wU:!1}function yI({fetchUserSession:e,storeUserSession:t}){return function({forceSessionExtend:r}={forceSessionExtend:!1}){var i,l,u;if(!e||!t)return;const a=Ts.config.sessionTracking,m=a==null?void 0:a.persistent;if(m&&!_U||!m&&!xU)return;const g=e();if(r===!1&&EU(g))t(Object.assign(Object.assign({},g),{lastActivity:S1()}));else{let w=CU(M0({isSampled:gI()}),g);t(w),(i=Ts.api)===null||i===void 0||i.setSession(w.sessionMeta),(l=a==null?void 0:a.onSessionChange)===null||l===void 0||l.call(a,(u=g==null?void 0:g.sessionMeta)!==null&&u!==void 0?u:null,w.sessionMeta)}}}function CU(e,t){var n,r,i,l,u,a,m;const g=Object.assign(Object.assign({},e),{sessionMeta:{id:e.sessionId,attributes:Object.assign(Object.assign(Object.assign({},(r=(n=Ts.config.sessionTracking)===null||n===void 0?void 0:n.session)===null||r===void 0?void 0:r.attributes),(l=(i=Ts.metas.value.session)===null||i===void 0?void 0:i.attributes)!==null&&l!==void 0?l:{}),{isSampled:e.isSampled.toString()})}}),w=(a=(u=Ts.metas.value.session)===null||u===void 0?void 0:u.overrides)!==null&&a!==void 0?a:(m=t==null?void 0:t.sessionMeta)===null||m===void 0?void 0:m.overrides;dU(w)||(g.sessionMeta.overrides=w);const C=t==null?void 0:t.sessionId;return C!=null&&(g.sessionMeta.attributes.previousSession=C),g}function TU({fetchUserSession:e,storeUserSession:t}){return function(r){const i=r.session,l=e();let u=i==null?void 0:i.id;const a=i==null?void 0:i.attributes,m=i==null?void 0:i.overrides,g=l==null?void 0:l.sessionMeta,w=g==null?void 0:g.overrides,C=!!m&&!Kh(m,w),P=!!a&&!Kh(a,g==null?void 0:g.attributes);if(!!i&&u!==(l==null?void 0:l.sessionId)||P||C){const N=CU(M0({sessionId:u,isSampled:gI()}),l);t(N),sfe(C,m,w),Ts.api.setSession(N.sessionMeta)}}}function sfe(e,t={},n={}){var r,i,l;if(!e)return;const u=t.serviceName,a=(l=(r=n.serviceName)!==null&&r!==void 0?r:(i=Ts.metas.value.app)===null||i===void 0?void 0:i.name)!==null&&l!==void 0?l:"";u&&u!==a&&Ts.api.pushEvent(Qhe,{serviceName:u,previousServiceName:a})}class sc{constructor(){this.updateSession=bU(()=>this.updateUserSession(),SU),this.updateUserSession=yI({fetchUserSession:sc.fetchUserSession,storeUserSession:sc.storeUserSession}),this.init()}static removeUserSession(){vU(Jm,sc.storageTypeLocal)}static storeUserSession(t){pI(Jm,Z_(t),sc.storageTypeLocal)}static fetchUserSession(){const t=A1(Jm,sc.storageTypeLocal);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),Ts.metas.addListener(TU({fetchUserSession:sc.fetchUserSession,storeUserSession:sc.storeUserSession}))}}sc.storageTypeLocal=ld.local;class Gc{constructor(){this.updateSession=bU(()=>this.updateUserSession(),SU),this.updateUserSession=yI({fetchUserSession:Gc.fetchUserSession,storeUserSession:Gc.storeUserSession}),this.init()}static removeUserSession(){vU(Jm,Gc.storageTypeSession)}static storeUserSession(t){pI(Jm,Z_(t),Gc.storageTypeSession)}static fetchUserSession(){const t=A1(Jm,Gc.storageTypeSession);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),Ts.metas.addListener(TU({fetchUserSession:Gc.fetchUserSession,storeUserSession:Gc.storeUserSession}))}}Gc.storageTypeSession=ld.session;function kU(e){return e!=null&&e.persistent?sc:Gc}class PU extends Ip{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-session",this.version=xd}sendSessionStartEvent(t){var n,r;const i=t.session;if(i&&i.id!==((n=this.notifiedSession)===null||n===void 0?void 0:n.id)){if(this.notifiedSession&&this.notifiedSession.id===((r=i.attributes)===null||r===void 0?void 0:r.previousSession)){this.api.pushEvent(Yhe,{},void 0,{skipDedupe:!0}),this.notifiedSession=i;return}this.notifiedSession=i,this.api.pushEvent(Wx,{},void 0,{skipDedupe:!0})}}createInitialSession(t,n){var r,i,l,u;let a=t.fetchUserSession();if(n.persistent&&n.maxSessionPersistenceTime&&a){const w=S1();a.lastActivity<w-n.maxSessionPersistenceTime&&(sc.removeUserSession(),a=null)}let m,g;if(EU(a)){const w=a==null?void 0:a.sessionId;g=M0({sessionId:w,isSampled:a.isSampled||!1,started:a==null?void 0:a.started});const C=a==null?void 0:a.sessionMeta;g.sessionMeta={id:w,attributes:Object.assign(Object.assign(Object.assign({},(r=n.session)===null||r===void 0?void 0:r.attributes),C==null?void 0:C.attributes),{isSampled:g.isSampled.toString()}),overrides:C==null?void 0:C.overrides},m=gC}else{const w=(l=(i=n.session)===null||i===void 0?void 0:i.id)!==null&&l!==void 0?l:tfe().id;g=M0({sessionId:w,isSampled:gI()}),g.sessionMeta={id:w,attributes:Object.assign({isSampled:g.isSampled.toString()},(u=n.session)===null||u===void 0?void 0:u.attributes)},m=Wx}return{initialSession:g,lifecycleType:m}}registerBeforeSendHook(t){var n;const{updateSession:r}=new t;(n=this.transports)===null||n===void 0||n.addBeforeSendHooks(i=>{var l,u,a;r();const m=(l=i.meta.session)===null||l===void 0?void 0:l.attributes;if(m&&(m==null?void 0:m.isSampled)==="true"){let g=JSON.parse(JSON.stringify(i));const w=(u=g.meta.session)===null||u===void 0?void 0:u.attributes;return w==null||delete w.isSampled,Object.keys(w??{}).length===0&&((a=g.meta.session)===null||a===void 0||delete a.attributes),g}return null})}initialize(){this.logDebug("init session instrumentation");const t=this.config.sessionTracking;if(t!=null&&t.enabled){const n=kU(t);this.registerBeforeSendHook(n);const{initialSession:r,lifecycleType:i}=this.createInitialSession(n,t);n.storeUserSession(r);const l=r.sessionMeta;this.notifiedSession=l,this.api.setSession(l),i===Wx&&this.api.pushEvent(Wx,{},void 0,{skipDedupe:!0}),i===gC&&this.api.pushEvent(gC,{},void 0,{skipDedupe:!0})}this.metas.addListener(this.sendSessionStartEvent.bind(this))}}const ofe="Non-Error promise rejection captured with value:",afe="UnhandledRejection",lfe="DOMError",cfe="DOMException",ufe="Non-Error exception captured with keys:",dfe="?",hfe=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function ffe(e){var t,n;const r=e.match(hfe),i=(t=r==null?void 0:r[1])!==null&&t!==void 0?t:mU;return[(n=r==null?void 0:r[2])!==null&&n!==void 0?n:e,i]}const MD=`
`,pfe="eval",mfe="?",OD="@",gfe=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yfe=/\((\S*)(?::(\d+))(?::(\d+))\)/,vfe="eval",AU="address at ",_fe=AU.length,xfe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,bfe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,wfe=" > eval",DD="safari-extension",ND="safari-web-extension",Sfe=/Minified React error #\d+;/i;function IU(e,t,n,r){const i={filename:e||document.location.href,function:t||mfe};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}function jD(e,t){const n=e==null?void 0:e.includes(DD),r=!n&&(e==null?void 0:e.includes(ND));return!n&&!r?[e,t]:[e!=null&&e.includes(OD)?e.split(OD)[0]:e,n?`${DD}:${t}`:`${ND}:${t}`]}function fk(e){let t=[];e.stacktrace?t=e.stacktrace.split(MD).filter((r,i)=>i%2===0):e.stack&&(t=e.stack.split(MD));const n=t.reduce((r,i,l)=>{let u,a,m,g,w;if(u=gfe.exec(i)){if(a=u[1],m=u[2],g=u[3],w=u[4],m!=null&&m.startsWith(vfe)){const C=yfe.exec(m);C&&(m=C[1],g=C[2],w=C[3])}m=m!=null&&m.startsWith(AU)?m.substring(_fe):m,[a,m]=jD(a,m)}else if(u=xfe.exec(i)){if(a=u[1],m=u[3],g=u[4],w=u[5],m&&m.includes(wfe)){const C=bfe.exec(m);C&&(a=a||pfe,m=C[1],g=C[2])}else l===0&&!w&&ihe(e.columnNumber)&&(w=String(e.columnNumber+1));[a,m]=jD(a,m)}return(m||a)&&r.push(IU(m,a,g?Number(g):void 0,w?Number(w):void 0)),r},[]);return Sfe.test(e.message)?n.slice(1):n}function Efe(e){return{frames:fk(e)}}function RU(e){let t,n,r=[],i,l;if(che(e)&&e.error)t=e.error.message,n=e.error.name,r=fk(e.error);else if((i=uhe(e))||dhe(e)){const{name:u,message:a}=e;n=u??(i?lfe:cfe),t=a?`${n}: ${a}`:n}else dI(e)?(t=e.message,r=fk(e)):(cu(e)||(l=ahe(e)))&&(n=l?e.constructor.name:void 0,t=`${ufe} ${Object.keys(e)}`);return[t,n,r]}function LU(e){const[t,n,r,i,l]=e;let u,a,m=[];const g=w1(t),w=IU(n,dfe,r,i);return l||!g?([u,a,m]=RU(l??t),m.length===0&&(m=[w])):g&&([u,a]=ffe(t),m=[w]),{value:u,type:a,stackFrames:m}}function zD(e,t){return dI(e[0])?LU(e):{value:t(e)}}class wh extends Ip{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-sdk:instrumentation-console",this.version=xd,this.errorSerializer=L0}initialize(){var t,n,r,i;this.options=Object.assign(Object.assign({},this.options),this.config.consoleInstrumentation);const l=((t=this.options)===null||t===void 0?void 0:t.serializeErrors)||!!(!((n=this.options)===null||n===void 0)&&n.errorSerializer);this.errorSerializer=l?(i=(r=this.options)===null||r===void 0?void 0:r.errorSerializer)!==null&&i!==void 0?i:LD:L0,fhe.filter(u=>{var a,m;return!((m=(a=this.options)===null||a===void 0?void 0:a.disabledLevels)!==null&&m!==void 0?m:wh.defaultDisabledLevels).includes(u)}).forEach(u=>{console[u]=(...a)=>{var m,g;try{if(u===_a.ERROR&&!(!((m=this.options)===null||m===void 0)&&m.consoleErrorAsLog)){const{value:w,type:C,stackFrames:P}=zD(a,this.errorSerializer);if(w&&!C&&!P){this.api.pushError(new Error(wh.consoleErrorPrefix+w));return}this.api.pushError(new Error(wh.consoleErrorPrefix+w),{type:C,stackFrames:P})}else if(u===_a.ERROR&&(!((g=this.options)===null||g===void 0)&&g.consoleErrorAsLog)){const{value:w,type:C,stackFrames:P}=zD(a,this.errorSerializer);this.api.pushLog(w?[wh.consoleErrorPrefix+w]:a,{level:u,context:{value:w??"",type:C??"",stackFrames:P!=null&&P.length?LD(P):""}})}else this.api.pushLog(a,{level:u})}catch(w){this.logError(w)}finally{this.unpatchedConsole[u](...a)}}})}}wh.defaultDisabledLevels=[_a.DEBUG,_a.TRACE,_a.LOG];wh.consoleErrorPrefix="console.error: ";function Cfe(e){const t=window.onerror;window.onerror=(...n)=>{try{const{value:r,type:i,stackFrames:l}=LU(n);r&&e.pushError(new Error(r),{type:i,stackFrames:l})}finally{t==null||t.apply(window,n)}}}function Tfe(e){window.addEventListener("unhandledrejection",t=>{var n,r;let i=t;i.reason?i=t.reason:!((n=t.detail)===null||n===void 0)&&n.reason&&(i=(r=t.detail)===null||r===void 0?void 0:r.reason);let l,u,a=[];she(i)?(l=`${ofe} ${String(i)}`,u=afe):[l,u,a]=RU(i),l&&e.pushError(new Error(l),{type:u,stackFrames:a})})}class kfe extends Ip{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-errors",this.version=xd}initialize(){this.logDebug("Initializing"),Cfe(this.api),Tfe(this.api)}}class MU extends Ip{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-view",this.version=xd}sendViewChangedEvent(t){var n,r,i,l;const u=t.view;u&&u.name!==((n=this.notifiedView)===null||n===void 0?void 0:n.name)&&(this.api.pushEvent(Khe,{fromView:(i=(r=this.notifiedView)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:pl,toView:(l=u.name)!==null&&l!==void 0?l:pl},void 0,{skipDedupe:!0}),this.notifiedView=u)}initialize(){this.metas.addListener(this.sendViewChangedEvent.bind(this))}}var pk,ph,sv,OU,O0,DU=-1,Rp=function(e){addEventListener("pageshow",function(t){t.persisted&&(DU=t.timeStamp,e(t))},!0)},vI=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},I1=function(){var e=vI();return e&&e.activationStart||0},Tl=function(e,t){var n=vI(),r="navigate";return DU>=0?r="back-forward-cache":n&&(document.prerendering||I1()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Lg=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},kl=function(e,t,n,r){var i,l;return function(u){t.value>=0&&(u||r)&&((l=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=l,t.rating=function(a,m){return a>m[1]?"poor":a>m[0]?"needs-improvement":"good"}(t.value,n),e(t))}},_I=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},q_=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},R1=function(e){var t=!1;return function(){t||(e(),t=!0)}},Rm=-1,FD=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},D0=function(e){document.visibilityState==="hidden"&&Rm>-1&&(Rm=e.type==="visibilitychange"?e.timeStamp:0,Pfe())},BD=function(){addEventListener("visibilitychange",D0,!0),addEventListener("prerenderingchange",D0,!0)},Pfe=function(){removeEventListener("visibilitychange",D0,!0),removeEventListener("prerenderingchange",D0,!0)},xI=function(){return Rm<0&&(Rm=FD(),BD(),Rp(function(){setTimeout(function(){Rm=FD(),BD()},0)})),{get firstHiddenTime(){return Rm}}},G_=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},UD=[1800,3e3],NU=function(e,t){t=t||{},G_(function(){var n,r=xI(),i=Tl("FCP"),l=Lg("paint",function(u){u.forEach(function(a){a.name==="first-contentful-paint"&&(l.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-I1(),0),i.entries.push(a),n(!0)))})});l&&(n=kl(e,i,UD,t.reportAllChanges),Rp(function(u){i=Tl("FCP"),n=kl(e,i,UD,t.reportAllChanges),_I(function(){i.value=performance.now()-u.timeStamp,n(!0)})}))})},$D=[.1,.25],Afe=function(e,t){t=t||{},NU(R1(function(){var n,r=Tl("CLS",0),i=0,l=[],u=function(m){m.forEach(function(g){if(!g.hadRecentInput){var w=l[0],C=l[l.length-1];i&&g.startTime-C.startTime<1e3&&g.startTime-w.startTime<5e3?(i+=g.value,l.push(g)):(i=g.value,l=[g])}}),i>r.value&&(r.value=i,r.entries=l,n())},a=Lg("layout-shift",u);a&&(n=kl(e,r,$D,t.reportAllChanges),q_(function(){u(a.takeRecords()),n(!0)}),Rp(function(){i=0,r=Tl("CLS",0),n=kl(e,r,$D,t.reportAllChanges),_I(function(){return n()})}),setTimeout(n,0))}))},jU=0,yC=1/0,Xx=0,Ife=function(e){e.forEach(function(t){t.interactionId&&(yC=Math.min(yC,t.interactionId),Xx=Math.max(Xx,t.interactionId),jU=Xx?(Xx-yC)/7+1:0)})},zU=function(){return pk?jU:performance.interactionCount||0},Rfe=function(){"interactionCount"in performance||pk||(pk=Lg("event",Ife,{type:"event",buffered:!0,durationThreshold:0}))},Wc=[],_b=new Map,FU=0,Lfe=function(){var e=Math.min(Wc.length-1,Math.floor((zU()-FU)/50));return Wc[e]},Mfe=[],Ofe=function(e){if(Mfe.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=Wc[Wc.length-1],n=_b.get(e.interactionId);if(n||Wc.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};_b.set(r.id,r),Wc.push(r)}Wc.sort(function(i,l){return l.latency-i.latency}),Wc.length>10&&Wc.splice(10).forEach(function(i){return _b.delete(i.id)})}}},BU=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=R1(e),document.visibilityState==="hidden"?e():(n=t(e),q_(e)),n},VD=[200,500],Dfe=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},G_(function(){var n;Rfe();var r,i=Tl("INP"),l=function(a){BU(function(){a.forEach(Ofe);var m=Lfe();m&&m.latency!==i.value&&(i.value=m.latency,i.entries=m.entries,r())})},u=Lg("event",l,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=kl(e,i,VD,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),q_(function(){l(u.takeRecords()),r(!0)}),Rp(function(){FU=zU(),Wc.length=0,_b.clear(),i=Tl("INP"),r=kl(e,i,VD,t.reportAllChanges)}))}))},HD=[2500,4e3],vC={},Nfe=function(e,t){t=t||{},G_(function(){var n,r=xI(),i=Tl("LCP"),l=function(m){t.reportAllChanges||(m=m.slice(-1)),m.forEach(function(g){g.startTime<r.firstHiddenTime&&(i.value=Math.max(g.startTime-I1(),0),i.entries=[g],n())})},u=Lg("largest-contentful-paint",l);if(u){n=kl(e,i,HD,t.reportAllChanges);var a=R1(function(){vC[i.id]||(l(u.takeRecords()),u.disconnect(),vC[i.id]=!0,n(!0))});["keydown","click"].forEach(function(m){addEventListener(m,function(){return BU(a)},{once:!0,capture:!0})}),q_(a),Rp(function(m){i=Tl("LCP"),n=kl(e,i,HD,t.reportAllChanges),_I(function(){i.value=performance.now()-m.timeStamp,vC[i.id]=!0,n(!0)})})}})},ZD=[800,1800],jfe=function e(t){document.prerendering?G_(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},zfe=function(e,t){t=t||{};var n=Tl("TTFB"),r=kl(e,n,ZD,t.reportAllChanges);jfe(function(){var i=vI();i&&(n.value=Math.max(i.responseStart-I1(),0),n.entries=[i],r(!0),Rp(function(){n=Tl("TTFB",0),(r=kl(e,n,ZD,t.reportAllChanges))(!0)}))})},jy={passive:!0,capture:!0},Ffe=new Date,qD=function(e,t){ph||(ph=t,sv=e,OU=new Date,$U(removeEventListener),UU())},UU=function(){if(sv>=0&&sv<OU-Ffe){var e={entryType:"first-input",name:ph.type,target:ph.target,cancelable:ph.cancelable,startTime:ph.timeStamp,processingStart:ph.timeStamp+sv};O0.forEach(function(t){t(e)}),O0=[]}},Bfe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){qD(n,r),u()},l=function(){u()},u=function(){removeEventListener("pointerup",i,jy),removeEventListener("pointercancel",l,jy)};addEventListener("pointerup",i,jy),addEventListener("pointercancel",l,jy)}(t,e):qD(t,e)}},$U=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Bfe,jy)})},GD=[100,300],Ufe=function(e,t){t=t||{},G_(function(){var n,r=xI(),i=Tl("FID"),l=function(m){m.startTime<r.firstHiddenTime&&(i.value=m.processingStart-m.startTime,i.entries.push(m),n(!0))},u=function(m){m.forEach(l)},a=Lg("first-input",u);n=kl(e,i,GD,t.reportAllChanges),a&&(q_(R1(function(){u(a.takeRecords()),a.disconnect()})),Rp(function(){var m;i=Tl("FID"),n=kl(e,i,GD,t.reportAllChanges),O0=[],sv=-1,ph=null,$U(addEventListener),m=l,O0.push(m),UU()}))})};class L1{constructor(t){this.pushMeasurement=t}initialize(){Object.entries(L1.mapping).forEach(([t,n])=>{n(r=>{this.pushMeasurement({type:"web-vitals",values:{[t]:r.value}})})})}}L1.mapping={cls:Afe,fcp:NU,fid:Ufe,inp:Dfe,lcp:Nfe,ttfb:zfe};var mk,WD,Mg=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},h_=function(e){if(document.readyState==="loading")return"loading";var t=Mg();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},$fe=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},M1=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?"#"+r.id:$fe(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch{}return n},VU=-1,HU=function(){return VU},Lp=function(e){addEventListener("pageshow",function(t){t.persisted&&(VU=t.timeStamp,e(t))},!0)},O1=function(){var e=Mg();return e&&e.activationStart||0},Pl=function(e,t){var n=Mg(),r="navigate";return HU()>=0?r="back-forward-cache":n&&(document.prerendering||O1()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Mp=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Al=function(e,t,n,r){var i,l;return function(u){t.value>=0&&(u||r)&&((l=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=l,t.rating=function(a,m){return a>m[1]?"poor":a>m[0]?"needs-improvement":"good"}(t.value,n),e(t))}},bI=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},W_=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},D1=function(e){var t=!1;return function(){t||(e(),t=!0)}},Lm=-1,XD=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},N0=function(e){document.visibilityState==="hidden"&&Lm>-1&&(Lm=e.type==="visibilitychange"?e.timeStamp:0,Vfe())},KD=function(){addEventListener("visibilitychange",N0,!0),addEventListener("prerenderingchange",N0,!0)},Vfe=function(){removeEventListener("visibilitychange",N0,!0),removeEventListener("prerenderingchange",N0,!0)},wI=function(){return Lm<0&&(Lm=XD(),KD(),Lp(function(){setTimeout(function(){Lm=XD(),KD()},0)})),{get firstHiddenTime(){return Lm}}},X_=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},YD=[1800,3e3],ZU=function(e,t){t=t||{},X_(function(){var n,r=wI(),i=Pl("FCP"),l=Mp("paint",function(u){u.forEach(function(a){a.name==="first-contentful-paint"&&(l.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-O1(),0),i.entries.push(a),n(!0)))})});l&&(n=Al(e,i,YD,t.reportAllChanges),Lp(function(u){i=Pl("FCP"),n=Al(e,i,YD,t.reportAllChanges),bI(function(){i.value=performance.now()-u.timeStamp,n(!0)})}))})},QD=[.1,.25],Hfe=function(e,t){(function(n,r){r=r||{},ZU(D1(function(){var i,l=Pl("CLS",0),u=0,a=[],m=function(w){w.forEach(function(C){if(!C.hadRecentInput){var P=a[0],I=a[a.length-1];u&&C.startTime-I.startTime<1e3&&C.startTime-P.startTime<5e3?(u+=C.value,a.push(C)):(u=C.value,a=[C])}}),u>l.value&&(l.value=u,l.entries=a,i())},g=Mp("layout-shift",m);g&&(i=Al(n,l,QD,r.reportAllChanges),W_(function(){m(g.takeRecords()),i(!0)}),Lp(function(){u=0,l=Pl("CLS",0),i=Al(n,l,QD,r.reportAllChanges),bI(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=function(i){var l,u={};if(i.entries.length){var a=i.entries.reduce(function(g,w){return g&&g.value>w.value?g:w});if(a&&a.sources&&a.sources.length){var m=(l=a.sources).find(function(g){return g.node&&g.node.nodeType===1})||l[0];m&&(u={largestShiftTarget:M1(m.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:m,largestShiftEntry:a,loadState:h_(a.startTime)})}}return Object.assign(i,{attribution:u})}(n);e(r)},t)},Zfe=function(e,t){ZU(function(n){var r=function(i){var l={timeToFirstByte:0,firstByteToFCP:i.value,loadState:h_(HU())};if(i.entries.length){var u=Mg(),a=i.entries[i.entries.length-1];if(u){var m=u.activationStart||0,g=Math.max(0,u.responseStart-m);l={timeToFirstByte:g,firstByteToFCP:i.value-g,loadState:h_(i.entries[0].startTime),navigationEntry:u,fcpEntry:a}}}return Object.assign(i,{attribution:l})}(n);e(r)},t)},qU=0,_C=1/0,Kx=0,qfe=function(e){e.forEach(function(t){t.interactionId&&(_C=Math.min(_C,t.interactionId),Kx=Math.max(Kx,t.interactionId),qU=Kx?(Kx-_C)/7+1:0)})},GU=function(){return mk?qU:performance.interactionCount||0},Gfe=function(){"interactionCount"in performance||mk||(mk=Mp("event",qfe,{type:"event",buffered:!0,durationThreshold:0}))},oc=[],ov=new Map,WU=0,Wfe=function(){var e=Math.min(oc.length-1,Math.floor((GU()-WU)/50));return oc[e]},XU=[],Xfe=function(e){if(XU.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=oc[oc.length-1],n=ov.get(e.interactionId);if(n||oc.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ov.set(r.id,r),oc.push(r)}oc.sort(function(i,l){return l.latency-i.latency}),oc.length>10&&oc.splice(10).forEach(function(i){return ov.delete(i.id)})}}},SI=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=D1(e),document.visibilityState==="hidden"?e():(n=t(e),W_(e)),n},JD=[200,500],Kfe=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},X_(function(){var n;Gfe();var r,i=Pl("INP"),l=function(a){SI(function(){a.forEach(Xfe);var m=Wfe();m&&m.latency!==i.value&&(i.value=m.latency,i.entries=m.entries,r())})},u=Mp("event",l,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=Al(e,i,JD,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),W_(function(){l(u.takeRecords()),r(!0)}),Lp(function(){WU=GU(),oc.length=0,ov.clear(),i=Pl("INP"),r=Al(e,i,JD,t.reportAllChanges)}))}))},eg=[],mh=[],gk=0,EI=new WeakMap,tg=new Map,yk=-1,Yfe=function(e){eg=eg.concat(e),KU()},KU=function(){yk<0&&(yk=SI(Qfe))},Qfe=function(){tg.size>10&&tg.forEach(function(u,a){ov.has(a)||tg.delete(a)});var e=oc.map(function(u){return EI.get(u.entries[0])}),t=mh.length-50;mh=mh.filter(function(u,a){return a>=t||e.includes(u)});for(var n=new Set,r=0;r<mh.length;r++){var i=mh[r];QU(i.startTime,i.processingEnd).forEach(function(u){n.add(u)})}var l=eg.length-1-50;eg=eg.filter(function(u,a){return u.startTime>gk&&a>l||n.has(u)}),yk=-1};XU.push(function(e){e.interactionId&&e.target&&!tg.has(e.interactionId)&&tg.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;gk=Math.max(gk,e.processingEnd);for(var r=mh.length-1;r>=0;r--){var i=mh[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},mh.push(t)),(e.interactionId||e.entryType==="first-input")&&EI.set(e,t),KU()});var gh,av,YU,j0,QU=function(e,t){for(var n,r=[],i=0;n=eg[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},Jfe=function(e,t){WD||(WD=Mp("long-animation-frame",Yfe)),Kfe(function(n){var r=function(i){var l=i.entries[0],u=EI.get(l),a=l.processingStart,m=u.processingEnd,g=u.entries.sort(function($,H){return $.processingStart-H.processingStart}),w=QU(l.startTime,m),C=i.entries.find(function($){return $.target}),P=C&&C.target||tg.get(l.interactionId),I=[l.startTime+l.duration,m].concat(w.map(function($){return $.startTime+$.duration})),N=Math.max.apply(Math,I),z={interactionTarget:M1(P),interactionTargetElement:P,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:N,processedEventEntries:g,longAnimationFrameEntries:w,inputDelay:a-l.startTime,processingDuration:m-a,presentationDelay:Math.max(N-m,0),loadState:h_(l.startTime)};return Object.assign(i,{attribution:z})}(n);e(r)},t)},eN=[2500,4e3],xC={},epe=function(e,t){(function(n,r){r=r||{},X_(function(){var i,l=wI(),u=Pl("LCP"),a=function(w){r.reportAllChanges||(w=w.slice(-1)),w.forEach(function(C){C.startTime<l.firstHiddenTime&&(u.value=Math.max(C.startTime-O1(),0),u.entries=[C],i())})},m=Mp("largest-contentful-paint",a);if(m){i=Al(n,u,eN,r.reportAllChanges);var g=D1(function(){xC[u.id]||(a(m.takeRecords()),m.disconnect(),xC[u.id]=!0,i(!0))});["keydown","click"].forEach(function(w){addEventListener(w,function(){return SI(g)},{once:!0,capture:!0})}),W_(g),Lp(function(w){u=Pl("LCP"),i=Al(n,u,eN,r.reportAllChanges),bI(function(){u.value=performance.now()-w.timeStamp,xC[u.id]=!0,i(!0)})})}})})(function(n){var r=function(i){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var u=Mg();if(u){var a=u.activationStart||0,m=i.entries[i.entries.length-1],g=m.url&&performance.getEntriesByType("resource").filter(function(N){return N.name===m.url})[0],w=Math.max(0,u.responseStart-a),C=Math.max(w,g?(g.requestStart||g.startTime)-a:0),P=Math.max(C,g?g.responseEnd-a:0),I=Math.max(P,m.startTime-a);l={element:M1(m.element),timeToFirstByte:w,resourceLoadDelay:C-w,resourceLoadDuration:P-C,elementRenderDelay:I-P,navigationEntry:u,lcpEntry:m},m.url&&(l.url=m.url),g&&(l.lcpResourceEntry=g)}}return Object.assign(i,{attribution:l})}(n);e(r)},t)},tN=[800,1800],tpe=function e(t){document.prerendering?X_(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},npe=function(e,t){t=t||{};var n=Pl("TTFB"),r=Al(e,n,tN,t.reportAllChanges);tpe(function(){var i=Mg();i&&(n.value=Math.max(i.responseStart-O1(),0),n.entries=[i],r(!0),Lp(function(){n=Pl("TTFB",0),(r=Al(e,n,tN,t.reportAllChanges))(!0)}))})},rpe=function(e,t){npe(function(n){var r=function(i){var l={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(i.entries.length){var u=i.entries[0],a=u.activationStart||0,m=Math.max((u.workerStart||u.fetchStart)-a,0),g=Math.max(u.domainLookupStart-a,0),w=Math.max(u.connectStart-a,0),C=Math.max(u.connectEnd-a,0);l={waitingDuration:m,cacheDuration:g-m,dnsDuration:w-g,connectionDuration:C-w,requestDuration:i.value-C,navigationEntry:u}}return Object.assign(i,{attribution:l})}(n);e(r)},t)},zy={passive:!0,capture:!0},ipe=new Date,nN=function(e,t){gh||(gh=t,av=e,YU=new Date,e$(removeEventListener),JU())},JU=function(){if(av>=0&&av<YU-ipe){var e={entryType:"first-input",name:gh.type,target:gh.target,cancelable:gh.cancelable,startTime:gh.timeStamp,processingStart:gh.timeStamp+av};j0.forEach(function(t){t(e)}),j0=[]}},spe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){nN(n,r),u()},l=function(){u()},u=function(){removeEventListener("pointerup",i,zy),removeEventListener("pointercancel",l,zy)};addEventListener("pointerup",i,zy),addEventListener("pointercancel",l,zy)}(t,e):nN(t,e)}},e$=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,spe,zy)})},rN=[100,300],ope=function(e,t){t=t||{},X_(function(){var n,r=wI(),i=Pl("FID"),l=function(m){m.startTime<r.firstHiddenTime&&(i.value=m.processingStart-m.startTime,i.entries.push(m),n(!0))},u=function(m){m.forEach(l)},a=Mp("first-input",u);n=Al(e,i,rN,t.reportAllChanges),a&&(W_(D1(function(){u(a.takeRecords()),a.disconnect()})),Lp(function(){var m;i=Pl("FID"),n=Al(e,i,rN,t.reportAllChanges),j0=[],av=-1,gh=null,e$(addEventListener),m=l,j0.push(m),JU()}))})},ape=function(e,t){ope(function(n){var r=function(i){var l=i.entries[0],u={eventTarget:M1(l.target),eventType:l.name,eventTime:l.startTime,eventEntry:l,loadState:h_(l.startTime)};return Object.assign(i,{attribution:u})}(n);e(r)},t)};const vk="com.grafana.faro.lastNavigationId",Yx="load_state",iN="time_to_first_byte";class lpe{constructor(t){this.corePushMeasurement=t}initialize(){this.measureCLS(),this.measureFCP(),this.measureFID(),this.measureINP(),this.measureLCP(),this.measureTTFB()}measureCLS(){Hfe(t=>{const{loadState:n,largestShiftValue:r,largestShiftTime:i,largestShiftTarget:l}=t.attribution,u=this.buildInitialValues(t);this.addIfPresent(u,"largest_shift_value",r),this.addIfPresent(u,"largest_shift_time",i);const a=this.buildInitialContext(t);this.addIfPresent(a,Yx,n),this.addIfPresent(a,"largest_shift_target",l),this.pushMeasurement(u,a)})}measureFCP(){Zfe(t=>{const{firstByteToFCP:n,timeToFirstByte:r,loadState:i}=t.attribution,l=this.buildInitialValues(t);this.addIfPresent(l,"first_byte_to_fcp",n),this.addIfPresent(l,iN,r);const u=this.buildInitialContext(t);this.addIfPresent(u,Yx,i),this.pushMeasurement(l,u)})}measureFID(){ape(t=>{const{eventTime:n,eventTarget:r,eventType:i,loadState:l}=t.attribution,u=this.buildInitialValues(t);this.addIfPresent(u,"event_time",n);const a=this.buildInitialContext(t);this.addIfPresent(a,"event_target",r),this.addIfPresent(a,"event_type",i),this.addIfPresent(a,Yx,l),this.pushMeasurement(u,a)})}measureINP(){Jfe(t=>{const{interactionTime:n,presentationDelay:r,inputDelay:i,processingDuration:l,nextPaintTime:u,loadState:a,interactionTarget:m,interactionType:g}=t.attribution,w=this.buildInitialValues(t);this.addIfPresent(w,"interaction_time",n),this.addIfPresent(w,"presentation_delay",r),this.addIfPresent(w,"input_delay",i),this.addIfPresent(w,"processing_duration",l),this.addIfPresent(w,"next_paint_time",u);const C=this.buildInitialContext(t);this.addIfPresent(C,Yx,a),this.addIfPresent(C,"interaction_target",m),this.addIfPresent(C,"interaction_type",g),this.pushMeasurement(w,C)})}measureLCP(){epe(t=>{const{elementRenderDelay:n,resourceLoadDelay:r,resourceLoadDuration:i,timeToFirstByte:l,element:u}=t.attribution,a=this.buildInitialValues(t);this.addIfPresent(a,"element_render_delay",n),this.addIfPresent(a,"resource_load_delay",r),this.addIfPresent(a,"resource_load_duration",i),this.addIfPresent(a,iN,l);const m=this.buildInitialContext(t);this.addIfPresent(m,"element",u),this.pushMeasurement(a,m)})}measureTTFB(){rpe(t=>{const{dnsDuration:n,connectionDuration:r,requestDuration:i,waitingDuration:l,cacheDuration:u}=t.attribution,a=this.buildInitialValues(t);this.addIfPresent(a,"dns_duration",n),this.addIfPresent(a,"connection_duration",r),this.addIfPresent(a,"request_duration",i),this.addIfPresent(a,"waiting_duration",l),this.addIfPresent(a,"cache_duration",u);const m=this.buildInitialContext(t);this.pushMeasurement(a,m)})}buildInitialValues(t){return{[t.name.toLowerCase()]:t.value,delta:t.delta}}buildInitialContext(t){var n;const r=(n=A1(vk,ld.session))!==null&&n!==void 0?n:pl;return{id:t.id,rating:t.rating,navigation_type:t.navigationType,navigation_entry_id:r}}pushMeasurement(t,n){this.corePushMeasurement({type:"web-vitals",values:t},{context:n})}addIfPresent(t,n,r){r&&(t[n]=r)}}class t$ extends Ip{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-web-vitals",this.version=xd}initialize(){this.logDebug("Initializing"),this.intializeWebVitalsInstrumentation().initialize()}intializeWebVitalsInstrumentation(){return this.config.trackWebVitalsAttribution?new lpe(this.api.pushMeasurement):new L1(this.api.pushMeasurement)}}const cpe="navigation",upe="resource",dpe=/^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;function n$(e=[]){for(const t of e)if(t.name==="traceparent"){if(!dpe.test(t.description))continue;const[,n,r]=t.description.split("-");if(n!=null&&r!=null)return{traceId:n,spanId:r};break}}function hpe(){return"PerformanceObserver"in window}function r$(e=[],t){return e.some(n=>n&&t.match(n)!=null)}function fpe(e){if(document.readyState==="complete")e();else{const t=()=>{document.readyState==="complete"&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}}function ppe(e,t={}){for(const[n,r]of Object.entries(t)){const i=e[n];return i==null?!1:d_(r)?r.includes(i):i===r}return!0}function i$(e){const{connectEnd:t,connectStart:n,decodedBodySize:r,domainLookupEnd:i,domainLookupStart:l,duration:u,encodedBodySize:a,fetchStart:m,initiatorType:g,name:w,nextHopProtocol:C,redirectEnd:P,redirectStart:I,renderBlockingStatus:N,requestStart:z,responseEnd:$,responseStart:H,responseStatus:V,secureConnectionStart:q,transferSize:te,workerStart:ue}=e;return{name:w,duration:ws(u),tcpHandshakeTime:ws(t-n),dnsLookupTime:ws(i-l),tlsNegotiationTime:ws(z-q),responseStatus:ws(V),redirectTime:ws(P-I),requestTime:ws(H-z),responseTime:ws($-H),fetchTime:ws($-m),serviceWorkerTime:ws(m-ue),decodedBodySize:ws(r),encodedBodySize:ws(a),cacheHitStatus:fe(),renderBlockingStatus:ws(N),protocol:C,initiatorType:g,visibilityState:document.visibilityState,ttfb:ws(H-z)};function fe(){let Z="fullLoad";return te===0?r>0&&(Z="cache"):V!=null?V===304&&(Z="conditionalFetch"):a>0&&te<a&&(Z="conditionalFetch"),Z}}function mpe(e){const{activationStart:t,domComplete:n,domContentLoadedEventEnd:r,domContentLoadedEventStart:i,domInteractive:l,fetchStart:u,loadEventEnd:a,loadEventStart:m,responseStart:g,type:w}=e,C=gpe();return Object.assign(Object.assign({},i$(e)),{pageLoadTime:ws(n-u),documentParsingTime:ws(C?l-C:null),domProcessingTime:ws(n-l),domContentLoadHandlerTime:ws(r-i),onLoadTime:ws(a-m),ttfb:ws(Math.max(g-(t??0),0)),type:w})}function gpe(){var e;return((e=performance.timing)===null||e===void 0?void 0:e.domLoading)!=null?performance.timing.domLoading-performance.timeOrigin:null}function ws(e){return e==null?pl:typeof e=="number"?Math.round(e).toString():e.toString()}function ype(e,t){let n;const r=new Promise(l=>{n=l});return new PerformanceObserver(l=>{var u;const[a]=l.getEntries();if(a==null||r$(t,a.name))return;const m=a.toJSON();let g=n$(m==null?void 0:m.serverTiming);const w=(u=A1(vk,ld.session))!==null&&u!==void 0?u:pl,C=Object.assign(Object.assign({},mpe(m)),{faroNavigationId:T1(),faroPreviousNavigationId:w});pI(vk,C.faroNavigationId,ld.session),e("faro.performance.navigation",C,void 0,{spanContext:g,timestampOverwriteMs:performance.timeOrigin+m.startTime}),n(C)}).observe({type:cpe,buffered:!0}),r}const vpe={initiatorType:["xmlhttprequest","fetch"]};function _pe(e,t,n){const r=Ts.config.trackResources;new PerformanceObserver(l=>{const u=l.getEntries();for(const a of u){if(r$(n,a.name))return;const m=a.toJSON();let g=n$(m==null?void 0:m.serverTiming);if(r==null&&ppe(m,vpe)||r){const w=Object.assign(Object.assign({},i$(m)),{faroNavigationId:e,faroResourceId:T1()});t("faro.performance.resource",w,void 0,{spanContext:g,timestampOverwriteMs:performance.timeOrigin+m.startTime})}}}).observe({type:upe,buffered:!0})}var xpe=function(e,t,n,r){function i(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function a(w){try{g(r.next(w))}catch(C){u(C)}}function m(w){try{g(r.throw(w))}catch(C){u(C)}}function g(w){w.done?l(w.value):i(w.value).then(a,m)}g((r=r.apply(e,t||[])).next())})};class s$ extends Ip{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-performance",this.version=xd}initialize(){if(!hpe()){this.logDebug("performance observer not supported. Disable performance instrumentation.");return}fpe(()=>xpe(this,void 0,void 0,function*(){const t=this.api.pushEvent,n=this.getIgnoreUrls(),{faroNavigationId:r}=yield ype(t,n);r!=null&&_pe(r,t,n)}))}getIgnoreUrls(){var t;return(t=this.transports.transports)===null||t===void 0?void 0:t.flatMap(n=>n.getIgnoreUrls())}}function bpe(e={}){const t=[new kfe,new t$,new PU,new MU];return e.enablePerformanceInstrumentation!==!1&&t.unshift(new s$),e.captureConsole!==!1&&t.push(new wh({disabledLevels:e.captureConsoleDisabledLevels})),t}const wpe="browser",Spe=()=>{const e=window.k6;return{k6:Object.assign({isK6Browser:!0},(e==null?void 0:e.testRunId)&&{testRunId:e==null?void 0:e.testRunId})}};let sN,bC;function Epe({generatePageId:e,initialPageMeta:t}={}){return()=>{const r=location.href;return uI(e)&&sN!==r&&(sN=r,bC=e(location)),{page:Object.assign(Object.assign({url:r},bC?{id:bC}:{}),t)}}}var oN=function(e,t,n,r){function i(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function a(w){try{g(r.next(w))}catch(C){u(C)}}function m(w){try{g(r.throw(w))}catch(C){u(C)}}function g(w){w.done?l(w.value):i(w.value).then(a,m)}g((r=r.apply(e,t||[])).next())})},Cpe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Tpe=30,kpe=5,Ppe=5e3,Ape=6e4,Ipe=429,Rpe=202;class Lpe extends khe{constructor(t){var n,r,i,l;super(),this.options=t,this.name="@grafana/faro-web-sdk:transport-fetch",this.version=xd,this.disabledUntil=new Date,this.rateLimitBackoffMs=(n=t.defaultRateLimitBackoffMs)!==null&&n!==void 0?n:Ppe,this.getNow=(r=t.getNow)!==null&&r!==void 0?r:()=>Date.now(),this.promiseBuffer=phe({size:(i=t.bufferSize)!==null&&i!==void 0?i:Tpe,concurrency:(l=t.concurrency)!==null&&l!==void 0?l:kpe})}send(t){return oN(this,void 0,void 0,function*(){try{if(this.disabledUntil>new Date(this.getNow()))return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`),Promise.resolve();yield this.promiseBuffer.add(()=>{const n=JSON.stringify(Ihe(t)),{url:r,requestOptions:i,apiKey:l}=this.options,u=i??{},{headers:a}=u,m=Cpe(u,["headers"]);let g;const w=this.metas.value.session;return w!=null&&(g=w.id),fetch(r,Object.assign({method:"POST",headers:Object.assign(Object.assign(Object.assign({"Content-Type":"application/json"},a??{}),l?{"x-api-key":l}:{}),g?{"x-faro-session-id":g}:{}),body:n,keepalive:n.length<=Ape},m??{})).then(C=>oN(this,void 0,void 0,function*(){return C.status===Rpe&&C.headers.get("X-Faro-Session-Status")==="invalid"&&this.extendFaroSession(this.config,this.logDebug),C.status===Ipe&&(this.disabledUntil=this.getRetryAfterDate(C),this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)),C.text().catch(Wu),C})).catch(C=>{this.logError(`Failed sending payload to the receiver
`,JSON.parse(n),C)})})}catch(n){this.logError(n)}})}getIgnoreUrls(){var t;return[this.options.url].concat((t=this.config.ignoreUrls)!==null&&t!==void 0?t:[])}isBatched(){return!0}getRetryAfterDate(t){const n=this.getNow(),r=t.headers.get("Retry-After");if(r){const i=Number(r);if(!isNaN(i))return new Date(i*1e3+n);const l=Date.parse(r);if(!isNaN(l))return new Date(l)}return new Date(n+this.rateLimitBackoffMs)}extendFaroSession(t,n){const r="Session expired",i=t.sessionTracking;if(i!=null&&i.enabled){const{fetchUserSession:l,storeUserSession:u}=kU(i);yI({fetchUserSession:l,storeUserSession:u})({forceSessionExtend:!0}),n(`${r} created new session.`)}else n(`${r}.`)}}function Mpe(e){var t;const n=[],r=fU(e.unpatchedConsole,e.internalLoggerLevel);e.transports?((e.url||e.apiKey)&&r.error('if "transports" is defined, "url" and "apiKey" should not be defined'),n.push(...e.transports)):e.url?n.push(new Lpe({url:e.url,apiKey:e.apiKey})):r.error('either "url" or "transports" must be defined');const{app:i,batching:l,beforeSend:u,consoleInstrumentation:a,ignoreErrors:m,sessionTracking:g,trackResources:w,trackWebVitalsAttribution:C,user:P,view:I,dedupe:N=!0,eventDomain:z=wpe,globalObjectKey:$=Whe,instrumentations:H=bpe(),internalLoggerLevel:V=hU,isolate:q=!1,logArgsSerializer:te=L0,metas:ue=Ope(e),paused:fe=!1,preventGlobalExposure:Z=!1,unpatchedConsole:le=P1}=e;return{app:i,batching:Object.assign(Object.assign({},Xhe),l),dedupe:N,globalObjectKey:$,instrumentations:H,internalLoggerLevel:V,isolate:q,logArgsSerializer:te,metas:ue,parseStacktrace:Efe,paused:fe,preventGlobalExposure:Z,transports:n,unpatchedConsole:le,beforeSend:u,eventDomain:z,ignoreErrors:m,ignoreUrls:((t=e.ignoreUrls)!==null&&t!==void 0?t:[]).concat([/\/collect(?:\/[\w]*)?$/]),sessionTracking:Object.assign(Object.assign({},ife),g),user:P,view:I,trackResources:w,trackWebVitalsAttribution:C,consoleInstrumentation:a}}function Ope(e){var t,n;const{page:r,generatePageId:i}=(t=e==null?void 0:e.pageTracking)!==null&&t!==void 0?t:{},l=[efe,Epe({generatePageId:i,initialPageMeta:r}),...(n=e.metas)!==null&&n!==void 0?n:[]];return cu(window.k6)?[...l,Spe]:l}function Dpe(e){const t=Mpe(e);if(t)return Ghe(t)}let Fy,N1;function Npe(e,t){Fy=e,N1=t}const jpe=M.version;zpe();function zpe(){const e=jpe.split(".");try{return e[0]?parseInt(e[0],10):null}catch{return null}}var qf;(function(e){e.V4="v4",e.V5="v5",e.V6="v6",e.V6_data_router="v6_data_router"})(qf||(qf={}));var Yh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yh||(Yh={}));let xg;function aN(e){return xg={route:"",url:e},xg}function Fpe(e){xg&&(xg.route=e)}function Bpe(){N1.pushEvent(fI,xg,void 0,{skipDedupe:!0}),xg=void 0}let o$;function Upe(e){e.history,o$=e.Route}function lN(e){var t;return!((t=e==null?void 0:e.computedMatch)===null||t===void 0)&&t.isExact&&Fpe(e.computedMatch.path),y.jsx(o$,Object.assign({},e))}function $pe(e){var t,n,r,i;const l=e.Route,u=(t=l.displayName)!==null&&t!==void 0?t:l.name;lN.displayName=`faroRoute(${u})`,jz(lN,l),Upe(e),aN((n=Ya.location)===null||n===void 0?void 0:n.href),(i=(r=e.history).listen)===null||i===void 0||i.call(r,(a,m)=>{var g;(m===Yh.Push||m===Yh.Pop)&&(Bpe(),aN((g=Ya.location)===null||g===void 0?void 0:g.href))})}let j1=!1,xb,CI,a$,bb,wb;function Vpe(e){j1=!0,xb=e.createRoutesFromChildren,CI=e.matchRoutes,a$=e.Routes,bb=e.useLocation,wb=e.useNavigationType}function Hpe(e){j1=!0,CI=e.matchRoutes}function cN(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function l$(e,t){if(!e||e.length===0)return t.pathname;const n=CI(e,t);let r="";if(n)for(let i=0;i<n.length;i++){const l=n[i],u=l.route;if(u){if(u.index)return l.pathname;let a=u.path;if(a&&(a=a.startsWith("/")?a:`/${a}`,r+=a,l.pathname===t.pathname))return cN(r)!==cN(l.pathname)?a:r}}return t.pathname}function Zpe(e){var t;const n=bb==null?void 0:bb(),r=wb==null?void 0:wb(),i=M.useMemo(()=>{var a;return(a=xb==null?void 0:xb(e.children))!==null&&a!==void 0?a:[]},[e.children]),l=M.useRef({});M.useEffect(()=>{var a,m;if(j1&&(r===Yh.Push||r===Yh.Pop)){const g=l$(i,n),w=(a=Ya.location)===null||a===void 0?void 0:a.href;N1.pushEvent(fI,Object.assign({toRoute:g,toUrl:(m=Ya.location)===null||m===void 0?void 0:m.href},l.current)),l.current={fromRoute:g,fromUrl:w}}},[n,r,i]);const u=(t=e.routesComponent)!==null&&t!==void 0?t:a$;return y.jsx(u,Object.assign({},e))}function qpe(e){jz(Zpe,e.Routes),Vpe(e)}function Gpe(e){Hpe(e)}function Wpe(e){return{version:qf.V6_data_router,dependencies:e}}function Xpe(e){let t={};return e.subscribe(n=>{var r,i;const l=n.historyAction,u=n.location,a=e.routes;if(j1&&(l===Yh.Push||l===Yh.Pop)){const m=l$(a,u),g=(r=Ya.location)===null||r===void 0?void 0:r.href;N1.pushEvent(fI,Object.assign({toRoute:m,toUrl:(i=Ya.location)===null||i===void 0?void 0:i.href},t)),t={fromRoute:m,fromUrl:g}}}),e}function Kpe(e){var t;const n="Initializing React Router";switch((t=e.router)===null||t===void 0?void 0:t.version){case qf.V6:Fy.debug(`${n} V6 instrumentation`),qpe(e.router.dependencies);break;case qf.V6_data_router:Fy.debug(`${n} V6 data router instrumentation`),Gpe(e.router.dependencies);break;case qf.V5:case qf.V4:Fy.debug(`${n} ${e.router.version} instrumentation`),$pe(e.router.dependencies);break;default:Fy.debug("Skipping initialization of React Router instrumentation")}}class Ype extends Ip{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-react",this.version=xd}initialize(){Npe(this.internalLogger,this.api),Kpe(this.options)}}class Qpe{constructor(){this.rumActivation=gc("VITE_REACT_APP_RUM_ACTIVATION")==="true",this.viteMode=gc("MODE"),this.serviceName="ibe.convergence",this.bots="(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)"}get try(){return new Proxy(this,{get(t,n){return typeof t[n]=="function"?function(...r){try{return t[n](...r)}catch(i){console.error(i==null?void 0:i.message)}}:t[n]}})}initialize(){this.rumActivation&&Dpe({url:`https://faro-collector-prod-eu-west-2.grafana.net/collect/${gc("VITE_REACT_APP_GRAFANA_CLOUD_API_KEY")}`,app:{name:this.serviceName,version:this.viteMode!=="development"?"25.2.0":"loc",environment:this.viteMode!=="development"?"prd.main":"loc"},instrumentations:[new t$,new s$,new PU,new MU,new Ype({router:Wpe({matchRoutes:hh})})],sessionTracking:{enabled:!0,persistent:!0,samplingRate:this.getSamplingFactor()},beforeSend:t=>this.customizeEvent(t),internalLoggerLevel:this.viteMode=="development"?Hu.VERBOSE:void 0})}instrumentNavigation(t){return Xpe(t)}getSamplingFactor(){return new RegExp(this.bots,"i").test(navigator.userAgent)?0:.1}customizeEvent(t){var n;return[Es.EVENT,Es.MEASUREMENT].includes(t.type)?{...t,meta:{...t.meta,page:{...t.meta.page,id:(n=t.meta.page)!=null&&n.url?this.getPageId(t.meta.page.url):void 0}}}:t}getPageId(t){const r=Object.values(Jn).find(i=>t.includes(i.path));return(r==null?void 0:r.name)??"RootPage"}}const c$=new Qpe,Jpe=()=>{const e=window.location.search;return new URLSearchParams(e).get("ref")},eme=async({params:e,request:t})=>{const{isMultiHotel:n}=Fr.getState().configuration,{selectedHotel:r,startBookingStep:i}=Fr.getState().session,l=n&&!r,u=t3(e),a=j4({},u.culture,u.hotelId),{search:m}=new URL(t.url);return l?Yf(`${a}${Jn.hotelSelection.path}${m}`):i===Bh.RoomSelection?Yf(`${a}${Jn.roomSelection.path}${m}`):Yf(`${a}${Jn.dateSelection.path}${m}`)};function tme({basename:e}){const t=()=>{const m="/:hotelId?"+"/:culture?";return[{errorElement:y.jsx(TT,{}),children:[{path:`${m}/`,loader:eme},{element:y.jsx(rae,{}),children:[{path:`${m}${Jn.hotelSelection.path}`,element:y.jsx(Ale,{}),loader:Ple},{path:`${m}${Jn.dateSelection.path}`,element:y.jsx(mae,{}),loader:pae},{path:`${m}${Jn.roomSelection.path}`,element:y.jsx(oce,{}),loader:sce},{path:`${m}${Jn.extraSelection.path}`,element:y.jsx($de,{}),loader:Ude},{path:`${m}${Jn.summary.path}`,element:y.jsx(Rde,{}),loader:Ide},{path:`${m}${Jn.confirmation.path}`,element:y.jsx(rhe,{}),loader:nhe,errorElement:y.jsx(TT,{})}]}]}]},n=u=>{if(u&&Jpe()!==null){const a=`${Jn.confirmation.path}${window.location.search}`;r.navigate(a)}};let r=IJ(t(),{basename:e});const i=Yc.getInstance().isInsite();i&&(r=vJ([...t()]));const l=c$.try.instrumentNavigation(r);return n(i),y.jsx(FJ,{router:i?r:l,fallbackElement:y.jsx(Qz,{})})}var u$={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n={};function r(){return r=Object.assign?Object.assign.bind():function(g){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(g[P]=C[P])}return g},r.apply(this,arguments)}function i(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function l(g,w){g.prototype=Object.create(w.prototype),g.prototype.constructor=g,u(g,w)}function u(g,w){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,I){return P.__proto__=I,P},u(g,w)}n=function(){function g(){var C=typeof window<"u"&&window.React;if(this.name="react",this.lazy=arguments.length===0&&!C,!this.lazy&&(this.React=(arguments.length<=0?void 0:arguments[0])||C,!this.React))throw new Error("@bugsnag/plugin-react reference to `React` was undefined")}var w=g.prototype;return w.load=function(P){if(!this.lazy){var I=m(this.React,P);return I.createErrorBoundary=function(){return I},I}var N=function(){throw new Error(`@bugsnag/plugin-react was used incorrectly. Valid usage is as follows:
Pass React to the plugin constructor

  \`Bugsnag.start({ plugins: [new BugsnagPluginReact(React)] })\`
and then call \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary()\`

Or if React is not available until after Bugsnag has started,
construct the plugin with no arguments
  \`Bugsnag.start({ plugins: [new BugsnagPluginReact()] })\`,
then pass in React when available to construct your error boundary
  \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary(React)\``)};return N.createErrorBoundary=function(z){if(!z)throw new Error("@bugsnag/plugin-react reference to `React` was undefined");return m(z,P)},N},g}();var a=function(g){for(var w=g.split(/\n/g),C="",P=0,I=w.length;P<I;P++)w[P].length&&(C+=(C.length?`
`:"")+w[P].trim());return C},m=function(g,w){return function(C){l(P,C);function P(N){var z;return z=C.call(this,N)||this,z.state={error:null,info:null},z.handleClearError=z.handleClearError.bind(i(z)),z}var I=P.prototype;return I.handleClearError=function(){this.setState({error:null,info:null})},I.componentDidCatch=function(z,$){var H=this.props.onError,V={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},q=w.Event.create(z,!0,V,1);$&&$.componentStack&&($.componentStack=a($.componentStack)),q.addMetadata("react",$),w._notify(q,H),this.setState({error:z,info:$})},I.render=function(){var z=this.state.error;if(z){var $=this.props.FallbackComponent;return $?g.createElement($,r({},this.state,{clearError:this.handleClearError})):null}return this.props.children},P}(g.Component)};return n.formatComponentStack=a,n.default=n,n})})(u$);var nme=u$.exports;const rme=uu(nme);function ime(){const e=gc("MODE");if(e==="test")return!1;if(Av.isStarted())return!0;const t=e!=="development"?"[REACT_APP_BUGSNAG_RELEASE_STAGE]":"development";return Av.start({apiKey:gc("VITE_REACT_APP_CONVERGENCE_BUGSNAG_API_KEY"),releaseStage:t,appVersion:"25.2.0",metadata:{server:{machineName:"GUI-02"}},onError:n=>{var r;return!((r=n.errors)!=null&&r.some(i=>i==null?void 0:i.stacktrace.some(l=>{var u;return(u=l.file)==null?void 0:u.includes("http://www.googletagmanager.com/gtm.js")})))},plugins:[new rme(F0)],...t.toLowerCase()!=="development"&&{logger:null}}),!0}const sme=(e=!0)=>{var n;if(e&&ime()){const r=(n=Av.getPlugin("react"))==null?void 0:n.createErrorBoundary(F0);if(r)return r}return({children:r})=>y.jsx(y.Fragment,{children:r})},ome=new v_(document.location).toRoutingBaseName(),ame=document.location.pathname.includes(`/${gc("VITE_REACT_APP_CONVERGENCE_HOSTING_PREFIX")}/`),lme=sme(gc("MODE")!=="test"&&ame),cme=()=>{const[e,t]=M.useState(!0),[n,r]=M.useState(!1);return M.useEffect(()=>{(async()=>{try{await m3(),t(!1),o9(Fr)}catch{r(!0),t(!1)}})()},[]),e?y.jsx(Qz,{}):n?y.jsx(TT,{}):y.jsx(lme,{children:y.jsx(bee,{children:y.jsx(jZ,{children:y.jsx(tme,{basename:ome})})})})},ume=document.getElementById("app"),uN=new v_(document.location);uN.needsCleaningAtStart()&&(document.location.href=uN.toCleanedApplicationStartUrl());Yc.getInstance().isInsite()||c$.try.initialize();const dme=Cz(ume);dme.render(y.jsx(CZ,{store:Fr,children:y.jsx(cme,{})}));

